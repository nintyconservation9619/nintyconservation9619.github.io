<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>NintendoSDK API Reference: GfxPrimitiveRenderer.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 構築: Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>総合概要</span></a></li>
      <li><a href="pages.html"><span>諸情報</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>名前空間</span></a></li>
      <li><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">GfxPrimitiveRenderer.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>ソースコードの説明は、<a class="el" href="_page_sample_gfx_primitive_renderer.html">プリミティブの描画</a> および <a class="el" href="_gfx_primitive_renderer_8cpp.html" title="プリミティブ描画のサンプルプログラム ">GfxPrimitiveRenderer.cpp</a> を参照してください。</p>
<div class="fragment"><div class="line"><span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><span class="comment">  Copyright (C)Nintendo All rights reserved.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___assert_8h.html">nn/nn_Assert.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="fs_8h.html">nn/fs.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="init_8h.html">nn/init.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="gfx_8h.html">nn/gfx.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="vi_8h.html">nn/vi.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nn/gfx/util/gfx_DebugFontTextWriter.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___log_8h.html">nn/nn_Log.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="util___color_8h.html">nn/util/util_Color.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;nn/hws/hws_Message.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if NN_GFX_IS_TARGET_NVN</span></div>
<div class="line"><span class="preprocessor">    #include &lt;<a class="code" href="nvn_8h.html">nvn/nvn.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">    #include &lt;<a class="code" href="nvn___func_ptr_inline_8h.html">nvn/nvn_FuncPtrInline.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">    #if defined( NN_BUILD_TARGET_PLATFORM_OS_NN )</span></div>
<div class="line"><span class="preprocessor">        #include &lt;<a class="code" href="nvn_tool___glslc_interface_8h.html">nvnTool/nvnTool_GlslcInterface.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if defined( NN_BUILD_TARGET_PLATFORM_OS_NN ) &amp;&amp; defined( NN_BUILD_APISET_NX )</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nv___memory_management_8h.html">nv/nv_MemoryManagement.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define NN_PERF_PROFILE_ENABLED</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="perf_8h.html">nn/perf.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;nns/gfx/gfx_PrimitiveRenderer.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nns/gfx/gfx_PrimitiveRendererMeterDrawer.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nns/gfx/gfx_PrimitiveRendererMeshRes.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___time_span_8h.html">nn/nn_TimeSpan.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nn/os.h&gt;</span></div>
<div class="line"><span class="keyword">namespace </span>{</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> g_BufferDescriptorBaseIndex = 0;</div>
<div class="line"><span class="keywordtype">int</span> g_TextureDescriptorBaseIndex = 0;</div>
<div class="line"><span class="keywordtype">int</span> g_SamplerDescriptorBaseIndex = 0;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> g_RenderWidth = 0;</div>
<div class="line"><span class="keywordtype">int</span> g_RenderHeight = 0;</div>
<div class="line"></div>
<div class="line">nns::gfx::PrimitiveRenderer::MeterDrawer g_MeterDrawer;</div>
<div class="line"></div>
<div class="line"><span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// メモリ</span></div>
<div class="line"><a name="_a0"></a><a class="code" href="classnn_1_1util_1_1_byte_ptr.html">nn::util::BytePtr</a> g_pMemoryHeap( NULL );</div>
<div class="line"><a class="code" href="classnn_1_1util_1_1_byte_ptr.html">nn::util::BytePtr</a> g_pMemory( NULL );</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> g_VisiblePoolMemorySize = 16 * 1024 * 1024;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> g_InvisiblePoolMemorySize = 64 * 1024 * 1024;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>* g_pVisiblePoolMemory = NULL;</div>
<div class="line"><span class="keywordtype">void</span>* g_pInvisiblePoolMemory = NULL;</div>
<div class="line"><span class="keywordtype">void</span>* g_pMemoryPoolStart = NULL;</div>
<div class="line">ptrdiff_t g_MemoryPoolOffset = 0;</div>
<div class="line"><span class="keywordtype">void</span>* g_pInvisibleMemoryPoolStart = NULL;</div>
<div class="line">ptrdiff_t g_InvisibleMemoryPoolOffset = 0;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>* g_MountRomCacheBuffer = NULL;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>* ReadResource( <span class="keyword">const</span> <span class="keywordtype">char</span>* filename )</div>
<div class="line">{</div>
<div class="line">    <a name="_a1"></a><a class="code" href="classnn_1_1_result.html">nn::Result</a> result;</div>
<div class="line">    <a name="_a2"></a><a class="code" href="structnn_1_1fs_1_1_file_handle.html">nn::fs::FileHandle</a> hFile;</div>
<div class="line"></div>
<div class="line">    int64_t fileSize = 0;</div>
<div class="line">    result = <a name="a3"></a><a class="code" href="namespacenn_1_1fs.html#a0f2b5b30657b1ffaf1dec49bfb36462b">nn::fs::OpenFile</a>( &amp;hFile, filename, <a name="a4"></a><a class="code" href="namespacenn_1_1fs.html#a4c97b79cce78a95c2333dbc9053b9393afde4472d2b455879cad02aade386ac0d">nn::fs::OpenMode_Read</a> );</div>
<div class="line">    <a name="a5"></a><a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>( result.<a name="a6"></a><a class="code" href="classnn_1_1_result.html#a80792d8ec8b6b9e9b34025100baa67ec">IsSuccess</a>() );</div>
<div class="line"></div>
<div class="line">    result = <a name="a7"></a><a class="code" href="namespacenn_1_1fs.html#aba29e01d386e809349d60eccdb15ff21">nn::fs::GetFileSize</a>( &amp;fileSize, hFile );</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>( result.IsSuccess() );</div>
<div class="line"></div>
<div class="line">    <a name="_a8"></a><a class="code" href="structnn_1_1util_1_1_binary_file_header.html">nn::util::BinaryFileHeader</a> fileHeader;</div>
<div class="line">    <span class="keywordtype">size_t</span> readSize;</div>
<div class="line">    result = <a name="a9"></a><a class="code" href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">nn::fs::ReadFile</a>( &amp;readSize, hFile, 0, &amp;fileHeader, <span class="keyword">sizeof</span>( <a class="code" href="structnn_1_1util_1_1_binary_file_header.html">nn::util::BinaryFileHeader</a> ) );</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>( result.IsSuccess() );</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>( readSize == <span class="keyword">sizeof</span>( <a class="code" href="structnn_1_1util_1_1_binary_file_header.html">nn::util::BinaryFileHeader</a> ) );</div>
<div class="line">    <span class="keywordtype">size_t</span> alignment = fileHeader.GetAlignment();</div>
<div class="line"></div>
<div class="line">    g_pMemory.<a name="a10"></a><a class="code" href="classnn_1_1util_1_1_byte_ptr.html#aedba2c0b5997b8ca4a5536a7110aa712">AlignUp</a>( alignment );</div>
<div class="line">    <span class="keywordtype">void</span>* pBuffer = g_pMemory.<a name="a11"></a><a class="code" href="classnn_1_1util_1_1_byte_ptr.html#aec6b5a8431e11fcebf681e8ce602c2fb">Get</a>();</div>
<div class="line">    result = <a class="code" href="namespacenn_1_1fs.html#a81801a404563984f8c6cc1483cc6d730">nn::fs::ReadFile</a>( &amp;readSize, hFile, 0, pBuffer, static_cast&lt; size_t &gt;( fileSize ) );</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>( result.IsSuccess() );</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>( readSize == static_cast&lt; size_t &gt;( fileSize ) );</div>
<div class="line">    g_pMemory.<a name="a12"></a><a class="code" href="classnn_1_1util_1_1_byte_ptr.html#af44783b143e4350c3aaef5d576007f96">Advance</a>( static_cast&lt; ptrdiff_t &gt;( fileSize ) );</div>
<div class="line"></div>
<div class="line">    <a name="a13"></a><a class="code" href="namespacenn_1_1fs.html#ac8bd9e828751bd4f953acfa765278f84">nn::fs::CloseFile</a>( hFile );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> pBuffer;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">//  nn::vi オブジェクト</span></div>
<div class="line"><a name="_a14"></a><a class="code" href="classnn_1_1vi_1_1_display.html">nn::vi::Display</a>*                g_pDisplay;</div>
<div class="line"><a name="_a15"></a><a class="code" href="classnn_1_1vi_1_1_layer.html">nn::vi::Layer</a>*                  g_pLayer;</div>
<div class="line"></div>
<div class="line"><span class="comment">// デバイスを初期化</span></div>
<div class="line"><a name="_a16"></a><a class="code" href="classnn_1_1gfx_1_1_t_device.html">nn::gfx::Device</a> g_Device;</div>
<div class="line"><span class="keywordtype">void</span> InitializeDevice()</div>
<div class="line">{</div>
<div class="line">    <a name="_a17"></a><a class="code" href="classnn_1_1gfx_1_1_device_info.html">nn::gfx::Device::InfoType</a> info;</div>
<div class="line">    info.<a name="a18"></a><a class="code" href="classnn_1_1gfx_1_1_device_info.html#a2cb416e4373b83e5581daf818c4b2809">SetDefault</a>();</div>
<div class="line">    info.<a name="a19"></a><a class="code" href="classnn_1_1gfx_1_1_device_info.html#a5b400f8e8ec5b457db033faab20714af">SetApiVersion</a>( <a name="a20"></a><a class="code" href="namespacenn_1_1gfx.html#aadcb725d8dd0dd4ee3987d07fb990cfd">nn::gfx::ApiMajorVersion</a>, <a name="a21"></a><a class="code" href="namespacenn_1_1gfx.html#a810943869115c31d39dcc3598bddb92a">nn::gfx::ApiMinorVersion</a> );</div>
<div class="line">    g_Device.<a name="a22"></a><a class="code" href="classnn_1_1gfx_1_1_t_device.html#a78cd197d82ff797eeb658446e9cfe387">Initialize</a>( info );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//  レイヤの初期処理</span></div>
<div class="line"><span class="keywordtype">void</span> InitializeLayer()</div>
<div class="line">{</div>
<div class="line">    <a name="a23"></a><a class="code" href="namespacenn_1_1vi.html#acecc11f3b92d6d1e0c6b5d056d4b05fd">nn::vi::Initialize</a>();</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classnn_1_1_result.html">nn::Result</a> result = <a name="a24"></a><a class="code" href="namespacenn_1_1vi.html#ae9cd501562a820272816af783bd798dc">nn::vi::OpenDefaultDisplay</a>(&amp;g_pDisplay);</div>
<div class="line">    <a name="a25"></a><a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(result);</div>
<div class="line">    <a name="a26"></a><a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(result);</div>
<div class="line"></div>
<div class="line">    g_RenderWidth  = 1280;</div>
<div class="line">    g_RenderHeight = 720;</div>
<div class="line"></div>
<div class="line">    result = <a name="a27"></a><a class="code" href="namespacenn_1_1vi.html#a86b2688dc743e37f3acaca99ccdf8c12">nn::vi::CreateLayer</a>(&amp;g_pLayer, g_pDisplay);</div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(result);</div>
<div class="line"></div>
<div class="line">    result = <a name="a28"></a><a class="code" href="namespacenn_1_1vi.html#a2b21403527d5c914a19e58b697c7fcb3">nn::vi::SetLayerScalingMode</a>(g_pLayer, <a name="a29"></a><a class="code" href="namespacenn_1_1vi.html#ab220832b6e24cc6c01d8c7de55ab49a8a183897c0b0608120e5ebad8d7b08cc93">nn::vi::ScalingMode_FitToLayer</a>);</div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(result);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//  レイヤ終了処理</span></div>
<div class="line"><span class="keywordtype">void</span> FinalizeLayer()</div>
<div class="line">{</div>
<div class="line">    <a name="a30"></a><a class="code" href="namespacenn_1_1vi.html#a76acdc780c2ad611533182993df1cebe">nn::vi::DestroyLayer</a>(g_pLayer);</div>
<div class="line">    <a name="a31"></a><a class="code" href="namespacenn_1_1vi.html#a68ddf473ecdaf1c52996a2f7fad2ef61">nn::vi::CloseDisplay</a>(g_pDisplay);</div>
<div class="line">    <a name="a32"></a><a class="code" href="namespacenn_1_1vi.html#a7451676fd7f7b48369ff4c01a1fa91dd">nn::vi::Finalize</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a name="_a33"></a><a class="code" href="classnn_1_1gfx_1_1_t_memory_pool.html">nn::gfx::MemoryPool</a> g_MemoryPool;</div>
<div class="line"><span class="keywordtype">void</span> InitializeMemoryPool()</div>
<div class="line">{</div>
<div class="line">    <a name="_a34"></a><a class="code" href="classnn_1_1gfx_1_1_memory_pool_info.html">nn::gfx::MemoryPool::InfoType</a> info;</div>
<div class="line">    info.<a name="a35"></a><a class="code" href="classnn_1_1gfx_1_1_memory_pool_info.html#a44095ba4528dc6b167cf13b530bc332f">SetDefault</a>();</div>
<div class="line">    info.<a name="a36"></a><a class="code" href="classnn_1_1gfx_1_1_memory_pool_info.html#a49eb9305aa9e2e39b25e775c5c0bfeff">SetMemoryPoolProperty</a>( <a name="a37"></a><a class="code" href="namespacenn_1_1gfx.html#a9bad749884304c5882d4c54e57818623a52c9ef53497763d967da50e415056a2e">nn::gfx::MemoryPoolProperty_CpuUncached</a></div>
<div class="line">        | <a name="a38"></a><a class="code" href="namespacenn_1_1gfx.html#a9bad749884304c5882d4c54e57818623a98262dd58342754947cd689a64939f13">nn::gfx::MemoryPoolProperty_GpuCached</a> );</div>
<div class="line"></div>
<div class="line">    g_VisiblePoolMemorySize = <a name="a39"></a><a class="code" href="namespacenn_1_1util.html#a20f6772d3ae70168e07e0f39d416d72e">nn::util::align_up</a>( g_VisiblePoolMemorySize,</div>
<div class="line">                                                  <a name="a40"></a><a class="code" href="classnn_1_1gfx_1_1_t_memory_pool.html#aee1bf8475049973f8637ed19653833a1">nn::gfx::MemoryPool::GetPoolMemorySizeGranularity</a>( &amp;g_Device, info ) );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Determine alignment to allocate space on an alignment boundary</span></div>
<div class="line">    <span class="keywordtype">size_t</span> alignment = <a name="a41"></a><a class="code" href="classnn_1_1gfx_1_1_t_memory_pool.html#a24ea067d3fd3c752dcb7332ad2ce3b56">nn::gfx::MemoryPool::GetPoolMemoryAlignment</a>( &amp;g_Device, info );</div>
<div class="line">    g_pVisiblePoolMemory = malloc( g_VisiblePoolMemorySize + alignment );</div>
<div class="line"></div>
<div class="line">    g_pMemoryPoolStart = <a class="code" href="classnn_1_1util_1_1_byte_ptr.html">nn::util::BytePtr</a>( g_pVisiblePoolMemory ).<a class="code" href="classnn_1_1util_1_1_byte_ptr.html#aedba2c0b5997b8ca4a5536a7110aa712">AlignUp</a>( alignment ).<a class="code" href="classnn_1_1util_1_1_byte_ptr.html#aec6b5a8431e11fcebf681e8ce602c2fb">Get</a>();</div>
<div class="line">    info.<a name="a42"></a><a class="code" href="classnn_1_1gfx_1_1_memory_pool_info.html#aba32b6de36f3db1702087a8c06d5097d">SetPoolMemory</a>( g_pMemoryPoolStart, <a name="a43"></a><a class="code" href="namespacenn_1_1util.html#a8a8aac07f25fdd659091e1065b8c89a5">nn::util::align_down</a>( g_VisiblePoolMemorySize,</div>
<div class="line">        <a class="code" href="classnn_1_1gfx_1_1_t_memory_pool.html#aee1bf8475049973f8637ed19653833a1">nn::gfx::MemoryPool::GetPoolMemorySizeGranularity</a>( &amp;g_Device, info ) ) );</div>
<div class="line">    g_MemoryPool.<a name="a44"></a><a class="code" href="classnn_1_1gfx_1_1_t_memory_pool.html#a59045ae9d58968a0b6448d66f0b4781f">Initialize</a>( &amp;g_Device, info );</div>
<div class="line"></div>
<div class="line">    g_MemoryPoolOffset = 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="classnn_1_1gfx_1_1_t_memory_pool.html">nn::gfx::MemoryPool</a> g_InvisibleMemoryPool;</div>
<div class="line"><span class="keywordtype">void</span> InitializeInvisibleMemoryPool()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="classnn_1_1gfx_1_1_memory_pool_info.html">nn::gfx::MemoryPool::InfoType</a> info;</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_memory_pool_info.html#a44095ba4528dc6b167cf13b530bc332f">SetDefault</a>();</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_memory_pool_info.html#a49eb9305aa9e2e39b25e775c5c0bfeff">SetMemoryPoolProperty</a>( <a name="a45"></a><a class="code" href="namespacenn_1_1gfx.html#a9bad749884304c5882d4c54e57818623ab3cc70e30a942511e9a19ff7a222ce80">nn::gfx::MemoryPoolProperty_CpuInvisible</a> |</div>
<div class="line">                                <a class="code" href="namespacenn_1_1gfx.html#a9bad749884304c5882d4c54e57818623a98262dd58342754947cd689a64939f13">nn::gfx::MemoryPoolProperty_GpuCached</a> |</div>
<div class="line">                                <a name="a46"></a><a class="code" href="namespacenn_1_1gfx.html#a9bad749884304c5882d4c54e57818623aa4997d0d2f3098f3ad4ebae926432472">nn::gfx::MemoryPoolProperty_Compressible</a> );</div>
<div class="line"></div>
<div class="line">    g_InvisiblePoolMemorySize = <a class="code" href="namespacenn_1_1util.html#a20f6772d3ae70168e07e0f39d416d72e">nn::util::align_up</a>( g_InvisiblePoolMemorySize,</div>
<div class="line">                                                    <a class="code" href="classnn_1_1gfx_1_1_t_memory_pool.html#aee1bf8475049973f8637ed19653833a1">nn::gfx::MemoryPool::GetPoolMemorySizeGranularity</a>( &amp;g_Device, info ) );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Determine alignment to allocate space on an alignment boundary</span></div>
<div class="line">    <span class="keywordtype">size_t</span> alignment = <a class="code" href="classnn_1_1gfx_1_1_t_memory_pool.html#a24ea067d3fd3c752dcb7332ad2ce3b56">nn::gfx::MemoryPool::GetPoolMemoryAlignment</a>( &amp;g_Device, info );</div>
<div class="line">    g_pInvisiblePoolMemory = malloc( g_InvisiblePoolMemorySize + alignment );</div>
<div class="line"></div>
<div class="line">    g_pInvisibleMemoryPoolStart = <a class="code" href="classnn_1_1util_1_1_byte_ptr.html">nn::util::BytePtr</a>( g_pInvisiblePoolMemory ).<a class="code" href="classnn_1_1util_1_1_byte_ptr.html#aedba2c0b5997b8ca4a5536a7110aa712">AlignUp</a>( alignment ).<a class="code" href="classnn_1_1util_1_1_byte_ptr.html#aec6b5a8431e11fcebf681e8ce602c2fb">Get</a>();</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_memory_pool_info.html#aba32b6de36f3db1702087a8c06d5097d">SetPoolMemory</a>( g_pInvisibleMemoryPoolStart, <a class="code" href="namespacenn_1_1util.html#a8a8aac07f25fdd659091e1065b8c89a5">nn::util::align_down</a>( g_InvisiblePoolMemorySize,</div>
<div class="line">        <a class="code" href="classnn_1_1gfx_1_1_t_memory_pool.html#aee1bf8475049973f8637ed19653833a1">nn::gfx::MemoryPool::GetPoolMemorySizeGranularity</a>( &amp;g_Device, info ) ) );</div>
<div class="line">    g_InvisibleMemoryPool.<a class="code" href="classnn_1_1gfx_1_1_t_memory_pool.html#a59045ae9d58968a0b6448d66f0b4781f">Initialize</a>( &amp;g_Device, info );</div>
<div class="line"></div>
<div class="line">    g_InvisibleMemoryPoolOffset = 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">// スワップチェーンを初期化</span></div>
<div class="line"><a name="_a47"></a><a class="code" href="classnn_1_1gfx_1_1_t_swap_chain.html">nn::gfx::SwapChain</a> g_SwapChain;</div>
<div class="line"><span class="keywordtype">void</span> InitializeSwapChain()</div>
<div class="line">{</div>
<div class="line">    <a name="_a48"></a><a class="code" href="classnn_1_1gfx_1_1_swap_chain_info.html">nn::gfx::SwapChain::InfoType</a> info;</div>
<div class="line"></div>
<div class="line">    info.<a name="a49"></a><a class="code" href="classnn_1_1gfx_1_1_swap_chain_info.html#a3ac6ceecac07289b5580e5bf083dc037">SetDefault</a>();</div>
<div class="line">    info.<a name="a50"></a><a class="code" href="classnn_1_1gfx_1_1_swap_chain_info.html#a45d3735bcc2edc68a19ce845184a0e8f">SetLayer</a>( g_pLayer );</div>
<div class="line">    info.<a name="a51"></a><a class="code" href="classnn_1_1gfx_1_1_swap_chain_info.html#a9d43effd89913b22ceb8670ac2c2b9a4">SetWidth</a>( g_RenderWidth );</div>
<div class="line">    info.<a name="a52"></a><a class="code" href="classnn_1_1gfx_1_1_swap_chain_info.html#afb17a5865e81f13dae1532792d406afb">SetHeight</a>( g_RenderHeight );</div>
<div class="line">    info.<a name="a53"></a><a class="code" href="classnn_1_1gfx_1_1_swap_chain_info.html#a7b4bafd4ea97d6130e74d9763e947bff">SetFormat</a>( <a name="a54"></a><a class="code" href="namespacenn_1_1gfx.html#ae794c2b6a518a4ae9ada4d3339b87605ad679fce65d58a5b097510ff075590526">nn::gfx::ImageFormat_R8_G8_B8_A8_UnormSrgb</a> );</div>
<div class="line">    info.<a name="a55"></a><a class="code" href="classnn_1_1gfx_1_1_swap_chain_info.html#ab489421ecb43aae64bc8d0d22b612cd0">SetBufferCount</a>( 2 );</div>
<div class="line">    <span class="keywordflow">if</span>( <a name="a56"></a><a class="code" href="nn___macro_8h.html#a71c0f58f6d49fe1392380eed4509ab9a">NN_STATIC_CONDITION</a>( <a name="a57"></a><a class="code" href="classnn_1_1gfx_1_1_t_swap_chain.html#a4bba38bb9f96e845cad769f04b00bc26">nn::gfx::SwapChain::IsMemoryPoolRequired</a> ) )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">size_t</span> size = g_SwapChain.<a name="a58"></a><a class="code" href="classnn_1_1gfx_1_1_t_swap_chain.html#a9bb603e276006241f413dd2702e734ca">CalculateScanBufferSize</a>( &amp;g_Device, info );</div>
<div class="line">        g_InvisibleMemoryPoolOffset = <a class="code" href="namespacenn_1_1util.html#a20f6772d3ae70168e07e0f39d416d72e">nn::util::align_up</a>( g_InvisibleMemoryPoolOffset,</div>
<div class="line">            <a name="a59"></a><a class="code" href="classnn_1_1gfx_1_1_t_swap_chain.html#a4223dd4e76c8d42f61983fa2c859da20">nn::gfx::SwapChain::GetScanBufferAlignment</a>( &amp;g_Device, info ) );</div>
<div class="line">        g_SwapChain.<a name="a60"></a><a class="code" href="classnn_1_1gfx_1_1_t_swap_chain.html#a9c4b1c9b1103c792c89bb111808f711e">Initialize</a>( &amp;g_Device, info, &amp;g_InvisibleMemoryPool, g_InvisibleMemoryPoolOffset, size );</div>
<div class="line">        g_InvisibleMemoryPoolOffset += size;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        g_SwapChain.<a class="code" href="classnn_1_1gfx_1_1_t_swap_chain.html#a9c4b1c9b1103c792c89bb111808f711e">Initialize</a>( &amp;g_Device, info, NULL, 0, 0 );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// キューを初期化</span></div>
<div class="line"><a name="_a61"></a><a class="code" href="classnn_1_1gfx_1_1_t_queue.html">nn::gfx::Queue</a> g_Queue;</div>
<div class="line"><span class="keywordtype">void</span> InitializeQueue()</div>
<div class="line">{</div>
<div class="line">    <a name="_a62"></a><a class="code" href="classnn_1_1gfx_1_1_queue_info.html">nn::gfx::Queue::InfoType</a> info;</div>
<div class="line">    info.<a name="a63"></a><a class="code" href="classnn_1_1gfx_1_1_queue_info.html#adb123117503c34bb0c5ee707e9b619b2">SetDefault</a>();</div>
<div class="line">    info.<a name="a64"></a><a class="code" href="classnn_1_1gfx_1_1_queue_info.html#ad39eb3b3594837511c4ed024b96db180">SetCapability</a>( <a name="a65"></a><a class="code" href="namespacenn_1_1gfx.html#a305234f652e5c28bf7caed3bcfab60d3a3c85c0b4d0af93ffe600e26ea8a89e57">nn::gfx::QueueCapability_Graphics</a> );</div>
<div class="line">    g_Queue.<a name="a66"></a><a class="code" href="classnn_1_1gfx_1_1_t_queue.html#aabd6f0085d48c2af853394c2f1df1767">Initialize</a>( &amp;g_Device, info );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// コマンドバッファを初期化</span></div>
<div class="line"><a name="_a67"></a><a class="code" href="classnn_1_1gfx_1_1_t_command_buffer.html">nn::gfx::CommandBuffer</a> g_CommandBuffer;</div>
<div class="line"><span class="keywordtype">void</span> InitializeCommandBuffer()</div>
<div class="line">{</div>
<div class="line">    <a name="_a68"></a><a class="code" href="classnn_1_1gfx_1_1_command_buffer_info.html">nn::gfx::CommandBuffer::InfoType</a> info;</div>
<div class="line">    info.<a name="a69"></a><a class="code" href="classnn_1_1gfx_1_1_command_buffer_info.html#ae2c8f9bbcf68ce7d42deba2352e4836c">SetDefault</a>();</div>
<div class="line">    info.<a name="a70"></a><a class="code" href="classnn_1_1gfx_1_1_command_buffer_info.html#a1ee219b3f9aa9bc7ffb878de1e4e7574">SetQueueCapability</a>( <a class="code" href="namespacenn_1_1gfx.html#a305234f652e5c28bf7caed3bcfab60d3a3c85c0b4d0af93ffe600e26ea8a89e57">nn::gfx::QueueCapability_Graphics</a> );</div>
<div class="line">    info.<a name="a71"></a><a class="code" href="classnn_1_1gfx_1_1_command_buffer_info.html#a2dc75925a14c5d81ebd838b730a6a026">SetCommandBufferType</a>( <a name="a72"></a><a class="code" href="namespacenn_1_1gfx.html#a0e171a31353ada1910b428cd08e7d2d3a6009481892695c8b4bcfca4ab86d9313">nn::gfx::CommandBufferType_Direct</a> );</div>
<div class="line">    g_CommandBuffer.<a name="a73"></a><a class="code" href="classnn_1_1gfx_1_1_t_command_buffer.html#a5ceea989aa3ee861d3d3e57316b190ec">Initialize</a>( &amp;g_Device, info );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// フレームワーク関連</span></div>
<div class="line"><a name="_a74"></a><a class="code" href="classnn_1_1gfx_1_1_t_fence.html">nn::gfx::Fence</a> g_DisplayFence[2];</div>
<div class="line"><a class="code" href="classnn_1_1gfx_1_1_t_fence.html">nn::gfx::Fence</a> g_GpuFence[2];</div>
<div class="line"><a name="_a75"></a><a class="code" href="classnn_1_1gfx_1_1_t_semaphore.html">nn::gfx::Semaphore</a> g_DisplaySemaphore[2];</div>
<div class="line"><a name="_a76"></a><a class="code" href="classnn_1_1gfx_1_1_t_color_target_view.html">nn::gfx::ColorTargetView</a>* g_pScanBufferViews[2];</div>
<div class="line"><span class="keywordtype">int</span> g_NextScanBufferIndex;</div>
<div class="line"><span class="keywordtype">void</span> InitializeFramework()</div>
<div class="line">{</div>
<div class="line">    <a name="_a77"></a><a class="code" href="classnn_1_1gfx_1_1_fence_info.html">nn::gfx::Fence::InfoType</a> fenceInfo;</div>
<div class="line">    fenceInfo.<a name="a78"></a><a class="code" href="classnn_1_1gfx_1_1_fence_info.html#add8ed7191d969495cb46b560192b595d">SetDefault</a>();</div>
<div class="line">    g_DisplayFence[0].<a name="a79"></a><a class="code" href="classnn_1_1gfx_1_1_t_fence.html#a8d7ff4eb26bd5eae8beac1058ee58d30">Initialize</a>(&amp;g_Device, fenceInfo);</div>
<div class="line">    g_DisplayFence[1].<a class="code" href="classnn_1_1gfx_1_1_t_fence.html#a8d7ff4eb26bd5eae8beac1058ee58d30">Initialize</a>(&amp;g_Device, fenceInfo);</div>
<div class="line">    g_GpuFence[0].<a class="code" href="classnn_1_1gfx_1_1_t_fence.html#a8d7ff4eb26bd5eae8beac1058ee58d30">Initialize</a>(&amp;g_Device, fenceInfo);</div>
<div class="line">    g_GpuFence[1].<a class="code" href="classnn_1_1gfx_1_1_t_fence.html#a8d7ff4eb26bd5eae8beac1058ee58d30">Initialize</a>(&amp;g_Device, fenceInfo);</div>
<div class="line"></div>
<div class="line">    <a name="_a80"></a><a class="code" href="classnn_1_1gfx_1_1_semaphore_info.html">nn::gfx::Semaphore::InfoType</a> semaphoreInfo;</div>
<div class="line">    semaphoreInfo.<a name="a81"></a><a class="code" href="classnn_1_1gfx_1_1_semaphore_info.html#a18ee4aa527ccd678bcb4a179e691e386">SetDefault</a>();</div>
<div class="line">    g_DisplaySemaphore[0].<a name="a82"></a><a class="code" href="classnn_1_1gfx_1_1_t_semaphore.html#a99f73266b33792c6918fcdd812ef038c">Initialize</a>(&amp;g_Device, semaphoreInfo);</div>
<div class="line">    g_DisplaySemaphore[1].<a class="code" href="classnn_1_1gfx_1_1_t_semaphore.html#a99f73266b33792c6918fcdd812ef038c">Initialize</a>(&amp;g_Device, semaphoreInfo);</div>
<div class="line"></div>
<div class="line">    g_SwapChain.<a name="a83"></a><a class="code" href="classnn_1_1gfx_1_1_t_swap_chain.html#a45ea35235aa2290a663da18a68715195">GetScanBufferViews</a>(g_pScanBufferViews, 2);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> FinalizeFramework()</div>
<div class="line">{</div>
<div class="line">    g_DisplayFence[0].<a name="a84"></a><a class="code" href="classnn_1_1gfx_1_1_t_fence.html#a01e22e4949f3b06cb8120da6f7161d81">Finalize</a>(&amp;g_Device);</div>
<div class="line">    g_DisplayFence[1].<a class="code" href="classnn_1_1gfx_1_1_t_fence.html#a01e22e4949f3b06cb8120da6f7161d81">Finalize</a>(&amp;g_Device);</div>
<div class="line">    g_GpuFence[0].<a class="code" href="classnn_1_1gfx_1_1_t_fence.html#a01e22e4949f3b06cb8120da6f7161d81">Finalize</a>(&amp;g_Device);</div>
<div class="line">    g_GpuFence[1].<a class="code" href="classnn_1_1gfx_1_1_t_fence.html#a01e22e4949f3b06cb8120da6f7161d81">Finalize</a>(&amp;g_Device);</div>
<div class="line"></div>
<div class="line">    g_DisplaySemaphore[0].<a name="a85"></a><a class="code" href="classnn_1_1gfx_1_1_t_semaphore.html#aacacbf82b1b02a9739de5e90e3171934">Finalize</a>(&amp;g_Device);</div>
<div class="line">    g_DisplaySemaphore[1].<a class="code" href="classnn_1_1gfx_1_1_t_semaphore.html#aacacbf82b1b02a9739de5e90e3171934">Finalize</a>(&amp;g_Device);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// ビューポートシザーを初期化</span></div>
<div class="line"><a name="_a86"></a><a class="code" href="classnn_1_1gfx_1_1_t_viewport_scissor_state.html">nn::gfx::ViewportScissorState</a> g_ViewportScissor;</div>
<div class="line"><span class="keywordtype">void</span> InitializeViewport()</div>
<div class="line">{</div>
<div class="line">    <a name="_a87"></a><a class="code" href="classnn_1_1gfx_1_1_viewport_scissor_state_info.html">nn::gfx::ViewportScissorState::InfoType</a> info;</div>
<div class="line">    info.<a name="a88"></a><a class="code" href="classnn_1_1gfx_1_1_viewport_scissor_state_info.html#ab9c4f718c28bbd39b9ccb11c1fc74a21">SetDefault</a>();</div>
<div class="line">    info.<a name="a89"></a><a class="code" href="classnn_1_1gfx_1_1_viewport_scissor_state_info.html#a4cfc5de9d6913b0caf3f3d61a6eaae2c">SetScissorEnabled</a>( <span class="keyword">true</span> );</div>
<div class="line">    <a name="_a90"></a><a class="code" href="classnn_1_1gfx_1_1_viewport_state_info.html">nn::gfx::ViewportStateInfo</a> viewportInfo;</div>
<div class="line">    {</div>
<div class="line">        viewportInfo.<a name="a91"></a><a class="code" href="classnn_1_1gfx_1_1_viewport_state_info.html#ab2f35b1c78bd77d5d18202cff743902a">SetDefault</a>();</div>
<div class="line">        viewportInfo.<a name="a92"></a><a class="code" href="classnn_1_1gfx_1_1_viewport_state_info.html#a5f2ee737e00c49646f66bc3eab21824a">SetWidth</a>( static_cast&lt; float &gt;( g_RenderWidth ) );</div>
<div class="line">        viewportInfo.<a name="a93"></a><a class="code" href="classnn_1_1gfx_1_1_viewport_state_info.html#a4546e049c35d16267d7f17c29de27511">SetHeight</a>( static_cast&lt; float &gt;( g_RenderHeight ) );</div>
<div class="line">    }</div>
<div class="line">    <a name="_a94"></a><a class="code" href="classnn_1_1gfx_1_1_scissor_state_info.html">nn::gfx::ScissorStateInfo</a> scissorInfo;</div>
<div class="line">    {</div>
<div class="line">        scissorInfo.<a name="a95"></a><a class="code" href="classnn_1_1gfx_1_1_scissor_state_info.html#a6e56a6510701c498bd9b0cf1e2bd76d8">SetDefault</a>();</div>
<div class="line">        scissorInfo.<a name="a96"></a><a class="code" href="classnn_1_1gfx_1_1_scissor_state_info.html#a32b5bcc1f381044da047847f4928285b">SetWidth</a>( g_RenderWidth );</div>
<div class="line">        scissorInfo.<a name="a97"></a><a class="code" href="classnn_1_1gfx_1_1_scissor_state_info.html#a57465efb7793057fe855f61d7e10dea0">SetHeight</a>( g_RenderHeight );</div>
<div class="line">    }</div>
<div class="line">    info.<a name="a98"></a><a class="code" href="classnn_1_1gfx_1_1_viewport_scissor_state_info.html#a8f4e89948a5dc8d65392565442c4bf77">SetViewportStateInfoArray</a>( &amp;viewportInfo, 1 );</div>
<div class="line">    info.<a name="a99"></a><a class="code" href="classnn_1_1gfx_1_1_viewport_scissor_state_info.html#af7b01ae781d2d2b04b88e23e4606f218">SetScissorStateInfoArray</a>( &amp;scissorInfo, 1 );</div>
<div class="line">    g_ViewportScissor.<a name="a100"></a><a class="code" href="classnn_1_1gfx_1_1_t_viewport_scissor_state.html#a0f44e5cfdd496380fc4aa818195adf9e">Initialize</a>( &amp;g_Device, info );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Initialize the rasterizer state</span></div>
<div class="line"><a name="_a101"></a><a class="code" href="classnn_1_1gfx_1_1_t_rasterizer_state.html">nn::gfx::RasterizerState</a> g_RasterizerState;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> InitializeRasterizerState()</div>
<div class="line">{</div>
<div class="line">    <a name="_a102"></a><a class="code" href="classnn_1_1gfx_1_1_rasterizer_state_info.html">nn::gfx::RasterizerState::InfoType</a> info;</div>
<div class="line">    info.<a name="a103"></a><a class="code" href="classnn_1_1gfx_1_1_rasterizer_state_info.html#a45a46efee0f61cab478fd5a41be0e9b9">SetDefault</a>();</div>
<div class="line">    info.<a name="a104"></a><a class="code" href="classnn_1_1gfx_1_1_rasterizer_state_info.html#a92289196919c33b4b55f6379463be28d">SetCullMode</a>( <a name="a105"></a><a class="code" href="namespacenn_1_1gfx.html#af10f98bfe496b042c8efd7e5a99e8a3aa7fb8a9e531b3753b321c74afc29ab86f">nn::gfx::CullMode_None</a> );</div>
<div class="line">    info.<a name="a106"></a><a class="code" href="classnn_1_1gfx_1_1_rasterizer_state_info.html#ac41e9cda160239333202215bea73c5b1">SetPrimitiveTopologyType</a>( <a name="a107"></a><a class="code" href="namespacenn_1_1gfx.html#a6fcf21493e8aeae81cec48c49eec5ad8afb917cda5a7dcb6daf3764a63786baa4">nn::gfx::PrimitiveTopologyType_Triangle</a> );</div>
<div class="line">    info.<a name="a108"></a><a class="code" href="classnn_1_1gfx_1_1_rasterizer_state_info.html#a253866f358c056a5e6e6c531cb1029f9">SetScissorEnabled</a>( <span class="keyword">true</span> );</div>
<div class="line">    info.<a name="a109"></a><a class="code" href="classnn_1_1gfx_1_1_rasterizer_state_info.html#a5358351caf04fc526dc378c45e24d238">SetDepthClipEnabled</a>( <span class="keyword">false</span> );</div>
<div class="line">    g_RasterizerState.<a name="a110"></a><a class="code" href="classnn_1_1gfx_1_1_t_rasterizer_state.html#ab8bff07010deabb29f933514e25a5ddf">Initialize</a>( &amp;g_Device, info );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// カラーバッファを初期化</span></div>
<div class="line"><a name="_a111"></a><a class="code" href="classnn_1_1gfx_1_1_t_texture.html">nn::gfx::Texture</a> g_ColorBuffer;</div>
<div class="line"><a class="code" href="classnn_1_1gfx_1_1_t_color_target_view.html">nn::gfx::ColorTargetView</a> g_ColorTargetView;</div>
<div class="line"><a name="_a112"></a><a class="code" href="classnn_1_1gfx_1_1_t_texture_view.html">nn::gfx::TextureView</a> g_ColorTextureView;</div>
<div class="line"><a name="_a113"></a><a class="code" href="classnn_1_1gfx_1_1_descriptor_slot.html">nn::gfx::DescriptorSlot</a> g_ColorTextureDescSlot;</div>
<div class="line"><span class="keywordtype">void</span> InitializeColorBuffer()</div>
<div class="line">{</div>
<div class="line">    <a name="_a114"></a><a class="code" href="classnn_1_1gfx_1_1_texture_info.html">nn::gfx::Texture::InfoType</a> info;</div>
<div class="line">    info.<a name="a115"></a><a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a7347a6f3179dc816dc7eb761cdc37152">SetDefault</a>();</div>
<div class="line">    info.<a name="a116"></a><a class="code" href="classnn_1_1gfx_1_1_texture_info.html#aa9542aaf7fe4dea102f8ec01188c3227">SetWidth</a>( g_RenderWidth );</div>
<div class="line">    info.<a name="a117"></a><a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a2351f69b4b5c3bece70bfc416a74f96a">SetHeight</a>( g_RenderHeight );</div>
<div class="line">    info.<a name="a118"></a><a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a214c396c13c6086b75cf63dc374f14ab">SetGpuAccessFlags</a>( <a name="a119"></a><a class="code" href="namespacenn_1_1gfx.html#a24dbcd6d86531138895622b5a854e4f5a0db6d0fe517ccdbde996e7748f0c69f8">nn::gfx::GpuAccess_ColorBuffer</a> );</div>
<div class="line">    info.<a name="a120"></a><a class="code" href="classnn_1_1gfx_1_1_texture_info.html#ac1912ab092b3f1acd897e96ea4eb7ffc">SetImageStorageDimension</a>( <a name="a121"></a><a class="code" href="namespacenn_1_1gfx.html#a52703c69a29adb8ba4cf3d02c6be65d6aeecfd005f00573cce0430313e61bc33e">nn::gfx::ImageStorageDimension_2d</a> );</div>
<div class="line">    info.<a name="a122"></a><a class="code" href="classnn_1_1gfx_1_1_texture_info.html#aabd5c4ee3aaf0dfc3577843da1d8bc1f">SetImageFormat</a>(    <a name="a123"></a><a class="code" href="namespacenn_1_1gfx.html#ae794c2b6a518a4ae9ada4d3339b87605aba24332fd6f9a95e064fcd92c8cb52c3">nn::gfx::ImageFormat_R16_G16_B16_A16_Float</a> );</div>
<div class="line">    info.<a name="a124"></a><a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a8187f32da9bbbed65c49a1c00932d796">SetMipCount</a>( 1 );</div>
<div class="line"></div>
<div class="line">    g_InvisibleMemoryPoolOffset = <a class="code" href="namespacenn_1_1util.html#a20f6772d3ae70168e07e0f39d416d72e">nn::util::align_up</a>(g_InvisibleMemoryPoolOffset, <a name="a125"></a><a class="code" href="classnn_1_1gfx_1_1_t_texture.html#a6580c829bab613b6e9850e543f9a7203">nn::gfx::Texture::CalculateMipDataAlignment</a>( &amp;g_Device, info ));</div>
<div class="line">    <span class="keywordtype">size_t</span> size = <a name="a126"></a><a class="code" href="classnn_1_1gfx_1_1_t_texture.html#ac9d3334566c6451da3f015e5ed1fd1ad">nn::gfx::Texture::CalculateMipDataSize</a>( &amp;g_Device, info );</div>
<div class="line">    g_ColorBuffer.<a name="a127"></a><a class="code" href="classnn_1_1gfx_1_1_t_texture.html#a8b733d649540691011c2ca3949cd5620">Initialize</a>( &amp;g_Device, info, &amp;g_InvisibleMemoryPool, g_InvisibleMemoryPoolOffset, size );</div>
<div class="line">    g_InvisibleMemoryPoolOffset += size;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// カラーターゲットビューを初期化</span></div>
<div class="line">    <a name="_a128"></a><a class="code" href="classnn_1_1gfx_1_1_color_target_view_info.html">nn::gfx::ColorTargetView::InfoType</a> targetInfo;</div>
<div class="line">    targetInfo.<a name="a129"></a><a class="code" href="classnn_1_1gfx_1_1_color_target_view_info.html#ade9a2ff691e4242c10905acca43593b8">SetDefault</a>();</div>
<div class="line">    targetInfo.<a name="a130"></a><a class="code" href="classnn_1_1gfx_1_1_color_target_view_info.html#a603c6400bee967aa2a98e4b4e54cd12c">SetImageDimension</a>( <a name="a131"></a><a class="code" href="namespacenn_1_1gfx.html#ae5b7c631f74a2dbfeff59cc3764d488fa292e541aac404ecfc004b8ed4f98bbc9">nn::gfx::ImageDimension_2d</a> );</div>
<div class="line">    targetInfo.<a name="a132"></a><a class="code" href="classnn_1_1gfx_1_1_color_target_view_info.html#aced72d630d8c121417925d56d5f0fafa">SetImageFormat</a>( <a class="code" href="namespacenn_1_1gfx.html#ae794c2b6a518a4ae9ada4d3339b87605aba24332fd6f9a95e064fcd92c8cb52c3">nn::gfx::ImageFormat_R16_G16_B16_A16_Float</a> );</div>
<div class="line">    targetInfo.<a name="a133"></a><a class="code" href="classnn_1_1gfx_1_1_color_target_view_info.html#a9b809e1177e4779c720199283732f895">SetTexturePtr</a>( &amp;g_ColorBuffer );</div>
<div class="line">    g_ColorTargetView.<a name="a134"></a><a class="code" href="classnn_1_1gfx_1_1_t_color_target_view.html#a666b8b81d5b7d182fcecea79643f3d66">Initialize</a>( &amp;g_Device, targetInfo );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// カラーバッファのテクスチャビューを初期化</span></div>
<div class="line">    <a name="_a135"></a><a class="code" href="classnn_1_1gfx_1_1_texture_view_info.html">nn::gfx::TextureView::InfoType</a> viewInfo;</div>
<div class="line">    viewInfo.<a name="a136"></a><a class="code" href="classnn_1_1gfx_1_1_texture_view_info.html#a85314df45dd260c6f915685d835e2d3e">SetDefault</a>();</div>
<div class="line">    viewInfo.<a name="a137"></a><a class="code" href="classnn_1_1gfx_1_1_texture_view_info.html#a172ca9e1807a64f8a029f5e6ef07735e">SetImageDimension</a>( <a class="code" href="namespacenn_1_1gfx.html#ae5b7c631f74a2dbfeff59cc3764d488fa292e541aac404ecfc004b8ed4f98bbc9">nn::gfx::ImageDimension_2d</a> );</div>
<div class="line">    viewInfo.<a name="a138"></a><a class="code" href="classnn_1_1gfx_1_1_texture_view_info.html#accbd6647f7d583cfeaddeecfdc48843e">SetImageFormat</a>( <a class="code" href="namespacenn_1_1gfx.html#ae794c2b6a518a4ae9ada4d3339b87605aba24332fd6f9a95e064fcd92c8cb52c3">nn::gfx::ImageFormat_R16_G16_B16_A16_Float</a> );</div>
<div class="line">    viewInfo.<a name="a139"></a><a class="code" href="classnn_1_1gfx_1_1_texture_view_info.html#a541b3523db0743886085c5f17a13acf2">SetTexturePtr</a>( &amp;g_ColorBuffer );</div>
<div class="line">    g_ColorTextureView.<a name="a140"></a><a class="code" href="classnn_1_1gfx_1_1_t_texture_view.html#abd4b6a9cb75d19c446b1c8cedcf8d5f2">Initialize</a>( &amp;g_Device, viewInfo );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// デスクリプタスロット設定</span></div>
<div class="line"><span class="comment">//    g_TextureDescPoolAllocator.AllocateSlotForFontTexture( &amp;g_ColorTextureDescSlot, g_ColorTextureView );</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="classnn_1_1gfx_1_1_t_texture.html">nn::gfx::Texture</a> g_BlurColorBuffer;</div>
<div class="line"><a class="code" href="classnn_1_1gfx_1_1_t_color_target_view.html">nn::gfx::ColorTargetView</a> g_BlurColorTargetView;</div>
<div class="line"><a class="code" href="classnn_1_1gfx_1_1_t_texture_view.html">nn::gfx::TextureView</a> g_BlurColorTextureView;</div>
<div class="line"><a class="code" href="classnn_1_1gfx_1_1_descriptor_slot.html">nn::gfx::DescriptorSlot</a> g_BlurColorTextureDescSlot;</div>
<div class="line"><span class="keywordtype">void</span> InitializeBlurBuffer()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="classnn_1_1gfx_1_1_texture_info.html">nn::gfx::Texture::InfoType</a> info;</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a7347a6f3179dc816dc7eb761cdc37152">SetDefault</a>();</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#aa9542aaf7fe4dea102f8ec01188c3227">SetWidth</a>( g_RenderWidth );</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a2351f69b4b5c3bece70bfc416a74f96a">SetHeight</a>( g_RenderHeight );</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a214c396c13c6086b75cf63dc374f14ab">SetGpuAccessFlags</a>( <a class="code" href="namespacenn_1_1gfx.html#a24dbcd6d86531138895622b5a854e4f5a0db6d0fe517ccdbde996e7748f0c69f8">nn::gfx::GpuAccess_ColorBuffer</a> );</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#ac1912ab092b3f1acd897e96ea4eb7ffc">SetImageStorageDimension</a>( <a class="code" href="namespacenn_1_1gfx.html#a52703c69a29adb8ba4cf3d02c6be65d6aeecfd005f00573cce0430313e61bc33e">nn::gfx::ImageStorageDimension_2d</a> );</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#aabd5c4ee3aaf0dfc3577843da1d8bc1f">SetImageFormat</a>(    <a class="code" href="namespacenn_1_1gfx.html#ae794c2b6a518a4ae9ada4d3339b87605aba24332fd6f9a95e064fcd92c8cb52c3">nn::gfx::ImageFormat_R16_G16_B16_A16_Float</a> );</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a8187f32da9bbbed65c49a1c00932d796">SetMipCount</a>( 1 );</div>
<div class="line"></div>
<div class="line">    g_InvisibleMemoryPoolOffset = <a class="code" href="namespacenn_1_1util.html#a20f6772d3ae70168e07e0f39d416d72e">nn::util::align_up</a>(g_InvisibleMemoryPoolOffset, <a class="code" href="classnn_1_1gfx_1_1_t_texture.html#a6580c829bab613b6e9850e543f9a7203">nn::gfx::Texture::CalculateMipDataAlignment</a>( &amp;g_Device, info ));</div>
<div class="line">    <span class="keywordtype">size_t</span> size = <a class="code" href="classnn_1_1gfx_1_1_t_texture.html#ac9d3334566c6451da3f015e5ed1fd1ad">nn::gfx::Texture::CalculateMipDataSize</a>( &amp;g_Device, info );</div>
<div class="line">    g_BlurColorBuffer.<a class="code" href="classnn_1_1gfx_1_1_t_texture.html#a8b733d649540691011c2ca3949cd5620">Initialize</a>( &amp;g_Device, info, &amp;g_InvisibleMemoryPool, g_InvisibleMemoryPoolOffset, size );</div>
<div class="line">    g_InvisibleMemoryPoolOffset += size;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// カラーターゲットビューを初期化</span></div>
<div class="line">    <a class="code" href="classnn_1_1gfx_1_1_color_target_view_info.html">nn::gfx::ColorTargetView::InfoType</a> targetInfo;</div>
<div class="line">    targetInfo.<a class="code" href="classnn_1_1gfx_1_1_color_target_view_info.html#ade9a2ff691e4242c10905acca43593b8">SetDefault</a>();</div>
<div class="line">    targetInfo.<a class="code" href="classnn_1_1gfx_1_1_color_target_view_info.html#a603c6400bee967aa2a98e4b4e54cd12c">SetImageDimension</a>( <a class="code" href="namespacenn_1_1gfx.html#ae5b7c631f74a2dbfeff59cc3764d488fa292e541aac404ecfc004b8ed4f98bbc9">nn::gfx::ImageDimension_2d</a> );</div>
<div class="line">    targetInfo.<a class="code" href="classnn_1_1gfx_1_1_color_target_view_info.html#aced72d630d8c121417925d56d5f0fafa">SetImageFormat</a>( <a class="code" href="namespacenn_1_1gfx.html#ae794c2b6a518a4ae9ada4d3339b87605aba24332fd6f9a95e064fcd92c8cb52c3">nn::gfx::ImageFormat_R16_G16_B16_A16_Float</a> );</div>
<div class="line">    targetInfo.<a class="code" href="classnn_1_1gfx_1_1_color_target_view_info.html#a9b809e1177e4779c720199283732f895">SetTexturePtr</a>( &amp;g_BlurColorBuffer );</div>
<div class="line">    g_BlurColorTargetView.<a class="code" href="classnn_1_1gfx_1_1_t_color_target_view.html#a666b8b81d5b7d182fcecea79643f3d66">Initialize</a>( &amp;g_Device, targetInfo );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// カラーバッファのテクスチャビューを初期化</span></div>
<div class="line">    <a class="code" href="classnn_1_1gfx_1_1_texture_view_info.html">nn::gfx::TextureView::InfoType</a> viewInfo;</div>
<div class="line">    viewInfo.<a class="code" href="classnn_1_1gfx_1_1_texture_view_info.html#a85314df45dd260c6f915685d835e2d3e">SetDefault</a>();</div>
<div class="line">    viewInfo.<a class="code" href="classnn_1_1gfx_1_1_texture_view_info.html#a172ca9e1807a64f8a029f5e6ef07735e">SetImageDimension</a>( <a class="code" href="namespacenn_1_1gfx.html#ae5b7c631f74a2dbfeff59cc3764d488fa292e541aac404ecfc004b8ed4f98bbc9">nn::gfx::ImageDimension_2d</a> );</div>
<div class="line">    viewInfo.<a class="code" href="classnn_1_1gfx_1_1_texture_view_info.html#accbd6647f7d583cfeaddeecfdc48843e">SetImageFormat</a>( <a class="code" href="namespacenn_1_1gfx.html#ae794c2b6a518a4ae9ada4d3339b87605aba24332fd6f9a95e064fcd92c8cb52c3">nn::gfx::ImageFormat_R16_G16_B16_A16_Float</a> );</div>
<div class="line">    viewInfo.<a class="code" href="classnn_1_1gfx_1_1_texture_view_info.html#a541b3523db0743886085c5f17a13acf2">SetTexturePtr</a>( &amp;g_BlurColorBuffer );</div>
<div class="line">    g_BlurColorTextureView.<a class="code" href="classnn_1_1gfx_1_1_t_texture_view.html#abd4b6a9cb75d19c446b1c8cedcf8d5f2">Initialize</a>( &amp;g_Device, viewInfo );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// 深度ステンシルバッファを初期化</span></div>
<div class="line"><a class="code" href="classnn_1_1gfx_1_1_t_texture.html">nn::gfx::Texture</a> g_DepthStencilBuffer;</div>
<div class="line"><a name="_a141"></a><a class="code" href="classnn_1_1gfx_1_1_t_depth_stencil_view.html">nn::gfx::DepthStencilView</a> g_DepthStencilView;</div>
<div class="line"><span class="keywordtype">void</span> InitializeDepthStencilBuffer()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// 深度ステンシルバッファ用のテクスチャを初期化</span></div>
<div class="line">    <a class="code" href="classnn_1_1gfx_1_1_texture_info.html">nn::gfx::Texture::InfoType</a> info;</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a7347a6f3179dc816dc7eb761cdc37152">SetDefault</a>();</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#aa9542aaf7fe4dea102f8ec01188c3227">SetWidth</a>( g_RenderWidth );</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a2351f69b4b5c3bece70bfc416a74f96a">SetHeight</a>( g_RenderHeight );</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a214c396c13c6086b75cf63dc374f14ab">SetGpuAccessFlags</a>( <a name="a142"></a><a class="code" href="namespacenn_1_1gfx.html#a24dbcd6d86531138895622b5a854e4f5a1663c5652d151ae04844adb9a3784bea">nn::gfx::GpuAccess_DepthStencil</a> );</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#ac1912ab092b3f1acd897e96ea4eb7ffc">SetImageStorageDimension</a>( <a class="code" href="namespacenn_1_1gfx.html#a52703c69a29adb8ba4cf3d02c6be65d6aeecfd005f00573cce0430313e61bc33e">nn::gfx::ImageStorageDimension_2d</a> );</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#aabd5c4ee3aaf0dfc3577843da1d8bc1f">SetImageFormat</a>( <a name="a143"></a><a class="code" href="namespacenn_1_1gfx.html#ae794c2b6a518a4ae9ada4d3339b87605a2f64d2e25bf61ef9571b504d2b86a895">nn::gfx::ImageFormat_D32_Float</a> );</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a8187f32da9bbbed65c49a1c00932d796">SetMipCount</a>( 1 );</div>
<div class="line">    g_InvisibleMemoryPoolOffset = <a class="code" href="namespacenn_1_1util.html#a20f6772d3ae70168e07e0f39d416d72e">nn::util::align_up</a>(g_InvisibleMemoryPoolOffset, <a class="code" href="classnn_1_1gfx_1_1_t_texture.html#a6580c829bab613b6e9850e543f9a7203">nn::gfx::Texture::CalculateMipDataAlignment</a>( &amp;g_Device, info ));</div>
<div class="line">    <span class="keywordtype">size_t</span> size = <a class="code" href="classnn_1_1gfx_1_1_t_texture.html#ac9d3334566c6451da3f015e5ed1fd1ad">nn::gfx::Texture::CalculateMipDataSize</a>( &amp;g_Device, info );</div>
<div class="line">    g_DepthStencilBuffer.<a class="code" href="classnn_1_1gfx_1_1_t_texture.html#a8b733d649540691011c2ca3949cd5620">Initialize</a>( &amp;g_Device, info, &amp;g_InvisibleMemoryPool, g_InvisibleMemoryPoolOffset, size );</div>
<div class="line">    g_InvisibleMemoryPoolOffset += size;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 深度ステンシルビューを初期化</span></div>
<div class="line">    <a name="_a144"></a><a class="code" href="classnn_1_1gfx_1_1_depth_stencil_view_info.html">nn::gfx::DepthStencilView::InfoType</a> viewInfo;</div>
<div class="line">    viewInfo.<a name="a145"></a><a class="code" href="classnn_1_1gfx_1_1_depth_stencil_view_info.html#a3398861ad8d8a8caad22f50b725bf8a7">SetDefault</a>();</div>
<div class="line">    viewInfo.<a name="a146"></a><a class="code" href="classnn_1_1gfx_1_1_depth_stencil_view_info.html#ac3d84bfc8d50531d6270e0c8b328bcac">SetImageDimension</a>( <a class="code" href="namespacenn_1_1gfx.html#ae5b7c631f74a2dbfeff59cc3764d488fa292e541aac404ecfc004b8ed4f98bbc9">nn::gfx::ImageDimension_2d</a> );</div>
<div class="line">    viewInfo.<a name="a147"></a><a class="code" href="classnn_1_1gfx_1_1_depth_stencil_view_info.html#a0f517ffb3e39c0a96efcbb6b42e5b227">SetTexturePtr</a>( &amp;g_DepthStencilBuffer );</div>
<div class="line">    g_DepthStencilView.<a name="a148"></a><a class="code" href="classnn_1_1gfx_1_1_t_depth_stencil_view.html#ab49a5deea867df6acae96bcf5a871a68">Initialize</a>( &amp;g_Device, viewInfo );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// サンプラを初期化</span></div>
<div class="line"><a name="_a149"></a><a class="code" href="classnn_1_1gfx_1_1_t_sampler.html">nn::gfx::Sampler</a> g_Sampler;</div>
<div class="line"><span class="keywordtype">void</span> InitializeSampler()</div>
<div class="line">{</div>
<div class="line">    <a name="_a150"></a><a class="code" href="classnn_1_1gfx_1_1_sampler_info.html">nn::gfx::Sampler::InfoType</a> info;</div>
<div class="line">    info.<a name="a151"></a><a class="code" href="classnn_1_1gfx_1_1_sampler_info.html#a0a8b936b65f761b509f7c9873983f75f">SetDefault</a>();</div>
<div class="line">    info.<a name="a152"></a><a class="code" href="classnn_1_1gfx_1_1_sampler_info.html#a5834b5ed1253675f8cc144267b982689">SetFilterMode</a>( <a name="a153"></a><a class="code" href="namespacenn_1_1gfx.html#ad02723fd1d5795fe8801dc262eae6e1aa427f4709d113c547afb328c2e314a72a">nn::gfx::FilterMode_MinLinear_MagLinear_MipPoint</a> );</div>
<div class="line">    info.<a name="a154"></a><a class="code" href="classnn_1_1gfx_1_1_sampler_info.html#a729bb669172b22822c2b3e3b206cd6f1">SetAddressU</a>( <a name="a155"></a><a class="code" href="namespacenn_1_1gfx.html#a196a725dd687649e105dc924a75ab40bac228ae434b46d8c618ef115e0d1aa4a0">nn::gfx::TextureAddressMode_Mirror</a> );</div>
<div class="line">    info.<a name="a156"></a><a class="code" href="classnn_1_1gfx_1_1_sampler_info.html#a4b884f39b099e21ee9bf99933cd99e7b">SetAddressV</a>( <a class="code" href="namespacenn_1_1gfx.html#a196a725dd687649e105dc924a75ab40bac228ae434b46d8c618ef115e0d1aa4a0">nn::gfx::TextureAddressMode_Mirror</a> );</div>
<div class="line">    info.<a name="a157"></a><a class="code" href="classnn_1_1gfx_1_1_sampler_info.html#aad204b43e3fe75fa2a5d386e8061ea10">SetAddressW</a>( <a class="code" href="namespacenn_1_1gfx.html#a196a725dd687649e105dc924a75ab40bac228ae434b46d8c618ef115e0d1aa4a0">nn::gfx::TextureAddressMode_Mirror</a> );</div>
<div class="line">    g_Sampler.<a name="a158"></a><a class="code" href="classnn_1_1gfx_1_1_t_sampler.html#a409b6c740f965c39549d46d496d1ba0d">Initialize</a>( &amp;g_Device, info );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a name="_a159"></a><a class="code" href="classnn_1_1gfx_1_1_t_descriptor_pool.html">nn::gfx::DescriptorPool</a> g_BufferDescriptorPool;</div>
<div class="line"><span class="keywordtype">void</span> InitializeBufferDescriptorPool()</div>
<div class="line">{</div>
<div class="line">    <a name="_a160"></a><a class="code" href="classnn_1_1gfx_1_1_descriptor_pool_info.html">nn::gfx::DescriptorPool::InfoType</a> info;</div>
<div class="line">    info.<a name="a161"></a><a class="code" href="classnn_1_1gfx_1_1_descriptor_pool_info.html#aadd3cda040dfc4444a8c285b7ac01e39">SetDefault</a>();</div>
<div class="line">    info.<a name="a162"></a><a class="code" href="classnn_1_1gfx_1_1_descriptor_pool_info.html#a9a411ac342c1d77a029771436d7db638">SetDescriptorPoolType</a>( <a name="a163"></a><a class="code" href="namespacenn_1_1gfx.html#a14fc8bd39227425748a8fb55c035d10ca2aad5a856c8b554d31af6143ac2df562">nn::gfx::DescriptorPoolType_BufferView</a> );</div>
<div class="line">    info.<a name="a164"></a><a class="code" href="classnn_1_1gfx_1_1_descriptor_pool_info.html#a0ad0426ae3ed984e03a6e4d1b390e47c">SetSlotCount</a>( g_BufferDescriptorBaseIndex + 1 );</div>
<div class="line">    <span class="keywordtype">size_t</span> size = <a name="a165"></a><a class="code" href="classnn_1_1gfx_1_1_t_descriptor_pool.html#a82a7f8cf8719fba71ce6d652b41cc3d1">nn::gfx::DescriptorPool::CalculateDescriptorPoolSize</a>( &amp;g_Device, info );</div>
<div class="line">    g_MemoryPoolOffset = <a class="code" href="namespacenn_1_1util.html#a20f6772d3ae70168e07e0f39d416d72e">nn::util::align_up</a>( g_MemoryPoolOffset,</div>
<div class="line">        <a name="a166"></a><a class="code" href="classnn_1_1gfx_1_1_t_descriptor_pool.html#a4daa7d7869ad16b2f02f9d3ebeb7e11c">nn::gfx::DescriptorPool::GetDescriptorPoolAlignment</a>( &amp;g_Device, info ) );</div>
<div class="line">    g_BufferDescriptorPool.<a name="a167"></a><a class="code" href="classnn_1_1gfx_1_1_t_descriptor_pool.html#adc3149a4cf4eb2af5ed872284dc0c9a0">Initialize</a>( &amp;g_Device, info, &amp;g_MemoryPool, g_MemoryPoolOffset, size );</div>
<div class="line">    g_MemoryPoolOffset += size;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="classnn_1_1gfx_1_1_t_descriptor_pool.html">nn::gfx::DescriptorPool</a> g_SamplerDescriptorPool;</div>
<div class="line"><span class="keywordtype">void</span> InitializeSamplerDescriptorPool()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="classnn_1_1gfx_1_1_descriptor_pool_info.html">nn::gfx::DescriptorPool::InfoType</a> info;</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_descriptor_pool_info.html#aadd3cda040dfc4444a8c285b7ac01e39">SetDefault</a>();</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_descriptor_pool_info.html#a9a411ac342c1d77a029771436d7db638">SetDescriptorPoolType</a>( <a name="a168"></a><a class="code" href="namespacenn_1_1gfx.html#a14fc8bd39227425748a8fb55c035d10ca831f2090660e1269d9440b8095bf004d">nn::gfx::DescriptorPoolType_Sampler</a> );</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_descriptor_pool_info.html#a0ad0426ae3ed984e03a6e4d1b390e47c">SetSlotCount</a>( g_SamplerDescriptorBaseIndex + 1 );</div>
<div class="line">    <span class="keywordtype">size_t</span> size = <a class="code" href="classnn_1_1gfx_1_1_t_descriptor_pool.html#a82a7f8cf8719fba71ce6d652b41cc3d1">nn::gfx::DescriptorPool::CalculateDescriptorPoolSize</a>( &amp;g_Device, info );</div>
<div class="line">    g_MemoryPoolOffset = <a class="code" href="namespacenn_1_1util.html#a20f6772d3ae70168e07e0f39d416d72e">nn::util::align_up</a>( g_MemoryPoolOffset,</div>
<div class="line">        <a class="code" href="classnn_1_1gfx_1_1_t_descriptor_pool.html#a4daa7d7869ad16b2f02f9d3ebeb7e11c">nn::gfx::DescriptorPool::GetDescriptorPoolAlignment</a>( &amp;g_Device, info ) );</div>
<div class="line">    g_SamplerDescriptorPool.<a class="code" href="classnn_1_1gfx_1_1_t_descriptor_pool.html#adc3149a4cf4eb2af5ed872284dc0c9a0">Initialize</a>( &amp;g_Device, info,</div>
<div class="line">        &amp;g_MemoryPool, g_MemoryPoolOffset, size );</div>
<div class="line">    g_MemoryPoolOffset += size;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="classnn_1_1gfx_1_1_t_descriptor_pool.html">nn::gfx::DescriptorPool</a> g_TextureDescriptorPool;</div>
<div class="line"><span class="keywordtype">void</span> InitializeTextureDescriptorPool()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="classnn_1_1gfx_1_1_descriptor_pool_info.html">nn::gfx::DescriptorPool::InfoType</a> info;</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_descriptor_pool_info.html#aadd3cda040dfc4444a8c285b7ac01e39">SetDefault</a>();</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_descriptor_pool_info.html#a9a411ac342c1d77a029771436d7db638">SetDescriptorPoolType</a>( <a name="a169"></a><a class="code" href="namespacenn_1_1gfx.html#a14fc8bd39227425748a8fb55c035d10cae1ab626ffc219a9f27d569a732154bd0">nn::gfx::DescriptorPoolType_TextureView</a> );</div>
<div class="line">    info.<a class="code" href="classnn_1_1gfx_1_1_descriptor_pool_info.html#a0ad0426ae3ed984e03a6e4d1b390e47c">SetSlotCount</a>( g_TextureDescriptorBaseIndex + 4 );</div>
<div class="line">    <span class="keywordtype">size_t</span> size = <a class="code" href="classnn_1_1gfx_1_1_t_descriptor_pool.html#a82a7f8cf8719fba71ce6d652b41cc3d1">nn::gfx::DescriptorPool::CalculateDescriptorPoolSize</a>( &amp;g_Device, info );</div>
<div class="line">    g_MemoryPoolOffset = <a class="code" href="namespacenn_1_1util.html#a20f6772d3ae70168e07e0f39d416d72e">nn::util::align_up</a>( g_MemoryPoolOffset,</div>
<div class="line">        <a class="code" href="classnn_1_1gfx_1_1_t_descriptor_pool.html#a4daa7d7869ad16b2f02f9d3ebeb7e11c">nn::gfx::DescriptorPool::GetDescriptorPoolAlignment</a>( &amp;g_Device, info ) );</div>
<div class="line">    g_TextureDescriptorPool.<a class="code" href="classnn_1_1gfx_1_1_t_descriptor_pool.html#adc3149a4cf4eb2af5ed872284dc0c9a0">Initialize</a>( &amp;g_Device, info, &amp;g_MemoryPool, g_MemoryPoolOffset, size );</div>
<div class="line">    g_MemoryPoolOffset += size;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a name="_a170"></a><a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html">nn::gfx::ResTextureFile</a>* g_pResTextureFile;</div>
<div class="line"><span class="keywordtype">int</span> g_IndexBg = -1;</div>
<div class="line"><span class="keywordtype">int</span> g_IndexText = -1;</div>
<div class="line"><span class="keywordtype">void</span> InitializeResTextureFile()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">void</span> *pTextureResource = ReadResource( <span class="stringliteral">&quot;Contents:/Check.bntx&quot;</span> );</div>
<div class="line">    g_pResTextureFile = <a name="a171"></a><a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html#a5e864fca6cd8feeff10e8c7dbf9511f9">nn::gfx::ResTextureFile::ResCast</a>( pTextureResource );</div>
<div class="line">    g_pResTextureFile-&gt;<a name="a172"></a><a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html#a84c3acd6fa199ace5cdcb80fb7ce5448">Initialize</a>( &amp;g_Device );</div>
<div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> idxTexture = 0, textureCount = g_pResTextureFile-&gt;<a name="a173"></a><a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html#a632870806392ee42c5446cee5c29e130">GetTextureDic</a>()-&gt;<a name="a174"></a><a class="code" href="classnn_1_1util_1_1_res_dic.html#ac79f27e85e4873cf6da2668540f81f8b">GetCount</a>();</div>
<div class="line">        idxTexture &lt; textureCount; ++idxTexture )</div>
<div class="line">    {</div>
<div class="line">        g_pResTextureFile-&gt;<a name="a175"></a><a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html#a532172ac91b54eaed4cec218c1d102ff">GetResTexture</a>( idxTexture )-&gt;<a name="a176"></a><a class="code" href="classnn_1_1gfx_1_1_res_texture.html#af209de8ecb1db7551215cfd71c611d42">Initialize</a>( &amp;g_Device );</div>
<div class="line"></div>
<div class="line">    }</div>
<div class="line">    g_IndexBg = g_pResTextureFile-&gt;<a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html#a632870806392ee42c5446cee5c29e130">GetTextureDic</a>()-&gt;<a name="a177"></a><a class="code" href="classnn_1_1util_1_1_res_dic.html#abb7a1184f9b22de38501441c20891547">FindIndex</a>(<span class="stringliteral">&quot;Check_BG_01&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(g_IndexBg != -1);</div>
<div class="line">    g_IndexText = g_pResTextureFile-&gt;<a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html#a632870806392ee42c5446cee5c29e130">GetTextureDic</a>()-&gt;<a class="code" href="classnn_1_1util_1_1_res_dic.html#abb7a1184f9b22de38501441c20891547">FindIndex</a>(<span class="stringliteral">&quot;Check_Text_01&quot;</span>);</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>(g_IndexText != -1);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> FinalizeResTextureFile()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> idxTexture = 0, textureCount = g_pResTextureFile-&gt;<a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html#a632870806392ee42c5446cee5c29e130">GetTextureDic</a>()-&gt;<a class="code" href="classnn_1_1util_1_1_res_dic.html#ac79f27e85e4873cf6da2668540f81f8b">GetCount</a>();</div>
<div class="line">        idxTexture &lt; textureCount; ++idxTexture )</div>
<div class="line">    {</div>
<div class="line">        g_pResTextureFile-&gt;<a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html#a532172ac91b54eaed4cec218c1d102ff">GetResTexture</a>( idxTexture )-&gt;<a name="a178"></a><a class="code" href="classnn_1_1gfx_1_1_res_texture.html#af3b4ad1c90b3089e530341f641f275a8">Finalize</a>( &amp;g_Device );</div>
<div class="line">    }</div>
<div class="line">    g_pResTextureFile-&gt;<a name="a179"></a><a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html#a74985a920f7b89440b332549ba1bb1d2">Finalize</a>( &amp;g_Device );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if defined( NN_BUILD_TARGET_PLATFORM_OS_NN ) &amp;&amp; defined( NN_BUILD_APISET_NX )</span></div>
<div class="line"><span class="keywordtype">void</span>* Allocate( <span class="keywordtype">size_t</span> size, <span class="keywordtype">size_t</span> alignment, <span class="keywordtype">void</span>* )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> aligned_alloc( alignment, <a class="code" href="namespacenn_1_1util.html#a20f6772d3ae70168e07e0f39d416d72e">nn::util::align_up</a>(size , alignment));</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="namespacenns_1_1g3d.html#ac23ca3ba1949451319eb3bbaec93a93d">Free</a>( <span class="keywordtype">void</span>* addr, <span class="keywordtype">void</span>* )</div>
<div class="line">{</div>
<div class="line">    free( addr );</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span>* Reallocate( <span class="keywordtype">void</span>* addr, <span class="keywordtype">size_t</span> newSize, <span class="keywordtype">void</span>* )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> realloc( addr, newSize );</div>
<div class="line">}</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> InitializeResources()</div>
<div class="line">{</div>
<div class="line"><span class="preprocessor">#if defined( NN_BUILD_TARGET_PLATFORM_OS_NN ) &amp;&amp; defined( NN_BUILD_APISET_NX )</span></div>
<div class="line">    <span class="comment">// グラフィックスシステムのためのメモリ周りの初期化を行います。</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">size_t</span> GraphicsSystemMemorySize = 8 * 1024 * 1024;</div>
<div class="line">        <a name="a180"></a><a class="code" href="namespacenv.html#a7d85cfdd1bae1b635cc66b8d58077688">nv::SetGraphicsAllocator</a>( Allocate, <a class="code" href="namespacenns_1_1g3d.html#ac23ca3ba1949451319eb3bbaec93a93d">Free</a>, Reallocate, NULL );</div>
<div class="line">        <a name="a181"></a><a class="code" href="namespacenv.html#aacadc57952b370f2286108f5835ce726">nv::InitializeGraphics</a>( malloc( GraphicsSystemMemorySize ), GraphicsSystemMemorySize );</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// グラフィックス開発者向けツールおよびデバッグレイヤのためのメモリアロケータを設定します。</span></div>
<div class="line">    <a name="a182"></a><a class="code" href="namespacenv.html#a5ef00427dfc2493551bb66b37731bb35">nv::SetGraphicsDevtoolsAllocator</a>( Allocate, <a class="code" href="namespacenns_1_1g3d.html#ac23ca3ba1949451319eb3bbaec93a93d">Free</a>, Reallocate, NULL );</div>
<div class="line">    <span class="comment">// GLSLC のためのメモリアロケータを設定します。</span></div>
<div class="line">    <a name="a183"></a><a class="code" href="nvn_tool___glslc_interface_8h.html#af077328b0d3b4282ff8110098ee0e138">glslcSetAllocator</a>( Allocate, <a class="code" href="namespacenns_1_1g3d.html#ac23ca3ba1949451319eb3bbaec93a93d">Free</a>, Reallocate, NULL );</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// メモリ</span></div>
<div class="line">    g_pMemoryHeap.<a name="a184"></a><a class="code" href="classnn_1_1util_1_1_byte_ptr.html#ab1bb92c783f155e2be3e84bd02bcfd61">Reset</a>( malloc( 32 * 1024 * 1024 ) );</div>
<div class="line">    g_pMemory = g_pMemoryHeap;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// レイヤの初期化</span></div>
<div class="line">    InitializeLayer();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ライブラリを初期化</span></div>
<div class="line">    <a name="a185"></a><a class="code" href="namespacenn_1_1gfx.html#a7fdc6aeebf1a1d6cc8a8893bcc3fd128">nn::gfx::Initialize</a>();</div>
<div class="line"></div>
<div class="line">    InitializeDevice();</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if NN_GFX_IS_TARGET_NVN</span></div>
<div class="line">    nn::gfx::Device::DataType&amp; deviceData = <a name="a186"></a><a class="code" href="namespacenn_1_1gfx.html#adbafa89439698491beeecbdb1613de50">nn::gfx::AccessorToData</a>( g_Device );</div>
<div class="line">    <a name="a187"></a><a class="code" href="group__nvn__c__functions.html#ga6f739de39c3818a65b190be3a82cf891">nvnDeviceGetInteger</a>( deviceData.pNvnDevice,</div>
<div class="line">        <a name="a188"></a><a class="code" href="group__nvn__c__enum.html#ggac887e20e2474bb76b87943b0f0be7a50a513596e8b2dc04714d6478aed173a891">NVN_DEVICE_INFO_RESERVED_TEXTURE_DESCRIPTORS</a>, &amp;g_TextureDescriptorBaseIndex );</div>
<div class="line">    <a class="code" href="group__nvn__c__functions.html#ga6f739de39c3818a65b190be3a82cf891">nvnDeviceGetInteger</a>( deviceData.pNvnDevice,</div>
<div class="line">        <a name="a189"></a><a class="code" href="group__nvn__c__enum.html#ggac887e20e2474bb76b87943b0f0be7a50a5b9a26a5aadab05c4a9f8a286718fbc7">NVN_DEVICE_INFO_RESERVED_SAMPLER_DESCRIPTORS</a>, &amp;g_SamplerDescriptorBaseIndex );</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"></div>
<div class="line">    InitializeMemoryPool();</div>
<div class="line">    InitializeInvisibleMemoryPool();</div>
<div class="line"></div>
<div class="line">    InitializeSwapChain();</div>
<div class="line">    InitializeQueue();</div>
<div class="line">    InitializeFramework();</div>
<div class="line"></div>
<div class="line">    InitializeCommandBuffer();</div>
<div class="line">    InitializeViewport();</div>
<div class="line"></div>
<div class="line">    InitializeRasterizerState();</div>
<div class="line"></div>
<div class="line">    InitializeColorBuffer();</div>
<div class="line">    InitializeDepthStencilBuffer();</div>
<div class="line">    InitializeBlurBuffer();</div>
<div class="line"></div>
<div class="line">    InitializeSampler();</div>
<div class="line"></div>
<div class="line">    InitializeBufferDescriptorPool();</div>
<div class="line">    InitializeSamplerDescriptorPool();</div>
<div class="line">    InitializeTextureDescriptorPool();</div>
<div class="line"></div>
<div class="line">    InitializeResTextureFile();</div>
<div class="line"></div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>( g_pMemoryHeap.<a name="a190"></a><a class="code" href="classnn_1_1util_1_1_byte_ptr.html#ab2e58750b882b4b7afb7d3930afef5f7">Distance</a>( g_pMemory.<a class="code" href="classnn_1_1util_1_1_byte_ptr.html#aec6b5a8431e11fcebf681e8ce602c2fb">Get</a>() ) &lt; 32 * 1024 * 1024 );</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>( g_MemoryPoolOffset &lt; static_cast&lt;ptrdiff_t&gt;(g_VisiblePoolMemorySize) );</div>
<div class="line">    <a class="code" href="nn___assert_8h.html#ade59d1d911907a16c0241f8fe3b31542">NN_ASSERT</a>( g_InvisibleMemoryPoolOffset &lt; static_cast&lt;ptrdiff_t&gt;(g_InvisiblePoolMemorySize) );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> FinalizeResources()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// 各オブジェクトを破棄</span></div>
<div class="line">    FinalizeResTextureFile();</div>
<div class="line"></div>
<div class="line">    FinalizeFramework();</div>
<div class="line"></div>
<div class="line">    g_Sampler.<a name="a191"></a><a class="code" href="classnn_1_1gfx_1_1_t_sampler.html#af725b5cfc86c86d203b292253db4c12b">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_BlurColorTextureView.<a name="a192"></a><a class="code" href="classnn_1_1gfx_1_1_t_texture_view.html#a081d672b58ed42d9609bcebc0dbdf635">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_BlurColorTargetView.<a name="a193"></a><a class="code" href="classnn_1_1gfx_1_1_t_color_target_view.html#a3b556b05c50d6ff0f05562a892645890">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_BlurColorBuffer.<a name="a194"></a><a class="code" href="classnn_1_1gfx_1_1_t_texture.html#a6c338d7cb41ca394337e5ed8573dbd3b">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_DepthStencilView.<a name="a195"></a><a class="code" href="classnn_1_1gfx_1_1_t_depth_stencil_view.html#a0d83b18572de6b8327bc2c5f9ff37a3d">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_DepthStencilBuffer.<a class="code" href="classnn_1_1gfx_1_1_t_texture.html#a6c338d7cb41ca394337e5ed8573dbd3b">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_ColorTextureView.<a class="code" href="classnn_1_1gfx_1_1_t_texture_view.html#a081d672b58ed42d9609bcebc0dbdf635">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_ColorTargetView.<a class="code" href="classnn_1_1gfx_1_1_t_color_target_view.html#a3b556b05c50d6ff0f05562a892645890">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_ColorBuffer.<a class="code" href="classnn_1_1gfx_1_1_t_texture.html#a6c338d7cb41ca394337e5ed8573dbd3b">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_RasterizerState.<a name="a196"></a><a class="code" href="classnn_1_1gfx_1_1_t_rasterizer_state.html#a5b5201bf723256cd010bdc073255ead8">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_BufferDescriptorPool.<a name="a197"></a><a class="code" href="classnn_1_1gfx_1_1_t_descriptor_pool.html#ab1876c09dc1056b8c9838530b70da015">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_TextureDescriptorPool.<a class="code" href="classnn_1_1gfx_1_1_t_descriptor_pool.html#ab1876c09dc1056b8c9838530b70da015">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_SamplerDescriptorPool.<a class="code" href="classnn_1_1gfx_1_1_t_descriptor_pool.html#ab1876c09dc1056b8c9838530b70da015">Finalize</a>( &amp;g_Device );</div>
<div class="line"></div>
<div class="line">    g_ViewportScissor.<a name="a198"></a><a class="code" href="classnn_1_1gfx_1_1_t_viewport_scissor_state.html#abe11609e98c342a9739bc67d2e18d50f">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_CommandBuffer.<a name="a199"></a><a class="code" href="classnn_1_1gfx_1_1_t_command_buffer.html#a9f586139056ebe1b952e2aebe4be9cdf">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_SwapChain.<a name="a200"></a><a class="code" href="classnn_1_1gfx_1_1_t_swap_chain.html#a9c688b45bc96aa437db41130d9c9993c">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_Queue.<a name="a201"></a><a class="code" href="classnn_1_1gfx_1_1_t_queue.html#acf2af9f9d16498d6bd45f72d3a79b567">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_InvisibleMemoryPool.<a name="a202"></a><a class="code" href="classnn_1_1gfx_1_1_t_memory_pool.html#aad1f3e656aea98302fd5266262a46441">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_MemoryPool.<a class="code" href="classnn_1_1gfx_1_1_t_memory_pool.html#aad1f3e656aea98302fd5266262a46441">Finalize</a>( &amp;g_Device );</div>
<div class="line">    g_Device.<a name="a203"></a><a class="code" href="classnn_1_1gfx_1_1_t_device.html#a6a6db34b0acc447ff87e6d07e813ae0b">Finalize</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ライブラリを終了</span></div>
<div class="line">    <a name="a204"></a><a class="code" href="namespacenn_1_1gfx.html#a8e776d92173c3073b31a5cf65e306dfc">nn::gfx::Finalize</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// レイヤの終了処理</span></div>
<div class="line">    FinalizeLayer();</div>
<div class="line"></div>
<div class="line">    free( g_pMemoryHeap.<a class="code" href="classnn_1_1util_1_1_byte_ptr.html#aec6b5a8431e11fcebf681e8ce602c2fb">Get</a>() );</div>
<div class="line">    free( g_pVisiblePoolMemory );</div>
<div class="line">    free( g_pInvisiblePoolMemory );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> InitializeFs()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="classnn_1_1_result.html">nn::Result</a> result;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">size_t</span> cacheSize = 0;</div>
<div class="line">    result = <a name="a205"></a><a class="code" href="namespacenn_1_1fs.html#a5df6e3385c795a5bd046790ef7f17f2d">nn::fs::QueryMountRomCacheSize</a>(&amp;cacheSize);</div>
<div class="line">    <a name="a206"></a><a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>( result.<a class="code" href="classnn_1_1_result.html#a80792d8ec8b6b9e9b34025100baa67ec">IsSuccess</a>() );</div>
<div class="line"></div>
<div class="line">    g_MountRomCacheBuffer = malloc(cacheSize);</div>
<div class="line">    <a name="a207"></a><a class="code" href="nn___abort_8h.html#ae872300a22548da2b586ef68d2c048a3">NN_ABORT_UNLESS_NOT_NULL</a>(g_MountRomCacheBuffer);</div>
<div class="line"></div>
<div class="line">    result = <a name="a208"></a><a class="code" href="namespacenn_1_1fs.html#a2e453fe1fbf8f818dc45bbd2897105cd">nn::fs::MountRom</a>(<span class="stringliteral">&quot;Contents&quot;</span>, g_MountRomCacheBuffer, cacheSize);</div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>( result.<a class="code" href="classnn_1_1_result.html#a80792d8ec8b6b9e9b34025100baa67ec">IsSuccess</a>() );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> FinalizeFs()</div>
<div class="line">{</div>
<div class="line">    <a name="a209"></a><a class="code" href="namespacenn_1_1fs.html#ac8a95249afd4a87a55d319dfecb0466c">nn::fs::Unmount</a>(<span class="stringliteral">&quot;Contents&quot;</span>);</div>
<div class="line"></div>
<div class="line">    free(g_MountRomCacheBuffer);</div>
<div class="line">    g_MountRomCacheBuffer = NULL;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// ユーザーピクセルシェーダ</span></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="preprocessor">#define SHADER_SOURCE( ... ) #__VA_ARGS__</span></div>
<div class="line"><span class="comment">// モザイクシェーダ</span></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> MOSAIC_PS_SOURCE[] =</div>
<div class="line"><span class="stringliteral">&quot;#version 430 \n&quot;</span></div>
<div class="line">SHADER_SOURCE(</div>
<div class="line"></div>
<div class="line">layout( std140, binding = 1 ) uniform Model</div>
<div class="line">{</div>
<div class="line">    uniform mat4 u_userMatrix;</div>
<div class="line">    uniform vec4 u_color0;</div>
<div class="line">    uniform vec4 u_color1;</div>
<div class="line">    uniform vec2 u_uv_src;</div>
<div class="line">    uniform vec2 u_uv_size;</div>
<div class="line">    uniform vec4 u_layer;</div>
<div class="line">    <span class="keywordtype">float</span> rate;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">// ユーザー定義のコンスタントバッファ</span></div>
<div class="line">layout(std140, binding = 2) uniform TextureParam</div>
<div class="line">{</div>
<div class="line">    uniform vec2        u_pixel_size;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line">layout( binding = 0 ) uniform sampler2D texture0;</div>
<div class="line"></div>
<div class="line">layout( location = 0 ) in vec4 v_texCoord;</div>
<div class="line">layout( location = 1 ) in vec4 v_color;</div>
<div class="line"></div>
<div class="line">out vec4 o_Color;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> main()</div>
<div class="line">{</div>
<div class="line">    vec4 out_color = vec4( 0 );</div>
<div class="line">    vec2 uv = v_texCoord.xy;</div>
<div class="line">    vec2 baseUv = floor( uv / (u_pixel_size * 4.0) );</div>
<div class="line">    vec4 color0 = vec4( 0 );</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">float</span> x = 0.5; x &lt; 4.0; x+=1.0) {</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">float</span> y = 0.5; y &lt; 4.0; y+=1.0) {</div>
<div class="line">            color0 += textureLod(texture0, u_pixel_size * (baseUv * 4.0 + vec2(x, y)), 0.0 );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    color0 /= 16.0;</div>
<div class="line">    o_Color = color0;</div>
<div class="line">}</div>
<div class="line">);</div>
<div class="line"></div>
<div class="line"><span class="comment">// カスタムシェーダで使用するコンスタントバッファの構造体</span></div>
<div class="line"><span class="keyword">struct </span>PixelSize</div>
<div class="line">{</div>
<div class="line">    <a name="_a210"></a><a class="code" href="structnn_1_1util_1_1_float2.html">nn::util::Float2</a> u_pixel_size;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// ユーザーシェーダの初期化</span></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><a name="_a211"></a><a class="code" href="classnn_1_1gfx_1_1_t_shader.html">nn::gfx::Shader</a> g_MosaicPixelShader;</div>
<div class="line"><span class="keywordtype">int</span> g_SlotPixelSize;</div>
<div class="line"><span class="keywordtype">void</span> InitializeUserShader()</div>
<div class="line">{</div>
<div class="line">    <a name="_a212"></a><a class="code" href="classnn_1_1gfx_1_1_shader_info.html">nn::gfx::Shader::InfoType</a> info;</div>
<div class="line">    info.<a name="a213"></a><a class="code" href="classnn_1_1gfx_1_1_shader_info.html#a102fc1aa14553548dabaab13d6a7c6c8">SetDefault</a>();</div>
<div class="line">    info.<a name="a214"></a><a class="code" href="classnn_1_1gfx_1_1_shader_info.html#a281495fe6c18ea882544a90391dba39b">SetSeparationEnabled</a>( <span class="keyword">true</span> );</div>
<div class="line"></div>
<div class="line">    <a name="_a215"></a><a class="code" href="structnn_1_1gfx_1_1_shader_code.html">nn::gfx::ShaderCode</a> psCode;</div>
<div class="line">    psCode.<a name="a216"></a><a class="code" href="structnn_1_1gfx_1_1_shader_code.html#ac076127868ed0c71a6140a9803ec6d16">codeSize</a> = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(strlen( MOSAIC_PS_SOURCE ));</div>
<div class="line">    psCode.<a name="a217"></a><a class="code" href="structnn_1_1gfx_1_1_shader_code.html#a3e8dc06f0f818556a4b2218d5efc49a6">pCode</a>    = MOSAIC_PS_SOURCE;</div>
<div class="line"></div>
<div class="line">    info.<a name="a218"></a><a class="code" href="classnn_1_1gfx_1_1_shader_info.html#a76d3b906c15eebfb00589b5969d242bc">SetShaderCodePtr</a>( <a name="a219"></a><a class="code" href="namespacenn_1_1gfx.html#a23a67c7d8f6b5765e2de8173797f73fea4af13ef64af0ee06eb539013de2be40a">nn::gfx::ShaderStage_Pixel</a>, &amp;psCode );</div>
<div class="line">    info.<a name="a220"></a><a class="code" href="classnn_1_1gfx_1_1_shader_info.html#a9b2040b1e673b5a12445fd28cdb2b0e3">SetSourceFormat</a>(<a name="a221"></a><a class="code" href="namespacenn_1_1gfx.html#adc920051ac721033328c13cf667901afa199717e9b16f6d807bd3116221da9db0">nn::gfx::ShaderSourceFormat_Glsl</a>);</div>
<div class="line">    info.<a name="a222"></a><a class="code" href="classnn_1_1gfx_1_1_shader_info.html#aa740e0a0c30b5b639189c98ab450b2a7">SetCodeType</a>( <a name="a223"></a><a class="code" href="namespacenn_1_1gfx.html#ad67937775401e7564a312a54dedf6455a3cf271292131cceee9c228c73f9f788e">nn::gfx::ShaderCodeType_Source</a> );</div>
<div class="line">    <a class="code" href="namespacenn_1_1gfx.html#a52eb9f5e1bec94e73a2bb152af8e3d91">nn::gfx::ShaderInitializeResult</a> result = g_MosaicPixelShader.<a name="a224"></a><a class="code" href="classnn_1_1gfx_1_1_t_shader.html#adc9b3152309b5c3af8854cdb08adceab">Initialize</a>(&amp;g_Device, info);</div>
<div class="line">    NN_SDK_ASSERT( result == <a name="a225"></a><a class="code" href="namespacenn_1_1gfx.html#a52eb9f5e1bec94e73a2bb152af8e3d91ad542c72930fffff3ee80a71bef4e3c07">nn::gfx::ShaderInitializeResult_Success</a>, <span class="stringliteral">&quot;InitializeShader() failed (%d)\n&quot;</span>, result);</div>
<div class="line">    <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>( result );</div>
<div class="line">    g_SlotPixelSize = g_MosaicPixelShader.<a name="a226"></a><a class="code" href="classnn_1_1gfx_1_1_t_shader.html#a40f2b7445a7507aa747549259ce13a86">GetInterfaceSlot</a>( <a class="code" href="namespacenn_1_1gfx.html#a23a67c7d8f6b5765e2de8173797f73fea4af13ef64af0ee06eb539013de2be40a">nn::gfx::ShaderStage_Pixel</a>, <a name="a227"></a><a class="code" href="namespacenn_1_1gfx.html#ab1daeef6bae19eb4973f832b77ce72a6ab7fbbea1768272a153568501e23161c4">nn::gfx::ShaderInterfaceType_ConstantBuffer</a>, <span class="stringliteral">&quot;TextureParam&quot;</span>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// プリミティブレンダラの初期化</span></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><a name="_a228"></a><a class="code" href="classnn_1_1mem_1_1_standard_allocator.html">nn::mem::StandardAllocator</a>  g_PrimitiveRendererAllocator;</div>
<div class="line"><a name="_a229"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html">nns::gfx::PrimitiveRenderer::Renderer</a>* g_pPrimitiveRenderer;</div>
<div class="line"><span class="keywordtype">void</span>*                       g_pPrimitiveRendererAllocatorMemory = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//--------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//  メモリ確保関数</span></div>
<div class="line"><span class="comment">//--------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="keywordtype">void</span>* <a class="code" href="namespacenn.html#adce256969f9afd1f786f9d93241062d4">AllocateFunction</a>(<span class="keywordtype">size_t</span> size, <span class="keywordtype">size_t</span> alignment, <span class="keywordtype">void</span>* pUserData)</div>
<div class="line">{</div>
<div class="line">    NN_SDK_ASSERT_NOT_NULL(pUserData);</div>
<div class="line">    <a class="code" href="classnn_1_1mem_1_1_standard_allocator.html">nn::mem::StandardAllocator</a>* pAllocator = <span class="keyword">static_cast&lt;</span><a class="code" href="classnn_1_1mem_1_1_standard_allocator.html">nn::mem::StandardAllocator</a>*<span class="keyword">&gt;</span>(pUserData);</div>
<div class="line">    <span class="keywordflow">return</span> pAllocator-&gt;<a name="a230"></a><a class="code" href="classnn_1_1mem_1_1_standard_allocator.html#a53438b7a6199e4f100c59312d2f123cf">Allocate</a>(size, alignment);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//--------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//  メモリ開放関数</span></div>
<div class="line"><span class="comment">//--------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="namespacenn.html#ac4bc1dec66991644b7abd9f9cd9d0ca6">DeallocateFunction</a>(<span class="keywordtype">void</span>* ptr, <span class="keywordtype">void</span>* pUserData)</div>
<div class="line">{</div>
<div class="line">    NN_SDK_ASSERT_NOT_NULL(pUserData);</div>
<div class="line">    <a class="code" href="classnn_1_1mem_1_1_standard_allocator.html">nn::mem::StandardAllocator</a>* pAllocator = <span class="keyword">static_cast&lt;</span><a class="code" href="classnn_1_1mem_1_1_standard_allocator.html">nn::mem::StandardAllocator</a>*<span class="keyword">&gt;</span>(pUserData);</div>
<div class="line">    pAllocator-&gt;<a name="a231"></a><a class="code" href="classnn_1_1mem_1_1_standard_allocator.html#ad81377b59c5e1532869b003cd9b5f318">Free</a>(ptr);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> InitializePrimitiveRenderer()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">size_t</span> workMemorySize = 1024 * 1024 * 64;</div>
<div class="line">    g_pPrimitiveRendererAllocatorMemory = malloc( workMemorySize );</div>
<div class="line">    g_PrimitiveRendererAllocator.<a name="a232"></a><a class="code" href="classnn_1_1mem_1_1_standard_allocator.html#acdb0dd01602811a4f469c87c348d3ed1">Initialize</a>( g_pPrimitiveRendererAllocatorMemory, workMemorySize );</div>
<div class="line"></div>
<div class="line">    <a name="_a233"></a><a class="code" href="structnns_1_1gfx_1_1_primitive_renderer_1_1_renderer_info.html">nns::gfx::PrimitiveRenderer::RendererInfo</a> info;</div>
<div class="line">    info.<a name="a234"></a><a class="code" href="structnns_1_1gfx_1_1_primitive_renderer_1_1_renderer_info.html#a89202489e3f356b0d85fb8b42db07501">SetDefault</a>();</div>
<div class="line">    info.<a name="a235"></a><a class="code" href="structnns_1_1gfx_1_1_primitive_renderer_1_1_renderer_info.html#aeb60795f2f1e26948570a117fffd0745">SetAllocator</a>(AllocateFunction, &amp;g_PrimitiveRendererAllocator);</div>
<div class="line">    info.<a name="a236"></a><a class="code" href="structnns_1_1gfx_1_1_primitive_renderer_1_1_renderer_info.html#ad543ca629e8b58a35b5bb03009d430c2">SetAdditionalBufferSize</a>(1024 * 4);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ダブルバッファで運用する場合は、SetMultiBufferQuantity で 2 を指定し、</span></div>
<div class="line">    <span class="comment">// プリミティブレンダラ内部のバッファをダブルにしたうえで、</span></div>
<div class="line">    <span class="comment">// g_pPrimitiveRenderer-&gt;Update(); で利用するバッファを選択( 0 -&gt; 1 -&gt; 0 -&gt; 1 )する</span></div>
<div class="line">    info.<a name="a237"></a><a class="code" href="structnns_1_1gfx_1_1_primitive_renderer_1_1_renderer_info.html#ae4fdc786d4c9351969be4f4c3051b075">SetMultiBufferQuantity</a>( 2 );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// PrimitiveRendererのインスタンス</span></div>
<div class="line">    g_pPrimitiveRenderer = nns::gfx::PrimitiveRenderer::CreateRenderer( &amp;g_Device, info );</div>
<div class="line">    g_pPrimitiveRenderer-&gt;<a name="a238"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a5b038f4c4f55a83a1f8d13dd0f730c56">SetScreenWidth</a>(g_RenderWidth);</div>
<div class="line">    g_pPrimitiveRenderer-&gt;<a name="a239"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#af8856a72a7ba65bbade228b81da28073">SetScreenHeight</a>(g_RenderHeight);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ユーザーシェーダを初期化する</span></div>
<div class="line">    InitializeUserShader();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// プリミティブレンダラの破棄</span></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="keywordtype">void</span> FinalizePrimitiveRenderer()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// ユーザーシェーダ破棄</span></div>
<div class="line">    g_MosaicPixelShader.<a name="a240"></a><a class="code" href="classnn_1_1gfx_1_1_t_shader.html#a430eda57347c0d10da6d3d1b1da71780">Finalize</a>( &amp;g_Device );</div>
<div class="line"></div>
<div class="line">    nns::gfx::PrimitiveRenderer::DestroyRenderer( g_pPrimitiveRenderer, &amp;g_Device, DeallocateFunction, &amp;g_PrimitiveRendererAllocator );</div>
<div class="line">    g_PrimitiveRendererAllocator.<a name="a241"></a><a class="code" href="classnn_1_1mem_1_1_standard_allocator.html#a6027bb6b016064edb1b007651d4af419">Finalize</a>();</div>
<div class="line">    free(g_pPrimitiveRendererAllocatorMemory);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// デバッグフォントの初期化</span></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><a name="_a242"></a><a class="code" href="classnn_1_1gfx_1_1util_1_1_debug_font_text_writer.html">nn::gfx::util::DebugFontTextWriter</a> g_Writer;</div>
<div class="line"><a class="code" href="classnn_1_1util_1_1_byte_ptr.html">nn::util::BytePtr</a> g_DebugFontHeap( NULL );</div>
<div class="line"><span class="keywordtype">void</span> InitializeDebugFont()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> charCountMax = 1024;</div>
<div class="line">    <a name="_a243"></a><a class="code" href="classnn_1_1gfx_1_1util_1_1_debug_font_text_writer_info.html">nn::gfx::util::DebugFontTextWriterInfo</a> info;</div>
<div class="line">    info.<a name="a244"></a><a class="code" href="classnn_1_1gfx_1_1util_1_1_debug_font_text_writer_info.html#aa440f107af3f76b1dcfcbdeeecdb80df">SetDefault</a>();</div>
<div class="line">    info.<a name="a245"></a><a class="code" href="classnn_1_1gfx_1_1util_1_1_debug_font_text_writer_info.html#a6a9a92ff1a8eee5f7097bd26fec022d5">SetCharCountMax</a>(charCountMax);</div>
<div class="line">    info.<a name="a246"></a><a class="code" href="classnn_1_1gfx_1_1util_1_1_debug_font_text_writer_info.html#a58fd1ce3d7c04c377caa6365baf6a73f">SetUserMemoryPoolEnabled</a>(<span class="keyword">false</span>);</div>
<div class="line">    info.<a name="a247"></a><a class="code" href="classnn_1_1gfx_1_1util_1_1_debug_font_text_writer_info.html#a0fd137c62c2443a70cc6455a573dd80a">SetBufferCount</a>(2);</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">size_t</span> debugFontHeapSize = <a name="a248"></a><a class="code" href="classnn_1_1gfx_1_1util_1_1_debug_font_text_writer.html#a752aca2a08b274bc0fea3d6d64edc689">nn::gfx::util::DebugFontTextWriter::GetRequiredMemorySize</a>(</div>
<div class="line">        &amp;g_Device,</div>
<div class="line">        info</div>
<div class="line">        );</div>
<div class="line">    g_DebugFontHeap = <a class="code" href="classnn_1_1util_1_1_byte_ptr.html">nn::util::BytePtr</a>(<span class="keyword">new</span> uint8_t[debugFontHeapSize]);</div>
<div class="line"></div>
<div class="line">    g_Writer.<a name="a249"></a><a class="code" href="classnn_1_1gfx_1_1util_1_1_debug_font_text_writer.html#acf09a467aa1d170837459a621e3bc93c">Initialize</a>(</div>
<div class="line">        &amp;g_Device,</div>
<div class="line">        info,</div>
<div class="line">        g_DebugFontHeap.<a class="code" href="classnn_1_1util_1_1_byte_ptr.html#aec6b5a8431e11fcebf681e8ce602c2fb">Get</a>(),</div>
<div class="line">        debugFontHeapSize,</div>
<div class="line">        NULL,</div>
<div class="line">        0,</div>
<div class="line">        0</div>
<div class="line">        );</div>
<div class="line"></div>
<div class="line">    g_Writer.<a name="a250"></a><a class="code" href="classnn_1_1gfx_1_1util_1_1_debug_font_text_writer.html#a6f4db4c5eadb41c5f31ecefd96c4c52e">SetDisplayWidth</a>( g_RenderWidth );</div>
<div class="line">    g_Writer.<a name="a251"></a><a class="code" href="classnn_1_1gfx_1_1util_1_1_debug_font_text_writer.html#a2e2a901e9f4a1e9112b6b3b7060663a7">SetDisplayHeight</a>( g_RenderHeight );</div>
<div class="line">    g_Writer.<a name="a252"></a><a class="code" href="classnn_1_1gfx_1_1util_1_1_debug_font_text_writer.html#a6ae5ad08cfdc1de95eebc1f2546dbb26">SetTextureDescriptor</a>(&amp;g_TextureDescriptorPool, g_TextureDescriptorBaseIndex + 3);</div>
<div class="line">    g_Writer.<a name="a253"></a><a class="code" href="classnn_1_1gfx_1_1util_1_1_debug_font_text_writer.html#a751920e1d6ef0f192510fe528f400a46">SetSamplerDescriptor</a>(&amp;g_SamplerDescriptorPool, g_SamplerDescriptorBaseIndex);</div>
<div class="line">    g_Writer.<a name="a254"></a><a class="code" href="classnn_1_1gfx_1_1util_1_1_debug_font_text_writer.html#a9969b2360cc68e1ec7309a5c0066b9e6">SetTextColor</a>( <a name="a255"></a><a class="code" href="classnn_1_1util_1_1_color4u8.html#a491184555fc9bbc5a4020fa8d37c70ac">nn::util::Color4u8::Black</a>() );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// デバッグフォントの破棄</span></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="keywordtype">void</span> FinalizeDebugFont()</div>
<div class="line">{</div>
<div class="line">    g_Writer.<a name="a256"></a><a class="code" href="classnn_1_1gfx_1_1util_1_1_debug_font_text_writer.html#abd753cfd7a11120431745c933bbd5be6">Finalize</a>();</div>
<div class="line">    <span class="keyword">delete</span>[] <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(g_DebugFontHeap.<a class="code" href="classnn_1_1util_1_1_byte_ptr.html#aec6b5a8431e11fcebf681e8ce602c2fb">Get</a>());</div>
<div class="line">    g_DebugFontHeap.<a class="code" href="classnn_1_1util_1_1_byte_ptr.html#ab1bb92c783f155e2be3e84bd02bcfd61">Reset</a>(<span class="keyword">nullptr</span>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// 負荷メーターの初期化</span></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="preprocessor">#if defined( NN_BUILD_CONFIG_OS_WIN )</span></div>
<div class="line"><span class="comment">// windows 版では nn::os::SetThreadCoreMask による設定が効かない場合があるため</span></div>
<div class="line"><span class="comment">// コア番号は常に 0 を返すようにする。</span></div>
<div class="line"><span class="keywordtype">int</span> GetFixedCoreNumber()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>*  meterMemory;</div>
<div class="line"><span class="keywordtype">void</span> InitializeLoadMeter()</div>
<div class="line">{</div>
<div class="line">    <a name="_a257"></a><a class="code" href="classnn_1_1perf_1_1_load_meter_center_info.html">nn::perf::LoadMeterCenterInfo</a> info;</div>
<div class="line">    info.<a name="a258"></a><a class="code" href="classnn_1_1perf_1_1_load_meter_center_info.html#a372f6f660e8d835bdc8caf0805784a3f">SetCoreCount</a>( 1 );</div>
<div class="line">    info.<a name="a259"></a><a class="code" href="classnn_1_1perf_1_1_load_meter_center_info.html#a9075d3e6987564b7037373b5b42bff53">SetCpuBufferCount</a>( 2 );</div>
<div class="line">    info.<a name="a260"></a><a class="code" href="classnn_1_1perf_1_1_load_meter_center_info.html#aeaae49849ef5a404ecce49d34f2d48d4">SetGpuBufferCount</a>( 3 );</div>
<div class="line">    info.<a name="a261"></a><a class="code" href="classnn_1_1perf_1_1_load_meter_center_info.html#aecf8347128518aee83e2680cf6ca7b64">SetCpuSectionCountMax</a>( 64 );</div>
<div class="line">    info.<a name="a262"></a><a class="code" href="classnn_1_1perf_1_1_load_meter_center_info.html#aa73627b39ed7d2f96ed72b34990c8f34">SetGpuSectionCountMax</a>( 64 );</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">size_t</span> memorySize = <a name="a263"></a><a class="code" href="perf___profile_8h.html#a8fc2378461e31c13d9766aad6676bff7">NN_PERF_GET_BUFFER_SIZE</a>(info);</div>
<div class="line">    <span class="keywordtype">size_t</span> memoryAlignment = <a name="a264"></a><a class="code" href="perf___profile_8h.html#a9c4e7431042db68277fbd6f63c33a035">NN_PERF_GET_BUFFER_ALIGNMENT</a>();</div>
<div class="line">    meterMemory = <a class="code" href="namespacenn.html#adce256969f9afd1f786f9d93241062d4">AllocateFunction</a>(memorySize, memoryAlignment, &amp;g_PrimitiveRendererAllocator);</div>
<div class="line">    <span class="keywordtype">size_t</span> memoryPoolSize = <a name="a265"></a><a class="code" href="perf___profile_8h.html#ac6f458ed1b565d83af56a049f31527de">NN_PERF_GET_MEMORY_POOL_SIZE</a>( &amp;g_Device, info );</div>
<div class="line">    g_MemoryPoolOffset = <a class="code" href="namespacenn_1_1util.html#a20f6772d3ae70168e07e0f39d416d72e">nn::util::align_up</a>( g_MemoryPoolOffset, <a name="a266"></a><a class="code" href="perf___profile_8h.html#a31e8d9f2f9b8b734db032e817b609fac">NN_PERF_GET_MEMORY_POOL_ALIGNMENT</a>( &amp;g_Device, info ) );</div>
<div class="line">    <a name="a267"></a><a class="code" href="perf___profile_8h.html#ad2c6edbe8cd1195e4d4a2b8cc07700dc">NN_PERF_INITIALIZE_METER</a>( &amp;g_Device, info,</div>
<div class="line">                                meterMemory, memorySize,</div>
<div class="line">                                &amp;g_MemoryPool, g_MemoryPoolOffset, memoryPoolSize );</div>
<div class="line">    g_MemoryPoolOffset += memoryPoolSize;</div>
<div class="line"><span class="preprocessor">#if defined( NN_BUILD_CONFIG_OS_WIN )</span></div>
<div class="line">    <a name="a268"></a><a class="code" href="perf___profile_8h.html#a3506f976dd0501c40d1605db7811ceed">NN_PERF_SET_GET_CORE_NUMBER_FUNCTION</a>(GetFixedCoreNumber);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// 負荷メーターの破棄</span></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="keywordtype">void</span> FinalizeLoadMeter()</div>
<div class="line">{</div>
<div class="line">    <a name="a269"></a><a class="code" href="perf___profile_8h.html#a57c0ba89abab652f51fb46e64c498628">NN_PERF_FINALIZE_METER</a>( &amp;g_Device);</div>
<div class="line">    <a class="code" href="namespacenn.html#ac4bc1dec66991644b7abd9f9cd9d0ca6">DeallocateFunction</a>(meterMemory, &amp;g_PrimitiveRendererAllocator);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// 独自頂点バッファを生成</span></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="keywordtype">int</span> CreateUserMesh( nns::gfx::PrimitiveRenderer::PrimitiveMesh* pMeshBuffer, <span class="keywordtype">bool</span> bUseVertexColor, <span class="keywordtype">bool</span> bUseVertexUv )</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> width  = 0.5f;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> height = 0.5f;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> depth  = 0.5f;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// インデックスバッファを設定します。</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> uint32_t FaceTable[6][4] =</div>
<div class="line">    {</div>
<div class="line">        { 0, 1, 2, 3 }, <span class="comment">// Front</span></div>
<div class="line">        { 3, 2, 6, 7 }, <span class="comment">// Right</span></div>
<div class="line">        { 7, 6, 5, 4 }, <span class="comment">// Back</span></div>
<div class="line">        { 4, 5, 1, 0 }, <span class="comment">// Left</span></div>
<div class="line">        { 1, 5, 6, 2 }, <span class="comment">// Top</span></div>
<div class="line">        { 4, 0, 3, 7 }, <span class="comment">// Bottom</span></div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 頂点バッファを設定します。</span></div>
<div class="line">    <span class="keyword">const</span> <a name="_a270"></a><a class="code" href="structnn_1_1util_1_1_float3.html">nn::util::Float3</a> VertexPos[8] =</div>
<div class="line">    {</div>
<div class="line">        <a name="a271"></a><a class="code" href="structnn_1_1util_1_1_float3.html#a01387baed3bc495cb816ecae205bc27b">NN_UTIL_FLOAT_3_INITIALIZER</a>(  width / 2.f,  height, -depth / 2.f ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float3.html#a01387baed3bc495cb816ecae205bc27b">NN_UTIL_FLOAT_3_INITIALIZER</a>(        width, -height,       -depth ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float3.html#a01387baed3bc495cb816ecae205bc27b">NN_UTIL_FLOAT_3_INITIALIZER</a>(       -width, -height,       -depth ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float3.html#a01387baed3bc495cb816ecae205bc27b">NN_UTIL_FLOAT_3_INITIALIZER</a>( -width / 2.f,  height, -depth / 2.f ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float3.html#a01387baed3bc495cb816ecae205bc27b">NN_UTIL_FLOAT_3_INITIALIZER</a>(  width / 2.f,  height,  depth / 2.f ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float3.html#a01387baed3bc495cb816ecae205bc27b">NN_UTIL_FLOAT_3_INITIALIZER</a>(        width, -height,        depth ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float3.html#a01387baed3bc495cb816ecae205bc27b">NN_UTIL_FLOAT_3_INITIALIZER</a>(       -width, -height,        depth ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float3.html#a01387baed3bc495cb816ecae205bc27b">NN_UTIL_FLOAT_3_INITIALIZER</a>( -width / 2.f,  height,  depth / 2.f ),</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structnn_1_1util_1_1_float2.html">nn::util::Float2</a> VertexUv[4] =</div>
<div class="line">    {</div>
<div class="line">        <a name="a272"></a><a class="code" href="structnn_1_1util_1_1_float2.html#a2ae1f80ff52f5a776b3fee148d4401e7">NN_UTIL_FLOAT_2_INITIALIZER</a>(  0.0f,  0.0f ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float2.html#a2ae1f80ff52f5a776b3fee148d4401e7">NN_UTIL_FLOAT_2_INITIALIZER</a>(  0.0f,  1.0f ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float2.html#a2ae1f80ff52f5a776b3fee148d4401e7">NN_UTIL_FLOAT_2_INITIALIZER</a>(  1.0f,  1.0f ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float2.html#a2ae1f80ff52f5a776b3fee148d4401e7">NN_UTIL_FLOAT_2_INITIALIZER</a>(  1.0f,  0.0f ),</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <a name="_a273"></a><a class="code" href="structnn_1_1util_1_1_float4.html">nn::util::Float4</a> <a class="code" href="namespacenn_1_1ui2d.html#a2ce8c9aa192009cc3d74f866831b89e1">VertexColor</a>[ 8 ] =</div>
<div class="line">    {</div>
<div class="line">        <a name="a274"></a><a class="code" href="structnn_1_1util_1_1_float4.html#a02f002a9ac1ba695b33166697f735ac6">NN_UTIL_FLOAT_4_INITIALIZER</a>( 1.0f, 0.2f, 0.2f, 1.0f ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float4.html#a02f002a9ac1ba695b33166697f735ac6">NN_UTIL_FLOAT_4_INITIALIZER</a>( 0.2f, 1.0f, 0.2f, 1.0f ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float4.html#a02f002a9ac1ba695b33166697f735ac6">NN_UTIL_FLOAT_4_INITIALIZER</a>( 0.2f, 0.2f, 1.0f, 1.0f ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float4.html#a02f002a9ac1ba695b33166697f735ac6">NN_UTIL_FLOAT_4_INITIALIZER</a>( 1.0f, 0.2f, 0.2f, 1.0f ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float4.html#a02f002a9ac1ba695b33166697f735ac6">NN_UTIL_FLOAT_4_INITIALIZER</a>( 0.2f, 1.0f, 0.2f, 1.0f ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float4.html#a02f002a9ac1ba695b33166697f735ac6">NN_UTIL_FLOAT_4_INITIALIZER</a>( 0.2f, 0.2f, 1.0f, 1.0f ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float4.html#a02f002a9ac1ba695b33166697f735ac6">NN_UTIL_FLOAT_4_INITIALIZER</a>( 1.0f, 0.2f, 0.2f, 1.0f ),</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float4.html#a02f002a9ac1ba695b33166697f735ac6">NN_UTIL_FLOAT_4_INITIALIZER</a>( 0.2f, 1.0f, 0.2f, 1.0f ),</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> xScale = 0.8f;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> yScale = 0.8f;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> zScale = 0.8f;</div>
<div class="line">    uint32_t idxFace = 0;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> numIndices = 36;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> numVertices = 24;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 頂点フォーマット決定</span></div>
<div class="line">    uint32_t format = nns::gfx::PrimitiveRenderer::VertexFormat_Pos;</div>
<div class="line">    <span class="keywordflow">if</span> ( bUseVertexColor == <span class="keyword">true</span> )</div>
<div class="line">    {</div>
<div class="line">        format |= nns::gfx::PrimitiveRenderer::VertexFormat_Color;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> ( bUseVertexUv == <span class="keyword">true</span> )</div>
<div class="line">    {</div>
<div class="line">        format |= nns::gfx::PrimitiveRenderer::VertexFormat_Uv;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// メッシュを初期化</span></div>
<div class="line">    <span class="keywordflow">if</span> ( pMeshBuffer-&gt;Initialize( g_pPrimitiveRenderer-&gt;<a name="a275"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a02b5e032a269ef7b9d0cf77d026d6800">GetGpuBuffer</a>(), numVertices, numIndices, <span class="keyword">static_cast&lt;</span>nns::gfx::PrimitiveRenderer::VertexFormat<span class="keyword">&gt;</span>( format ) ) == false )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="comment">// インデックスバッファを設定します。</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">size_t</span> idx = 0;</div>
<div class="line">        uint32_t* pIndexData = pMeshBuffer-&gt;GetIndexBufferCpuAddress();</div>
<div class="line">        <span class="keywordflow">for</span>( idxFace = 0; idxFace &lt; 6; idxFace++ )</div>
<div class="line">        {</div>
<div class="line">            pIndexData[idx++] = idxFace * 4 + 0;</div>
<div class="line">            pIndexData[idx++] = idxFace * 4 + 1;</div>
<div class="line">            pIndexData[idx++] = idxFace * 4 + 2;</div>
<div class="line"></div>
<div class="line">            pIndexData[idx++] = idxFace * 4 + 0;</div>
<div class="line">            pIndexData[idx++] = idxFace * 4 + 2;</div>
<div class="line">            pIndexData[idx++] = idxFace * 4 + 3;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">size_t</span> idxVertex = 0;</div>
<div class="line">    idxFace = 0;</div>
<div class="line"></div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_float3.html">nn::util::Float3</a>* pPos = <span class="keyword">static_cast&lt;</span><a class="code" href="structnn_1_1util_1_1_float3.html">nn::util::Float3</a>*<span class="keyword">&gt;</span>( pMeshBuffer-&gt;GetVertexBufferCpuAddress(nns::gfx::PrimitiveRenderer::VertexAttribute_Pos));</div>
<div class="line"></div>
<div class="line">        <span class="comment">// 頂点座標</span></div>
<div class="line">        <span class="keywordtype">int</span> idxCorner = 0;</div>
<div class="line">        <span class="keywordflow">for</span>( idxFace = 0; idxFace &lt; 6; idxFace++ )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">for</span>( idxCorner = 0; idxCorner &lt; 4; idxCorner++ )</div>
<div class="line">            {</div>
<div class="line">                <span class="keyword">const</span> <span class="keywordtype">size_t</span> index = FaceTable[idxFace][idxCorner];</div>
<div class="line"></div>
<div class="line">                <span class="comment">// 位置</span></div>
<div class="line">                pPos[idxVertex].<a name="a276"></a>x = VertexPos[index].x * xScale;</div>
<div class="line">                pPos[idxVertex].<a name="a277"></a>y = VertexPos[index].y * yScale;</div>
<div class="line">                pPos[idxVertex].<a name="a278"></a>z = VertexPos[index].z * zScale;</div>
<div class="line">                idxVertex++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// 頂点カラーを利用する場合</span></div>
<div class="line">        <span class="keywordflow">if</span> ( bUseVertexColor == <span class="keyword">true</span> || bUseVertexUv == <span class="keyword">true</span> )</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structnn_1_1util_1_1_float2.html">nn::util::Float2</a>* pUv = <span class="keyword">static_cast&lt;</span><a class="code" href="structnn_1_1util_1_1_float2.html">nn::util::Float2</a>*<span class="keyword">&gt;</span>( pMeshBuffer-&gt;GetVertexBufferCpuAddress(nns::gfx::PrimitiveRenderer::VertexAttribute_Uv));</div>
<div class="line">            <a class="code" href="structnn_1_1util_1_1_float4.html">nn::util::Float4</a>* pColor = <span class="keyword">static_cast&lt;</span><a class="code" href="structnn_1_1util_1_1_float4.html">nn::util::Float4</a>*<span class="keyword">&gt;</span>( pMeshBuffer-&gt;GetVertexBufferCpuAddress(nns::gfx::PrimitiveRenderer::VertexAttribute_Color));</div>
<div class="line">            idxCorner = 0;</div>
<div class="line">            idxVertex = 0;</div>
<div class="line">            <span class="keywordflow">for</span>( idxFace = 0; idxFace &lt; 6; idxFace++ )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">for</span>( idxCorner = 0; idxCorner &lt; 4; idxCorner++ )</div>
<div class="line">                {</div>
<div class="line">                    <span class="keyword">const</span> <span class="keywordtype">size_t</span> index =  FaceTable[idxFace][idxCorner];</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// カラー</span></div>
<div class="line">                    <span class="keywordflow">if</span> ( pColor )</div>
<div class="line">                    {</div>
<div class="line">                        pColor[ idxVertex ].<a name="a279"></a>x = VertexColor[ index ].x;</div>
<div class="line">                        pColor[ idxVertex ].<a name="a280"></a>y = VertexColor[ index ].y;</div>
<div class="line">                        pColor[ idxVertex ].<a name="a281"></a>z = VertexColor[ index ].z;</div>
<div class="line">                        pColor[ idxVertex ].<a name="a282"></a>w = VertexColor[ index ].w;</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// UV</span></div>
<div class="line">                    <span class="keywordflow">if</span> ( pUv )</div>
<div class="line">                    {</div>
<div class="line">                        pUv[ idxVertex ].<a name="a283"></a>x = VertexUv[ idxCorner ].x;</div>
<div class="line">                        pUv[ idxVertex ].<a name="a284"></a>y = VertexUv[ idxCorner ].y;</div>
<div class="line">                    }</div>
<div class="line">                    idxVertex++;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> numIndices;</div>
<div class="line">} <span class="comment">//NOLINT(impl/function_size)</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// コマンド生成</span></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="keywordtype">bool</span> MakeCommand( <span class="keywordtype">int</span> frame, <span class="keywordtype">int</span> bufferIndex )</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>( frame );</div>
<div class="line"></div>
<div class="line">    g_CommandBuffer.Reset();</div>
<div class="line">    g_MemoryPoolOffset = <a class="code" href="namespacenn_1_1util.html#a20f6772d3ae70168e07e0f39d416d72e">nn::util::align_up</a>( g_MemoryPoolOffset,</div>
<div class="line">        <a name="a285"></a><a class="code" href="classnn_1_1gfx_1_1_t_command_buffer.html#a83c6570a8bf3ad63a2c88604fdb64660">nn::gfx::CommandBuffer::GetCommandMemoryAlignment</a>( &amp;g_Device ) );</div>
<div class="line">    <span class="comment">// ワンタイムのコマンドバッファには nn::gfx::MemoryPoolProperty_CpuUncached | nn::gfx::MemoryPoolProperty_GpuUncached のメモリプールを使うことがより適しています</span></div>
<div class="line">    g_CommandBuffer.AddCommandMemory( &amp;g_MemoryPool, g_MemoryPoolOffset + bufferIndex * (1024 * 1024 * 2), 1024 * 1024 * 2 );</div>
<div class="line">    g_pMemory.AlignUp( 256 );</div>
<div class="line">    g_CommandBuffer.AddControlMemory( g_pMemory.Get(), 256 );</div>
<div class="line"></div>
<div class="line">    g_CommandBuffer.Begin();</div>
<div class="line">    <a name="a286"></a><a class="code" href="perf___profile_8h.html#af2d54f7bfca84e3d33b2009f6334f169">NN_PERF_SET_COLOR_GPU</a>( <a name="a287"></a><a class="code" href="classnn_1_1util_1_1_color4u8.html#a74cab22bd85f0940aec269c535ee5b54">nn::util::Color4u8::Red</a>() );</div>
<div class="line">    <a name="a288"></a><a class="code" href="perf___profile_8h.html#a1401127601eef2f70a9916b2fbbf5b4a">NN_PERF_BEGIN_MEASURE_GPU</a>( &amp;g_CommandBuffer );</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="classnn_1_1gfx_1_1_t_color_target_view.html">nn::gfx::ColorTargetView</a>* pTarget = &amp;g_ColorTargetView;</div>
<div class="line"></div>
<div class="line">        g_CommandBuffer.InvalidateMemory( <a name="a289"></a><a class="code" href="namespacenn_1_1gfx.html#a24dbcd6d86531138895622b5a854e4f5ab49f83cffb7a771c178eafdbbd93ca1a">nn::gfx::GpuAccess_Descriptor</a> | <a name="a290"></a><a class="code" href="namespacenn_1_1gfx.html#a24dbcd6d86531138895622b5a854e4f5a569fa278473bf8871cece2df59df5e68">nn::gfx::GpuAccess_ShaderCode</a> );</div>
<div class="line"></div>
<div class="line">        g_CommandBuffer.SetDescriptorPool( &amp;g_BufferDescriptorPool );</div>
<div class="line">        g_CommandBuffer.SetDescriptorPool( &amp;g_TextureDescriptorPool );</div>
<div class="line">        g_CommandBuffer.SetDescriptorPool( &amp;g_SamplerDescriptorPool );</div>
<div class="line"></div>
<div class="line">        g_CommandBuffer.ClearColor( pTarget, 0.0f, 0.0f, 0.0f, 1.0f, NULL );</div>
<div class="line">        g_CommandBuffer.ClearDepthStencil( &amp;g_DepthStencilView, 1.0f, 0,</div>
<div class="line">            <a name="a291"></a><a class="code" href="namespacenn_1_1gfx.html#a733cd65018ead22dd2cd0a62a8bd2ec9a93c09969027b90e4794060197dedb5fb">nn::gfx::DepthStencilClearMode_DepthStencil</a>, <span class="keyword">nullptr</span> );</div>
<div class="line"></div>
<div class="line">        g_CommandBuffer.SetRenderTargets( 1, &amp;pTarget, &amp;g_DepthStencilView );</div>
<div class="line">        g_CommandBuffer.SetViewportScissorState( &amp;g_ViewportScissor );</div>
<div class="line">        g_CommandBuffer.SetRasterizerState( &amp;g_RasterizerState );</div>
<div class="line"></div>
<div class="line">        g_CommandBuffer.InvalidateMemory( <a name="a292"></a><a class="code" href="namespacenn_1_1gfx.html#a24dbcd6d86531138895622b5a854e4f5a4a531ae2d7e145f647300ea67bc76ccc">nn::gfx::GpuAccess_Texture</a> | <a name="a293"></a><a class="code" href="namespacenn_1_1gfx.html#a24dbcd6d86531138895622b5a854e4f5a1ba60cf566c205e5c387ecbf68a51fe6">nn::gfx::GpuAccess_IndexBuffer</a></div>
<div class="line">            | <a name="a294"></a><a class="code" href="namespacenn_1_1gfx.html#a24dbcd6d86531138895622b5a854e4f5af73fa5ff79cf33f75dfecb4cbe5c139d">nn::gfx::GpuAccess_ConstantBuffer</a> | <a name="a295"></a><a class="code" href="namespacenn_1_1gfx.html#a24dbcd6d86531138895622b5a854e4f5aa319bbae0c949cb5829c882b68e7500a">nn::gfx::GpuAccess_VertexBuffer</a> );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="classnn_1_1gfx_1_1_descriptor_slot.html">nn::gfx::DescriptorSlot</a> constantBufferDescriptor;</div>
<div class="line">        <a class="code" href="classnn_1_1gfx_1_1_descriptor_slot.html">nn::gfx::DescriptorSlot</a> textureDescriptor;</div>
<div class="line">        <a class="code" href="classnn_1_1gfx_1_1_descriptor_slot.html">nn::gfx::DescriptorSlot</a> samplerDescriptor;</div>
<div class="line">        g_BufferDescriptorPool.GetDescriptorSlot( &amp;constantBufferDescriptor, g_BufferDescriptorBaseIndex );</div>
<div class="line">        g_TextureDescriptorPool.GetDescriptorSlot( &amp;textureDescriptor, g_TextureDescriptorBaseIndex );</div>
<div class="line">        g_SamplerDescriptorPool.GetDescriptorSlot( &amp;samplerDescriptor, g_SamplerDescriptorBaseIndex );</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="comment">// プリミティブレンダラの更新処理</span></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a296"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a7130064206ec93425fb7f45daf1c7a60">Update</a>(bufferIndex);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// model, view, projection行列をデフォルトに</span></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a297"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a9fe8e8fb23a3326e643b666f0c05f4b5">SetDefaultParameters</a>();</div>
<div class="line"></div>
<div class="line">        <a name="_a298"></a><a class="code" href="structnn_1_1util_1_1_matrix_row_major4x3f_type.html">nn::util::Matrix4x3fType</a> viewMatrix;</div>
<div class="line">        <a name="_a299"></a><a class="code" href="structnn_1_1util_1_1_matrix_row_major4x4f_type.html">nn::util::Matrix4x4fType</a> projectionMatrix;</div>
<div class="line">        <a name="_a300"></a><a class="code" href="classnn_1_1util_1_1_matrix_row_major4x3f.html">nn::util::Matrix4x3f</a> modelMatrix;</div>
<div class="line">        nn::util::MatrixIdentity(&amp;modelMatrix);</div>
<div class="line">        <a name="_a301"></a><a class="code" href="classnn_1_1util_1_1_vector3f.html">nn::util::Vector3f</a> translate;</div>
<div class="line">        nn::util::VectorSet(&amp;translate, 0.f, 0.f, 1.f);</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line"></div>
<div class="line">        <a name="_a302"></a><a class="code" href="structnn_1_1util_1_1_uint8x4.html">nn::util::Uint8x4</a> white = {{ 255, 255, 255, 255 }};</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_uint8x4.html">nn::util::Uint8x4</a> red   = {{ 255, 0, 0, 255 }};</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_uint8x4.html">nn::util::Uint8x4</a> green = {{ 0, 255, 0, 255 }};</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_uint8x4.html">nn::util::Uint8x4</a> blue  = {{ 0, 0, 255, 255 }};</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="comment">// Blend</span></div>
<div class="line">        g_CommandBuffer.SetBlendState( g_pPrimitiveRenderer-&gt;<a name="a303"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a70af34df040d67237e07d1afdd8dd698">GetBlendState</a>( nns::gfx::PrimitiveRenderer::BlendType::BlendType_Normal ) );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Depth Enable</span></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a304"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a6292cc1b9cbe92ef4eb644b60e5ec351">SetDepthStencilState</a>( &amp;g_CommandBuffer, nns::gfx::PrimitiveRenderer::DepthStencilType::DepthStencilType_DepthNoWriteTest );</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="comment">// 画面全体にテクスチャを張る</span></div>
<div class="line">        nn::util::MatrixIdentity( &amp;viewMatrix );</div>
<div class="line">        nn::util::MatrixIdentity( &amp;projectionMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a305"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a915019cb2faff731d17a7769542369d9">SetViewMatrix</a>( &amp;viewMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a306"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a92a74373af5c01fb7f5f412107793cb0">SetProjectionMatrix</a>( &amp;projectionMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a307"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a308"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a72ddcb397c9f158c7f7fb99344a19c05">DrawScreenQuad</a>( &amp;g_CommandBuffer, textureDescriptor, samplerDescriptor );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// ビューとプロジェクションを設定</span></div>
<div class="line">        <span class="keywordtype">float</span> radius = 20.f;</div>
<div class="line">        <span class="keywordtype">float</span> x      = radius * sin( frame / 500.f );</div>
<div class="line">        <span class="keywordtype">float</span> z      = radius * cos( frame / 500.f );</div>
<div class="line"></div>
<div class="line">        <a name="_a309"></a><a class="code" href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a> camPos = { x, 10.f, z };</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a> camTarget = { 0.f, 0.f, 0.f };</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a> camUp = { 0.f, 1.f, 0.f };</div>
<div class="line">        nn::util::MatrixLookAtRightHanded( &amp;viewMatrix, camPos, camTarget, camUp );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a915019cb2faff731d17a7769542369d9">SetViewMatrix</a>( &amp;viewMatrix );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// プロジェクションを初期化</span></div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">float</span> fovy = <a name="a310"></a><a class="code" href="namespacenn_1_1util.html#a325b9b74fce32f090061ebdefb9b024b">nn::util::FloatPi</a> / 3.0f;</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">float</span> aspect = <span class="keyword">static_cast&lt;</span> <span class="keywordtype">float</span> <span class="keyword">&gt;</span>( g_RenderWidth ) / static_cast&lt; float &gt;( g_RenderHeight );</div>
<div class="line">        nn::util::MatrixPerspectiveFieldOfViewRightHanded( &amp;projectionMatrix, fovy, aspect, 0.1f, 1000.f );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a92a74373af5c01fb7f5f412107793cb0">SetProjectionMatrix</a>( &amp;projectionMatrix );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Depth Enable</span></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a6292cc1b9cbe92ef4eb644b60e5ec351">SetDepthStencilState</a>( &amp;g_CommandBuffer, nns::gfx::PrimitiveRenderer::DepthStencilType::DepthStencilType_DepthWriteTest );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// 軸を描画</span></div>
<div class="line">        <span class="keywordtype">float</span> interval = -10.f;</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a> begin;</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a> end;</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a311"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a987b712fcb5170686cf314e0480bf445">SetLineWidth</a>( 1.f );</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 21; i++)</div>
<div class="line">        {</div>
<div class="line"></div>
<div class="line">            nn::util::VectorSet( &amp;begin, -10.f, 0.f, interval );</div>
<div class="line">            nn::util::VectorSet( &amp;end, 10.f, 0.f, interval );</div>
<div class="line">            g_pPrimitiveRenderer-&gt;<a name="a312"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(white);</div>
<div class="line">            g_pPrimitiveRenderer-&gt;<a name="a313"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a78e5a7edef18a000fb4ed53ccf58966e">DrawLine</a>( &amp;g_CommandBuffer, begin, end );</div>
<div class="line">            nn::util::VectorSet( &amp;begin, interval, 0.f, -10.f );</div>
<div class="line">            nn::util::VectorSet( &amp;end, interval, 0.f, 10.f );</div>
<div class="line">            g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a78e5a7edef18a000fb4ed53ccf58966e">DrawLine</a>( &amp;g_CommandBuffer, begin, end );</div>
<div class="line">            interval += 1.0f;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a987b712fcb5170686cf314e0480bf445">SetLineWidth</a>( 5.f );</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a> zeroVector;</div>
<div class="line">        nn::util::VectorSet(&amp;zeroVector, 0.f, 0.f, 0.f);</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a> axisPos;</div>
<div class="line">        nn::util::VectorSet(&amp;axisPos, 5.f, 0.f, 0.f);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(red);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a78e5a7edef18a000fb4ed53ccf58966e">DrawLine</a>( &amp;g_CommandBuffer, zeroVector, axisPos );</div>
<div class="line">        nn::util::VectorSet(&amp;axisPos, 0.f, 0.f, 5.f);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(blue);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a78e5a7edef18a000fb4ed53ccf58966e">DrawLine</a>( &amp;g_CommandBuffer, zeroVector, axisPos );</div>
<div class="line">        nn::util::VectorSet(&amp;axisPos, 0.f, 5.f, 0.f);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(green);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a78e5a7edef18a000fb4ed53ccf58966e">DrawLine</a>( &amp;g_CommandBuffer, zeroVector, axisPos );</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a> center = { 0.f, 0.f, 0.f };</div>
<div class="line">        <a class="code" href="structnn_1_1util_1_1_vector3f_type.html">nn::util::Vector3fType</a> size   = { 1.f, 1.f, 1.f };</div>
<div class="line"></div>
<div class="line">        <a class="code" href="classnn_1_1util_1_1_vector3f.html">nn::util::Vector3f</a> vecZero;</div>
<div class="line">        nn::util::VectorZero(&amp;vecZero);</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">float</span> rotY = frame * 0.05f;</div>
<div class="line">        <a class="code" href="classnn_1_1util_1_1_vector3f.html">nn::util::Vector3f</a> rotValue;</div>
<div class="line">        nn::util::VectorSet(&amp;rotValue, 0.2f, rotY, 0.2f);</div>
<div class="line">        nn::util::MatrixIdentity(&amp;modelMatrix);</div>
<div class="line">        nn::util::MatrixSetRotateXyz(&amp;modelMatrix, rotValue);</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, vecZero);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// QUADSを描画する</span></div>
<div class="line">        nn::util::VectorSet( &amp;translate, 4.f, 0.f, -2.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>( red );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a314"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a8fb9d1c7890d5ee28b4a78c6cc81514e">DrawQuad</a>( &amp;g_CommandBuffer, center, size );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet( &amp;translate, 8.f, 0.f, -2.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        <span class="comment">// 乗算するカラーをwhiteにしておく</span></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>( white );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a8fb9d1c7890d5ee28b4a78c6cc81514e">DrawQuad</a>( &amp;g_CommandBuffer, center, size, textureDescriptor, samplerDescriptor );</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="comment">// TRIANGLEを描画</span></div>
<div class="line">        nn::util::VectorSet( &amp;translate, 2.f, 0.f, -4.f );</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a987b712fcb5170686cf314e0480bf445">SetLineWidth</a>( 1.f );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(blue);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a315"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ac9838cfe3d27b718901f893bc70c614f">DrawTriangle</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Surface::Surface_Wired,</div>
<div class="line">            center, size );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet( &amp;translate, 4.f, 0.f, -4.f );</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ac9838cfe3d27b718901f893bc70c614f">DrawTriangle</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Surface::Surface_Solid,</div>
<div class="line">            center, size );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet( &amp;translate, 6.f, 0.f, -4.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ac9838cfe3d27b718901f893bc70c614f">DrawTriangle</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Surface::Surface_Normal,</div>
<div class="line">            center, size );</div>
<div class="line"></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(white);</div>
<div class="line">        nn::util::VectorSet( &amp;translate, 8.f, 0.f, -4.f );</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ac9838cfe3d27b718901f893bc70c614f">DrawTriangle</a>( &amp;g_CommandBuffer,</div>
<div class="line">            center, size, textureDescriptor, samplerDescriptor );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// CIRCLEを描画</span></div>
<div class="line">        nn::util::VectorSet( &amp;translate, 2.f, 0.f, -6.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>( green );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a316"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ad612a483afa1b10329e6a70e76a6a73b">DrawCircle</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Surface::Surface_Wired,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Subdiv::Subdiv_Normal,</div>
<div class="line">            center, 0.5f );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet( &amp;translate, 4.f, 0.f, -6.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a987b712fcb5170686cf314e0480bf445">SetLineWidth</a>( 1.f );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ad612a483afa1b10329e6a70e76a6a73b">DrawCircle</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Surface::Surface_Solid,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Subdiv::Subdiv_Normal,</div>
<div class="line">            center, 0.5f );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet( &amp;translate, 6.f, 0.f, -6.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a987b712fcb5170686cf314e0480bf445">SetLineWidth</a>( 1.f );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ad612a483afa1b10329e6a70e76a6a73b">DrawCircle</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Surface::Surface_Normal,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Subdiv::Subdiv_Normal,</div>
<div class="line">            center, 0.5f );</div>
<div class="line"></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>( white );</div>
<div class="line">        nn::util::VectorSet( &amp;translate, 8.f, 0.f, -6.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a987b712fcb5170686cf314e0480bf445">SetLineWidth</a>( 1.f );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ad612a483afa1b10329e6a70e76a6a73b">DrawCircle</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Subdiv::Subdiv_Normal,</div>
<div class="line">            center, 0.5f, textureDescriptor, samplerDescriptor );</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="comment">// CUBEを描画する</span></div>
<div class="line">        nn::util::VectorSet( &amp;translate, 2.f, 0.f, 9.f );</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a987b712fcb5170686cf314e0480bf445">SetLineWidth</a>( 1.f );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(red);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a317"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a1fa1d777e844c3fb8b6d9d462819f943">DrawCube</a>( &amp;g_CommandBuffer,</div>
<div class="line">                                        nns::gfx::PrimitiveRenderer::Surface::Surface_Wired,</div>
<div class="line">                                        center, size );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet( &amp;translate, 4.f, 0.f, 9.f );</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a1fa1d777e844c3fb8b6d9d462819f943">DrawCube</a>( &amp;g_CommandBuffer,</div>
<div class="line">                                        nns::gfx::PrimitiveRenderer::Surface::Surface_Solid,</div>
<div class="line">                                        center, size );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet( &amp;translate, 6.f, 0.f, 9.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a1fa1d777e844c3fb8b6d9d462819f943">DrawCube</a>( &amp;g_CommandBuffer,</div>
<div class="line">                                        nns::gfx::PrimitiveRenderer::Surface::Surface_Normal,</div>
<div class="line">                                        center, size );</div>
<div class="line"></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(white);</div>
<div class="line">        nn::util::VectorSet( &amp;translate, 8.f, 0.f, 9.f );</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a1fa1d777e844c3fb8b6d9d462819f943">DrawCube</a>( &amp;g_CommandBuffer,</div>
<div class="line">                                        center, size, textureDescriptor, samplerDescriptor );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// SPHEREを描画</span></div>
<div class="line">        nn::util::VectorSet(&amp;translate, 2.f, 0.f, 3.f);</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a987b712fcb5170686cf314e0480bf445">SetLineWidth</a>( 1.f );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(green);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a318"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#aae123942da03e055a3fa192613cc688d">DrawSphere</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Surface::Surface_Wired,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Subdiv::Subdiv_Normal,</div>
<div class="line">            center, 1.f );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet(&amp;translate, 4.f, 0.f, 3.f);</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#aae123942da03e055a3fa192613cc688d">DrawSphere</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Surface::Surface_Solid,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Subdiv::Subdiv_Normal,</div>
<div class="line">            center, 1.f );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet( &amp;translate, 6.f, 0.f, 3.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#aae123942da03e055a3fa192613cc688d">DrawSphere</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Surface::Surface_Normal,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Subdiv::Subdiv_Normal,</div>
<div class="line">            center, 1.f );</div>
<div class="line"></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(white);</div>
<div class="line">        nn::util::VectorSet(&amp;translate, 8.f, 0.f, 3.f);</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#aae123942da03e055a3fa192613cc688d">DrawSphere</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Subdiv::Subdiv_Normal,</div>
<div class="line">            center, 1.f, textureDescriptor, samplerDescriptor );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// CONEを描画</span></div>
<div class="line">        nn::util::VectorSet( &amp;translate, -2.f, 0.f, 3.f );</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(blue);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a319"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a229901fabc0c0e8a2fc253df15861e42">DrawCone</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Surface::Surface_Wired,</div>
<div class="line">            center, 0.5, 1.0 );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet( &amp;translate, -4.f, 0.f, 3.f );</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a229901fabc0c0e8a2fc253df15861e42">DrawCone</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Surface::Surface_Solid,</div>
<div class="line">            center, 0.5, 1.0 );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet( &amp;translate, -6.f, 0.f, 3.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a229901fabc0c0e8a2fc253df15861e42">DrawCone</a>( &amp;g_CommandBuffer,</div>
<div class="line">                                        nns::gfx::PrimitiveRenderer::Surface::Surface_Normal,</div>
<div class="line">                                        center, 0.5, 1.0 );</div>
<div class="line"></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(white);</div>
<div class="line">        nn::util::VectorSet( &amp;translate, -8.f, 0.f, 3.f );</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a229901fabc0c0e8a2fc253df15861e42">DrawCone</a>( &amp;g_CommandBuffer,</div>
<div class="line">            center, 0.5, 1.0, textureDescriptor, samplerDescriptor );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// CAPSULEを描画</span></div>
<div class="line">        nn::util::VectorSet(&amp;translate, 2.f, 0.f, 6.f);</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(red);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a320"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ab33c3c5c4f5a7a7a03f50f932e23d47f">DrawCapsule</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Surface::Surface_Wired,</div>
<div class="line">            center, 0.5, 1.f );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet(&amp;translate, 4.f, 0.f, 6.f);</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ab33c3c5c4f5a7a7a03f50f932e23d47f">DrawCapsule</a>( &amp;g_CommandBuffer,</div>
<div class="line">                                           nns::gfx::PrimitiveRenderer::Surface::Surface_Solid,</div>
<div class="line">                                           center, 0.5, 1.f );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet( &amp;translate, 6.f, 0.f, 6.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ab33c3c5c4f5a7a7a03f50f932e23d47f">DrawCapsule</a>( &amp;g_CommandBuffer,</div>
<div class="line">                                           nns::gfx::PrimitiveRenderer::Surface::Surface_Normal,</div>
<div class="line">                                           center, 0.5, 1.f );</div>
<div class="line"></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(white);</div>
<div class="line">        nn::util::VectorSet(&amp;translate, 8.f, 0.f, 6.f);</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ab33c3c5c4f5a7a7a03f50f932e23d47f">DrawCapsule</a>( &amp;g_CommandBuffer,</div>
<div class="line">                                           center, 0.5, 1.f, textureDescriptor, samplerDescriptor );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// PIPEを描画</span></div>
<div class="line">        nn::util::VectorSet(&amp;translate, -2.f, 0.f, 6.f);</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(red);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a321"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a9d21328ac01d4bc2339f637132de92bd">DrawPipe</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Surface::Surface_Wired,</div>
<div class="line">            center, 0.5, 1.f );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet(&amp;translate, -4.f, 0.f, 6.f);</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a9d21328ac01d4bc2339f637132de92bd">DrawPipe</a>( &amp;g_CommandBuffer,</div>
<div class="line">                                           nns::gfx::PrimitiveRenderer::Surface::Surface_Solid,</div>
<div class="line">                                           center, 0.5, 1.f );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet( &amp;translate, -6.f, 0.f, 6.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a9d21328ac01d4bc2339f637132de92bd">DrawPipe</a>( &amp;g_CommandBuffer,</div>
<div class="line">                                           nns::gfx::PrimitiveRenderer::Surface::Surface_Normal,</div>
<div class="line">                                           center, 0.5, 1.f );</div>
<div class="line"></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(white);</div>
<div class="line">        nn::util::VectorSet(&amp;translate, -8.f, 0.f, 6.f);</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a9d21328ac01d4bc2339f637132de92bd">DrawPipe</a>( &amp;g_CommandBuffer,</div>
<div class="line">                                           center, 0.5, 1.f, textureDescriptor, samplerDescriptor );</div>
<div class="line"></div>
<div class="line">       <span class="comment">// Cylinderを描画</span></div>
<div class="line">        nn::util::VectorSet(&amp;translate, -2.f, 0.f, 0.f);</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(red);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a322"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#abb79223c02c858e8812474c16d60708a">DrawCylinder</a>( &amp;g_CommandBuffer,</div>
<div class="line">            nns::gfx::PrimitiveRenderer::Surface::Surface_Wired,</div>
<div class="line">            center, 0.5, 1.f );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet(&amp;translate, -4.f, 0.f, 0.f);</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#abb79223c02c858e8812474c16d60708a">DrawCylinder</a>( &amp;g_CommandBuffer,</div>
<div class="line">                                           nns::gfx::PrimitiveRenderer::Surface::Surface_Solid,</div>
<div class="line">                                           center, 0.5, 1.f );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet( &amp;translate, -6.f, 0.f, 0.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#abb79223c02c858e8812474c16d60708a">DrawCylinder</a>( &amp;g_CommandBuffer,</div>
<div class="line">                                           nns::gfx::PrimitiveRenderer::Surface::Surface_Normal,</div>
<div class="line">                                           center, 0.5, 1.f );</div>
<div class="line"></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(white);</div>
<div class="line">        nn::util::VectorSet(&amp;translate, -8.f, 0.f, 0.f);</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>(&amp;modelMatrix);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#abb79223c02c858e8812474c16d60708a">DrawCylinder</a>( &amp;g_CommandBuffer,</div>
<div class="line">                                           center, 0.5, 1.f, textureDescriptor, samplerDescriptor );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// 独自頂点バッファを使用した描画</span></div>
<div class="line">        nns::gfx::PrimitiveRenderer::PrimitiveMesh posMesh;</div>
<div class="line">        nns::gfx::PrimitiveRenderer::PrimitiveMesh posUvMesh;</div>
<div class="line">        nns::gfx::PrimitiveRenderer::PrimitiveMesh colorMesh;</div>
<div class="line">        nns::gfx::PrimitiveRenderer::PrimitiveMesh colorUvMesh;</div>
<div class="line"></div>
<div class="line">        CreateUserMesh( &amp;posMesh, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line">        CreateUserMesh( &amp;posUvMesh, <span class="keyword">false</span>, <span class="keyword">true</span> );</div>
<div class="line">        CreateUserMesh( &amp;colorMesh, <span class="keyword">true</span>, <span class="keyword">false</span> );</div>
<div class="line">        CreateUserMesh( &amp;colorUvMesh, <span class="keyword">true</span>, <span class="keyword">true</span> );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// 頂点カラーを利用しない場合</span></div>
<div class="line">        nn::util::VectorSet( &amp;translate, -2.f, 0.f, 9.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>( green );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a323"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#af8dfb29505d0572c65de8517902647c0">DrawUserMesh</a>( &amp;g_CommandBuffer,</div>
<div class="line">                <a name="a324"></a><a class="code" href="namespacenn_1_1gfx.html#a6ef31e9a8914c972be0e767e565b2f94ab5923670671fe640c8ab13c165b05f88">nn::gfx::PrimitiveTopology::PrimitiveTopology_TriangleList</a>, &amp;posMesh );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet( &amp;translate, -4.f, 0.f, 9.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>( white );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#af8dfb29505d0572c65de8517902647c0">DrawUserMesh</a>( &amp;g_CommandBuffer,</div>
<div class="line">            <a class="code" href="namespacenn_1_1gfx.html#a6ef31e9a8914c972be0e767e565b2f94ab5923670671fe640c8ab13c165b05f88">nn::gfx::PrimitiveTopology::PrimitiveTopology_TriangleList</a>, &amp;posUvMesh, textureDescriptor, samplerDescriptor );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// 頂点カラーを利用する場合</span></div>
<div class="line">        nn::util::VectorSet(&amp;translate, -6.f, 0.f, 9.f);</div>
<div class="line">        nn::util::MatrixSetAxisW(&amp;modelMatrix, translate);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>( white );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#af8dfb29505d0572c65de8517902647c0">DrawUserMesh</a>( &amp;g_CommandBuffer,</div>
<div class="line">            <a class="code" href="namespacenn_1_1gfx.html#a6ef31e9a8914c972be0e767e565b2f94ab5923670671fe640c8ab13c165b05f88">nn::gfx::PrimitiveTopology::PrimitiveTopology_TriangleList</a>, &amp;colorMesh );</div>
<div class="line"></div>
<div class="line">        nn::util::VectorSet( &amp;translate, -8.f, 0.f, 9.f );</div>
<div class="line">        nn::util::MatrixSetAxisW( &amp;modelMatrix, translate );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#af8dfb29505d0572c65de8517902647c0">DrawUserMesh</a>( &amp;g_CommandBuffer,</div>
<div class="line">            <a class="code" href="namespacenn_1_1gfx.html#a6ef31e9a8914c972be0e767e565b2f94ab5923670671fe640c8ab13c165b05f88">nn::gfx::PrimitiveTopology::PrimitiveTopology_TriangleList</a>, &amp;colorUvMesh, textureDescriptor, samplerDescriptor );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// 2D 描画</span></div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">float</span> rectX = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(g_RenderWidth) / 32.f;</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">float</span> rectY = rectX;</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">float</span> rectWidth  = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(g_RenderWidth) / 2.f;</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">float</span> rectHeight = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(g_RenderWidth) / 2.f /</div>
<div class="line">            g_pResTextureFile-&gt;<a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html#a532172ac91b54eaed4cec218c1d102ff">GetResTexture</a>( g_IndexText )-&gt;<a name="a325"></a><a class="code" href="classnn_1_1gfx_1_1_res_texture.html#a5aac2a0181339569fa99efa6e3556b4d">GetTextureInfo</a>()-&gt;<a name="a326"></a><a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a0ba54295e5e7a1ce5c5df85bfd6d1fca">GetWidth</a>() * g_pResTextureFile-&gt;<a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html#a532172ac91b54eaed4cec218c1d102ff">GetResTexture</a>( g_IndexText )-&gt;<a class="code" href="classnn_1_1gfx_1_1_res_texture.html#a5aac2a0181339569fa99efa6e3556b4d">GetTextureInfo</a>()-&gt;<a name="a327"></a><a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a6396ddb8217db6fb649eacf01f42e75d">GetHeight</a>();</div>
<div class="line"></div>
<div class="line">        <a class="code" href="classnn_1_1gfx_1_1_descriptor_slot.html">nn::gfx::DescriptorSlot</a> rectDescriptor;</div>
<div class="line">        g_TextureDescriptorPool.GetDescriptorSlot( &amp;rectDescriptor, g_TextureDescriptorBaseIndex + 1 );</div>
<div class="line"></div>
<div class="line">        nn::util::MatrixIdentity( &amp;viewMatrix );</div>
<div class="line">        nn::util::MatrixIdentity( &amp;projectionMatrix );</div>
<div class="line">        nn::util::MatrixIdentity( &amp;modelMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a915019cb2faff731d17a7769542369d9">SetViewMatrix</a>( &amp;viewMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a92a74373af5c01fb7f5f412107793cb0">SetProjectionMatrix</a>( &amp;projectionMatrix );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a3c9d7a123ad9dc581157ee8d78b3b1eb">SetModelMatrix</a>( &amp;modelMatrix );</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="comment">// Depth Disable</span></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a6292cc1b9cbe92ef4eb644b60e5ec351">SetDepthStencilState</a>( &amp;g_CommandBuffer, nns::gfx::PrimitiveRenderer::DepthStencilType::DepthStencilType_DepthNoWriteTest );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// 乗算するカラーをwhiteにしておく</span></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(white);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// 2D Rect 描画</span></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a328"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a7143af16ef93ea11b07a92de43f558cb">Draw2DRect</a>( &amp;g_CommandBuffer,</div>
<div class="line">            rectX, rectY,</div>
<div class="line">            rectWidth, rectHeight,</div>
<div class="line">            rectDescriptor, samplerDescriptor );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// ユーザーが記述したピクセルシェーダを利用</span></div>
<div class="line">        <span class="comment">// ユーザー側で定義したコンスタントバッファを設定</span></div>
<div class="line">        <a name="_a329"></a><a class="code" href="classnn_1_1gfx_1_1_gpu_address.html">nn::gfx::GpuAddress</a> gpuAddress;</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">float</span> textureWidth  = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(g_pResTextureFile-&gt;<a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html#a532172ac91b54eaed4cec218c1d102ff">GetResTexture</a>( g_IndexText )-&gt;<a class="code" href="classnn_1_1gfx_1_1_res_texture.html#a5aac2a0181339569fa99efa6e3556b4d">GetTextureInfo</a>()-&gt;<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a0ba54295e5e7a1ce5c5df85bfd6d1fca">GetWidth</a>());</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">float</span> textureHeight = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(g_pResTextureFile-&gt;<a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html#a532172ac91b54eaed4cec218c1d102ff">GetResTexture</a>( g_IndexText )-&gt;<a class="code" href="classnn_1_1gfx_1_1_res_texture.html#a5aac2a0181339569fa99efa6e3556b4d">GetTextureInfo</a>()-&gt;<a class="code" href="classnn_1_1gfx_1_1_texture_info.html#a6396ddb8217db6fb649eacf01f42e75d">GetHeight</a>());</div>
<div class="line">        <span class="keywordtype">float</span> rate = 8 * sin( frame / 500.f );</div>
<div class="line">        PixelSize pixelSize;</div>
<div class="line">        pixelSize.u_pixel_size.x = 1.f / (<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(g_RenderWidth) / rate);</div>
<div class="line">        pixelSize.u_pixel_size.y = 1.f / (<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(g_RenderWidth) / rate / textureWidth*textureHeight);</div>
<div class="line"></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a330"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ad0285025e6f1dce7f12ae474b975bb70">SetUserConstantBuffer</a>( &amp;gpuAddress, &amp;pixelSize, <span class="keyword">sizeof</span>(PixelSize) );</div>
<div class="line">        g_CommandBuffer.SetConstantBuffer( g_SlotPixelSize, <a class="code" href="namespacenn_1_1gfx.html#a23a67c7d8f6b5765e2de8173797f73fea4af13ef64af0ee06eb539013de2be40a">nn::gfx::ShaderStage::ShaderStage_Pixel</a>, gpuAddress, <span class="keyword">sizeof</span>( PixelSize ));</div>
<div class="line"></div>
<div class="line">        <span class="comment">// モザイク処理を行うピクセルシェーダをセット</span></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a331"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ac9e710cabf40407ca1772a03dde2e50b">SetUserPixelShader</a>( &amp;g_MosaicPixelShader );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a7143af16ef93ea11b07a92de43f558cb">Draw2DRect</a>( &amp;g_CommandBuffer,</div>
<div class="line">            rectX, rectY + rectHeight + 8,</div>
<div class="line">            rectWidth, rectHeight,</div>
<div class="line">            rectDescriptor, samplerDescriptor );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// スクリーン上でラインを描画する</span></div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ac9e710cabf40407ca1772a03dde2e50b">SetUserPixelShader</a>( NULL );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a987b712fcb5170686cf314e0480bf445">SetLineWidth</a>(1.f);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(green);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a332"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ab9b77010a8a4813c26d63a1ce3fbb8f2">Draw2DLine</a>( &amp;g_CommandBuffer, rectX            , rectY                       , rectX + rectWidth, rectY                       );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ab9b77010a8a4813c26d63a1ce3fbb8f2">Draw2DLine</a>( &amp;g_CommandBuffer, rectX + rectWidth, rectY                       , rectX + rectWidth, rectY + 2.f * rectHeight + 8);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ab9b77010a8a4813c26d63a1ce3fbb8f2">Draw2DLine</a>( &amp;g_CommandBuffer, rectX + rectWidth, rectY + 2.f * rectHeight + 8, rectX            , rectY + 2.f * rectHeight + 8);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#ab9b77010a8a4813c26d63a1ce3fbb8f2">Draw2DLine</a>( &amp;g_CommandBuffer, rectX            , rectY + 2.f * rectHeight + 8, rectX            , rectY                       );</div>
<div class="line"></div>
<div class="line">        <span class="comment">//負荷メーターを描画</span></div>
<div class="line">        <span class="comment">// NN_PERF_IS_ENABLED() が false の場合はメーターの描画をしない</span></div>
<div class="line">        <span class="keywordflow">if</span>(<a class="code" href="nn___macro_8h.html#a71c0f58f6d49fe1392380eed4509ab9a">NN_STATIC_CONDITION</a>( <a name="a333"></a><a class="code" href="perf___profile_8h.html#af16bc0ed2894478c309a9f40f7d5146f">NN_PERF_IS_ENABLED</a>() ))</div>
<div class="line">        {</div>
<div class="line">            <a name="_a334"></a><a class="code" href="classnn_1_1perf_1_1_cpu_meter.html">nn::perf::CpuMeter</a>* pFrameMeter = <a name="a335"></a><a class="code" href="perf___profile_8h.html#a579e410c28298117b15ed860507a2d5f">NN_PERF_GET_FRAME_METER</a>();</div>
<div class="line">            <a class="code" href="structnn_1_1util_1_1_float2.html">nn::util::Float2</a> pos = <a class="code" href="structnn_1_1util_1_1_float2.html#a2ae1f80ff52f5a776b3fee148d4401e7">NN_UTIL_FLOAT_2_INITIALIZER</a>( 32.f, g_RenderHeight - g_MeterDrawer.GetHeight( pFrameMeter ) - g_MeterDrawer.GetBarHeight() );</div>
<div class="line">            g_MeterDrawer.SetDebugFontTextWriter( &amp;g_Writer );</div>
<div class="line">            g_MeterDrawer.SetPosition( pos );</div>
<div class="line">            g_MeterDrawer.SetWidth( g_RenderWidth - 64.f );</div>
<div class="line">            g_MeterDrawer.Draw( &amp;g_CommandBuffer, g_pPrimitiveRenderer, pFrameMeter );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// テキストを描画</span></div>
<div class="line">        g_Writer.<a name="a336"></a><a class="code" href="classnn_1_1gfx_1_1util_1_1_debug_font_text_writer.html#add0b5d280cff054eb7f39f26221828fc">Draw</a>( &amp;g_CommandBuffer );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// PrimitiveRendererを利用してスキャンバッファにコピー</span></div>
<div class="line">        pTarget = g_pScanBufferViews[g_NextScanBufferIndex];</div>
<div class="line">        g_CommandBuffer.SetRenderTargets( 1, &amp;pTarget, <span class="keyword">nullptr</span> );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// カラーバッファをテクスチャとして利用するのでキャッシュをフラッシュ</span></div>
<div class="line">        g_CommandBuffer.FlushMemory( <a class="code" href="namespacenn_1_1gfx.html#a24dbcd6d86531138895622b5a854e4f5a0db6d0fe517ccdbde996e7748f0c69f8">nn::gfx::GpuAccess_ColorBuffer</a> );</div>
<div class="line"></div>
<div class="line">        g_CommandBuffer.InvalidateMemory( <a class="code" href="namespacenn_1_1gfx.html#a24dbcd6d86531138895622b5a854e4f5a4a531ae2d7e145f647300ea67bc76ccc">nn::gfx::GpuAccess_Texture</a> );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// 上書き設定</span></div>
<div class="line">        g_CommandBuffer.SetBlendState( g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a70af34df040d67237e07d1afdd8dd698">GetBlendState</a>( nns::gfx::PrimitiveRenderer::BlendType::BlendType_Opacity ) );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="classnn_1_1gfx_1_1_descriptor_slot.html">nn::gfx::DescriptorSlot</a> colorDescriptor;</div>
<div class="line">        g_TextureDescriptorPool.GetDescriptorSlot( &amp;colorDescriptor, g_TextureDescriptorBaseIndex + 2 );</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a4fe8aaa462b278cb529dfe57058b47e2">SetColor</a>(white);</div>
<div class="line">        g_pPrimitiveRenderer-&gt;<a name="a337"></a><a class="code" href="classnns_1_1gfx_1_1_primitive_renderer_1_1_renderer.html#a2addb9605f9f66c185737b971032d252">DrawScreenQuadYFlip</a>( &amp;g_CommandBuffer, colorDescriptor, samplerDescriptor );</div>
<div class="line">    }</div>
<div class="line">    <a name="a338"></a><a class="code" href="perf___profile_8h.html#a5289e91681166ba39ce97d6eb116c59d">NN_PERF_END_MEASURE_GPU</a>( &amp;g_CommandBuffer );</div>
<div class="line">    g_CommandBuffer.FlushMemory( <a name="a339"></a><a class="code" href="namespacenn_1_1gfx.html#a24dbcd6d86531138895622b5a854e4f5a37837da53e8a54a085715aa973eb8475">nn::gfx::GpuAccess_QueryBuffer</a> );</div>
<div class="line">    g_CommandBuffer.End();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">} <span class="comment">//NOLINT(impl/function_size)</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// フレーム処理</span></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="keywordtype">bool</span> ProcessFrame(<span class="keywordtype">int</span> frame)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// FrameworkMode: DeferredSubmission</span></div>
<div class="line"></div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">int</span> currentBufferIndex = 0;</div>
<div class="line">    <span class="keywordtype">int</span> previousBufferIndex = 1 - currentBufferIndex;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (frame &gt; 0)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// ExecuteCommand(previousBufferIndex)</span></div>
<div class="line">        <a name="a340"></a><a class="code" href="perf___profile_8h.html#ac0cbbec62451185954e3e6a11cac2fa8">NN_PERF_SET_COLOR</a>(<a name="a341"></a><a class="code" href="classnn_1_1util_1_1_color4u8.html#a5ad1502b37a61d84307433906727813c">nn::util::Color4u8::Blue</a>());</div>
<div class="line">        <a name="a342"></a><a class="code" href="perf___profile_8h.html#a9589655224905f671b5e15a02838305c">NN_PERF_BEGIN_MEASURE_NAME</a>(<span class="stringliteral">&quot;ExecuteCommand&quot;</span>);</div>
<div class="line">        {</div>
<div class="line">            g_Queue.ExecuteCommand(&amp;g_CommandBuffer, &amp;g_GpuFence[previousBufferIndex]);</div>
<div class="line">        }</div>
<div class="line">        <a name="a343"></a><a class="code" href="perf___profile_8h.html#a0a94d0601ec383fed996a444d77c3e53">NN_PERF_END_MEASURE</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// QueuePresentTexture</span></div>
<div class="line">        <a class="code" href="perf___profile_8h.html#ac0cbbec62451185954e3e6a11cac2fa8">NN_PERF_SET_COLOR</a>(<a name="a344"></a><a class="code" href="classnn_1_1util_1_1_color4u8.html#a9d134cd2f801f8f6045e48c8af2eab3d">nn::util::Color4u8::Yellow</a>());</div>
<div class="line">        <a class="code" href="perf___profile_8h.html#a9589655224905f671b5e15a02838305c">NN_PERF_BEGIN_MEASURE_NAME</a>(<span class="stringliteral">&quot;PresentTexture&quot;</span>);</div>
<div class="line">        {</div>
<div class="line">            g_Queue.Present(&amp;g_SwapChain, 1);</div>
<div class="line">        }</div>
<div class="line">        <a class="code" href="perf___profile_8h.html#a0a94d0601ec383fed996a444d77c3e53">NN_PERF_END_MEASURE</a>();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// AcquireTexture(currentBufferIndex)</span></div>
<div class="line">    <a class="code" href="perf___profile_8h.html#ac0cbbec62451185954e3e6a11cac2fa8">NN_PERF_SET_COLOR</a>(<a class="code" href="classnn_1_1util_1_1_color4u8.html#a5ad1502b37a61d84307433906727813c">nn::util::Color4u8::Blue</a>());</div>
<div class="line">    <a class="code" href="perf___profile_8h.html#a9589655224905f671b5e15a02838305c">NN_PERF_BEGIN_MEASURE_NAME</a>(<span class="stringliteral">&quot;AcquireTexture&quot;</span>);</div>
<div class="line">    {</div>
<div class="line">        g_NextScanBufferIndex = -1;</div>
<div class="line">        <a class="code" href="namespacenn_1_1gfx.html#a985cf9ff1acdd52a02949c42fdfd21a8">nn::gfx::AcquireScanBufferResult</a> acquireResult = g_SwapChain.AcquireNextScanBufferIndex(</div>
<div class="line">            &amp;g_NextScanBufferIndex, &amp;g_DisplaySemaphore[currentBufferIndex], &amp;g_DisplayFence[currentBufferIndex]);</div>
<div class="line">        NN_SDK_ASSERT(acquireResult == <a name="a345"></a><a class="code" href="namespacenn_1_1gfx.html#a985cf9ff1acdd52a02949c42fdfd21a8a58e54fbd4d9caa45601b702540d432ad">nn::gfx::AcquireScanBufferResult_Success</a>);</div>
<div class="line">        <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(acquireResult);</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="perf___profile_8h.html#a0a94d0601ec383fed996a444d77c3e53">NN_PERF_END_MEASURE</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 不要</span></div>
<div class="line">    <span class="comment">// QueueWaitSync(currentBufferIndex)</span></div>
<div class="line">    <span class="comment">//g_Queue.SyncSemaphore(&amp;g_DisplaySemaphore[currentBufferIndex]);</span></div>
<div class="line">    <span class="comment">//g_Queue.Flush();</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// MakeCommand(currentBufferIndex)</span></div>
<div class="line">    <a class="code" href="perf___profile_8h.html#ac0cbbec62451185954e3e6a11cac2fa8">NN_PERF_SET_COLOR</a>(<a name="a346"></a><a class="code" href="classnn_1_1util_1_1_color4u8.html#a60d33066a521b0728f8660d12e010d8c">nn::util::Color4u8::Green</a>());</div>
<div class="line">    <a class="code" href="perf___profile_8h.html#a9589655224905f671b5e15a02838305c">NN_PERF_BEGIN_MEASURE_NAME</a>(<span class="stringliteral">&quot;MakeCommand&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (MakeCommand(frame, currentBufferIndex) == <span class="keyword">false</span>)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="perf___profile_8h.html#a0a94d0601ec383fed996a444d77c3e53">NN_PERF_END_MEASURE</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// WaitDisplaySync(currentBufferIndex)</span></div>
<div class="line">    g_DisplayFence[currentBufferIndex].Sync(<a name="a347"></a><a class="code" href="classnn_1_1_time_span.html#adc879772bbd4cd05381326fe0dd58b97">nn::TimeSpan::FromSeconds</a>(1));</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (frame &gt; 0)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// WaitGpuSync(previousBufferIndex)</span></div>
<div class="line">        g_GpuFence[previousBufferIndex].Sync(<a class="code" href="classnn_1_1_time_span.html#adc879772bbd4cd05381326fe0dd58b97">nn::TimeSpan::FromSeconds</a>(1));</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    currentBufferIndex = 1 - currentBufferIndex;</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//  Main Function</span></div>
<div class="line"><span class="comment">//  メイン関数です。</span></div>
<div class="line"><span class="comment">//---------------------------------------------------------------</span></div>
<div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> <a name="a348"></a><a class="code" href="_socket_resolver_8cpp.html#ae79180f8ae90e05743b47a872f305a52">nnMain</a>()</div>
<div class="line">{</div>
<div class="line">    InitializeFs();</div>
<div class="line">    InitializeResources();</div>
<div class="line"></div>
<div class="line">    g_TextureDescriptorPool.BeginUpdate();</div>
<div class="line">    {</div>
<div class="line">        g_TextureDescriptorPool.SetTextureView( g_TextureDescriptorBaseIndex,</div>
<div class="line">            g_pResTextureFile-&gt;<a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html#a532172ac91b54eaed4cec218c1d102ff">GetResTexture</a>( g_IndexBg )-&gt;<a name="a349"></a><a class="code" href="classnn_1_1gfx_1_1_res_texture.html#a00613fbadc18553fff7871fc1db31ba7">GetTextureView</a>() );</div>
<div class="line">        g_TextureDescriptorPool.SetTextureView( g_TextureDescriptorBaseIndex + 1,</div>
<div class="line">            g_pResTextureFile-&gt;<a class="code" href="classnn_1_1gfx_1_1_res_texture_file.html#a532172ac91b54eaed4cec218c1d102ff">GetResTexture</a>( g_IndexText )-&gt;<a class="code" href="classnn_1_1gfx_1_1_res_texture.html#a00613fbadc18553fff7871fc1db31ba7">GetTextureView</a>() );</div>
<div class="line">        g_TextureDescriptorPool.SetTextureView( g_TextureDescriptorBaseIndex + 2,</div>
<div class="line">            &amp;g_ColorTextureView );</div>
<div class="line">    }</div>
<div class="line">    g_TextureDescriptorPool.EndUpdate();</div>
<div class="line"></div>
<div class="line">    g_SamplerDescriptorPool.BeginUpdate();</div>
<div class="line">    {</div>
<div class="line">        g_SamplerDescriptorPool.SetSampler( g_SamplerDescriptorBaseIndex, &amp;g_Sampler );</div>
<div class="line">    }</div>
<div class="line">    g_SamplerDescriptorPool.EndUpdate();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// プリミティブレンダラの初期化</span></div>
<div class="line">    InitializePrimitiveRenderer();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// デバッグフォントの初期化</span></div>
<div class="line">    InitializeDebugFont();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 処理メータの初期化</span></div>
<div class="line">    InitializeLoadMeter();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 現在のスレッド(メインスレッド)を 0 番コアに割り当て</span></div>
<div class="line">    <a name="a350"></a><a class="code" href="namespacenn_1_1os.html#ac50b86561c15ee3e8195c83fddc8e732">nn::os::SetThreadCoreMask</a>(<a name="a351"></a><a class="code" href="namespacenn_1_1os.html#ad106866a5b13bc3d430104333966b479">nn::os::GetCurrentThread</a>(), 0, 1);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 毎フレームのレンダリング</span></div>
<div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> frame = 0; frame &lt; 600000; ++frame )</div>
<div class="line">    {</div>
<div class="line">        <a name="a352"></a><a class="code" href="perf___profile_8h.html#a0f6c4db0b37df2e27e2752d44782a430">NN_PERF_BEGIN_FRAME</a>();</div>
<div class="line">        {</div>
<div class="line">            ProcessFrame(frame);</div>
<div class="line">        }</div>
<div class="line">        <a name="a353"></a><a class="code" href="perf___profile_8h.html#a2f6a09ccbface1842f6fc705a5bc544e">NN_PERF_END_FRAME</a>();</div>
<div class="line">    }</div>
<div class="line">    g_Queue.Sync();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 処理メータ破棄</span></div>
<div class="line">    FinalizeLoadMeter();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// デバッグフォントの破棄</span></div>
<div class="line">    FinalizeDebugFont();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// プリミティブレンダラの破棄</span></div>
<div class="line">    FinalizePrimitiveRenderer();</div>
<div class="line"></div>
<div class="line">    FinalizeResources();</div>
<div class="line"></div>
<div class="line">    FinalizeFs();</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</body>
</html>
