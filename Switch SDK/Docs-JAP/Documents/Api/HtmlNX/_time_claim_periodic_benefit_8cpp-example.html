<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>NintendoSDK API Reference: TimeClaimPeriodicBenefit.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- æ§‹ç¯‰: Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'æ¤œç´¢');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>ç·åˆæ¦‚è¦</span></a></li>
      <li><a href="pages.html"><span>è«¸æƒ…å ±</span></a></li>
      <li><a href="modules.html"><span>ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</span></a></li>
      <li><a href="namespaces.html"><span>åå‰ç©ºé–“</span></a></li>
      <li><a href="annotated.html"><span>ã‚¯ãƒ©ã‚¹</span></a></li>
      <li><a href="files.html"><span>ãƒ•ã‚¡ã‚¤ãƒ«</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="æ¤œç´¢" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">TimeClaimPeriodicBenefit.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜ã¯ã€<a class="el" href="_page_sample_time_claim_periodic_benefit_with_user_system_clock.html">ClaimPeriodicBenefitWithUserSystemClock</a> ãŠã‚ˆã³ <a class="el" href="_time_claim_periodic_benefit_8cpp.html" title="ãƒ¦ãƒ¼ã‚¶ãƒ¼æ™‚è¨ˆ( nn::time::StandardUserSystemClock )ã®æ™‚åˆ»ã‚’ä½¿ã£ã¦ã€ å®šæœŸçš„ãªåˆ©ç›Šã‚’å¾—ã‚‰ã‚Œã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤å®...">TimeClaimPeriodicBenefit.cpp</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<div class="fragment"><div class="line"><span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><span class="comment">  Copyright (C)Nintendo All rights reserved.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="time_8h.html">nn/time.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___log_8h.html">nn/nn_Log.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___abort_8h.html">nn/nn_Abort.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="os___thread_api_8h.html">nn/os/os_ThreadApi.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// 1åˆ†ã«1åº¦(ãƒ¦ãƒ¼ã‚¶ãƒ¼æ™‚è¨ˆã®æ™‚åˆ»ã®åˆ†ãŒå¤‰ã‚ã‚‹ãŸã³ã«)åˆ©ç›Šã‚’å—ã‘å–ã‚‹ãŸã‚ã®æ—¥æ™‚ç¢ºèªã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚¯ãƒ©ã‚¹</span></div>
<div class="line"><span class="keyword">class </span>PerMinuteBenefitCheckCallback : <span class="keyword">public</span> <a name="_a0"></a><a class="code" href="classnn_1_1time_1_1_check_calendar_time_callback.html">nn::time::CheckCalendarTimeCallback</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a name="a1"></a><a class="code" href="classnn_1_1time_1_1_check_calendar_time_callback.html#a5da78723e0f8e2f9af19616d689f8aaf">IsSameTiming</a>(</div>
<div class="line">        <span class="keyword">const</span> <a name="_a2"></a><a class="code" href="structnn_1_1time_1_1_calendar_time.html">nn::time::CalendarTime</a>&amp; lhs,</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="structnn_1_1time_1_1_calendar_time.html">nn::time::CalendarTime</a>&amp; rhs) <span class="keyword">const</span> <a name="a3"></a><a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a> <a name="a4"></a><a class="code" href="nn___macro_8h.html#a5b950a1a9c5f9b57d49185d8fb4cd4ab">NN_OVERRIDE</a></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// ã“ã®é–¢æ•°ã§ã¯2ã¤ã®æ—¥æ™‚ãŒã€åŒã˜åˆ©ç›Šã®å—ã‘å–ã‚Šã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‹ã©ã†ã‹ã‚’åˆ¤å®šã—ã¾ã™</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">        // ä¾‹ãˆã°ã€æ—¥ä»˜ãŒå¤‰ã‚ã‚‹ã“ã¨ã§1åº¦ã ã‘åˆ©ç›Šã‚’å¾—ã‚‰ã‚Œã‚‹ã®ã§ã‚ã‚Œã°ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ—¥ä»˜(å¹´æœˆæ—¥)ãŒåŒã˜ã§ã‚ã‚Œã° true ã‚’è¿”ã—ã¾ã™ã€‚</span></div>
<div class="line"><span class="comment">        return</span></div>
<div class="line"><span class="comment">            lhs.year == rhs.year &amp;&amp;</span></div>
<div class="line"><span class="comment">            lhs.month == rhs.month &amp;&amp;</span></div>
<div class="line"><span class="comment">            lhs.day == rhs.day;</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">        // ä¾‹ãˆã°ã€æ¯æ—¥æ·±å¤œ4æ™‚ã‚’éãã‚‹ã“ã¨ã§ã€æ–°ã—ãåˆ©ç›Šã®å—ã‘å–ã‚ŠãŒå¯èƒ½ã«ãªã‚‹ã®ã§ã‚ã‚Œã°ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã™ã€‚</span></div>
<div class="line"><span class="comment">        nn::time::CalendarTime lhsCalendar = lhs - nn::TimeSpan::FromHours(4);</span></div>
<div class="line"><span class="comment">        nn::time::CalendarTime rhsCalendar = rhs - nn::TimeSpan::FromHours(4);</span></div>
<div class="line"><span class="comment">        // 4æ™‚é–“ã•ã‹ã®ã¼ã£ãŸæ—¥æ™‚ã®ã€å¹´æœˆæ—¥ãŒåŒã˜ã§ã‚ã‚Œã°åŒã˜åˆ©ç›Šã®å—ã‘å–ã‚Šã‚¿ã‚¤ãƒŸãƒ³ã‚°</span></div>
<div class="line"><span class="comment">        return</span></div>
<div class="line"><span class="comment">            lhsCalendar.year == rhsCalendar.year &amp;&amp;</span></div>
<div class="line"><span class="comment">            lhsCalendar.month == rhsCalendar.month &amp;&amp;</span></div>
<div class="line"><span class="comment">            lhsCalendar.day == rhsCalendar.day;</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">// æœ¬ã‚µãƒ³ãƒ—ãƒ«ã§ã¯ã€å¹´æœˆæ—¥æ™‚åˆ†ãŒåŒã˜ã§ã‚ã‚Œã°åŒã˜å—ã‘å–ã‚Šã‚¿ã‚¤ãƒŸãƒ³ã‚°ãªã®ã§ true ã‚’è¿”ã—ã¾ã™ã€‚</span></div>
<div class="line">        <span class="keywordflow">return</span></div>
<div class="line">            lhs.<a name="a5"></a><a class="code" href="structnn_1_1time_1_1_calendar_time.html#aae0e0d30c9924216ce57c6491af2a214">year</a> == rhs.<a class="code" href="structnn_1_1time_1_1_calendar_time.html#aae0e0d30c9924216ce57c6491af2a214">year</a> &amp;&amp;</div>
<div class="line">            lhs.<a name="a6"></a><a class="code" href="structnn_1_1time_1_1_calendar_time.html#aa8e374745265df68174bdbe02ddfc341">month</a> == rhs.<a class="code" href="structnn_1_1time_1_1_calendar_time.html#aa8e374745265df68174bdbe02ddfc341">month</a> &amp;&amp;</div>
<div class="line">            lhs.<a name="a7"></a><a class="code" href="structnn_1_1time_1_1_calendar_time.html#a6fbd1402f2b736ce6bb3400b9eaabbab">day</a> == rhs.<a class="code" href="structnn_1_1time_1_1_calendar_time.html#a6fbd1402f2b736ce6bb3400b9eaabbab">day</a> &amp;&amp;</div>
<div class="line">            lhs.<a name="a8"></a><a class="code" href="structnn_1_1time_1_1_calendar_time.html#a7f6c4678c86027e32a71612eea0392e8">hour</a> == rhs.<a class="code" href="structnn_1_1time_1_1_calendar_time.html#a7f6c4678c86027e32a71612eea0392e8">hour</a> &amp;&amp;</div>
<div class="line">            lhs.<a name="a9"></a><a class="code" href="structnn_1_1time_1_1_calendar_time.html#a5960b89e784cc2aedb48d3ce63df6ae8">minute</a> == rhs.<a class="code" href="structnn_1_1time_1_1_calendar_time.html#a5960b89e784cc2aedb48d3ce63df6ae8">minute</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a name="a10"></a><a class="code" href="classnn_1_1time_1_1_check_calendar_time_callback.html#adcd6eeb5f2b7acb924edf766bec8fd44">IsMatched</a>(</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="structnn_1_1time_1_1_calendar_time.html">nn::time::CalendarTime</a>&amp; calendarTime) <span class="keyword">const</span> <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a> <a class="code" href="nn___macro_8h.html#a5b950a1a9c5f9b57d49185d8fb4cd4ab">NN_OVERRIDE</a></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// ã“ã®é–¢æ•°ã§ã¯ä¸ãˆã‚‰ã‚ŒãŸ CalendarTime ãŒã€åˆ©ç›Šã‚’å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã‚‹æ—¥æ™‚ã¨ã—ã¦é©åˆ‡ã‹ã‚’åˆ¤å®šã—ã¾ã™ã€‚</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">        // ä¾‹ãˆã°ã€æ°´æ›œæ—¥ã«ã ã‘åˆ©ç›Šã‚’å¾—ã‚‰ã‚Œã‚‹ã®ã§ã‚ã‚Œã°ã€ä»¥ä¸‹ã®ã‚ˆã†ã« calendarTime ãŒæ°´æ›œæ—¥ã®ã¨ãã«ã ã‘ true ã‚’è¿”ã—ã¾ã™ã€‚</span></div>
<div class="line"><span class="comment">        nn::time::DayOfWeek dayOfWeek = nn::time::GetDayOfWeek(calendarTime.year, calendarTime.month, calendarTime.day);</span></div>
<div class="line"><span class="comment">        return dayOfWeek == nn::time::DayOfWeek_Wednesday;</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">// æœ¬ã‚µãƒ³ãƒ—ãƒ«ã®åˆ©ç›Šå—ã‘å–ã‚Šã¯ã€æ—¥æ™‚ã«é–¢ä¿‚ãªãã„ã¤ã§ã‚‚å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€ä½•ã‚‚ã›ãš true ã‚’è¿”ã—ã¾ã™ã€‚</span></div>
<div class="line">        <a name="a11"></a><a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(calendarTime);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> <a name="a12"></a><a class="code" href="_socket_resolver_8cpp.html#ae79180f8ae90e05743b47a872f305a52">nnMain</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// æ™‚åˆ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®åˆæœŸåŒ–</span></div>
<div class="line">    <a name="a13"></a><a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a14"></a><a class="code" href="namespacenn_1_1time.html#af3d5226ce5093e581b3892fbb2fbc34c">nn::time::Initialize</a>());</div>
<div class="line">    <a name="a15"></a><a class="code" href="nn___log_8h.html#aa8c0b58247a2078e37f2fe0974b98a61">NN_LOG</a>(<span class="stringliteral">&quot;nn::time::Initialize\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="nn___log_8h.html#aa8c0b58247a2078e37f2fe0974b98a61">NN_LOG</a>(<span class="stringliteral">&quot;---- Sample of claim periodic benefit with nn::time::StandardUserSystemClock.\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// nn::time::ClaimPeriodicBenefitWithUserSystemClock() ç”¨ã® PeriodicBenefitClaimContext</span></div>
<div class="line">    <span class="comment">// (ã“ã® PeriodicBenefitClaimContext ã¯ã€æ‰±ã„ãŸã„å®šæœŸã‚¤ãƒ™ãƒ³ãƒˆã®ç¨®é¡ã®æ•°ã ã‘ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå¿…è¦ã§ã™ã€‚</span></div>
<div class="line">    <span class="comment">// åˆå›ã®åˆ¤å®šæ™‚ã«ã¯ã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§åˆæœŸåŒ–ã•ã‚ŒãŸã¾ã¾ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ ClaimPeriodicBenefitWithUserSystemClock() ã¸æ¸¡ã—ã¦ãã ã•ã„ã€‚)</span></div>
<div class="line">    <a name="_a16"></a><a class="code" href="structnn_1_1time_1_1_periodic_benefit_claim_context.html">nn::time::PeriodicBenefitClaimContext</a> handoverContext;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ãƒšãƒŠãƒ«ãƒ†ã‚£ã®æœ€å¤§æœŸé–“</span></div>
<div class="line">    <span class="comment">// (æ™‚è¨ˆæ“ä½œæ™‚ã«èª²ã™åˆ©ç›Šã‚’å¾—ã‚‰ã‚Œãªã„ãƒšãƒŠãƒ«ãƒ†ã‚£æœŸé–“ã®æœ€å¤§å€¤ã§ã™ã€‚</span></div>
<div class="line">    <span class="comment">// ã“ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã¯ã€1åˆ†ã«1åº¦(æ™‚åˆ»ã®åˆ†ãŒå¤‰ã‚ã‚‹ãŸã³ã«)åˆ©ç›Šã‚’å—ã‘å–ã‚Œã‚‹ã“ã¨ã‚’è€ƒæ…®ã—ã€ãƒšãƒŠãƒ«ãƒ†ã‚£æœ€å¤§æœŸé–“ã‚’1åˆ†ã¨ã—ã¦ã„ã¾ã™ã€‚</span></div>
<div class="line">    <span class="comment">// è©³ç´°ã¯ API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚)</span></div>
<div class="line">    <span class="keyword">const</span> <a name="_a17"></a><a class="code" href="classnn_1_1_time_span.html">nn::TimeSpan</a> MaxPenaltyTimeSpan = <a name="a18"></a><a class="code" href="classnn_1_1_time_span.html#a7b05d450fc4976bd57af3b5863ba1dfe">nn::TimeSpan::FromMinutes</a>(1);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// æ™‚è¨ˆã‚’é€²ã‚ãŸå ´åˆã«ç„¡è¦–ã§ãã‚‹æ™‚è¨ˆã®æ“ä½œé‡</span></div>
<div class="line">    <span class="comment">// (æ™‚è¨ˆã‚’é€²ã‚ãŸã¨ã—ã¦ã‚‚ã€ã“ã®å€¤ä»¥ä¸‹ã®æ“ä½œé‡ã§ã‚ã‚‹å ´åˆã¯æ™‚è¨ˆæ“ä½œãŒãªã‹ã£ãŸã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚</span></div>
<div class="line">    <span class="comment">// ã“ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã¯ã€æŒ™å‹•ã®ç°¡æ½”ã•ã‚’é‡è¦–ã—ã¦ 0 ã¨ã—ã¦ã„ã¾ã™ã€‚</span></div>
<div class="line">    <span class="comment">// è©³ç´°ã¯ API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚)</span></div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="classnn_1_1_time_span.html">nn::TimeSpan</a> AcceptableOperationTimeSpan(0);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// æ—¥æ™‚ç¢ºèªç”¨ã®ã‚¯ãƒ©ã‚¹</span></div>
<div class="line">    <span class="comment">// (nn::time::CheckCalendarTimeCallback ã‚¯ãƒ©ã‚¹ã‚’ç¶™æ‰¿ã—ã€å†…éƒ¨å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</span></div>
<div class="line">    <span class="comment">// APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚„ã€ã“ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã®å®Ÿè£…ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚)</span></div>
<div class="line">    PerMinuteBenefitCheckCallback perMinuteBenefitCheckCallback;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> TryCount = 3;</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1 ; i &lt;= TryCount ; i++)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// åˆ©ç›Šå—ã‘å–ã‚Šã‚’åˆ¤å®šã™ã‚‹ç¾åœ¨ã® ClockSnapshot ã‚’ä½œæˆ</span></div>
<div class="line">        <a name="_a19"></a><a class="code" href="classnn_1_1time_1_1_clock_snapshot.html">nn::time::ClockSnapshot</a> currentSnapshot;</div>
<div class="line">        <a name="a20"></a><a class="code" href="classnn_1_1time_1_1_clock_snapshot.html#ab46c9996752e49c22634b140a99deee6">nn::time::ClockSnapshot::CreateWithStandardSystemClock</a>(&amp;currentSnapshot);</div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> c = currentSnapshot.<a name="a21"></a><a class="code" href="classnn_1_1time_1_1_clock_snapshot.html#a7f42d9ee4a86b79cd6c7905920483150">GetStandardUserSystemClockCalendarTime</a>();</div>
<div class="line">        <a class="code" href="nn___log_8h.html#aa8c0b58247a2078e37f2fe0974b98a61">NN_LOG</a>(<span class="stringliteral">&quot;[Claim Benefit (%d/%d) at %04d/%02d/%02d %02d:%02d:%02d]\n&quot;</span>,</div>
<div class="line">                i, TryCount,</div>
<div class="line">                c.year, c.month, c.day, c.hour, c.minute, c.second);</div>
<div class="line"></div>
<div class="line">        <span class="keyword">auto</span> backup = handoverContext; <span class="comment">// ClaimPeriodicBenefitWithUserSystemClock()å®Ÿè¡Œå¾Œã® handoverContext æ›´æ–°æ¤œçŸ¥ç”¨</span></div>
<div class="line"></div>
<div class="line">        <span class="keyword">auto</span> result = <a name="a22"></a><a class="code" href="namespacenn_1_1time.html#aa5e24f241a0806d6ac316075b655b3f7">nn::time::ClaimPeriodicBenefitWithUserSystemClock</a>(</div>
<div class="line">            &amp;handoverContext,</div>
<div class="line">            currentSnapshot,</div>
<div class="line">            MaxPenaltyTimeSpan,</div>
<div class="line">            AcceptableOperationTimeSpan,</div>
<div class="line">            &amp;perMinuteBenefitCheckCallback);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>(result == <a name="a23"></a><a class="code" href="namespacenn_1_1time.html#abc313af281fff1f227bad03284e1c2ada8a0603d107ba2cda011ae792b7cc3a39">nn::time::PeriodicBenefitClaimResult_Success</a>)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// å®šæœŸçš„ãªåˆ©ç›Šã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</span></div>
<div class="line">            <span class="comment">// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¼ç”»ã«ãã£ãŸã‚¢ã‚¤ãƒ†ãƒ ã‚„ãƒã‚¤ãƒ³ãƒˆã®ä»˜ä¸ã‚„ã€</span></div>
<div class="line">            <span class="comment">// ä½•ã‚‰ã‹ã®å®šæœŸã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿã‚’ãƒˆãƒªã‚¬ãƒ¼ã•ã›ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚</span></div>
<div class="line">            <a class="code" href="nn___log_8h.html#aa8c0b58247a2078e37f2fe0974b98a61">NN_LOG</a>(<span class="stringliteral">&quot;    I can receive benefit!\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(result == <a name="a24"></a><a class="code" href="namespacenn_1_1time.html#abc313af281fff1f227bad03284e1c2ada38e1826e9ae5442c64a8dec9d2604af8">nn::time::PeriodicBenefitClaimResult_NotReceivableTiming</a>)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// å‰å›åˆ©ç›Šã‚’å¾—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‹ã‚‰ã€æ–°ã—ãåˆ©ç›Šã‚’å¾—ã‚‰ã‚Œã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ãªã£ã¦ã„ãªã„ãŸã‚ã€åˆ©ç›Šã‚’å¾—ã‚‰ã‚Œã¾ã›ã‚“ã€‚</span></div>
<div class="line">            <a class="code" href="nn___log_8h.html#aa8c0b58247a2078e37f2fe0974b98a61">NN_LOG</a>(<span class="stringliteral">&quot;    nn::time::ClaimPeriodicBenefitWithUserSystemClock() failed.(nn::time::PeriodicBenefitClaimResult_NotReceivableTiming)\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(result == <a name="a25"></a><a class="code" href="namespacenn_1_1time.html#abc313af281fff1f227bad03284e1c2ada7d525d793c5f7200173a1f49355861cc">nn::time::PeriodicBenefitClaimResult_Penalty</a>)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// æ™‚è¨ˆæ“ä½œã«ã‚ˆã£ã¦åˆ©ç›Šã‚’å¾—ã‚‰ã‚Œãªã„ãƒšãƒŠãƒ«ãƒ†ã‚£æœŸé–“ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚</span></div>
<div class="line">            <span class="comment">// ãƒšãƒŠãƒ«ãƒ†ã‚£æœŸé–“ã®é–‹å§‹ã¯ã€æ™‚è¨ˆã‚’æ“ä½œã—ãŸç¬é–“ã§ã™ã€‚</span></div>
<div class="line">            <a class="code" href="nn___log_8h.html#aa8c0b58247a2078e37f2fe0974b98a61">NN_LOG</a>(<span class="stringliteral">&quot;    nn::time::ClaimPeriodicBenefitWithUserSystemClock() failed.(nn::time::PeriodicBenefitClaimResult_Penalty)\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// ä¸Šè¨˜ä»¥å¤–ã® Result ã¯ç™ºç”Ÿã—ã¾ã›ã‚“</span></div>
<div class="line">            <a name="a26"></a><a class="code" href="nn___abort_8h.html#a205eaac89c47d49cb982bf136e113de2">NN_ABORT</a>(<span class="stringliteral">&quot;Unexpected result(%d)&quot;</span>, result);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// ä¸Šè¨˜ã® handoverContext ã‚’ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ç­‰ã«ä¿å­˜ã—ã¦æ°¸ç¶šåŒ–ã—ã€æ¬¡å›ã®åˆ¤å®šã¸å¼•ãç¶™ãã“ã¨ã§ã€</span></div>
<div class="line">        <span class="comment">// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã‚„æœ¬ä½“ã®é›»æºæ–­ã‚’è·¨ã„ã§ã€å®šæœŸçš„ãªåˆ©ç›Šã®å—ã‘å–ã‚Šã‚’ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</span></div>
<div class="line">        <span class="comment">// ã“ã®ã¨ãã€nn::time::ClaimPeriodicBenefitWithUserSystemClock() ã®çµæœã®æˆå¦(resultã®æˆå¦)ã«ä¾ã‚‰ãšã€</span></div>
<div class="line">        <span class="comment">// handoverContext ã‚’æ¬¡å›ã®åˆ¤å®šã¸å¼•ãç¶™ãå¿…è¦ãŒã‚ã‚‹ç‚¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// ã¾ãŸã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã®åˆ©ç›Šã®ä»˜ä¸çµæœã®æ°¸ç¶šåŒ–ã‚’è¡Œã†å ´åˆã«ã¯ã€</span></div>
<div class="line">        <span class="comment">// ãƒ‡ãƒ¼ã‚¿ã®ä¸æ•´åˆã‚’é˜²ããŸã‚ã«ã€åˆ¤å®šç”¨ã® PeriodicBenefitClaimContext (handoverContext) ã¨ã€</span></div>
<div class="line">        <span class="comment">// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã®åˆ©ç›Šã®ä»˜ä¸çµæœã¨ã‚’ã€ä¸å¯åˆ†ã«æ°¸ç¶šåŒ–ã™ã‚‹ã“ã¨ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™ã€‚</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// PeriodicBenefitClaimContext ã¯ C++ æ¨™æº–ã® TriviallyCopyable ã®è¦ä»¶ã‚’æº€ãŸã—ã¦ãŠã‚Šã€ std::memcpy() ãŒå¯èƒ½ãªã‚¯ãƒ©ã‚¹ãªã®ã§ã€</span></div>
<div class="line">        <span class="comment">// ãã®ã¾ã¾ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ç­‰ã«æ°¸ç¶šåŒ–ãŒå¯èƒ½ã§ã™ã€‚</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// æ¨å¥¨ã•ã‚Œã‚‹å®Ÿè£…ã®ç–‘ä¼¼ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</span></div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">        bool isCommitRequired = false;</span></div>
<div class="line"><span class="comment">        if(backup != handoverContext) // resultã®æˆå¦ã«ä¾ã‚‰ãšã€æ›´æ–°ãŒã‚ã‚Œã°æ°¸ç¶šåŒ–ãŒå¿…è¦ã§ã™</span></div>
<div class="line"><span class="comment">        {</span></div>
<div class="line"><span class="comment">            WriteContext(handoverContext); // handoverContext ã‚’æ°¸ç¶šåŒ–</span></div>
<div class="line"><span class="comment">            isCommitRequired = true;</span></div>
<div class="line"><span class="comment">        }</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">        // ã“ã“ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã‚„é›»æºæ–­ãŒç™ºç”Ÿã—ã¦ã‚‚ã€ä¸æ•´åˆã¯ç™ºç”Ÿã—ã¾ã›ã‚“</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">        if(result.IsSuccess())</span></div>
<div class="line"><span class="comment">        {</span></div>
<div class="line"><span class="comment">            WriteBenefit(...); // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã®åˆ©ç›Šä»˜ä¸ã‚’æ°¸ç¶šåŒ–</span></div>
<div class="line"><span class="comment">            isCommitRequired = true;</span></div>
<div class="line"><span class="comment">        }</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">        // ã“ã“ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã‚„é›»æºæ–­ãŒç™ºç”Ÿã—ã¦ã‚‚ã€ä¸æ•´åˆã¯ç™ºç”Ÿã—ã¾ã›ã‚“</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">        if(isCommitRequired)</span></div>
<div class="line"><span class="comment">        {</span></div>
<div class="line"><span class="comment">            CommitSaveData(); // ä¸Šè¨˜ã‚’åŒæ™‚ã«å®Ÿã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã¸åæ˜ </span></div>
<div class="line"><span class="comment">        }</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <a class="code" href="nn___macro_8h.html#af2d1673769927c5eae977d8dde3ce106">NN_UNUSED</a>(backup);</div>
<div class="line"></div>
<div class="line">        <a class="code" href="nn___log_8h.html#aa8c0b58247a2078e37f2fe0974b98a61">NN_LOG</a>(<span class="stringliteral">&quot;    Waiting 3 seconds.\n&quot;</span>);</div>
<div class="line">        <a name="a27"></a><a class="code" href="namespacenn_1_1os.html#a96b335e87af44c60a0d6dca75f11c9d2">nn::os::SleepThread</a>(<a name="a28"></a><a class="code" href="classnn_1_1_time_span.html#adc879772bbd4cd05381326fe0dd58b97">nn::TimeSpan::FromSeconds</a>(3));</div>
<div class="line">        <span class="comment">// ã“ã®ã‚¹ãƒªãƒ¼ãƒ—ã®é–“ã«ã€HOMEãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ DevMenu ã‚‚ã—ãã¯ HOME ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¡¨ç¤ºã—ã€</span></div>
<div class="line">        <span class="comment">// ãã“ã§æ™‚åˆ»ã‚„ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã®è¨­å®šã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€ä»¥é™ã®åˆ¤å®šã‚’æ™‚è¨ˆæ“ä½œæ¤œçŸ¥å´ã¸åˆ†å²ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// æ™‚è¨ˆæ“ä½œå¾Œã€ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«1åˆ†ä»¥å†…ã«æˆ»ã‚‹ã“ã¨ã§ã€ãƒšãƒŠãƒ«ãƒ†ã‚£ãŒç™ºç”Ÿã—ã¦åˆ©ç›Šã‚’å¾—ã‚‰ã‚Œãªã„ã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚</span></div>
<div class="line">        <span class="comment">// æ™‚è¨ˆæ“ä½œå¾Œã€ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«æˆ»ã‚‰ãš1åˆ†ä»¥ä¸Šã‚’(DevMenu ä¸Šã‚‚ã—ãã¯ HOME ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸Šã§)çµŒéã•ã›ã‚‹ã“ã¨ã§</span></div>
<div class="line">        <span class="comment">// (ã™ãªã‚ã¡æ™‚è¨ˆæ“ä½œå¾Œã« MaxPenaltyTimeSpan ä»¥ä¸Šã®æ™‚é–“ãŒéãå»ã‚‹ã“ã¨ã§)ã€å†ã³åˆ©ç›Šã‚’å¾—ã‚‰ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚</span></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// æ™‚åˆ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®çµ‚äº†</span></div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>( <a name="a29"></a><a class="code" href="namespacenn_1_1time.html#a316a48243971bfac1dfcc1ea07466563">nn::time::Finalize</a>() );</div>
<div class="line">    <a class="code" href="nn___log_8h.html#aa8c0b58247a2078e37f2fe0974b98a61">NN_LOG</a>(<span class="stringliteral">&quot;nn::time::Finalize\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</body>
</html>
