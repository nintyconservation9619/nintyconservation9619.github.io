<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>NintendoSDK API Reference: Nintendo NX CPU Profiler Sample</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 構築: Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>総合概要</span></a></li>
      <li class="current"><a href="pages.html"><span>諸情報</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>名前空間</span></a></li>
      <li><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="_page_sample.html">SDK サンプル解説書</a></li><li class="navelem"><a class="el" href="_page_sample_profiler.html">Profiler</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Nintendo NX CPU Profiler Sample </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>目次</h3>
<ul><li class="level1"><a href="#PageSampleProfilerSimple_SectionBrief">Overview</a></li>
<li class="level1"><a href="#PageSampleProfilerSimple_SectionFileStructure">File Structure</a></li>
<li class="level1"><a href="#PageSampleProfilerSimple_SectionNecessaryEnvironment">System Requirements</a></li>
<li class="level1"><a href="#PageSampleProfilerSimple_SectionHowToOperate">Operation Procedures</a></li>
<li class="level1"><a href="#PageSampleProfilerSimple_SectionPrecaution">Cautions</a></li>
<li class="level1"><a href="#PageSampleProfilerSimple_SectionHowToExecute">Execution Procedure</a></li>
<li class="level1"><a href="#PageSampleProfilerSimple_SectionDetail">Description</a><ul><li class="level2"><a href="#PageSampleProfilerSimple_SectionSampleProgram">Sample Program</a></li>
<li class="level2"><a href="#PageSampleProfilerSimple_SectionSampleDetail">Sample Program Description</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>This sample shows how to use the various functions in the <a class="el" href="namespacenn_1_1profiler.html" title="Nintendo NX CPU Profiler Namespace. ">nn::profiler</a> namespace.</p>
<h1><a class="anchor" id="PageSampleProfilerSimple_SectionBrief"></a>
Overview</h1>
<h1><a class="anchor" id="PageSampleProfilerSimple_SectionFileStructure"></a>
File Structure</h1>
<p>This sample program is located in <a class="el" href="dir_6fe4703cd36b5100102f92b1ea22a3b1.html">Samples/Sources/Applications/ProfilerSimple </a>.</p>
<h1><a class="anchor" id="PageSampleProfilerSimple_SectionNecessaryEnvironment"></a>
System Requirements</h1>
<p>The Nintendo NX CPU Profiler PC executable, found in Tools/NintendoNxCpuProfiler, should be running.</p>
<h1><a class="anchor" id="PageSampleProfilerSimple_SectionHowToOperate"></a>
Operation Procedures</h1>
<p>It is not possible to interact directly with the sample.</p>
<h1><a class="anchor" id="PageSampleProfilerSimple_SectionPrecaution"></a>
Cautions</h1>
<p>This demo does not display anything on the screen.</p>
<h1><a class="anchor" id="PageSampleProfilerSimple_SectionHowToExecute"></a>
Execution Procedure</h1>
<p>Build the sample program and then run it. Once it is running, click Sync in the Nintendo NX CPU Profiler PC tool. On the Sampled Profile tab, click on Start to start taking a profile. Profiling can be stopped by either clicking on Stop or waiting for the internal buffers to fill.</p>
<h1><a class="anchor" id="PageSampleProfilerSimple_SectionDetail"></a>
Description</h1>
<h2><a class="anchor" id="PageSampleProfilerSimple_SectionSampleProgram"></a>
Sample Program</h2>
<p>The following source code is used for this sample program.</p>
<p><a class="el" href="_profiler_simple_8cpp.html" title="Sample application showing how to use functions in the nn::profiler namespace. ">ProfilerSimple.cpp</a> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">  Copyright (C)Nintendo All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___assert_8h.html">nn/nn_Assert.h</a>&gt;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &lt;nn/nn_Common.h&gt;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="nn___time_span_8h.html">nn/nn_TimeSpan.h</a>&gt;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &lt;nn/os.h&gt;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="profiler_8h.html">nn/profiler.h</a>&gt;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keyword">namespace</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// Waits for the profiler to be in the ProfilerStatus_Active or ProfilerStatus_Offline state</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// before returning. This ensures that if profiling or transferring is in progress that the</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// data can be obtained in the PC before the application continues.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordtype">void</span> WaitForProfileTransferred()</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <a class="code" href="namespacenn_1_1profiler.html#a7fea676000503cc4f931e0d93d51f5f2">nn::profiler::ProfilerStatus</a> status = <a class="code" href="namespacenn_1_1profiler.html#a6188c8828050128b52e98bf5fc953b05">nn::profiler::GetProfilerStatus</a>();</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">while</span> (status == <a class="code" href="namespacenn_1_1profiler.html#a7fea676000503cc4f931e0d93d51f5f2aee16006157055d994c7694213ee3be42">nn::profiler::ProfilerStatus_Profiling</a> ||</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;               status == <a class="code" href="namespacenn_1_1profiler.html#a7fea676000503cc4f931e0d93d51f5f2ab2d31e18bc33aa3304cb0e14eed05911">nn::profiler::ProfilerStatus_Transferring</a>)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <a class="code" href="namespacenn_1_1os.html#a96b335e87af44c60a0d6dca75f11c9d2">nn::os::SleepThread</a>(<a class="code" href="classnn_1_1_time_span.html#a1b8582b5180ce7992fc82a148c7f8c90">nn::TimeSpan::FromMilliSeconds</a>(1));</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            status = <a class="code" href="namespacenn_1_1profiler.html#a6188c8828050128b52e98bf5fc953b05">nn::profiler::GetProfilerStatus</a>();</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordtype">void</span> RandomLoop()</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keywordtype">int</span> loopCount = (rand() &amp; 0xFFFF);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="comment">// Example of recording data with a string literal.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="namespacenn_1_1profiler.html#a9bcc0188395af2ef6c82c28465693edd">nn::profiler::RecordData</a>(u8<span class="stringliteral">&quot;RandomLoop: Loop Count&quot;</span>, static_cast&lt;uint64_t&gt;(loopCount));</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="comment">// Example of using a scope code block with a string literal.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="comment">// The code block will automatically exit when the variable falls out of scope.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="comment">// The string literal is built using the preprocessor to show __FILE__:__LINE__.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="classnn_1_1profiler_1_1_scoped_code_block.html">nn::profiler::ScopedCodeBlock</a> codeBlock(__FILE__ <span class="stringliteral">&quot;:&quot;</span> <a class="code" href="nn___macro_8h.html#ad752e23348021cdb2cafabb4d054b7bc">NN_MACRO_STRINGIZE</a>(__LINE__));</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">while</span> (loopCount &gt; 0)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            --loopCount;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    int64_t CalculateFibonacci(<span class="keywordtype">int</span> n)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        int64_t retVal = n;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordflow">if</span> (n &gt; 1) { retVal = CalculateFibonacci(n - 1) + CalculateFibonacci(n - 2); }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">return</span> retVal;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> <a class="code" href="_socket_resolver_8cpp.html#ae79180f8ae90e05743b47a872f305a52">nnMain</a>()</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;{</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    srand(0);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">// Initialize the profiler</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordtype">char</span>* buffer = <span class="keyword">new</span> <span class="keywordtype">char</span>[<a class="code" href="namespacenn_1_1profiler.html#a9bc180dcf49e08d2b3c8f0bb7d8358b6">nn::profiler::MinimumBufferSize</a>];</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="classnn_1_1_result.html">nn::Result</a> result = <a class="code" href="namespacenn_1_1profiler.html#a1fd4585e5e75647e1cb20bb264f58f6e">nn::profiler::Initialize</a>(buffer, <a class="code" href="namespacenn_1_1profiler.html#a9bc180dcf49e08d2b3c8f0bb7d8358b6">nn::profiler::MinimumBufferSize</a>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(result);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> totalFrameCount = 120 * 60;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> frame = 0; frame &lt; totalFrameCount; ++frame)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keyword">auto</span> startTime = <a class="code" href="namespacenn_1_1os.html#a79e29821bfb2b0c3a5c222488e90cc89">nn::os::GetSystemTick</a>();</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="comment">// Record the top of our main loop. This is used as the framerate in the GUI.</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <a class="code" href="namespacenn_1_1profiler.html#a90d857e6e5c2a9fe9f8938f1dd8d1829">nn::profiler::RecordHeartbeat</a>(<a class="code" href="namespacenn_1_1profiler.html#a8bd43485bd61fe04afe4b789a73b98c4afef7944828c76c000d169f2d4b0d5ac2">nn::profiler::Heartbeats_Main</a>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        RandomLoop();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordtype">int</span> fibonacciSeed = (rand() % 20) + 10;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        int64_t fibonacciResult = CalculateFibonacci(fibonacciSeed);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="comment">// Example of recording data with a numerical ids.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <a class="code" href="namespacenn_1_1profiler.html#a9bcc0188395af2ef6c82c28465693edd">nn::profiler::RecordData</a>(1, static_cast&lt;uint64_t&gt;(fibonacciSeed));</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <a class="code" href="namespacenn_1_1profiler.html#a9bcc0188395af2ef6c82c28465693edd">nn::profiler::RecordData</a>(2, static_cast&lt;double&gt;(fibonacciResult));</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="comment">// Determine how long we have spent on this frame so far.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="comment">// Set the wait time so that we attempt to maintain a consistent framerate.</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keyword">auto</span> stopTime = <a class="code" href="namespacenn_1_1os.html#a79e29821bfb2b0c3a5c222488e90cc89">nn::os::GetSystemTick</a>();</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordtype">int</span> elapsedMicroSeconds = (stopTime - startTime).ToTimeSpan().GetMicroSeconds();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordtype">int</span> waitTime = std::max(0, 16667 - elapsedMicroSeconds);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="comment">// Example of entering and exiting a code block using a string literal.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="namespacenn_1_1profiler.html#acd040cd20c33f208f315e60bdd0df745">nn::profiler::EnterCodeBlock</a>(<span class="stringliteral">&quot;Main Thread Sleeping&quot;</span>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="namespacenn_1_1os.html#a96b335e87af44c60a0d6dca75f11c9d2">nn::os::SleepThread</a>(<a class="code" href="classnn_1_1_time_span.html#ad68c54c586dc921319b8ef99bee505bf">nn::TimeSpan::FromMicroSeconds</a>(waitTime));</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="namespacenn_1_1profiler.html#a40482ccaf3b2a56eb6e8e7aeddfebacb">nn::profiler::ExitCodeBlock</a>(<span class="stringliteral">&quot;Main Thread Sleeping&quot;</span>);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    WaitForProfileTransferred();</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// Finalize the profiler</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    result = <a class="code" href="namespacenn_1_1profiler.html#a686d62f2d301026212a1f2f19d32e5e0">nn::profiler::Finalize</a>();</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(result);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keyword">delete</span>[] buffer;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div>
<div class="ttc" id="namespacenn_1_1os_html_a96b335e87af44c60a0d6dca75f11c9d2"><div class="ttname"><a href="namespacenn_1_1os.html#a96b335e87af44c60a0d6dca75f11c9d2">nn::os::SleepThread</a></div><div class="ttdeci">void SleepThread(TimeSpan time) NN_NOEXCEPT</div><div class="ttdoc">自スレッドを指定された時間だけ休止します。 </div></div>
<div class="ttc" id="namespacenn_1_1profiler_html_a8bd43485bd61fe04afe4b789a73b98c4afef7944828c76c000d169f2d4b0d5ac2"><div class="ttname"><a href="namespacenn_1_1profiler.html#a8bd43485bd61fe04afe4b789a73b98c4afef7944828c76c000d169f2d4b0d5ac2">nn::profiler::Heartbeats_Main</a></div><div class="ttdoc">Main is used to determine framerate. </div><div class="ttdef"><b>Definition:</b> profiler_Types.h:59</div></div>
<div class="ttc" id="namespacenn_1_1profiler_html_a9bc180dcf49e08d2b3c8f0bb7d8358b6"><div class="ttname"><a href="namespacenn_1_1profiler.html#a9bc180dcf49e08d2b3c8f0bb7d8358b6">nn::profiler::MinimumBufferSize</a></div><div class="ttdeci">const size_t MinimumBufferSize</div><div class="ttdoc">The minimum buffer size needed by the profiler to function. </div><div class="ttdef"><b>Definition:</b> profiler_Api.h:40</div></div>
<div class="ttc" id="namespacenn_1_1os_html_a79e29821bfb2b0c3a5c222488e90cc89"><div class="ttname"><a href="namespacenn_1_1os.html#a79e29821bfb2b0c3a5c222488e90cc89">nn::os::GetSystemTick</a></div><div class="ttdeci">Tick GetSystemTick() NN_NOEXCEPT</div><div class="ttdoc">システムチック値を取得します。 </div></div>
<div class="ttc" id="classnn_1_1profiler_1_1_scoped_code_block_html"><div class="ttname"><a href="classnn_1_1profiler_1_1_scoped_code_block.html">nn::profiler::ScopedCodeBlock</a></div><div class="ttdoc">A specialized class for code block scope-based Enter/Exit functionality. </div><div class="ttdef"><b>Definition:</b> profiler_CodeBlocks.h:153</div></div>
<div class="ttc" id="namespacenn_1_1profiler_html_a1fd4585e5e75647e1cb20bb264f58f6e"><div class="ttname"><a href="namespacenn_1_1profiler.html#a1fd4585e5e75647e1cb20bb264f58f6e">nn::profiler::Initialize</a></div><div class="ttdeci">nn::Result Initialize(void *pBuffer, size_t bufferSize) NN_NOEXCEPT</div><div class="ttdoc">Initializes the profiler. </div><div class="ttdef"><b>Definition:</b> profiler_Api.h:76</div></div>
<div class="ttc" id="classnn_1_1_result_html"><div class="ttname"><a href="classnn_1_1_result.html">nn::Result</a></div><div class="ttdoc">処理の結果を汎用的に表す型です。 </div><div class="ttdef"><b>Definition:</b> nn_Result.h:31</div></div>
<div class="ttc" id="nn___assert_8h_html"><div class="ttname"><a href="nn___assert_8h.html">nn_Assert.h</a></div><div class="ttdoc">条件を満たしていることをテストする API の宣言 </div></div>
<div class="ttc" id="nn___time_span_8h_html"><div class="ttname"><a href="nn___time_span_8h.html">nn_TimeSpan.h</a></div><div class="ttdoc">TimeSpan クラスの宣言 </div></div>
<div class="ttc" id="profiler_8h_html"><div class="ttname"><a href="profiler_8h.html">profiler.h</a></div><div class="ttdoc">Nintendo NX CPU Profiler API. </div></div>
<div class="ttc" id="namespacenn_1_1profiler_html_a7fea676000503cc4f931e0d93d51f5f2"><div class="ttname"><a href="namespacenn_1_1profiler.html#a7fea676000503cc4f931e0d93d51f5f2">nn::profiler::ProfilerStatus</a></div><div class="ttdeci">ProfilerStatus</div><div class="ttdoc">An enumeration of the different states the profiler can be in. </div><div class="ttdef"><b>Definition:</b> profiler_Types.h:29</div></div>
<div class="ttc" id="classnn_1_1_time_span_html_a1b8582b5180ce7992fc82a148c7f8c90"><div class="ttname"><a href="classnn_1_1_time_span.html#a1b8582b5180ce7992fc82a148c7f8c90">nn::TimeSpan::FromMilliSeconds</a></div><div class="ttdeci">static TimeSpan FromMilliSeconds(int64_t milliSeconds) NN_NOEXCEPT</div><div class="ttdoc">ミリ秒数から TimeSpan オブジェクトを生成します。 </div><div class="ttdef"><b>Definition:</b> nn_TimeSpan.h:542</div></div>
<div class="ttc" id="namespacenn_1_1profiler_html_a686d62f2d301026212a1f2f19d32e5e0"><div class="ttname"><a href="namespacenn_1_1profiler.html#a686d62f2d301026212a1f2f19d32e5e0">nn::profiler::Finalize</a></div><div class="ttdeci">nn::Result Finalize() NN_NOEXCEPT</div><div class="ttdoc">Shuts down the profiler. </div></div>
<div class="ttc" id="namespacenn_1_1profiler_html_a40482ccaf3b2a56eb6e8e7aeddfebacb"><div class="ttname"><a href="namespacenn_1_1profiler.html#a40482ccaf3b2a56eb6e8e7aeddfebacb">nn::profiler::ExitCodeBlock</a></div><div class="ttdeci">nn::Result ExitCodeBlock(uint64_t id) NN_NOEXCEPT</div><div class="ttdoc">Records a code block exit in the profile data. </div></div>
<div class="ttc" id="namespacenn_1_1profiler_html_acd040cd20c33f208f315e60bdd0df745"><div class="ttname"><a href="namespacenn_1_1profiler.html#acd040cd20c33f208f315e60bdd0df745">nn::profiler::EnterCodeBlock</a></div><div class="ttdeci">nn::Result EnterCodeBlock(uint64_t id) NN_NOEXCEPT</div><div class="ttdoc">Records a code block entry in the profile data. </div></div>
<div class="ttc" id="_socket_resolver_8cpp_html_ae79180f8ae90e05743b47a872f305a52"><div class="ttname"><a href="_socket_resolver_8cpp.html#ae79180f8ae90e05743b47a872f305a52">nnMain</a></div><div class="ttdeci">void nnMain()</div><div class="ttdoc">nnMain This function runs the program. </div><div class="ttdef"><b>Definition:</b> SocketResolver.cpp:406</div></div>
<div class="ttc" id="classnn_1_1_time_span_html_ad68c54c586dc921319b8ef99bee505bf"><div class="ttname"><a href="classnn_1_1_time_span.html#ad68c54c586dc921319b8ef99bee505bf">nn::TimeSpan::FromMicroSeconds</a></div><div class="ttdeci">static TimeSpan FromMicroSeconds(int64_t microSeconds) NN_NOEXCEPT</div><div class="ttdoc">マイクロ秒数から TimeSpan オブジェクトを生成します。 </div><div class="ttdef"><b>Definition:</b> nn_TimeSpan.h:529</div></div>
<div class="ttc" id="namespacenn_1_1profiler_html_a7fea676000503cc4f931e0d93d51f5f2ab2d31e18bc33aa3304cb0e14eed05911"><div class="ttname"><a href="namespacenn_1_1profiler.html#a7fea676000503cc4f931e0d93d51f5f2ab2d31e18bc33aa3304cb0e14eed05911">nn::profiler::ProfilerStatus_Transferring</a></div><div class="ttdoc">The profiler has finished profiling but is still transferring data to the PC. </div><div class="ttdef"><b>Definition:</b> profiler_Types.h:41</div></div>
<div class="ttc" id="namespacenn_1_1profiler_html_a6188c8828050128b52e98bf5fc953b05"><div class="ttname"><a href="namespacenn_1_1profiler.html#a6188c8828050128b52e98bf5fc953b05">nn::profiler::GetProfilerStatus</a></div><div class="ttdeci">ProfilerStatus GetProfilerStatus() NN_NOEXCEPT</div><div class="ttdoc">Gets the current status of the profiler. </div></div>
<div class="ttc" id="nn___abort_8h_html_a1e657a678a588533a020c2e947df7772"><div class="ttname"><a href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a></div><div class="ttdeci">#define NN_ABORT_UNLESS_RESULT_SUCCESS(result)</div><div class="ttdoc">指定した nn::Result に対して成功であるかどうかをテストし、そうではない場合に停止します。 満たされるべ...</div><div class="ttdef"><b>Definition:</b> nn_Abort.h:164</div></div>
<div class="ttc" id="namespacenn_1_1profiler_html_a7fea676000503cc4f931e0d93d51f5f2aee16006157055d994c7694213ee3be42"><div class="ttname"><a href="namespacenn_1_1profiler.html#a7fea676000503cc4f931e0d93d51f5f2aee16006157055d994c7694213ee3be42">nn::profiler::ProfilerStatus_Profiling</a></div><div class="ttdoc">The profiler is currently taking a profile. </div><div class="ttdef"><b>Definition:</b> profiler_Types.h:38</div></div>
<div class="ttc" id="namespacenn_1_1profiler_html_a90d857e6e5c2a9fe9f8938f1dd8d1829"><div class="ttname"><a href="namespacenn_1_1profiler.html#a90d857e6e5c2a9fe9f8938f1dd8d1829">nn::profiler::RecordHeartbeat</a></div><div class="ttdeci">nn::Result RecordHeartbeat(Heartbeats heartbeat) NN_NOEXCEPT</div><div class="ttdoc">Records the specified heartbeat into the current core&#39;s buffer. </div></div>
<div class="ttc" id="nn___macro_8h_html_ad752e23348021cdb2cafabb4d054b7bc"><div class="ttname"><a href="nn___macro_8h.html#ad752e23348021cdb2cafabb4d054b7bc">NN_MACRO_STRINGIZE</a></div><div class="ttdeci">#define NN_MACRO_STRINGIZE(text)</div><div class="ttdoc">文字列リテラルを作成します。 </div><div class="ttdef"><b>Definition:</b> nn_Macro.h:353</div></div>
<div class="ttc" id="namespacenn_1_1profiler_html_a9bcc0188395af2ef6c82c28465693edd"><div class="ttname"><a href="namespacenn_1_1profiler.html#a9bcc0188395af2ef6c82c28465693edd">nn::profiler::RecordData</a></div><div class="ttdeci">nn::Result RecordData(uint64_t id, uint64_t data) NN_NOEXCEPT</div><div class="ttdoc">Records the specified data into the current core&#39;s buffer. </div></div>
</div><!-- fragment --><h2><a class="anchor" id="PageSampleProfilerSimple_SectionSampleDetail"></a>
Sample Program Description</h2>
<p>This sample makes use of the various function in the <a class="el" href="namespacenn_1_1profiler.html" title="Nintendo NX CPU Profiler Namespace. ">nn::profiler</a> namespace. The intention is to provide an example on expected usage of these functions.</p>
<p>This sample is to be used in conjunction with the Nintendo NX CPU Profiler PC executable. The executable can be found in Tools/NintendoNxCpuProfiler.</p>
<p>The sample shows the basic method used to both Initialize and Finalize the profiler. It also shows how to record the framerate, record code blocks, and record data. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</body>
</html>
