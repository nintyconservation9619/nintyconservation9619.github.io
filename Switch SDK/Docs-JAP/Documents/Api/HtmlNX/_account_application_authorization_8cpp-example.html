<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>NintendoSDK API Reference: AccountApplicationAuthorization.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="openclose.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NintendoSDK API Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- æ§‹ç¯‰: Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'æ¤œç´¢');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>ç·åˆæ¦‚è¦</span></a></li>
      <li><a href="pages.html"><span>è«¸æƒ…å ±</span></a></li>
      <li><a href="modules.html"><span>ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</span></a></li>
      <li><a href="namespaces.html"><span>åå‰ç©ºé–“</span></a></li>
      <li><a href="annotated.html"><span>ã‚¯ãƒ©ã‚¹</span></a></li>
      <li><a href="files.html"><span>ãƒ•ã‚¡ã‚¤ãƒ«</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="æ¤œç´¢" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">AccountApplicationAuthorization.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜ã¯ã€<a class="el" href="_page_sample_account_application_authorization.html">ãƒ‹ãƒ³ãƒ†ãƒ³ãƒ‰ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ã®OAuth 2.0/OpenID Connectã®ãŸã‚ã®èªå¯å–å¾—æ©Ÿèƒ½ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã®åˆ©ç”¨</a> ãŠã‚ˆã³ <a class="el" href="_account_application_authorization_8cpp.html" title="ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦ã€ãƒ‹ãƒ³ãƒ†ãƒ³ãƒ‰ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚µãƒ¼ãƒãƒ¼ã¨ã®OAuth 2.0/OpenID Connectã®ãŸã‚ã®èªå...">AccountApplicationAuthorization.cpp</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<div class="fragment"><div class="line"><span class="comment">/*--------------------------------------------------------------------------------*</span></div>
<div class="line"><span class="comment">  Copyright (C)Nintendo All rights reserved.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">  These coded instructions, statements, and computer programs contain proprietary</span></div>
<div class="line"><span class="comment">  information of Nintendo and/or its licensed developers and are protected by</span></div>
<div class="line"><span class="comment">  national and international copyright laws. They may not be disclosed to third</span></div>
<div class="line"><span class="comment">  parties or copied or duplicated in any form, in whole or in part, without the</span></div>
<div class="line"><span class="comment">  prior written consent of Nintendo.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">  The content herein is highly confidential and should be handled accordingly.</span></div>
<div class="line"><span class="comment"> *--------------------------------------------------------------------------------*/</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;AccountApplicationAuthorization.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="account___api_8h.html">nn/account/account_Api.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="account___api_for_applications_8h.html">nn/account/account_ApiForApplications.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="account___nintendo_account_authorization_request_8h.html">nn/account/account_NintendoAccountAuthorizationRequest.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="account___result_8h.html">nn/account/account_Result.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="account___selector_8h.html">nn/account/account_Selector.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nn___assert_8h.html">nn/nn_Assert.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="err_8h.html">nn/err.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nn/nifm/nifm_Api.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;nn/nifm/nifm_ApiNetworkConnection.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="os___system_event_8h.html">nn/os/os_SystemEvent.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="os___tick_8h.html">nn/os/os_Tick.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="util___scope_exit_8h.html">nn/util/util_ScopeExit.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">namespace</span></div>
<div class="line">{</div>
<div class="line"><a name="a0"></a><a class="code" href="nn___macro_8h.html#a6ce9d4b07ab8bec971ac8875873615b5">NN_ALIGNAS</a>(4096) <span class="keywordtype">char</span> g_AuthorizationBuffer[<a name="a1"></a><a class="code" href="namespacenn_1_1account.html#a8463419c967fe243faedf8c88e0cf47b">nn::account::RequiredBufferSizeForNintendoAccountAuthorizationRequestContext</a>];</div>
<div class="line"></div>
<div class="line">} <span class="comment">// ç„¡ååå‰ç©ºé–“çµ‚ã‚ã‚Š</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¡ã‚¤ãƒ³</span></div>
<div class="line"><span class="keywordtype">void</span> Program::Execute() <a name="a2"></a><a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// ä¾å­˜ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®åˆæœŸåŒ–</span></div>
<div class="line">    <a name="a3"></a><a class="code" href="namespacenn_1_1nifm.html#a0e3aaf3209696149ec22613e1d3d6705">nn::nifm::Initialize</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®åˆæœŸåŒ–</span></div>
<div class="line">    <a name="a4"></a><a class="code" href="namespacenn_1_1account.html#ac5870470963c9923c63f76e03c8c024e">nn::account::Initialize</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®é¸æŠç”»é¢ã®è¡¨ç¤º</span></div>
<div class="line">    <span class="comment">// - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã«ã‚ˆã‚‹ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ™‚ã«ã¯ nn::account::ResultCancelledByUser ãŒè¿”ã‚‹ã€‚</span></div>
<div class="line">    <span class="comment">// - ã“ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã¯ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’è¦æ±‚ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé¸æŠã‚’è¡Œã†ã€‚</span></div>
<div class="line">    <a name="_a5"></a><a class="code" href="structnn_1_1account_1_1_uid.html">nn::account::Uid</a> uid;</div>
<div class="line">    <a name="_a6"></a><a class="code" href="structnn_1_1account_1_1_user_selection_settings.html">nn::account::UserSelectionSettings</a> cfg = <a name="a7"></a><a class="code" href="namespacenn_1_1account.html#acc263608192f7bbdef34e3b5ae007258">nn::account::DefaultUserSelectionSettings</a>;</div>
<div class="line">    cfg.<a name="a8"></a><a class="code" href="structnn_1_1account_1_1_user_selection_settings.html#a72ca9c5bd9ae70c4849676f795df366b">isNetworkServiceAccountRequired</a> = <span class="keyword">true</span>;</div>
<div class="line">    <span class="keyword">auto</span> r = <a name="a9"></a><a class="code" href="namespacenn_1_1account.html#a749534bdfdee56eebe9203a526390b32">nn::account::ShowUserSelector</a>(&amp;uid, cfg);</div>
<div class="line">    <span class="keywordflow">if</span> (nn::account::ResultCancelledByUser::Includes(r))</div>
<div class="line">    {</div>
<div class="line">        Printfln(<span class="stringliteral">&quot;- User selection cancelled&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">    <a name="a10"></a><a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(r);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã‚·ãƒ¼ãƒ³ã‚’é–‹å§‹</span></div>
<div class="line">    SceneSingleUser(uid);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã‚·ãƒ¼ãƒ³</span></div>
<div class="line"><span class="keywordtype">void</span> Program::SceneSingleUser(<span class="keyword">const</span> <a class="code" href="structnn_1_1account_1_1_uid.html">nn::account::Uid</a>&amp; uid) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// é¸æŠã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ Open</span></div>
<div class="line">    <a name="_a11"></a><a class="code" href="structnn_1_1account_1_1_user_handle.html">nn::account::UserHandle</a> handle;</div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a12"></a><a class="code" href="namespacenn_1_1account.html#a06fd27c776fbc31c918ea0a84ddb1f41">nn::account::OpenUser</a>(&amp;handle, uid));</div>
<div class="line">    <a name="a13"></a><a class="code" href="util___scope_exit_8h.html#a674e2d673758265abe6e8e17426489ea">NN_UTIL_SCOPE_EXIT</a></div>
<div class="line">    {</div>
<div class="line">        <a name="a14"></a><a class="code" href="namespacenn_1_1account.html#aaf1a6e0b8cbcef6f62eae042bca5b7cb">nn::account::CloseUser</a>(handle);</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ã‚·ãƒ³ã‚°ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã‚’æƒ³å®šã—ãŸå‡¦ç†ã‚’é–‹å§‹</span></div>
<div class="line">    SceneSingleUserWithNetwork(handle);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// ã‚·ãƒ³ã‚°ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã‚’æƒ³å®šã—ãŸå‡¦ç†</span></div>
<div class="line"><span class="keywordtype">void</span> Program::SceneSingleUserWithNetwork(<span class="keyword">const</span> <a class="code" href="structnn_1_1account_1_1_user_handle.html">nn::account::UserHandle</a>&amp; handle) <a class="code" href="nn___macro_8h.html#a0e31cc4dc24d85253a31e48b1a85ab33">NN_NOEXCEPT</a></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šè¦æ±‚</span></div>
<div class="line">    <span class="keywordflow">while</span> (<a name="a15"></a><a class="code" href="nn___macro_8h.html#a71c0f58f6d49fe1392380eed4509ab9a">NN_STATIC_CONDITION</a>(<span class="keyword">true</span>))</div>
<div class="line">    {</div>
<div class="line">        <a name="a16"></a><a class="code" href="namespacenn_1_1nifm.html#ac42c271bffbeb6324e5a41ae779d6575">nn::nifm::SubmitNetworkRequestAndWait</a>();</div>
<div class="line">        <span class="keywordflow">if</span> (!<a name="a17"></a><a class="code" href="namespacenn_1_1nifm.html#a933a28d229a56e800703d95d4830fc6a">nn::nifm::IsNetworkAvailable</a>())</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">auto</span> r = <a name="a18"></a><a class="code" href="namespacenn_1_1nifm.html#a5ac6e9f2b52fb8319c0bc4e69d059ce4">nn::nifm::HandleNetworkRequestResult</a>();</div>
<div class="line">            <span class="keywordflow">if</span> (!r.IsSuccess())</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span> (!nn::nifm::ResultErrorHandlingCompleted::Includes(r))</div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// ã‚¨ãƒ©ãƒ¼ã‹ã¤ã€ãã‚Œã‚’è§£æ¶ˆã§ããªã‹ã£ãŸå ´åˆã¯ã‚·ãƒ¼ãƒ³ã‚’çµ‚äº†ã™ã‚‹ã€‚</span></div>
<div class="line">                    <span class="keywordflow">return</span>;</div>
<div class="line">                }</div>
<div class="line">                <span class="comment">// ã‚¨ãƒ©ãƒ¼ã‹ã¤ã€ãã‚Œã‚’è§£æ¶ˆã§ããŸå ´åˆã¯ãƒªãƒˆãƒ©ã‚¤ã™ã‚‹ã€‚</span></div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="comment">// break</span></div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’åˆ©ç”¨ã§ãã‚‹ã€‚</span></div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ãƒ‹ãƒ³ãƒ†ãƒ³ãƒ‰ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®èªå¯å–å¾—ã®ãŸã‚ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</span></div>
<div class="line">    <a name="_a19"></a><a class="code" href="structnn_1_1account_1_1_nintendo_account_authorization_request_parameters.html">nn::account::NintendoAccountAuthorizationRequestParameters</a> param =  {</div>
<div class="line">        <span class="stringliteral">&quot;user.basic openid&quot;</span>,    <span class="comment">// ã“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒãƒ‹ãƒ³ãƒ†ãƒ³ãƒ‰ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã©ã®ã‚ˆã†ãªæ¨©é™ã‚’è¦æ±‚ã™ã‚‹ã‹ã‚’å®šã‚ã‚‹ã€‚</span></div>
<div class="line">        <span class="stringliteral">&quot;example_state&quot;</span>,        <span class="comment">// ã“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€èªè¨¼,èªå¯å–å¾—ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã®ä¸­é–“è€…æ”»æ’ƒã‚’é˜²æ­¢ã™ã‚‹ãŸã‚ã«ç”¨ã„ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚</span></div>
<div class="line">        <span class="stringliteral">&quot;example_nonce&quot;</span>         <span class="comment">// ã“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯IDãƒˆãƒ¼ã‚¯ãƒ³ã«å«ã¾ã‚Œã‚‹ãŸã‚ã€é€šä¿¡ã®æ”¹ã–ã‚“ã‚’ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§æ¤œè¨¼ã§ãã‚‹ã€‚</span></div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    <a name="_a20"></a><a class="code" href="classnn_1_1account_1_1_nintendo_account_authorization_request_context.html">nn::account::NintendoAccountAuthorizationRequestContext</a> ctx;</div>
<div class="line">    <span class="keyword">auto</span> durationMsec = -1ll;</div>
<div class="line">    <span class="keywordflow">while</span> (<a class="code" href="nn___macro_8h.html#a71c0f58f6d49fe1392380eed4509ab9a">NN_STATIC_CONDITION</a>(<span class="keyword">true</span>))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// ã“ã®ã‚¹ã‚³ãƒ¼ãƒ—ã®å‡¦ç†æ™‚é–“ã‚’æ¸¬ã‚‹</span></div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">auto</span> begin = <a name="a21"></a><a class="code" href="namespacenn_1_1os.html#a79e29821bfb2b0c3a5c222488e90cc89">nn::os::GetSystemTick</a>();</div>
<div class="line">            <a class="code" href="util___scope_exit_8h.html#a674e2d673758265abe6e8e17426489ea">NN_UTIL_SCOPE_EXIT</a></div>
<div class="line">            {</div>
<div class="line">                <span class="keyword">auto</span> end = <a class="code" href="namespacenn_1_1os.html#a79e29821bfb2b0c3a5c222488e90cc89">nn::os::GetSystemTick</a>();</div>
<div class="line">            durationMsec = (end - begin).ToTimeSpan().GetMilliSeconds();</div>
<div class="line">            };</div>
<div class="line"></div>
<div class="line">            <span class="comment">// ãƒ‹ãƒ³ãƒ†ãƒ³ãƒ‰ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã®èªå¯å–å¾—ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¡Œã†</span></div>
<div class="line">            <span class="comment">// - ctx.Cancel() ã‚’å‘¼ã¶ã¨ã€å¯èƒ½ãªé™ã‚Šæ—©ãã‚¤ãƒ™ãƒ³ãƒˆãŒã‚·ã‚°ãƒŠãƒ«ã•ã‚Œã‚‹ã€‚</span></div>
<div class="line">            <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(<a name="a22"></a><a class="code" href="namespacenn_1_1account.html#a97db15f53d40e45b87cbbbc5dfdf17be">nn::account::CreateNintendoAccountAuthorizationRequest</a>(</div>
<div class="line">                &amp;ctx, handle, param, g_AuthorizationBuffer, <span class="keyword">sizeof</span>(g_AuthorizationBuffer)));</div>
<div class="line">            <a name="_a23"></a><a class="code" href="classnn_1_1os_1_1_system_event.html">nn::os::SystemEvent</a> e;</div>
<div class="line">            <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(ctx.<a name="a24"></a><a class="code" href="classnn_1_1account_1_1_nintendo_account_authorization_request_context.html#af9019c42542c2eb8dd803f005af00cf5">GetSystemEvent</a>(&amp;e));</div>
<div class="line">            e.<a name="a25"></a><a class="code" href="classnn_1_1os_1_1_system_event.html#a51c8560630f9760922b6e180b75a45b2">Wait</a>();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®çµæœã‚’å–å¾—ã—ã€å¿…è¦ã§ã‚ã‚Œã°æœ¬ä½“ã‚·ã‚¹ãƒ†ãƒ ã®UIã‚’è¡¨ç¤ºã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ“ä½œã‚’è¦æ±‚ã™ã‚‹ã€‚</span></div>
<div class="line">        <span class="keyword">auto</span> r = ctx.<a name="a26"></a><a class="code" href="classnn_1_1account_1_1_nintendo_account_authorization_request_context.html#aa5f5df377e78cc8fb24089d852efd8e7">GetResultWithInteractionIfRequired</a>();</div>
<div class="line">        <span class="keywordflow">if</span> (!r.IsSuccess())</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (nn::account::ResultCancelledByUser::Includes(r))</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// æœ¬ä½“ã‚·ã‚¹ãƒ†ãƒ ã®UIä¸Šã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«æ“ä½œã‚’è¡Œã£ãŸã€‚</span></div>
<div class="line">                Printfln(<span class="stringliteral">&quot;- NintendoAccountAuthorizationRequestContext cancelled&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nn::account::ResultNetworkCommunicationError::Includes(r))</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«é€šä¿¡é–¢ä¿‚ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ</span></div>
<div class="line">                <span class="comment">// - ã“ã‚Œã«ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ›´æ–°ãŒå¿…è¦ãªå ´åˆã‚„ã€æœ¬ä½“æ›´æ–°ãŒå¿…è¦ãªå ´åˆã‚‚å«ã¾ã‚Œã‚‹ã€‚</span></div>
<div class="line">                <span class="comment">// - nn::error::ShowError() ã«æ¸¡ã—ã€è©³ç´°ãªã‚¨ãƒ©ãƒ¼å†…å®¹ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æç¤ºã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</span></div>
<div class="line">                <a name="a27"></a><a class="code" href="namespacenn_1_1err.html#a245efc14eca3ff209ce8858b059ec739">nn::err::ShowError</a>(r);</div>
<div class="line">                <span class="keywordflow">return</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="comment">// ctx.Cancel() ãŒå‘¼ã°ã‚Œã¦ã„ã‚‹ã¨ã€ã“ã“ã§ nn::account::ResultCancelled() ãŒè¿”ã‚‹å ´åˆãŒã‚ã‚‹ã€‚</span></div>
<div class="line">            <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(r);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// æˆåŠŸã—ãŸå ´åˆã€ state ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒæœ€åˆã«æŒ‡å®šã—ãŸã‚‚ã®ã¨ä¸€è‡´ã™ã‚‹ã‹ã‚’å¿µã®ãŸã‚ã«ç¢ºèªã™ã‚‹ã€‚</span></div>
<div class="line">        <span class="comment">// - ã“ã‚Œã¯å¿…è¦ãªæ“ä½œã§ã¯ãªãã€ nonce ã‚’æŒ‡å®šã—ã¦ã„ã‚Œã°ã‚µãƒ¼ãƒãƒ¼å´ã§ã®æ¤œè¨¼ã®ã¿ã§ã‚ˆã„ã€‚</span></div>
<div class="line">        <span class="keywordtype">size_t</span> stateLength;</div>
<div class="line">        <span class="keywordtype">char</span> state[128];</div>
<div class="line">        <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(ctx.<a name="a28"></a><a class="code" href="classnn_1_1account_1_1_nintendo_account_authorization_request_context.html#a3a04bdfc5ebbb7f227068884ce515cd8">GetState</a>(&amp;stateLength, state, <span class="keyword">sizeof</span>(state)));</div>
<div class="line">        <a name="a29"></a><a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>(strnlen(param.<a name="a30"></a><a class="code" href="structnn_1_1account_1_1_nintendo_account_authorization_request_parameters.html#ad398b4f53bbda3d830f0f0f9cd105be5">state</a>, <span class="keyword">sizeof</span>(param.<a class="code" href="structnn_1_1account_1_1_nintendo_account_authorization_request_parameters.html#ad398b4f53bbda3d830f0f0f9cd105be5">state</a>)) == stateLength, <span class="stringliteral">&quot;Unexpected state used&quot;</span>);</div>
<div class="line">        <a class="code" href="nn___abort_8h.html#a5c1a90d3a6474658ae0ac5dc5bcb14e4">NN_ABORT_UNLESS</a>(std::strncmp(state, param.<a class="code" href="structnn_1_1account_1_1_nintendo_account_authorization_request_parameters.html#ad398b4f53bbda3d830f0f0f9cd105be5">state</a>, stateLength) == 0, <span class="stringliteral">&quot;Unexpected state used&quot;</span>);</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    Printfln(<span class="stringliteral">&quot;- Nintendo Account authorization turnaround: %lld msec&quot;</span>, durationMsec);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ãƒ‹ãƒ³ãƒ†ãƒ³ãƒ‰ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®èªå¯ã‚³ãƒ¼ãƒ‰ã¨IDãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã™ã‚‹</span></div>
<div class="line">    <span class="keyword">auto</span>* code = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(std::malloc(<a name="a31"></a><a class="code" href="namespacenn_1_1account.html#a57a1b12020bba6639ccef79d23f89161">nn::account::NintendoAccountAuthorizationCodeLengthMax</a>));</div>
<div class="line">    <a class="code" href="util___scope_exit_8h.html#a674e2d673758265abe6e8e17426489ea">NN_UTIL_SCOPE_EXIT</a></div>
<div class="line">    {</div>
<div class="line">        std::free(code);</div>
<div class="line">    };</div>
<div class="line">    <span class="keywordtype">size_t</span> codeLength;</div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(ctx.<a name="a32"></a><a class="code" href="classnn_1_1account_1_1_nintendo_account_authorization_request_context.html#acd6df91cfe9eb4f80d354c30e98f9f37">GetAuthorizationCode</a>(&amp;codeLength, code, <a class="code" href="namespacenn_1_1account.html#a57a1b12020bba6639ccef79d23f89161">nn::account::NintendoAccountAuthorizationCodeLengthMax</a>));</div>
<div class="line">    Printfln(<span class="stringliteral">&quot;- Nintendo Account authorization code: %.*s&quot;</span>, codeLength, code);</div>
<div class="line"></div>
<div class="line">    <span class="keyword">auto</span>* idToken = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(std::malloc(<a name="a33"></a><a class="code" href="namespacenn_1_1account.html#aa2f60d4be447019cfb6f4e58a50531b2">nn::account::NintendoAccountIdTokenLengthMax</a>));</div>
<div class="line">    <a class="code" href="util___scope_exit_8h.html#a674e2d673758265abe6e8e17426489ea">NN_UTIL_SCOPE_EXIT</a></div>
<div class="line">    {</div>
<div class="line">        std::free(idToken);</div>
<div class="line">    };</div>
<div class="line">    <span class="keywordtype">size_t</span> idTokenLength;</div>
<div class="line">    <a class="code" href="nn___abort_8h.html#a1e657a678a588533a020c2e947df7772">NN_ABORT_UNLESS_RESULT_SUCCESS</a>(ctx.<a name="a34"></a><a class="code" href="classnn_1_1account_1_1_nintendo_account_authorization_request_context.html#ab7c7df628970af668d95f563b0ec7a3f">GetIdToken</a>(&amp;idTokenLength, idToken, <a class="code" href="namespacenn_1_1account.html#aa2f60d4be447019cfb6f4e58a50531b2">nn::account::NintendoAccountIdTokenLengthMax</a>));</div>
<div class="line">    Printfln(<span class="stringliteral">&quot;- Nintendo Account ID Token: %.*s&quot;</span>, idTokenLength, idToken);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// :</span></div>
<div class="line">    <span class="comment">// ãã®ä»–ã‚ªãƒ³ãƒ©ã‚¤ãƒ³çŠ¶æ…‹ã§å®Ÿè¡Œå¯èƒ½ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…</span></div>
<div class="line">    <span class="comment">// :</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</body>
</html>
