<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>3D サウンド</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- 3D サウンド -->
<div class="pagetitle" id="PageId_83955837">3D サウンド</div>
<div class="text_separate">
<h1 id="Anchor_83955837_h1_1">3D サウンド</h1>
<p>このセクションでは、3D サウンドの動作仕様についての解説を行います。</p>
<h2 id="Anchor_83955837_h2_1">用語の解説</h2>
<p>3D サウンドにおいて使われる用語を解説します。</p>
<h3 id="Anchor_83955837_h3_1">3D サウンドリスナー</h3>
<p>実世界のマイク、または人間の耳に相当する概念をこのように呼びます。各 3D サウンドアクターの出す音を聞くマイクの座標と、その方向を情報として保持します。</p>
<p>このマニュアルの解説では、以後「リスナー」と省略して表記します。</p>
<h3 id="Anchor_83955837_h3_2">3D サウンドアクター</h3>
<p>実世界の音源（人や自動車）に相当する概念をこのように呼びます。音源の位置とその位置で発音するサウンドを情報として保持します。</p>
<p>このマニュアルの解説では、以後「アクター」と省略して表記します。</p>
<h3 id="Anchor_83955837_h3_3">インテリアサイズ</h3>
<p>インテリアサイズとは、リスナーと 3D サウンドアクターの位置関係が、各スピーカー間の出力バランス（パン、サラウンドパンの変化）として表現される空間の大きさを表します。</p>
<h3 id="Anchor_83955837_h3_4">サウンド最大音量範囲</h3>
<p>各サウンドがアクターでリクエストされたときに、常に最大のボリュームでサウンドが再生されるリスナーからの距離を指します。</p>
<h3 id="Anchor_83955837_h3_5">減衰単位距離</h3>
<p>アクターでリクエストされるサウンドは、リスナーとの距離に応じてボリュームとプレイヤープライオリティの減衰が行われます。この減衰を行う際の基準となる距離をこのように呼びます。</p>
<h3 id="Anchor_83955837_h3_6">プライオリティ最大減少量</h3>
<p>プレイヤープライオリティの減少量に対する制限をこのように呼びます。サウンドに対して行うプレイヤープライオリティの減衰において、各サウンドに本来設定されていたプレイヤープライオリティに対して「最大どの程度までの値を減衰するか？」を定義します。</p>
<p>図 1 リスナーとアクター</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83956111/83080145.gif" width="500" class="embedded-image" />
  </span>
</p>
<h2 id="Anchor_83955837_h2_2">動作仕様</h2>
<p>3D サウンドの動作仕様を、「ライブラリの動作」と「SoundMaker の動作」に分類して解説します。さらに詳しい操作方法については、「<a href="../Pages/Page_83955976.html">SoundMaker マニュアル</a>」など対応する各種ドキュメントをご覧ください。</p>
<p>また、SoundMaker や Atk ライブラリで設定される、音量やピッチ、パンなどの各種サウンドパラメータ制御の内部処理の流れや優先順位については、「<a href="../Pages/Page_83955829.html">サウンドパラメータ制御の動作</a>」の章を参照してください。</p>
<h3 id="Anchor_83955837_h3_7">ライブラリの動作</h3>
<p>3D サウンドを適用したいサウンドは、最初にアクターを確保し、確保した各アクターに対してリクエストを行います。</p>
<p>リスナーとアクターの座標をアプリケーションが随時更新することにより、3D サウンドは与えられた座標に応じて適切なパラメータの値を設定してスピーカーで疑似的な音場表現を行います。</p>
<p>図 2 3D サウンドの概念図</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83956111/83080146.gif" width="500" class="embedded-image" />
  </span>
</p>
<h4 id="Anchor_83955837_h4_1">リスナーとアクターの操作</h4>
<p>リスナーとアクターの操作は API により行います。リスナーにはその座標と向き、アクターにはその座標とサウンドのリクエストを行います。リスナーとアクターの座標は任意のタイミングで更新を行うことができます。</p>
<h4 id="Anchor_83955837_h4_2">パンとサラウンドパンの決定</h4>
<p>与えられたリスナーとアクターの位置関係に応じて、アクターでリクエストされるサウンドに対して適切なパンとサラウンドパンの値を決定します。</p>
<h4 id="Anchor_83955837_h4_3">ボリュームの減衰</h4>
<p>リスナーとアクターの距離に応じて、アクターでリクエストされるサウンドの音量を減衰します。音量の減衰は減衰単位距離を基準にして、リスナーとアクターの距離がサウンド最大音量範囲から減衰単位距離を離れるごとに、減衰率で指定された割合で減衰します。この時の減衰率と、減衰方法（カーブ）は SoundMaker から各サウンドに対して設定されます。</p>
<p>図 3 減衰単位距離を 1000 とした場合の例</p>
<table class="wrapped">
  <tbody>
    <tr>
      <td>
        <div class="content-wrapper">
          <p>
            <span class="embedded-file-wrapper ">
              <img src="../Attachments/Attach_83956111/83080148.gif" width="300" class="embedded-image" />
            </span>
          </p>
        </div>
      </td>
      <td>
        <div class="content-wrapper">
          <p>
            <span class="embedded-file-wrapper ">
              <img src="../Attachments/Attach_83956111/83080149.gif" width="300" class="embedded-image" />
            </span>
          </p>
        </div>
      </td>
    </tr>
  </tbody>
</table>
<h4 id="Anchor_83955837_h4_4">3D フィルタの制御</h4>
<p>リスナーとアクターの距離に応じて、アクターでリクエストされるサウンドに、biquad フィルタを適用します。<br />biquad フィルタのかかり具合は、音量の減衰と連動し、音量の減衰による距離の表現を補助します。</p>
<h4 id="Anchor_83955837_h4_5">プレイヤープライオリティの減衰</h4>
<p>リ スナーとアクターの距離に応じて、アクターでリクエストされるサウンドのプレイヤープライオリティを減衰しま す。<br />プレイヤープライオリティの減衰はボリュームの減衰に比例して行われます。<br />距離に応じてプライオリティ最大減少量の値に対して、ボリュームと同じ比率分に相 当する値を、各サウンドに予め設定されたプレイヤープライオリティから減衰します。</p>
<p>アクターとリスナーの距離がどれだけ離れても、仮にまったく音が聞こえなくなっても、プライオリティ最大減少量以上のプレイヤープライオリティの減衰は行われません。</p>
<h4 id="Anchor_83955837_h4_6">ドップラー効果の表現</h4>
<p>リスナーとアクターの移動速度に応じて、アクターでリクエストされるサウンドのピッチを変化させることで、音源とそれを聞く人の相対的な速度に応じて、ピッチが変化して聞こえる「ドップラー効果」を表現します。</p>
<p>ドップラー効果は、リスナーとアクターの現在位置と、前回呼び出し時の位置との差分から速度を算出し、この速度と、予め設定された音速とドップラーファクターのパラメータにより、アクターでリクエストされるサウンドのピッチを変化します。</p>
<p>ドップラーファクターは、ドップラー効果の「効き具合」を調整するパラメータです。<br />ドップラーファクターの指定は SoundMaker によって、各サウンド単位で行います。</p>
<h4 id="Anchor_83955837_h4_7">再生スイッチの制御</h4>
<p>3D サウンドによる各種パラメータの制御は、各サウンドに設定された再生スイッチにより「制御を行うか行わないか？」を設定することができます。サウンドに対する再生スイッチの指定は SoundMaker によって行われます。</p>
<h3 id="Anchor_83955837_h3_8">SoundMaker の動作</h3>
<p>SoundMaker では各サウンドが 3D サウンドでリクエストされた場合の動作を設定します。</p>
<h4 id="Anchor_83955837_h4_8">再生スイッチの指定</h4>
<p>作成する各サウンドに対して、ボリューム、パン、サラウンドパン、プレイヤープライオリティ、3D フィルタの再生スイッチを個別に設定することができます。<br />再生スイッチは、3D サウンドによる各パラメータの制御を「行うか、行わないか」を個別に設定します。</p>
<p>これにより、例えば「パンとサラウンドパンは 3D サウンドで決定したいが、ボリュームだけは常に同じにしたい」、「どれほど遠くにいても（ボリュームが小さくても）、必ず再生されるようなプレイヤープライオリティを設定したい」などの指定が可能になります。</p>
<h4 id="Anchor_83955837_h4_9">音量減衰カーブの指定</h4>
<p>作成する各サウンドに対して、音量減衰カーブの指定を、「対数」と「リニア」の 2 種類から選択できます。通常は対数を選択することで、よりリアルな音の効果を得ます。リニアは 1 個のアクターによって川や波打ち際などの表現を行う場合に有効です。</p>
<h4 id="Anchor_83955837_h4_10">音量減衰率の指定</h4>
<p>作成する各サウンドに対して、音量減衰率を指定できます。これによって例えば「重要なサウンドは遠くても大きく、さほど重要でないサウンドはより早く減衰する」などの指定が可能になります。</p>
<h4 id="Anchor_83955837_h4_11">ドップラーファクター</h4>
<p>作成する各サウンドに対して、ドップラーファクターを指定できます。ドップラーファクターは、ドップラー効果の「効き具合」を調整するパラメータです。</p>
<h2 id="Anchor_83955837_h2_3">インテリアサイズと最大音量範囲</h2>
<p>インテリアサイズと最大音量範囲の違いについて解説します。</p>
<h3 id="Anchor_83955837_h3_9">インテリアサイズと最大音量範囲の関係</h3>
<p>インテリアサイズの設定は、リスナーとアクターの位置関係から各スピーカーの出力バランスを調整するのに対し、最大音量範囲は、リスナーとアクターの位置関係から出力音量を調整するため、これらは互いに影響を与えることはなく独立して作用します。</p>
<p>図 4 インテリアサイズと最大音量範囲</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83956111/83080150.gif" class="embedded-image" />
  </span>
</p>
<p align="center">
  <br />
</p>
<h3 id="Anchor_83955837_h3_10">インテリアサイズの特徴</h3>
<p>インテリアサイズを半径とする円の外に アクターが存在する場合、アクターからの距離が最も短い円周上にいるものとして出力バランスが設定されます。</p>
<p>図 5 インテリアサイズの特徴１</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83956111/83080151.gif" class="embedded-image" />
  </span>
</p>
<p>図 5 の A1 は、円周上の A1' の位置にいるものとして、図中の A2 は、円周上の A2' の位置にいるものとして出力バランスが設定されます。</p>
<p>インテリアサイズの変更によって、音量が変化することはありません。A1 と A1&rsquo; （A2 と A2&rsquo;） にいる場合の音量は、最大音量範囲によって決定されます。</p>
<p>図 5 インテリアサイズの特徴１</p>
<p>
  <br />
</p>
<p>インテリアサイズを大きくすると、円内にアクターが含まれやすくなるため、音が中央に集まりやすく（左右に振れにくく）なり、同じ移動速度、移動距離でも緩やかに出力バランスが変化するようになります。</p>
<p>逆に、インテリアサイズを小さくすると、円内にアクターが含まれにくくなるため、音が広がりやすく（左右に振れやすく）なり、同じ移動速度、移動距離でも急に出力バランスが変化するようになります。</p>
<p>図 6 インテリアサイズの特徴２</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83956111/83080152.gif" class="embedded-image" />
  </span>
</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
