<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>一時ストレージ</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- 一時ストレージ -->
<div class="pagetitle" id="PageId_224955140">一時ストレージ</div>
<div class="text_separate">
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>一時ストレージ機能を利用するには事前の申請が必要です。任天堂の窓口までご相談ください。</p>
    <p>ご相談の際には次の情報をお知らせください。</p>
    <ul>
      <li>
        <span style="color: rgb(33,33,33);">一時ストレージサイズ</span>
      </li>
      <li>一時ストレージサイズの内訳（各要素の内容、サイズ、要素数）</li>
      <li>一時ストレージにアプリケーション終了時に削除されると支障があるデータが含まれていないか</li>
      <li>ゲーム性を損なわない範囲で圧縮やデータ形式変更などによるサイズの最適化を行ったか</li>
    </ul>
  </div>
</div>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>一時ストレージ機能は <span style="color: rgb(51,51,51);">NX Addon 3.1.0 以降で利用できます。</span></p>
  </div>
</div>
<h1 id="Anchor_224955140_h1_1">機能概要</h1>
<p>一時ストレージ機能は、アプリケーションが一時的にファイルを保存するためのワーク領域を提供します。<strong>一時ストレージに書き込まれた内容は永続化されません。</strong></p>
<p>アプリケーションごとに最大 1 つ存在し、ユーザーアカウントには紐づきません。</p>
<p>例えば以下のような目的で使用することを意図した領域です。</p>
<ul style="list-style-type: square;">
  <li>動画のエンコードのための一時保存</li>
  <li>再生成・再取得可能なデータの一時保存</li>
</ul>
<p>以下の点がキャッシュストレージ機能と異なります。</p>
<ul style="list-style-type: square;">
  <li>アプリケーション終了時に削除され、起動時には常に空になっていることが保証される</li>
  <li>ジャーナリング機能によるデータ保護、およびそれに伴うコミット間の書き込み量制限がない<br /><br /></li>
</ul>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>再取得・再生成可能だがアプリ終了後にも残る必要があるデータの保存には、<a href="../Pages/Page_224957652.html">キャッシュストレージ</a>機能をご利用ください。</p>
  </div>
</div>
<h1 id="Anchor_224955140_h1_2">作成</h1>
<p>nmeta ファイルに以下の要素を記述した状態でアプリケーションを起動すると、システムが自動で作成します。</p>
<p>アプリケーション起動時点で、作成済みであること、および内容が空であることが保証されます。</p>
<table class="wrapped" style="margin-left: 1.5em;">
  <colgroup>
    <col />
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>項目名</th>
      <th>概要</th>
      <th>補足</th>
    </tr>
    <tr>
      <td>NintendoSdkMeta/Application/TemporaryStorageSize</td>
      <td>一時ストレージのサイズ</td>
      <td>16KB 単位、48 KB 以上、4000 MB 以下である必要があります。</td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_224955140_h2_1">設定例</h2>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">&quot;1.0&quot;</span>?&gt;
&lt;NintendoSdkMeta&gt;
&nbsp;&nbsp;&lt;Core&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;Name&gt;Application&lt;/Name&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;ApplicationId&gt;0x0005000C10000000&lt;/ApplicationId&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;Is64BitInstruction&gt;True&lt;/Is64BitInstruction&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;ProcessAddressSpace&gt;AddressSpace64Bit&lt;/ProcessAddressSpace&gt;
&nbsp;&nbsp;&lt;/Core&gt;
&nbsp;&nbsp;&lt;Application&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;TemporaryStorageSize&gt;0x0000000004000000&lt;/TemporaryStorageSize&gt;
&nbsp;&nbsp;&lt;/Application&gt;
&lt;/NintendoSdkMeta&gt;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_224955140_h1_3">マウント・ファイル操作</h1>
<p>
  <span class="ApiLink_nn__fs__MountTemporaryStorage">nn::fs::MountTemporaryStorage</span>() でマウントできます。</p>
<p>ジャーナリング機能をサポートしません。<span class="ApiLink_nn__fs__Commit">nn::fs::Commit</span>() を実行する必要はありません。</p>
<h1 id="Anchor_224955140_h1_4">制限・特性</h1>
<p>ジャーナリング機能をサポートしないため、アンマウントして再マウントした場合に巻き戻しは発生せず、アンマウント前の内容がそのまま残ります。また、ジャーナリング領域サイズに応じた、コミット間の書き込みサイズ制限はありません。</p>
<p>その他、エントリ名長、ブロック割当などに関する制限・特性は&nbsp;<a href="../Pages/Page_107320205.html">セーブデータ</a>&nbsp;および&nbsp;<a href="../Pages/Page_107782148.html">セーブデータ (NX Addon)</a>&nbsp;と同様です。</p>
<h1 id="Anchor_224955140_h1_5">一時ストレージの配置場所</h1>
<p>一時ストレージは本体保存メモリーに配置されます。</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>将来的に、一時ストレージを SD カード等の外部ストレージに配置する機能を提供する可能性があります。</p>
  </div>
</div>
<h1 id="Anchor_224955140_h1_6">注意事項</h1>
<p>注意事項のまとめです。</p>
<ul style="list-style-type: square;">
  <li>一時ストレージ機能を利用する場合は事前に任天堂の窓口に相談してください。</li>
  <li>一時ストレージ機能は&nbsp;<span style="color: rgb(51,51,51);">NX Addon 3.1.0 以降で利用できます。</span></li>
  <li>指定したサイズの一時ストレージが本体保存メモリー上に確保できない場合、アプリケーションは起動できません。必要以上に大きなサイズを指定しないよう注意してください。</li>
  <li>一時ストレージに書き込んだ内容は永続化されません。</li>
</ul>
<p>
  <br />
</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank">';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__fs__MountTemporaryStorage', '../../../Api/HtmlNX/namespacenn_1_1fs.html#a8191828699cf3d29befe8dbd710db421' )
SetUrl( 'ApiLink_nn__fs__Commit', '../../../Api/HtmlNX/namespacenn_1_1fs.html#ab534529ae3c325863fe1eb34bd03c872' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
