<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>開発向けオーバービュー</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- 開発向けオーバービュー -->
<div class="pagetitle" id="PageId_83956190">開発向けオーバービュー</div>
<div class="text_separate">
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_83956190_h1_1">FS ライブラリが提供する機能</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83956190_h2_1">データアクセス</a>
      </li>
      <li>
        <a href="#Anchor_83956190_h2_2">共通のインターフェイス</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83956190_h1_2">FS ライブラリの制約</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83956190_h2_3">パス文字列</a>
      </li>
      <li>
        <a href="#Anchor_83956190_h2_4">Case-Sensitivity（大文字・小文字の区別）について</a>
      </li>
      <li>
        <a href="#Anchor_83956190_h2_5">ファイル・ディレクトリのオープン数について</a>
      </li>
      <li>
        <a href="#Anchor_83956190_h2_6">デバッグ用 API の利用について</a>
      </li>
      <ul>
        <li>
          <a href="#Anchor_83956190_h3_1">デバッグ用 API を制限するための設定</a>
        </li>
      </ul>
    </ul>
  </ul>
</p>
<h1 id="Anchor_83956190_h1_1">FS ライブラリが提供する機能</h1>
<h2 id="Anchor_83956190_h2_1">データアクセス</h2>
<p>FS ライブラリを利用して、以下のデータを操作することができます。</p>
<ul>
  <li>アプリケーションのリソースデータ</li>
  <li>アプリケーションの追加コンテンツデータ</li>
  <li>アプリケーションのセーブデータ</li>
  <li>SD カード上のデータ（ただし、デバッグ用途に限る）</li>
  <li>ホスト PC 上のデータ（ただし、デバッグ用途に限る）</li>
</ul>
<h2 id="Anchor_83956190_h2_2">共通のインターフェイス</h2>
<p>FS ライブラリによるエントリの基本的な操作は同一のインターフェイスで行えます。</p>
<h1 id="Anchor_83956190_h1_2">FS ライブラリの制約</h1>
<p>各 API に関する制約については <a class="external-link" href="../../../Api/HtmlNX/namespacenn_1_1fs.html" rel="nofollow">nn::fs ライブラリの関数リファレンス</a>にも記載がありますのでそちらを参照してください。</p>
<h2 id="Anchor_83956190_h2_3">パス文字列</h2>
<p>FS ライブラリでは、パス文字列によって操作対象となるディレクトリやファイルを識別します。パス文字列として使用できる文字列には制限があります。詳しくは<a href="../../../Api/HtmlNX/namespacenn_1_1fs.html#entry_path">nn::fs ライブラリの関数リファレンス</a>を参照してください。この制限は開発機、ホスト PC、その他デバイスのファイルシステムを扱う場合で共通です。また、ファイルシステムによってはさらに個別の制限がある場合があります。個別の制限については各機能のマニュアルを参照してください。</p>
<h2 id="Anchor_83956190_h2_4">Case-Sensitivity（大文字・小文字の区別）について</h2>
<p>Case-Sensitive（大文字小文字を区別し、大文字小文字違いの名前をもつエントリを同一ディレクトリ下に配置できる）として振る舞います。</p>
<p>ただし、Windows アプリケーション環境やオーサリングツール環境では Windows の仕様に従い、 Case-Insensitive（大文字小文字を区別せず、大文字小文字違いのパス指定でも対象ファイルを開くことができる）かつ Case-Preserving（エントリ作成時の大文字小文字情報を保存する）として振る舞います。</p>
<p>Case-Insensitive を期待することはせず、ファイルオープンなどにパスを指定する際は大文字小文字を正しく指定するようご注意ください。</p>
<p>また、Windows 環境やオーサリングツール環境が Case-Insensitive であることや、セーブデータの内容をホスト PC にエクスポートするようなツールが将来的に考えられることから、 Case-Sensitive を期待して大文字小文字違いのエントリ名を同一ディレクトリ以下に配置する使い方は推奨しません。</p>
<h2 id="Anchor_83956190_h2_5">ファイル・ディレクトリのオープン数について</h2>
<p>セーブデータ内のファイル・ディレクトリの最大同時オープン数は 256 です。アプリケーションがマウントしているすべてのセーブデータ内のファイル・ディレクトリオープン数の累計でカウントされます。</p>
<p>リソースデータの同時オープン数には制限はありません。 <span class="ApiLink_nn__fs__SetAllocator">nn::fs::SetAllocator</span>() に指定したアロケータで（ <span class="ApiLink_nn__fs__SetAllocator">nn::fs::SetAllocator</span>() を実行していない場合は malloc() で）メモリが確保できる限り、いくつでも同時にオープンすることができます。</p>
<p>
  <br />
</p>
<div class="platform_nx">
  <h2 id="Anchor_83956190_h2_6">デバッグ用 API の利用について<a name="Anchor_83956190_fsApiForDebug"></a></h2>
  <p>一部の API は製品環境での利用が禁止されており、実行した場合も正常に動作しません。詳細は次の表の通りです。</p>
  <table class="wrapped">
    <colgroup>
      <col />
      <col />
      <col />
    </colgroup>
    <tbody>
      <tr>
        <th>&nbsp;API 名</th>
        <th>概要</th>
        <th>製品環境で実行した場合の応答(※)</th>
      </tr>
      <tr>
        <td>
          <a href="../../../Api/HtmlNX/namespacenn_1_1fs.html#a1b85bf3f3cf038cb67a991a3e3304751">nn::fs::MountHost</a>()</td>
        <td rowspan="2">ホスト PC 上のファイルシステムをマウントする</td>
        <td rowspan="3">未定義のエラーが返ります。</td>
      </tr>
      <tr>
        <td>
          <a href="../../../Api/HtmlNX/namespacenn_1_1fs.html#a2ea39d2487ac28bc767cd699eeeebe11">nn::fs::MountHostRoot</a>()</td>
      </tr>
      <tr>
        <td>
          <a href="../../../Api/HtmlNX/namespacenn_1_1fs.html#a196ef874060b922b93756ddff212fefa">nn::fs::MountSdCardForDebug</a>()</td>
        <td>デバッグ用途でファイルを保存するために SD カードのファイルシステムをマウントする</td>
      </tr>
      <tr>
        <td>
          <a href="../../../Api/HtmlNX/namespacenn_1_1fs.html#a767e38eb403bd2ebb4374c5214dc0e95">nn::fs::MountSaveDataForDebug</a>()</td>
        <td>デバッグ用セーブデータファイルシステムをマウントする</td>
        <td rowspan="2">プログラムが停止します。</td>
      </tr>
      <tr>
        <td>
          <p>
            <a href="../../../Api/HtmlNX/namespacenn_1_1fs.html#a90c27aaf70aec66968715663cd8c5415">nn::fs::SetSaveDataRootPath</a>()</p>
        </td>
        <td>セーブデータの配置場所として利用するホスト PC 上のパスを設定する</td>
      </tr>
      <tr>
        <td>
          <br />
        </td>
        <td>
          <br />
        </td>
        <td>
          <br />
        </td>
      </tr>
    </tbody>
  </table>
  <div class="warn_new">
    <div class="warn_new_left">警告：</div>
    <div class="warn_new_right">
      <p>※ これらの API のシンボルがプログラムに含まれている場合、そのアプリケーションは提出不可となります。そのため、実際の製品機上でこれらの API が実行されることはありません。</p>
    </div>
  </div>
  <h3 id="Anchor_83956190_h3_1">デバッグ用 API を制限するための設定</h3>
  <p>以下の手順を行うことで開発機でのアプリケーション実行時に上記表の「製品環境で実行した場合の応答」を再現することができます。アプリケーションの提出前にこの状態で動作確認を行うことを強く推奨します。</p>
  <ol>
    <li>
      <p>
        <a href="../Pages/Page_107320222.html">アプリケーションイメージの作成</a> で使用する desc ファイルの Desc/Default/FsAccessControlData を nmeta ファイルの NintendoSdkMeta/Core/FsAccessControlData としてコピーし、子要素のうち &quot;Debug&quot; という値をもつ FlagPresets 要素を削除します。<br />このとき、Desc/FsAccessControl<span style="color: rgb(255,0,0);">Descriptor</span> と取り違えないようご注意ください。<br />&quot;Debug&quot; 以外の値をもつ FlagPresets 要素がある場合は、その要素は削除しないでください。<br />&quot;Debug&quot; という値をもつ FlagPresets 要素を削除した結果、NintendoSdkMeta/Core/FsAccessControlData の子要素が無くなる場合でも、空の NintendoSdkMeta/Core/FsAccessControlData を配置する必要があります。</p>
      <p>他アプリケーションのセーブデータのマウント機能の利用など、NintendoSdkMeta/Core/FsAccessControlData に FlagPresets 要素以外の要素を追加している場合は、その要素は削除しないでください。</p>
      <p>記述例は次の通りです。</p>
      <p>
        <br />
      </p>
      <ol>
        <li>
          <p>desc ファイルの内容例</p>
          <table class="codeblock">
            <tbody>
              <tr>
                <td class="code">
                  <div class="codeblock"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;Desc&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;Default&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;FsAccessControlData&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;FlagPresets&gt;</span>Debug<span class="nt">&lt;/FlagPresets&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/FsAccessControlData&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/Default&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;...
<span class="nt">&lt;/Desc&gt;</span></pre></div>
                </td>
              </tr>
            </tbody>
          </table>
        </li>
        <li>
          <p>nmeta ファイルの記述例</p>
          <table class="codeblock">
            <tbody>
              <tr>
                <td class="code">
                  <div class="codeblock"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;NintendoSdkMeta&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;Core&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;Name&gt;</span>Application<span class="nt">&lt;/Name&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;ApplicationId&gt;</span>0x0100000000002802<span class="nt">&lt;/ApplicationId&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;FsAccessControlData&gt;&lt;/FsAccessControlData&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/Core&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;Application&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/Application&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;...
<span class="nt">&lt;/NintendoSdkMeta&gt;</span></pre></div>
                </td>
              </tr>
            </tbody>
          </table>
          <div class="tip">
            <div class="tip_left">参考：</div>
            <div class="tip_right">
              <p>最終提出用のアプリケーションをビルドするときに入力する nmeta ファイルについては標準でこの設定をしておくことを推奨します。</p>
            </div>
          </div>
        </li>
      </ol>
    </li>
    <li>アプリケーションをビルドし、実行します。</li>
  </ol>
</div>
<p>
  <br />
</p>
<p>
  <br />
</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank">';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__fs__SetAllocator', '../../../Api/HtmlNX/namespacenn_1_1fs.html#ac021c163ba94a44a2b53cb848c462930' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
