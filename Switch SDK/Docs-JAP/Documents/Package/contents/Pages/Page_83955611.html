<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>3Dモデルと炎を連携させる</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- 3Dモデルと炎を連携させる -->
<div class="pagetitle" id="PageId_83955611">3Dモデルと炎を連携させる</div>
<div class="text_separate">
<h1 id="Anchor_83955611_h1_1">3Dモデルと炎を連携させる</h1>
<p>ここではアニメーションする3Dモデルとエフェクトを連携させる手順について説明します。<br /> <strong>    <span class="status_macro_base status_macro_Blue">関連リンク</span>    </strong> <strong> <a href="../Pages/Page_83955632.html">「炎をブラッシュアップする」</a> </strong>で作成した炎のエフェクトを使用します。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955557/108658961.gif" class="embedded-image" />
  </span>
</p>
<p>このチュートリアルでは以下機能の使用例について触れています。</p>
<table class="table">
  <tbody>
    <tr>
      <th>
        <a href="#Anchor_83955611_automove">自動移動</a>
      </th>
      <td>登録したモデルに対して単純な円移動するアニメーションを付ける機能です。<br />モデルが移動した時のエフェクトの見え方がビューアで簡単に確認出来る便利な機能です。</td>
    </tr>
    <tr>
      <th>
        <a href="#Anchor_83955611_modellink">モデルとエフェクトの連携</a>
      </th>
      <td>
        <p>EffectMaker に登録した 3Dモデルに「モデル連携」機能でエフェクトを接続し、ビューアで合わせた状態を確認できます。</p>
        <p>エフェクト作成において、ゲームキャラクタや背景モデルなどの色味やサイズをビューアで確認しながら調整できる便利な機能です。</p>
      </td>
    </tr>
  </tbody>
</table>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>完成データは以下の場所にあります。<br /> <strong>   \Samples\Sources\Resources\Vfx\Eset\Fire_05.eset </strong> <strong> <br /> </strong></p>
  </div>
</div>
<h2 id="Anchor_83955611_h2_1">エフェクト作成の準備</h2>
<p>あらかじめ EffectMaker と EffectViewerを起動した状態から、エフェクト作成にあたっての準備を行います。</p>
<p>
  <strong>     <span class="status_macro_base status_macro_Blue">関連リンク</span>     </strong> EffectMaker と EffectViewer の起動方法については<strong>   <a href="../Pages/Page_83956096.html">「作業の流れ」</a> </strong>を参照してください。</p>
<h3 id="Anchor_83955611_h3_1">エミッタセットの読み込み</h3>
<p>以下の手順で、「炎をブラッシュアップする」において完成させたエフェクトを EffectMaker に読み込みます。</p>
<table class="table">
  <tbody>
    <tr>
      <th>1</th>
      <td>メインメニュー項目 [ファイル]&rarr;[ <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079802.png" class="embedded-image" /></span> 開く]を選択します。</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ウィンドウが開きますので、以下の場所からエミッタセットファイル（.eset）を選択し、ファイルを開きます。<br /> <strong>   \Samples\Sources\Resources\Vfx \Eset\Fire_05.eset </strong></td>
    </tr>
    <tr>
      <th>3</th>
      <td>ワークスペースに「<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079868.png" class="embedded-image" /></span> <strong>Eset\Fire_05</strong>」が読み込まれます。</td>
    </tr>
  </tbody>
</table>
<p>
  <span class="status_macro_base status_macro_Blue">関連リンク</span>&nbsp;以下は関連ページへのリンクです。</p>
<table class="table">
  <tbody>
    <tr>
      <th>
        <a href="../Pages/Page_93356878.html">ワークスペース</a>
      </th>
      <td>
        <p>エフェクトを構成する各ノードを階層構造で表示する「ワークスペース」について説明します。</p>
      </td>
    </tr>
    <tr>
      <th>
        <a href="../Pages/Page_92116275.html">プロパティウィンドウ</a>
      </th>
      <td>ノードの操作やプレビューができる「ワークスペース」とノードの機能設定ができる UI から構成される「プロパティウィンドウ」について説明します。</td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_83955611_h3_2">ビューアを確認する</h3>
<p>以下のように、読み込んだ「炎」エフェクトがビューアに転送されていることを確認します。<br />以降はビューアで変化を確認しながらエフェクトを編集します。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955557/83080783.gif" class="embedded-image" />
  </span>
</p>
<h2 id="Anchor_83955611_h2_2">モデルの登録</h2>
<p>「炎」エフェクトと連携させる為の 3D モデルを EffectMaker に登録し、ビューアで確認できるようにします。</p>
<h3 id="Anchor_83955611_h3_3">「モデル未設定」の「基本設定」タブを選択する</h3>
<p>ワークスペースから「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83080269.png" alt="ビューアノード" title="ビューアノード" class="embedded-image" /></span> ビューア」直下にある「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079787.png" alt="モデル設定ノード" title="モデル設定ノード" class="embedded-image" /></span> モデル未設定」を選択します。<br />プロパティウィンドウから「基本設定」タブが選択されていることを確認します。<br />モデルファイルとモデルのアニメーションに関する設定項目が表示されます。<br />&nbsp;</p>
<h3 id="Anchor_83955611_h3_4">「基本設定」タブを設定する</h3>
<p>「<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/91326320.png" width="16" class="embedded-image" /></span> モデル」の以下の「<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520160.png" width="40" class="embedded-image" /></span> 項目」で 3Dモデルファイルを登録します。</p>
<table class="table">
  <tbody>
    <tr>
      <th style="text-align: center;">項目名</th>
      <th style="text-align: center;">設定パス</th>
      <th style="text-align: center;">3Dモデル</th>
      <th style="text-align: center;">説明</th>
    </tr>
    <tr>
      <td style="text-align: center;">
        <strong>ファイル指定 <br /> </strong>
      </td>
      <td>
        <strong> \Samples\Sources\Resources\Vfx<br />\Eset\Models\Torch.fmdb</strong>
      </td>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_83956195/108658967.png" width="60" class="embedded-image" />
        </span>
      </td>
      <td>
        <p>
          <strong> <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83080046.png" class="embedded-image" /></span> </strong> ロードボタンを押すことで開くウィンドウからモデルファイルを選択します。</p>
        <p>正しく登録された場合、「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/92253562.png" class="embedded-image" /></span> テキストボックス」に「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079787.png" alt="モデル設定ノード" title="モデル設定ノード" class="embedded-image" /></span> Torch.fmdb」と表示されます。<strong> <br /> </strong></p>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <a name="Anchor_83955611_automove"></a>
</p>
<h2 id="Anchor_83955611_h2_3">モデルを「自動移動」でアニメーションさせる</h2>
<p>&nbsp;EffectMaker には登録したモデルに対して単純な円移動するアニメーションを付ける機能「自動移動」があります。<br />この機能を利用することで、モデルが移動した時のエフェクトの見え方がビューアで簡単に確認出来ます。</p>
<h3 id="Anchor_83955611_h3_5">モデルノードの「自動移動」タブを選択する</h3>
<p>プロパティウィンドウから「自動移動」タブを選択します。</p>
<h3 id="Anchor_83955611_h3_6">「自動移動」を設定する</h3>
<p>「<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/91326320.png" width="16" class="embedded-image" /></span> 自動移動」以下の「<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520160.png" width="40" class="embedded-image" /></span> 項目」を設定します。</p>
<table class="table">
  <tbody>
    <tr>
      <th style="text-align: center;">項目名</th>
      <th style="text-align: center;">値</th>
      <th style="text-align: center;">説明</th>
    </tr>
    <tr>
      <td>
        <strong>自動移動タイプ<br /> </strong>
      </td>
      <td>
        <strong>  XZ平面を移動  </strong>
      </td>
      <td>
        <p>ビューアのXZ平面上を「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079787.png" alt="モデル設定ノード" title="モデル設定ノード" class="embedded-image" /></span> Torch.fmdb」が円運動します。</p>
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        <strong>XZ移動半径</strong>
      </td>
      <td style="text-align: center;">
        <strong>20</strong>
      </td>
      <td>XZ平面上の円状ルートの半径を 20（2 グリッド分）に設定します。<br />「Zロール速度」で「<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079787.png" class="embedded-image" /></span> Torch.fmdb」が回転する為、値を大きめに設定しています。</td>
    </tr>
    <tr>
      <td>
        <strong>Zロール速度</strong>
      </td>
      <td style="text-align: center;">
        <strong>1</strong>
      </td>
      <td>この値に 0 以外の値を設定することで、「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079787.png" alt="モデル設定ノード" title="モデル設定ノード" class="embedded-image" /></span> Torch.fmdb」は移動方向を軸として回転運動します。<br />ここでは 1 を設定することで、毎フレーム1度ずつゆっくりと回転します。</td>
    </tr>
  </tbody>
</table>
<p>以下はこの段階でのビューアの見え方です。<br />画面の中央に登録した木の棒のモデル「Torch.fmdb」が表示されます。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955557/108658959.gif" class="embedded-image" />
  </span>
</p>
<p>
  <span class="status_macro_base status_macro_Blue">関連リンク</span>&nbsp;以下は関連ページへのリンクです。</p>
<table class="table">
  <tbody>
    <tr>
      <th>
        <a href="../Pages/Page_83955918.html">モデル設定 / 自動移動</a>
      </th>
      <td>登録したモデルを移動させた場合にエフェクトがビューアでどう見えるかを確認できる機能「自動移動」について説明します。</td>
    </tr>
  </tbody>
</table>
<p>
  <a name="Anchor_83955611_modellink"></a>
</p>
<h2 id="Anchor_83955611_h2_4">モデルとエフェクトの連携</h2>
<p>登録したモデル「Torch.fmdb」の先端にあるボーンノード「ParticleL」に炎のエフェクトを接続し、表示させます。</p>
<h3 id="Anchor_83955611_h3_7">「プレビュー」の「SRT 制御」タブを選択する</h3>
<p>ワークスペースから「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079870.png" class="embedded-image" /></span> Fire_05 」階層下にあるプレビュー「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079792.png" class="embedded-image" /></span> Fire_05」を選択します。<br />プロパティウィンドウで「SRT 制御」タブを選択します。<br />ビューアで一時的に確認するための設定項目が表示されます。</p>
<h3 id="Anchor_83955611_h3_8">「モデル連携」を設定する</h3>
<p>登録したモデルと「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079870.png" class="embedded-image" /></span> エミッタセット」内のすべての「&nbsp;<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079867.png" class="embedded-image" /></span> エミッタ」とを連携させます。<br />「<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/91326320.png" width="16" class="embedded-image" /></span> モデル連携」の以下の「<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520160.png" width="40" class="embedded-image" /></span> 項目」を設定します。</p>
<table class="table">
  <tbody>
    <tr>
      <th style="text-align: center;">項目名</th>
      <th style="text-align: center;">値</th>
      <th style="text-align: center;">説明</th>
    </tr>
    <tr>
      <td>
        <strong> 接続モデル </strong>
      </td>
      <td>
        <strong> Torch </strong>
      </td>
      <td>モデル「Torch.fmdb」を選択します。</td>
    </tr>
    <tr>
      <td>
        <strong> 接続ボーン </strong>
      </td>
      <td>
        <strong> ParticleL </strong>
      </td>
      <td>「炎」エフェクトを接続するボーンノード「ParticleL」を選択します。<br />「ParticleL」は「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079787.png" alt="モデル設定ノード" title="モデル設定ノード" class="embedded-image" /></span> Torch.fmdb」の先端に用意したノードです。</td>
    </tr>
  </tbody>
</table>
<p>ビューアでは、「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079787.png" alt="モデル設定ノード" title="モデル設定ノード" class="embedded-image" /></span> Torch.fmdb」の先端から炎のエフェクト「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079870.png" class="embedded-image" /></span> Fire_05 」が放出されています。</p>
<p>
  <span class="status_macro_base status_macro_Blue">関連リンク</span> 以下は関連ページへのリンクです。</p>
<table class="table">
  <tbody>
    <tr>
      <th>
        <a href="../Pages/Page_97619517.html">接続モデル</a>
      </th>
      <td>連携するモデルを「モデル設定ノード」に登録したモデルファイルから選択できる機能「接続モデル」について説明します。</td>
    </tr>
    <tr>
      <th>
        <a href="../Pages/Page_97619525.html">接続ボーン</a>
      </th>
      <td>エフェクトを放出させたいボーンを「接続モデル」で選択した連携モデルから選択できる機能「接続ボーン」について説明します。</td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83955611_h2_5">エフェクトの追従タイプを変更する</h2>
<p>「エミッタ追従タイプ」設定により、モデル「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079787.png" alt="モデル設定ノード" title="モデル設定ノード" class="embedded-image" /></span> Torch.fmdb」に連動するエフェクト「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079870.png" class="embedded-image" /></span> Fire_05 」のパーティクルが自然に見えるように調整します。</p>
<h3 id="Anchor_83955611_h3_9">「パーティクル追従タイプ」を設定する</h3>
<p>ワークスペースから「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079870.png" class="embedded-image" /></span> Fire_05 」直下の「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079867.png" class="embedded-image" /></span> Smoke」をマウス左ボタンクリックで選択します。<br />Shift キーを押したまま「&nbsp;<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079867.png" class="embedded-image" /></span> Main」をマウス左ボタンクリックで選択します。<br />「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079870.png" class="embedded-image" /></span> Fire_05 」階層下のエミッタ全てが一括編集可能な状態になります。<br />プロパティウィンドウの「基本設定」タブが選択されていることを確認します。</p>
<p>「<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/91326320.png" width="16" class="embedded-image" /></span> 基本設定」の以下の「<span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/93520160.png" width="40" class="embedded-image" /></span> 項目」を設定します。</p>
<table class="table">
  <tbody>
    <tr>
      <th style="text-align: center;">項目名</th>
      <th style="text-align: center;">値</th>
      <th style="text-align: center;">説明</th>
    </tr>
    <tr>
      <td>
        <strong> パーティクル追従タイプ </strong>
      </td>
      <td>
        <strong> エミッタ位置にのみ追従 </strong>
      </td>
      <td>「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079870.png" class="embedded-image" /></span> Fire_05 」の全てのパーティクルはエミッタの回転運動に追従しなくなりますが、<br />移動運動には追従します。このため、「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079787.png" alt="モデル設定ノード" title="モデル設定ノード" class="embedded-image" /></span> Torch.fmdb」の回転運動にも追従しません。</td>
    </tr>
  </tbody>
</table>
<p>以下は、「パーティクル追従タイプ」の設定により、エミッタが回転および移動した時の見え方の違いを説明した表です。</p>
<table class="table">
  <tbody>
    <tr>
      <th style="text-align: center;">「エミッタSRTに完全追従」</th>
      <th style="text-align: center;">「エミッタに追従しない」</th>
      <th style="text-align: center;">「エミッタ位置にのみ追従」</th>
    </tr>
    <tr>
      <td style="text-align: center;">
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_83955557/108658962.gif" width="300" class="embedded-image" />
        </span>
      </td>
      <td style="text-align: center;">
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_83955557/108658960.gif" width="300" class="embedded-image" />
          </span>
        </p>
      </td>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_83955557/108658961.gif" width="300" class="embedded-image" />
        </span>
      </td>
    </tr>
    <tr>
      <td>パーティクルはエミッタのすべての運動に追従します。<br />パーティクル全体が一様に回転し、不自然に見えます。</td>
      <td>
        <p>パーティクルはエミッタのすべての運動に追従しません。</p>パーティクルの間隔が広くなり、やや不自然に見えます。</td>
      <td>パーティクルはエミッタの移動運動にのみ追従します。<br />このエフェクトの場合、最も自然に見える設定です。</td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83955611_h2_6">完成イメージ</h2>
<p>以下は3D モデル「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079787.png" alt="モデル設定ノード" title="モデル設定ノード" class="embedded-image" /></span> Torch.fmdb」と炎のエフェクト「 <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955555/83079870.png" class="embedded-image" /></span> Fire_05 」を連携させることで完成した「松明」です。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955557/108658961.gif" class="embedded-image" />
  </span>
</p>
<p>&nbsp;</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
