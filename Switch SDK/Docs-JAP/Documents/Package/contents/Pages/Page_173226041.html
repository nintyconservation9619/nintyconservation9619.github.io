<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>プログラマ向け変更点</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- プログラマ向け変更点 -->
<div class="pagetitle" id="PageId_173226041">プログラマ向け変更点</div>
<div class="text_separate">
<h1 id="Anchor_173226041_h1_1"> プログラマ向け グラフィックスの変更点</h1>
<p>NintendoSDK 0.16.0 で行われた NintendoWare グラフィックスのプログラマ向け変更点について説明します。<br />NintendoWare グラフィックスは、<span class="ApiLink_nn__g3d">nn::g3d</span>、<span class="ApiLink_nn__ui2d">nn::ui2d</span>、<span class="ApiLink_nn__font">nn::font</span>、<span class="ApiLink_nn__vfx">nn::vfx</span> モジュールのことを指します。</p>
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_173226041_h1_1"> プログラマ向け グラフィックスの変更点</a>
    </li>
    <li>
      <a href="#Anchor_173226041_h1_2">nn::ui2d、nn::font ニュース</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_173226041_h2_1">ASTC テクスチャフォーマットに対応</a>
      </li>
      <li>
        <a href="#Anchor_173226041_h2_2">外部メモリープールへのリソース読み込みに対応</a>
      </li>
      <li>
        <a href="#Anchor_173226041_h2_3">複合フォント(.fcpx)のビットマップフォントおよびペアフォントへの対応</a>
      </li>
      <li>
        <a href="#Anchor_173226041_h2_4">float カラー出力に対応</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_173226041_h1_3">nn::vfx ニュース</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_173226041_h2_5">テクスチャファイルの分割出力に対応。</a>
      </li>
      <li>
        <a href="#Anchor_173226041_h2_6">パーティクル形状を利用したエフェクトが正しく描画されない不具合を修正</a>
      </li>
      <ul>
        <li>
          <a href="#Anchor_173226041_h3_1">利用可能な fmdb ファイルの制限</a>
        </li>
      </ul>
    </ul>
    <li>
      <a href="#Anchor_173226041_h1_4">nn::g3d ニュース</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_173226041_h2_7">LOD間のサブメッシュ境界が維持されているかを判別するAPIを追加</a>
      </li>
    </ul>
  </ul>
</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h1 id="Anchor_173226041_h1_2">nn::ui2d、nn::font ニュース</h1>
<h2 id="Anchor_173226041_h2_1">ASTC テクスチャフォーマットに対応</h2>
<p>ASTC テクスチャフォーマットに対応しました。詳細は「<a href="../Pages/Page_172900216.html">ASTC テクスチャ</a>」をご覧ください。</p>
<h2 id="Anchor_173226041_h2_2">外部メモリープールへのリソース読み込みに対応</h2>
<p>外部メモリープールにリソースを読み込むことができるようになりました。</p>
<p>生成する MemoryPool の数減らして初期化処理コストを軽減することができます。</p>
<p>詳しくは「<a href="../Pages/Page_174066089.html">MemoryPool について</a>」の、リソースの MemoryPool を統合して数を減らす を参照ください。</p>
<h2 id="Anchor_173226041_h2_3">複合フォント(.fcpx)のビットマップフォントおよびペアフォントへの対応</h2>
<p>複合フォント(.fcpx)でビットマップフォントやペアフォントが扱えるようになりました。</p>
<p>これに伴い、プログラムから複合フォントを読み込む方法に変更があります。</p>
<p>詳細は「<a href="../Pages/Page_126563699.html">レイアウトプログラムにおける複合フォントの利用</a>」を参照してください。</p>
<h2 id="Anchor_173226041_h2_4">float カラー出力に対応</h2>
<p>各ペインの「白黒カラー」が float カラーの出力に対応しました。</p>
<p>レイアウトデータをレンダリングするカラーバッファを適切なフォーマットに設定することで、シェーダー内で 1.0 を超えるカラー値を扱えるようになります。</p>
<p>LayoutEditor のビューアではこの機能を使用してグレアエフェクトを実装しました。</p>
<p>詳細は「<a href="../Pages/Page_172903868.html">float カラー出力の使い方</a>」を参照してください。</p>
<p>&nbsp;</p>
<h1 id="Anchor_173226041_h1_3">nn::vfx ニュース</h1>
<p>&nbsp;</p>
<h2 id="Anchor_173226041_h2_5">テクスチャファイルの分割出力に対応。</h2>
<p>エフェクトバイナリコンバート時に テクスチャファイル( bntx ファイル ) を分割して出力する機能に対応しました。<br /><br /></p>
<p>
  <span class="status_macro_base status_macro_Blue">関連リンク</span>
</p>
<table class="table">
  <tbody>
    <tr>
      <td class="highlight-grey">
        <strong>
          <a href="../Pages/Page_166051158.html">エフェクトバイナリについて</a>
        </strong>
      </td>
      <td>分割されたテクスチャをランタイム上で初期化し、エフェクトバイナリとバインドする説明があります。</td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_173226041_h2_6">パーティクル形状を利用したエフェクトが正しく描画されない不具合を修正</h2>
<p>パーティクル形状にて fmdb ファイルを指定したエフェクトが正しく描画されない不具合を修正しました。<br />fmdb ファイル内、vtx_attrib_array 要素が複数ある場合の描画に問題があり修正をおこなっています。</p>
<p>ただし、以下の制限にかかる fmdb ファイル の描画は、 NintendoSDK 0.11.0 でも正しく描画が行われません。</p>
<h3 id="Anchor_173226041_h3_1">利用可能な fmdb ファイルの制限</h3>
<p>利用可能な fmdb ファイルの設定に制限があります。</p>
<ul>
  <li>vtx_attrib 要素の name アトリビュートに制限があります。 利用可能なアトリビュートは、_p0 , _n0 , _t0 , _u0 , _u1 , _c0 に限られます。</li>
  <li>_u0 , _u1 の　quantize_type アトリビュートは同一である必要があります。</li>
</ul>
<p>制限にかかった fmdb ファイルを読み込んだ場合、EffectMaker 上 UI に警告が表示されます。</p>
<div class="layout-base">
  <div class="layout-section">
    <div class="layout-cell">
      <div class="panel" style="border-width: 1px;">
        <div class="panelHeader" style=" border-bottom-width: 1px;">
          <b>name アトリビュートが異なる場合</b>
        </div>
        <div class="panelContent">
          <p>
            <span class="embedded-file-wrapper ">
              <img src="../Attachments/Attach_173226041/174230642.png" class="embedded-image" />
            </span>
          </p>
        </div>
      </div>
    </div>
    <div class="layout-cell">
      <div class="panel" style="border-width: 1px;">
        <div class="panelHeader" style=" border-bottom-width: 1px;">
          <b>_u0 と _u1 の quantize_type が異なる場合</b>
        </div>
        <div class="panelContent">
          <p>
            <span class="embedded-file-wrapper ">
              <img src="../Attachments/Attach_173226041/174230645.png" class="embedded-image" />
            </span>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
<h4 id="Anchor_173226041_h4_1">制限を回避するには</h4>
<p>読み込めない fmdb ファイルを IntermediateFileBinaryToAscii.exe を通して fmda ファイルに変換していただいたのち、上記制限にかかる部分を書き換え、IntermediateFileAsciiToBinary.exe を利用して、再度 fmdb に書き戻してください。</p>
<p>&nbsp;NintendoSDK 1.0.0 にて fmdb ファイルの書き換えスクリプトのリリースを予定しています。</p>
<p>&nbsp;</p>
<div class="expand-container" id="expander-173226041-1">
  <div class="expand-control" id="expander-control-173226041-1">
    <span class="expand-control-icon collapsed-icon"> </span>
    <span class="expand-control-text">ここをクリックすると展開されます...</span>
  </div>
  <div class="expand-content expand-hidden" id="expander-content-173226041-1">
    <table class="codeblock">
      <tbody>
        <tr>
          <td class="gutter">1<br />
2<br />
3<br />
4<br />
5<br />
6<br />
7<br />
8<br />
9<br />
10<br />
11<br />
12<br />
13<br />
14<br />
15<br />
16<br />
17<br />
18<br />
19<br />
20<br />
21<br />
22<br />
23<br />
24<br />
25<br />
26<br />
27<br />
28<br />
29<br />
30<br />
31<br />
32<br />
33<br />
34<br />
35<br />
36<br />
37<br />
38<br />
39<br />
40<br />
41<br />
42<br />
43<br />
44<br />
45<br />
46<br />
47<br />
48<br />
49<br />
50<br />
51<br />
52<br />
53<br />
54<br />
55<br />
56<br />
57<br />
58<br />
59<br />
60<br />
61<br />
62<br />
63<br />
64<br />
65<br />
66<br />
67<br />
68<br />
69<br />
70<br />
71<br />
72<br />
73<br />
74<br />
75<br />
76<br />
77<br />
78<br />
79<br />
80<br />
81<br />
82<br />
83<br />
84<br />
85<br />
86<br />
87<br />
88<br />
89<br />
90<br />
91<br />
92<br />
93<br />
94<br />
95<br />
96<br />
97<br />
98<br />
99<br />
100<br />
101<br />
102<br />
103<br />
104<br />
105<br />
106<br />
107<br />
108<br />
109<br />
110<br />
111</td>
          <td class="code">
            <div class="codeblock"><pre><span class="cp"># for Python 3.x
</span>
<span class="n">from</span> <span class="n">System</span><span class="p">.</span><span class="n">IO</span> <span class="n">import</span> <span class="o">*</span>
<span class="n">from</span> <span class="n">Utility</span> <span class="n">import</span> <span class="o">*</span>

<span class="n">import</span> <span class="n">os</span>
<span class="n">import</span> <span class="n">shutil</span>
<span class="n">import</span> <span class="n">traceback</span>

<span class="n">def</span> <span class="n">Filter</span><span class="p">(</span><span class="n">target</span><span class="p">)</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nl">try</span><span class="p">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">print</span> <span class="sc">'-'</span><span class="o">*</span><span class="mi">60</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">print</span> <span class="err">'</span><span class="o">%</span><span class="n">sの環境設定をします</span><span class="err">。'</span> <span class="o">%</span><span class="n">target</span><span class="p">.</span><span class="n">FileName</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#もし、このデータが書き込み不可能だったら処理をスキップする。
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">not</span> <span class="n">os</span><span class="p">.</span><span class="n">access</span><span class="p">(</span><span class="n">target</span><span class="p">.</span><span class="n">FilePath</span><span class="p">,</span> <span class="n">os</span><span class="p">.</span><span class="n">W_OK</span><span class="p">)</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">print</span> <span class="err">'ファイルへの書き込み許可がありません。'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">print</span> <span class="err">'処理をスキップします。'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">print</span> <span class="err">'ファイルへの書き込みが可能です。'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">vtx_buffer_array</span> <span class="o">=</span> <span class="n">target</span><span class="p">.</span><span class="n">Document</span><span class="p">.</span><span class="n">SelectSingleNode</span><span class="p">(</span><span class="s">&quot;/nw4f_3dif/model/vertex_array/vertex/vtx_buffer_array&quot;</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#インプット情報
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">input_num</span> <span class="o">=</span> <span class="n">vtx_buffer_array</span><span class="p">.</span><span class="n">GetAttribute</span><span class="p">(</span><span class="s">&quot;length&quot;</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">inputs</span> <span class="o">=</span> <span class="n">vtx_buffer_array</span><span class="p">.</span><span class="n">SelectNodes</span><span class="p">(</span><span class="s">&quot;vtx_buffer/input_array/input&quot;</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#新しいフォーマットのvtx_buffer作成
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">vtx_buffer</span> <span class="o">=</span> <span class="n">target</span><span class="p">.</span><span class="n">Document</span><span class="p">.</span><span class="n">CreateElement</span><span class="p">(</span><span class="s">&quot;vtx_buffer&quot;</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">vtx_buffer</span><span class="p">.</span><span class="n">SetAttribute</span><span class="p">(</span><span class="s">&quot;index&quot;</span><span class="p">,</span><span class="s">&quot;0&quot;</span><span class="p">)</span> <span class="err">#</span> <span class="n">Write</span><span class="p">()</span><span class="err">時に書き換わるので適当</span>    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">input_array</span> <span class="o">=</span> <span class="n">target</span><span class="p">.</span><span class="n">Document</span><span class="p">.</span><span class="n">CreateElement</span><span class="p">(</span><span class="s">&quot;input_array&quot;</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">input_array</span><span class="p">.</span><span class="n">SetAttribute</span><span class="p">(</span><span class="s">&quot;length&quot;</span><span class="p">,</span> <span class="n">input_num</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#input作る
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="n">i_iput</span> <span class="n">in</span> <span class="nl">inputs</span><span class="p">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">add_input</span> <span class="o">=</span> <span class="n">target</span><span class="p">.</span><span class="n">Document</span><span class="p">.</span><span class="n">CreateElement</span><span class="p">(</span><span class="s">&quot;input&quot;</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">add_input</span><span class="p">.</span><span class="n">SetAttribute</span><span class="p">(</span><span class="s">&quot;index&quot;</span><span class="p">,</span> <span class="s">&quot;0&quot;</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">add_input</span><span class="p">.</span><span class="n">SetAttribute</span><span class="p">(</span><span class="s">&quot;attrib_index&quot;</span><span class="p">,</span> <span class="n">i_iput</span><span class="p">.</span><span class="n">GetAttribute</span><span class="p">(</span><span class="s">&quot;attrib_index&quot;</span><span class="p">))</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">input_array</span><span class="p">.</span><span class="n">AppendChild</span><span class="p">(</span><span class="n">add_input</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">vtx_buffer</span><span class="p">.</span><span class="n">AppendChild</span><span class="p">(</span><span class="n">input_array</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#一度空に    
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="n">vtx_b</span> <span class="n">in</span> <span class="n">vtx_buffer_array</span><span class="p">.</span><span class="n">SelectNodes</span><span class="p">(</span><span class="s">&quot;vtx_buffer&quot;</span><span class="p">)</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">vtx_buffer_array</span><span class="p">.</span><span class="n">RemoveChild</span><span class="p">(</span> <span class="n">vtx_b</span> <span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#新しいフォーマット追加
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">vtx_buffer_array</span><span class="p">.</span><span class="n">AppendChild</span><span class="p">(</span><span class="n">vtx_buffer</span><span class="p">)</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">vtx_attrib_array</span> <span class="o">=</span> <span class="n">target</span><span class="p">.</span><span class="n">Document</span><span class="p">.</span><span class="n">SelectSingleNode</span><span class="p">(</span><span class="s">&quot;/nw4f_3dif/model/vertex_array/vertex/vtx_attrib_array&quot;</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">vtx_attribs</span> <span class="o">=</span> <span class="n">vtx_attrib_array</span><span class="p">.</span><span class="n">SelectNodes</span><span class="p">(</span><span class="s">&quot;vtx_attrib&quot;</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp"># UV の名前を書き換えます。
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#for i_vtx_attrib in vtx_attribs:
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#    if i_vtx_attrib.GetAttribute(&quot;hint&quot;) == &quot;uv0&quot;:
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#        i_vtx_attrib.SetAttribute(&quot;name&quot;, &quot;_u0&quot;)
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#    if i_vtx_attrib.GetAttribute(&quot;hint&quot;) == &quot;uv1&quot;:
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#        i_vtx_attrib.SetAttribute(&quot;name&quot;, &quot;_u1&quot;)
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#    if i_vtx_attrib.GetAttribute(&quot;hint&quot;) == &quot;uv2&quot;:
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#        i_vtx_attrib.SetAttribute(&quot;name&quot;, &quot;_u2&quot;)
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#    if i_vtx_attrib.GetAttribute(&quot;hint&quot;) == &quot;uv3&quot;:
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#        i_vtx_attrib.SetAttribute(&quot;name&quot;, &quot;_u3&quot;)
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp"># 最も優先度の高い quantizeType を見つける
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">quantizeType</span> <span class="o">=</span> <span class="s">&quot;none&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="n">i_vtx_attrib</span> <span class="n">in</span> <span class="nl">vtx_attribs</span><span class="p">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">i_vtx_attrib</span><span class="p">.</span><span class="n">GetAttribute</span><span class="p">(</span><span class="s">&quot;hint&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&quot;uv0&quot;</span> <span class="n">or</span> <span class="n">i_vtx_attrib</span><span class="p">.</span><span class="n">GetAttribute</span><span class="p">(</span><span class="s">&quot;hint&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&quot;uv1&quot;</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">print</span> <span class="err">'</span><span class="n">find</span> <span class="n">uv</span><span class="p">......</span><span class="err">'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">quantizeTypeCurrent</span> <span class="o">=</span> <span class="n">i_vtx_attrib</span><span class="p">.</span><span class="n">GetAttribute</span><span class="p">(</span><span class="s">&quot;quantize_type&quot;</span><span class="p">)</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">print</span> <span class="n">quantizeTypeCurrent</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">quantizeType</span> <span class="o">=</span> <span class="n">FuncCompare</span><span class="p">(</span><span class="n">quantizeType</span><span class="p">,</span> <span class="n">quantizeTypeCurrent</span><span class="p">)</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">print</span> <span class="err">'</span><span class="n">quantizeType</span> <span class="o">=</span> <span class="err">'</span> <span class="o">+</span> <span class="n">quantizeType</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp"># quantize_type を設定しなおす
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="n">i_vtx_attrib</span> <span class="n">in</span> <span class="nl">vtx_attribs</span><span class="p">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">i_vtx_attrib</span><span class="p">.</span><span class="n">GetAttribute</span><span class="p">(</span><span class="s">&quot;hint&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&quot;uv0&quot;</span> <span class="n">or</span> <span class="n">i_vtx_attrib</span><span class="p">.</span><span class="n">GetAttribute</span><span class="p">(</span><span class="s">&quot;hint&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&quot;uv1&quot;</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">i_vtx_attrib</span><span class="p">.</span><span class="n">SetAttribute</span><span class="p">(</span><span class="s">&quot;quantize_type&quot;</span><span class="p">,</span> <span class="n">quantizeType</span><span class="p">)</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">target</span><span class="p">.</span><span class="n">Write</span><span class="p">()</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">print</span> <span class="s">&quot;&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">print</span> <span class="s">&quot;%sの設定を完了しました。&quot;</span><span class="o">%</span><span class="n">target</span><span class="p">.</span><span class="n">FileName</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">print</span> <span class="sc">'-'</span><span class="o">*</span><span class="mi">60</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nl">except</span><span class="p">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Exception occurred !!!:&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">print</span> <span class="sc">'-'</span> <span class="o">*</span> <span class="mi">80</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">print</span> <span class="n">traceback</span><span class="p">.</span><span class="n">format_exc</span><span class="p">()</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">print</span> <span class="sc">'-'</span> <span class="o">*</span> <span class="mi">80</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">raise</span>

<span class="cp"># quantize_type の優先度を定義する関数
</span><span class="n">def</span> <span class="n">FuncCompare</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#--------------------------------
</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="s">&quot;float_32_32&quot;</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="s">&quot;float_32_32&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="s">&quot;float_32_32&quot;</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="s">&quot;float_32_32&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="s">&quot;float_16_16&quot;</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="s">&quot;float_16_16&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="s">&quot;float_16_16&quot;</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="s">&quot;float_16_16&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#--------------------------------
</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="s">&quot;snorm_16_16&quot;</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="s">&quot;snorm_16_16&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="s">&quot;snorm_16_16&quot;</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="s">&quot;snorm_16_16&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="s">&quot;snorm_8_8&quot;</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="s">&quot;snorm_8_8&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="s">&quot;snorm_8_8&quot;</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="s">&quot;snorm_8_8&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cp">#--------------------------------
</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="s">&quot;unorm_16_16&quot;</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="s">&quot;unorm_16_16&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="s">&quot;unorm_16_16&quot;</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="s">&quot;unorm_16_16&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="s">&quot;unorm_8_8&quot;</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="s">&quot;unorm_8_8&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="s">&quot;unorm_8_8&quot;</span><span class="o">:</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="s">&quot;unorm_8_8&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">x</span></pre></div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<h1 id="Anchor_173226041_h1_4">nn::g3d ニュース</h1>
<h2 id="Anchor_173226041_h2_7">LOD間のサブメッシュ境界が維持されているかを判別するAPIを追加</h2>
<p>LOD 間のサブメッシュ境界が維持されているかを判別する API <a href="../../../Api/HtmlNX/classnn_1_1g3d_1_1_res_shape.html#a400d450cc53b3394564b529c83afb024">nn::g3d::ResShape::IsSubMeshBoundaryConsistent()</a> を追加しました。中間ファイルオプティマイザのポリゴンリダクション機能を使用して作成された LOD モデルはサブメッシュ境界が維持されていますが、他の外部ツールで作成された LOD モデルを中間ファイルオプティマイザにより結合した場合はサブメッシュ境界は維持されません。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank">';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__g3d', '../../../Api/HtmlNX/namespacenn_1_1g3d.html' )
SetUrl( 'ApiLink_nn__ui2d', '../../../Api/HtmlNX/namespacenn_1_1ui2d.html' )
SetUrl( 'ApiLink_nn__font', '../../../Api/HtmlNX/namespacenn_1_1font.html' )
SetUrl( 'ApiLink_nn__vfx', '../../../Api/HtmlNX/namespacenn_1_1vfx.html' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
