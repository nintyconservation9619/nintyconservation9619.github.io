<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>インポートプラグイン</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- インポートプラグイン -->
<div class="pagetitle" id="PageId_83955835">インポートプラグイン</div>
<div class="text_separate">
<p>ここでは、インポートプラグインの機能と使用方法について説明します。</p>
<h1 id="Anchor_83955835_h1_1">機能</h1>
<p>インポートプラグインを使用すると、中間ファイルを Maya 上にインポートしてモデル、アニメーション、テクスチャーファイルを作成できます。</p>
<p>中間ファイルを出力した Maya のシーンファイルを紛失した場合や、中間ファイルの内容を Maya 上で確認したい場合などに利用できます</p>
<p>指定したフォルダー以下に存在する fmd ファイルをすべて Maya のシーンファイル（ma / mb ファイル）に変換するバッチ処理も可能です。</p>
<h1 id="Anchor_83955835_h1_2">使用方法</h1>
<p>「Nintendo &gt; Import...」を選択するとウィンドウが表示されます。</p>
<table class="table">
  <tbody>
    <tr>
      <th>Process Mode</th>
      <td>
        <p>処理モードを指定します。<br />Import を選択すると、現在のシーンに中間ファイルをインポートします。<br />Batch Convert を選択すると、指定フォルダー以下に存在する fmd ファイルをすべて Maya のシーンファイルに変換（バッチ変換）します。</p>
      </td>
    </tr>
    <tr>
      <th>Magnify</th>
      <td>モデルの頂点座標や移動値に掛ける倍率を指定します。</td>
    </tr>
    <tr>
      <th>Create Texture File</th>
      <td>
        <p>fmd ファイルをインポートする際に ftx ファイルからテクスチャーファイル（TGA または DDS）を作成するなら ON にします。<br />ftx ファイルは (fmd ファイルのフォルダー)/textures フォルダーに存在する必要があります。<br />fmd ファイルが参照している ftx ファイルを紛失した場合は OFF にしてください。</p>
      </td>
    </tr>
    <tr>
      <th>fmd File</th>
      <td>インポートする fmd ファイルのパスを指定します。</td>
    </tr>
    <tr>
      <th>fsk File</th>
      <td>インポートする fsk ファイルのパスを指定します。空欄ならインポートしません。</td>
    </tr>
    <tr>
      <th>fsn File</th>
      <td>インポートする fsn ファイルのパスを指定します。空欄ならインポートしません。</td>
    </tr>
    <tr>
      <th>Input Folder</th>
      <td>バッチ変換の入力フォルダーを指定します。</td>
    </tr>
    <tr>
      <th>Output Folder</th>
      <td>バッチ変換の出力フォルダーを指定します。</td>
    </tr>
    <tr>
      <th>File Type</th>
      <td>バッチ変換後のシーンのファイルタイプを指定します。</td>
    </tr>
  </tbody>
</table>
<p>
  <strong>Import All</strong> ボタンをクリックすると、指定した中間ファイルをすべてインポートします。</p>
<p>fsk ファイルのアニメーションは、fmd ファイルから作成されたノードに適用されます。</p>
<p>fsk ファイルが指定されていて fmd ファイルが指定されていないとエラーになります。</p>
<p>
  <strong>Import fmd</strong> ボタンをクリックすると、fmd ファイルのみインポートします。</p>
<p>
  <strong>Import fsk</strong> ボタンをクリックすると、現在のシーンに存在するノードにスケルタルアニメーションをインポートします。</p>
<p>シーン中に同名ノードが複数ある場合、対象ノードを次の優先順に検索します。</p>
<ol>
  <li>選択されたノード以下の同名ノード</li>
  <li>選択されたノード以下のネームスペースを除いて同名のノード</li>
  <li>シーン中の同名ノード</li>
  <li>シーン中のネームスペースを除いて同名のノード</li>
</ol>
<p>
  <strong>Import fsn</strong> ボタンをクリックすると、fsn ファイルのみインポートします。</p>
<p>fsn ファイルをインポートする場合、現在のシーンに同名のカメラ／ライト／フォグが存在すればそれにアニメーションをインポートし、存在しなければ新たに作成します。</p>
<p>
  <strong>Convert</strong> ボタンをクリックするとバッチ変換を開始します。<br />その際、現在のシーンが修正されている場合は保存確認ダイアログが表示されます。バッチ変換後は新規シーンが開かれるので注意してください。</p>
<p>fmd ファイルが使用する ftx ファイルも変換されます。</p>
<p>出力フォルダーには入力フォルダーと同じフォルダー構成で Maya プロジェクトツリーが作成されます。</p>
<p>たとえば、次の Intermediate フォルダーを入力フォルダーに指定した場合、出力フォルダー Converted 以下は右側のようになります。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>Intermediate/                      -&gt;      Converted/
&nbsp;&nbsp;+ Object/                                  + Object/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ Enemy1/                                  + Enemy1/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ body1.fmdb                               + scenes/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ weapon1.fmdb                                 + body1.ma
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ textures/                                    + weapon1.ma
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ metal1.ftxb                          + sourceimages/
&nbsp;&nbsp;+ Stage/                                               + metal1.tga
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ Stage1/                              + Stage/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ Room1/                               + Stage1/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ stage1_1.fmdb                        + Room1/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ textures/                                + scenes/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ block1.ftxb                              + stage1_1.ma
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ sourceimages/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ block1.tga</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83955835_h2_1">全般的な注意事項</h2>
<p>・中間ファイルにない情報はインポートされません（IK、コンストレイン、エクスプレッションなど）。</p>
<p>・スキンシェイプを持つボーンがルートボーンで子ボーンを持つ場合と、スキンシェイプを持つボーンがスキンのインフルエンスでもある場合は、スキンシェイプをワールド下の別オブジェクトとして作成します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>例）中間ファイルのボーン構成       -&gt;      インポート後の DAG ノード構成
joint1 (shape)                             joint1          
&nbsp;&nbsp;+ joint2                                   + joint2
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ joint3                                   + joint3
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pPlane1 (shape)
(shape name = pPlane1__blinn1)</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>・同じ頂点を 2 回以上使用する三角形や、ジオメトリ領域がゼロ（3 頂点が同一直線上）の三角形は、インポート時に削除されます。</p>
<h2 id="Anchor_83955835_h2_2">マテリアルに関する注意事項</h2>
<ul>
  <li>インポート後のマテリアルは Blinn シェーダとなります（例外として、マテリアル名が lambert1 の場合のみ、デフォルトの lambert1 ノードにインポートします）。</li>
  <li>Process Mode オプションが Import の場合、テクスチャーファイルは現在のプロジェクトの sourceimages フォルダーに作成されます。</li>
  <li>インポートする ftx ファイルのフォーマットが整数型なら TGA ファイル、実数型なら DDS ファイルが作成されます。</li>
  <li>fmd ファイルのサンプラーのヒント情報によって、file ノードの接続先が決定されます。<br /> ただし、ヒント情報が tangent の場合はどこにも接続されません。<br /> ヒント情報が albedo / opacity / emission / normal / tangent / specular / reflection のいずれでもなければ、マテリアルの半透明の深度（Translucence Depth）アトリビュートに接続されます。</li>
</ul>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
