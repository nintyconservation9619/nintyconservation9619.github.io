<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>シェーダーコンバーター (.dll)</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- シェーダーコンバーター (.dll) -->
<div class="pagetitle" id="PageId_89982310">シェーダーコンバーター (.dll)</div>
<div class="text_separate">
<h1 id="Anchor_89982310_h1_1">概要</h1>
<h2 id="Anchor_89982310_h2_1">目的</h2>
<p>GFX ShaderConverter (.dll) は、GFX ShaderCompiler を使用する上位のツールです。<br />GFX ShaderCompiler&nbsp;が提供しない、より上位の機能を提供することを目的としています。</p>
<p>GFX ShaderConverter (.dll) は、GFX シェーダーリソースを出力する機能を提供します。<br />GFX &nbsp;シェーダーリソースは、GFX ライブラリーにおいて <span class="ApiLink_nn__gfx__ResShaderFile">nn::gfx::ResShaderFile</span> としてランタイムの実装が提供されています。<br />より上位の層で追加の仕組みを用意することなく、そのままランタイムと組み合わせてシェーダーを利用できます。</p>
<p>GFX &nbsp;ShaderConverter (.dll) は、コマンドラインオプションを解釈する機能を提供します。<br />これにより、構造体を組み立てることなく、コマンドライン形式で入力することができます。&nbsp;</p>
<p>GFX ShaderConverter (.dll) は、バリエーションファイルの定義を提供します。<br />これにより、テキストで表現されたバリエーションからバリエーションを入力することができます。</p>
<h2 id="Anchor_89982310_h2_2">方針</h2>
<p>GFX ShaderConverter (.dll) は、ファイル入出力を扱わず、メモリー上で完結できるように設計されています。</p>
<p>GFX のレイヤで標準化できそうな、汎用的な仕組みまでを提供します。</p>
<h2 id="Anchor_89982310_h2_3">提供形態</h2>
<p>32-bit 版と 64-bit 版の .dll として提供されており、また、対応する .pdb も提供されています。</p>
<p>低レベルのターゲットによっては、ランタイムが 32bit 版であれば 32bit 版を、64bit 版であれば 64bit 版を使う必要があります。&nbsp;</p>
<h3 id="Anchor_89982310_h3_1">利用方法</h3>
<p>ヘッダーファイルで宣言されている関数を .dll から取得して呼び出してください。</p>
<h2 id="Anchor_89982310_h2_4">配置</h2>
<h3 id="Anchor_89982310_h3_2">32bit 版バイナリー</h3>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>Tools/Graphics/GraphicsTools/x86/ShaderConverter.pdb
Tools/Graphics/GraphicsTools/x86/ShaderConverter.dll</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_89982310_h3_3">ヘッダーファイル</h3>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>Include/nn/gfxTool/gfxTool_ShaderConverterApi.h</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_89982310_h1_2">全体的な仕様</h1>
<p>ハンドルが GFX ShaderConverter のコンテキストを表現する点をのぞいて、ShaderCompiler と同じです。<br />ShaderCompiler の<a href="../Pages/Page_89981854.html#Anchor_89981854_spec_overview">全体的な仕様</a>を参照してください。</p>
<h1 id="Anchor_89982310_h1_3">&nbsp;機能</h1>
<h2 id="Anchor_89982310_h2_5">ハンドルの作成</h2>
<p>nngfxToolShaderConverterCreateHandle 関数により、ShaderConverter のコンテキストを表すハンドルを作成します。</p>
<p>コンバートなどの操作はこのハンドルに対して行うため、GFX ShaderConverter の利用にはまずハンドルを作成する必要があります。</p>
<h3 id="Anchor_89982310_h3_4">入力</h3>
<p>現在なにも設定はなく、将来のために予約された構造体を入力します。</p>
<h3 id="Anchor_89982310_h3_5">出力</h3>
<p>作成されたハンドルを出力します。</p>
<h2 id="Anchor_89982310_h2_6">ハンドルのリセット</h2>
<p>nngfxToolShaderConverterResetHandle 関数により、ShaderConverter のハンドルをリセットします。</p>
<p>それまでハンドルに対して行われた操作がリセットされ、ハンドルの作成直後と同じ状態になります。<br />新しいハンドルを作成するよりも効率がよくなる場合があります。</p>
<h3 id="Anchor_89982310_h3_6">入力</h3>
<p>&nbsp;対象のハンドル以外に入力はありません。</p>
<h2 id="Anchor_89982310_h2_7">シェーダーコンバート</h2>
<p>nngfxToolShaderConverterConvert 関数により、シェーダーのコンバートを行います。<br />内部的に、ShaderCompiler を介してシェーダーのコンパイルを行い、出力結果からバイナリーのサイズやアライメントを計算します。</p>
<h3 id="Anchor_89982310_h3_7">入力</h3>
<p>
  <strong>コンパイル引数</strong>
</p>
<p>ShaderCompiler のコンパイル引数を指定します。</p>
<p>
  <strong>その他の情報</strong>
</p>
<p>ShaderConverter 特有の情報を指定します。</p>
<h3 id="Anchor_89982310_h3_8">出力</h3>
<p>
  <strong>サイズとアライメント</strong>
</p>
<p>シリアライズするリソースのサイズとアライメントです。<br />このサイズ分のバッファーを確保し、次のシリアライズ関数にバッファーを渡します。</p>
<p>ファイルにリソース化する場合、アライメントを気にする必要はありません。</p>
<p>
  <strong>コンパイル結果</strong>
</p>
<p>ShaderCompiler のコンパイル結果です。<br />バイナリー化するだけであれば特に参照する必要はありません。<br />次のシリアライズのときに自動的に破棄されるため、明示的に破棄してはいけません。</p>
<h2 id="Anchor_89982310_h2_8">コンバート結果のシリアライズ</h2>
<p>&nbsp;nngfxToolShaderConverterSerialize 関数により、コンバート結果をシリアライズします。<br />シェーダーコンバートが行われている必要があります。</p>
<h3 id="Anchor_89982310_h3_9">入力</h3>
<p>
  <strong>シリアライズ先のバッファー</strong>
</p>
<p>リソース化される先のバッファーです。<br />十分な容量が確保されている必要があります。</p>
<h3 id="Anchor_89982310_h3_10">出力</h3>
<p>&nbsp;指定されたバッファーに GFX のシェーダーファイルの形式で書き込みます。</p>
<h2 id="Anchor_89982310_h2_9">ハンドルの削除</h2>
<p>nngfxToolShaderConverterCreateHandle 関数により作成されたハンドルを削除します。</p>
<p>シリアライズされたバッファーを削除することはありません。</p>
<h3 id="Anchor_89982310_h3_11">入力</h3>
<p>削除対象のハンドル以外に入力はありません。</p>
<h1 id="Anchor_89982310_h1_4">必須ではない機能</h1>
<h2 id="Anchor_89982310_h2_10">コマンドラインオプションからのコンバート引数の作成</h2>
<p>nngfxToolShaderConverterCreateConvertArg 関数により、コマンドラインオプションからコンバート引数を作成することができます。</p>
<p>コマンドラインオプションにより、ファイルからバリエーションを指定する場合は<a href="../Pages/Page_236829010.html">バリエーションファイル</a>を使用します。</p>
<h3 id="Anchor_89982310_h3_12">入力</h3>
<p>
  <strong>コマンドラインオプション</strong>
</p>
<p>ShaderConverter (.exe) の<a href="../Pages/Page_89982392.html#Anchor_89982392_cmdline">コマンドラインオプション</a>を参照してください。</p>
<p>
  <strong>ファイル入出力のコールバック</strong>
</p>
<p>コマンドラインオプションを処理してファイルから引数を作成するために、ファイル入出力のコールバックを指定します。</p>
<h3 id="Anchor_89982310_h3_13">出力</h3>
<p>
  <strong>コンバート引数</strong>
</p>
<p>作成されたコンバート引数を渡してコンバートを呼び出すことができます。<br />作成された引数は、明示的に削除しない限り存続します。</p>
<p>作成された引数を加工することは許可されます。<br />たとえばバリエーションへのポインターだけ利用者側で用意したものに差し替えるという加工をしても、後の削除に影響はありません（もともとツールが確保したものが削除され、差し替えられたものは削除されません）。</p>
<h2 id="Anchor_89982310_h2_11">コンバート引数の削除</h2>
<p>nngfxToolShaderConverterDeleteConvertArg 関数により、nngfxToolShaderConverterCreateConvertArg 関数によって作成されたコンバート引数を削除します。</p>
<h3 id="Anchor_89982310_h3_14">入力</h3>
<p>削除対象の引数以外に入力はありません。</p>
<h2 id="Anchor_89982310_h2_12">ログ出力ストリームの設定</h2>
<p>nngfxToolShaderConverterSetLogStream 関数により、ログ出力先を標準出力以外に設定することができます。</p>
<h3 id="Anchor_89982310_h3_15">入力</h3>
<p>
  <strong>ログ出力先設定引数</strong>
</p>
<p>設定対象のログ出力タイプとログ出力先のハンドルを指定します。</p>
<h2 id="Anchor_89982310_h2_13">バージョン情報の取得</h2>
<p>nngfxToolShaderConverterGetApiVersion 関数により、シェーダーコンバーターのバージョン情報を取得することができます。</p>
<h3 id="Anchor_89982310_h3_16">出力</h3>
<p>
  <strong>バージョン情報</strong>
</p>
<p>取得されるメジャーバージョンが nngfxToolShaderCompilerVersion_Major と異なる場合、動作は保証されません。</p>
<p>取得されるマイナーバージョンが&nbsp;nngfxToolShaderCompilerVersion_Minor より小さい場合、動作は保証されません。</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank">';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__gfx__ResShaderFile', '../../../Api/HtmlNX/classnn_1_1gfx_1_1_res_shader_file.html' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
