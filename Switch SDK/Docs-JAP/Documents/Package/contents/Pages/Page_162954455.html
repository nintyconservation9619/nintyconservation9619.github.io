<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>追加コンテンツの作成方法</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- 追加コンテンツの作成方法 -->
<div class="pagetitle" id="PageId_162954455">追加コンテンツの作成方法</div>
<div class="text_separate">
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_162954455_h1_1">追加コンテンツの作成方法</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_162954455_h2_1">追加コンテンツのメタデータの作成</a>
      </li>
      <li>
        <a href="#Anchor_162954455_h2_2">追加コンテンツに含めるデータの用意</a>
      </li>
      <li>
        <a href="#Anchor_162954455_h2_3">追加コンテンツのパッケージング</a>
      </li>
      <li>
        <a href="#Anchor_162954455_h2_4">追加コンテンツの識別</a>
      </li>
      <li>
        <a href="#Anchor_162954455_h2_5">具体例</a>
      </li>
    </ul>
  </ul>
</p>
<h1 id="Anchor_162954455_h1_1">追加コンテンツの作成方法</h1>
<p>追加コンテンツを作成するためには下記の作業が必要です。</p>
<ul style="list-style-type: square;">
  <li>追加コンテンツのメタデータの作成。</li>
  <li>追加コンテンツに含めるデータを用意。</li>
  <li>追加コンテンツのパッケージング。</li>
</ul>
<p>
  <br />
</p>
<p>以降、順に説明します。</p>
<p>
  <br />
</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>NXAddon 3.0 から nmeta ファイルのルートディレクティブのデフォルトが Meta から NintendoSdkMeta に変わりました。</p>
    <p>Meta も引き続きご利用になれますが、 サンプルやドキュメントなどの nmeta ファイルは NintendoSdkMeta に置き換わっているのでご注意ください。</p>
  </div>
</div>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>NXAddon 3.0 系から nsp 作成時の暗号化鍵が変更されました。</p>
    <p>3.0 以前の SDK で Nintendo Developer Portal(NDP) へ提出済みの追加コンテンツを、3.0 以降の SDK でリビルドして提出することできませんので注意してください。</p>
    <p>NDP 側では、そのような追加コンテンツが提出された場合、同一バージョンであるにも関わらず内容が異なる追加コンテンツの提出と判定するのでエラーとなります。</p>
    <p>3.0 以降の SDK で新しい追加コンテンツをビルドする場合も、同じ nsp に 3.0 以前でビルドした追加コンテンツを含めることできません。</p>
  </div>
</div>
<h2 id="Anchor_162954455_h2_1">追加コンテンツのメタデータの作成</h2>
<p>追加コンテンツのメタデータを作成します。</p>
<p>メタデータは XML 形式で下記のフォーマットです。</p>
<p>メタデータには複数個の追加コンテンツの情報を記述することができ、&lt;AddOnContent&gt; ディレクティブ 1 つが追加コンテンツ 1 つに対応します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;NintendoSdkMeta&gt;
&nbsp;&nbsp;&lt;!-- Index 1 の追加コンテンツ --&gt;
&nbsp;&nbsp;&lt;AddOnContent&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;Index&gt;1&lt;/Index&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;ReleaseVersion&gt;0&lt;/ReleaseVersion&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;ApplicationId&gt;0x0005000c10000000&lt;/ApplicationId&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;RequiredApplicationReleaseVersion&gt;0&lt;/RequiredApplicationReleaseVersion&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;Tag&gt;Index1 Tag&lt;/Tag&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;DataPath&gt;Index1DataPath&lt;/DataPath&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;FilterDescriptionFilePath&gt;FdfForIndex1.fdf&lt;/FilterDescriptionFilePath&gt;
&nbsp;&nbsp;&lt;/AddOnContent&gt;

&nbsp;&nbsp;&lt;!-- Index 2 の追加コンテンツ --&gt;
&nbsp;&nbsp;&lt;AddOnContent&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;Index&gt;2&lt;/Index&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;ReleaseVersion&gt;0&lt;/ReleaseVersion&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;ApplicationId&gt;0x0005000c10000000&lt;/ApplicationId&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;RequiredApplicationReleaseVersion&gt;0&lt;/RequiredApplicationReleaseVersion&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;Tag&gt;Index2 Tag&lt;/Tag&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;DataPath&gt;Index2DataPath&lt;/DataPath&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;FilterDescriptionFilePath&gt;FdfForIndex2.fdf&lt;/FilterDescriptionFilePath&gt;
&nbsp;&nbsp;&lt;/AddOnContent&gt;

&nbsp;&nbsp;&lt;!-- 同じ要領で複数個のコンテンツの情報を記述します --&gt;
&lt;/NintendoSdkMeta&gt;
</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>それぞれの項目の説明は以下の通りです。</p>
<p>用語についてのより詳細な解説は&nbsp;<a href="../Pages/Page_163289562.html">追加コンテンツの用語集</a> を参照してください。</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>項目名</th>
      <th>説明</th>
      <th>設定の制限</th>
    </tr>
    <tr>
      <td>Index</td>
      <td>
        <p>追加コンテンツのインデックスを指定します。</p>
        <p>詳細は<a href="../Pages/Page_163289562.html">こちら</a>を参照してください。</p>
      </td>
      <td>
        <p>必須。</p>
      </td>
    </tr>
    <tr>
      <td>ReleaseVersion</td>
      <td>
        <p>追加コンテンツのリリースバージョンを指定します。</p>
        <p>詳細は<a href="../Pages/Page_163289562.html">こちら</a>を参照してください。</p>
      </td>
      <td>
        <p>必須。</p>
        <p>
          <br />
        </p>
      </td>
    </tr>
    <tr>
      <td>ApplicationId</td>
      <td>
        <p>この追加コンテンツを扱うアプリケーションのアプリケーションID を指定します。</p>
        <p>詳細は<a href="../Pages/Page_163289562.html">こちら</a>を参照してください。</p>
      </td>
      <td>必須。</td>
    </tr>
    <tr>
      <td>RequiredApplicationReleaseVersion</td>
      <td>
        <p>必須アプリケーションリリースバージョンを指定します。</p>
        <p>詳細は<a href="../Pages/Page_163289562.html">こちら</a>を参照してください。</p>
      </td>
      <td>省略可能（省略時は 0 が設定される）。</td>
    </tr>
    <tr>
      <td>Tag</td>
      <td>
        <p>追加コンテンツのタグを指定します。</p>
        <p>詳細は<a href="../Pages/Page_163289562.html">こちら</a>を参照してください。</p>
      </td>
      <td>
        <p>必須。</p>
        <p>同一 nmeta 内に存在する別の AddOnContent の Tag と重複してはいけません。</p>
        <p>指定可能な最大文字数は 128 文字です。</p>
        <p>本体機能ガイドの「共有データ ／ 内蔵フォント」にある日米欧フォントが対応している文字コード以外の文字は受け付けません。</p>
      </td>
    </tr>
    <tr>
      <td>DataPath</td>
      <td>
        <div class="content-wrapper">
          <p>追加コンテンツに含めるデータディレクトリのパスを指定します。</p>
          <p>相対パスを指定した場合、AuthoringTool を実行したディレクトリからの相対パスとなります。</p>
          <p>
            <br />
          </p>
          <p>DataPath の属性に UseEnvironmentVariable=&quot;true&quot; を指定した場合、環境変数を使用することができます。</p>
          <p>
            <br />
          </p>
          <p>例えば、</p>
          <p>
            <br />
          </p>
          <p>環境変数 AOC_ROOT に対して D:\Project\Aoc が設定されている状態で</p>
          <p>
            <br />
          </p>
          <table class="codeblock">
            <tbody>
              <tr>
                <td class="code">
                  <div class="codeblock"><pre>&lt;DataPath UseEnvironmentVariable=&quot;true&quot;&gt;%AOC_ROOT%\Index1Data&lt;/DataPath&gt;</pre></div>
                </td>
              </tr>
            </tbody>
          </table>
          <p>
            <br />
          </p>
          <p>
            <br />
          </p>
          <p>と指定すると、D:\Project\Aoc\Index1Data を DataPath として評価します。</p>
        </div>
      </td>
      <td>必須。</td>
    </tr>
    <tr>
      <td>FilterDescriptionFilePath</td>
      <td>
        <p>DataPath に対して適用する Fdf ファイルのパスを指定します。このパスは AuthoringTool の --filter オプションより優先されます。</p>
        <p>パス指定のルールは DataPath と同じです。</p>
        <p>Fdf ファイルについては <a href="../Pages/Page_107320233.html">AuthoringTool</a> を参照してください。</p>
      </td>
      <td>省略可能（省略時は fdf の適用は行われません）。</td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<h2 id="Anchor_162954455_h2_2">追加コンテンツに含めるデータの用意</h2>
<p>追加コンテンツには PC 上の任意のディレクトリをそのまま含めることができますので、追加コンテンツに含めたいデータをメタデータの DataPath で指定したディレクトリに配置します。</p>
<h2 id="Anchor_162954455_h2_3">追加コンテンツのパッケージング</h2>
<p>追加コンテンツを実機にインストールするためにはパッケージングを行う必要があります。</p>
<p>パッケージングには SDK に含まれている AuthoringTool を使用します。</p>
<p>下記のコマンドで追加コンテンツをパッケージングすることができます。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>%NINTENDO_SDK_ROOT%Tools\CommandLineTools\AuthoringTool\AuthoringTool.exe creatensp -o &lt;OutputFilePath&gt; --save-adf --type AddOnContent --meta &lt;MetaFilePath&gt;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br />
</p>
<h2 id="Anchor_162954455_h2_4">追加コンテンツの識別</h2>
<p>１つのパッケージ( nsp ファイル)には複数の追加コンテンツが含まれています。<br />それら個別のコンテンツごとに ROM 識別ハッシュ が設定されています。</p>
<p>ROM 識別ハッシュについては<a href="../Pages/Page_107320222.html#Anchor_107320222_RomIdentifierHash">ビルド成果物の識別について</a>&nbsp;を参考にしてください。<br />追加コンテンツの ROM 識別ハッシュは含まれたデータやTag以外のメタデータが変更される度に異なる値を取ります。<br />Tagの修正は&nbsp;ROM 識別ハッシュ には影響しませんのでご注意ください。</p>
<p>コンテンツごとの ROM 識別ハッシュを確認するには、<a href="../Pages/Page_187698789.html">AuthoringEditor</a> を使用してください。</p>
<h2 id="Anchor_162954455_h2_5">具体例</h2>
<p>サンプルプログラムの AocSimple を参照してください。</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
