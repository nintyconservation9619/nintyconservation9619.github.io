<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>セーブデータ</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- セーブデータ -->
<div class="pagetitle" id="PageId_227085130">セーブデータ</div>
<div class="text_separate">
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_227085130_h1_1">概要</a>
    </li>
    <li>
      <a href="#Anchor_227085130_h1_2">セーブデータの種類</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_227085130_h2_1">ユーザーセーブデータ</a>
      </li>
      <li>
        <a href="#Anchor_227085130_h2_2">デバッグ用セーブデータ</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_227085130_h1_3">セーブデータの配置場所</a>
    </li>
    <li>
      <a href="#Anchor_227085130_h1_4">セーブデータの作成</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_227085130_h2_3">ユーザーセーブデータの作成</a>
      </li>
      <li>
        <a href="#Anchor_227085130_h2_4">デバッグ用セーブデータの作成</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_227085130_h1_5">セーブデータのサイズ</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_227085130_h2_5">ユーザーセーブデータのサイズ</a>
      </li>
      <li>
        <a href="#Anchor_227085130_h2_6">ユーザーセーブデータサイズの拡張</a>
      </li>
      <li>
        <a href="#Anchor_227085130_h2_7">デバッグ用セーブデータのサイズ</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_227085130_h1_6">他のアプリケーションのセーブデータの参照</a>
    </li>
    <li>
      <a href="#Anchor_227085130_h1_7">セーブデータ以外のデータ保存領域</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_227085130_h2_8">一時ストレージ</a>
      </li>
      <li>
        <a href="#Anchor_227085130_h2_9">キャッシュストレージ</a>
      </li>
    </ul>
  </ul>
</p>
<h1 id="Anchor_227085130_h1_1">
  <span style="color: rgb(117,117,117);">概要</span>
</h1>
<p>セーブデータ機能は、アプリケーションのデータを記録し永続化するための機能を提供します。</p>
<p>アプリケーションは FS ライブラリを使って、セーブデータ内に自由にファイルやディレクトリを作成しデータを読み書きすることが出来ます。<br />セーブデータの具体的な操作方法や設定方法については、&nbsp;<a href="../Pages/Page_107782148.html">FS ライブラリのドキュメント</a>&nbsp;も参照してください。</p>
<h1 id="Anchor_227085130_h1_2">セーブデータの種類</h1>
<p>NX アプリケーションで利用できるセーブデータの種類とその概要は次の通りです。いずれのセーブデータもカード版・ダウンロード版問わず共通のセーブデータを参照します。</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>アプリケーションの企画がこれらのセーブデータだけでは実現困難な場合は、任天堂の窓口まで相談してください。</p>
  </div>
</div>
<h2 id="Anchor_227085130_h2_1">
  <span style="color: rgb(117,117,117);">ユーザーセーブデータ</span>
</h2>
<p>
  <a href="../Pages/Page_108531698.html">ユーザーアカウント</a>&nbsp;毎に作成できるアプリケーションのセーブデータです。製品版では基本的にこのセーブデータを利用します。</p>
<p>ユーザーセーブデータはユーザーアカウントの移行やバックアップなどによって別の本体へ移行されることがあります。<br />以下のドキュメントも十分ご確認の上、利用するようにしてください。</p>
<ul class="alternate">
  <li>
    <a href="../Pages/Page_227101339.html">ユーザーセーブデータの移動や複製の機能</a>
  </li>
  <li>
    <a href="../Pages/Page_227101348.html">ユーザーセーブデータへの使用に注意を要する情報</a>
  </li>
  <li>
    <a href="../Pages/Page_227101748.html">ユーザーセーブデータのサンプルケースと仕様例</a>
  </li>
</ul>
<h2 id="Anchor_227085130_h2_2">デバッグ用セーブデータ</h2>
<p>アプリケーション毎に 1 つ作成できるセーブデータです。<strong style="color: rgb(33,33,33);">このセーブデータは開発用途限定のものであり、製品環境で使用することはできません。</strong></p>
<h1 id="Anchor_227085130_h1_3">セーブデータの配置場所</h1>
<p>いずれのセーブデータも本体保存メモリーに保存されます。</p>
<h1 id="Anchor_227085130_h1_4">セーブデータの作成<a name="Anchor_227085130_savedata_creation"></a></h1>
<h2 id="Anchor_227085130_h2_3">ユーザーセーブデータの作成<a name="Anchor_227085130_usersavedata_creation"></a></h2>
<p>
  <a href="../Pages/Page_166503043.html#Anchor_166503043_h3_12">起動時本体アカウント選択</a>&nbsp;を利用して選択されたユーザーアカウントのセーブデータについては、アプリケーション起動時点でシステムが作成します。<br />起動時本体アカウント選択の詳細については、アカウントガイドおよび&nbsp;<a href="../Pages/Page_166503043.html#Anchor_166503043_h3_12">機能 &gt; ビルド &gt; アプリケーションイメージの作成 &gt; nmeta ファイルの書き方 / 起動時本体アカウント選択</a>&nbsp;を参照して下さい。</p>
<p>それ以外のユーザーセーブデータにアクセスする場合（例：アプリケーション内で複数のユーザーアカウントを切り替え、そのセーブデータにアクセスする場合）、<strong>該当のユーザーセーブデータの作成・エラーハンドリングをアプリケーションが明示的に行う必要があります。<br /></strong>詳しくは <a href="../Pages/Page_107782148.html">FS ライブラリのドキュメント</a> の「アプリケーションによるセーブデータの作成」を参照してください。</p>
<p>
  <strong>いずれの場合も、ユーザーセーブデータの作成のためには&nbsp;nmeta ファイル (.nmeta) の設定が必要です。</strong>詳しくは <a href="../Pages/Page_107782148.html">FS ライブラリのドキュメント</a> の「セーブデータの設定」を参照してください。</p>
<h2 id="Anchor_227085130_h2_4">デバッグ用セーブデータの作成</h2>
<p>デバッグ用セーブデータは利用開始時（対応する FS ライブラリのマウント関数呼び出し時）に自動作成され、nmeta ファイルの設定が無くても利用できます。</p>
<h1 id="Anchor_227085130_h1_5">セーブデータのサイズ</h1>
<p>セーブデータには「データ保存領域」と「ジャーナリング領域」の 2 つの領域があります。データ保存領域のサイズまでのファイル・ディレクトリを配置することができ、ジャーナリング領域のサイズまでのデータ量をセーブデータのコミット操作間で書き換えることができます。詳しくは&nbsp;<a href="../Pages/Page_107782148.html">FS ライブラリのドキュメント</a>&nbsp;の「セーブデータの特性」<span style="color: rgb(51,51,51);">も</span>参照してください。</p>
<h2 id="Anchor_227085130_h2_5">ユーザーセーブデータのサイズ</h2>
<p>ユーザーセーブデータの「データ保存領域」と「ジャーナリング領域」のサイズは、&nbsp;<a href="../Pages/Page_166503043.html">nmeta ファイル</a> で設定します。</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>本体保存メモリーを不適切に占有してユーザー体験が悪くなることがないよう、セーブデータサイズは必要最小限であることが望ましいです。<br />ユーザーセーブデータのデータ保存領域サイズとジャーナリング領域サイズの和が 64 MB より大きな値を設定する場合は事前の申請が必要です。任天堂の窓口までご相談ください。</p>
    <p>ご相談の際には次の情報をお知らせください。</p>
    <ul>
      <li>データ保存領域サイズとジャーナリング領域サイズ</li>
      <li>データ保存領域サイズの内訳（各要素の内容、サイズ、要素数）</li>
      <li>ユーザーの遊び方によって保存すべきデータのサイズが大きく変わる場合は、セーブデータ容量拡張機能を利用するか</li>
      <li>一時ストレージ機能を使用すべきデータが含まれていないか</li>
      <li>キャッシュストレージ機能を使用すべきデータが含まれていないか</li>
      <li>ゲーム性を損なわない範囲で圧縮やデータ形式変更などによるサイズの最適化を行ったか</li>
    </ul>
  </div>
</div>
<h2 id="Anchor_227085130_h2_6">
  <span style="color: rgb(128,128,128);">ユーザーセーブデータサイズの拡張</span>
</h2>
<p>
  <span style="color: rgb(51,51,51);">NX Addon 3.1.0 以降で作成したアプリケーションやパッチでは、作成済みのユーザーセーブデータのサイズを、記録されたデータを維持したまま拡張することができます。</span>
</p>
<p>
  <span style="color: rgb(51,51,51);">拡張には 2 つの手段があり、状況に応じていずれかあるいは両方を利用します。(a) 拡張の実装方法、(b) 拡張の実施されるタイミング、(c) 想定されるユースケース、(d) 空き容量不足のハンドリングの要否ともに以下に示します。</span>
</p>
<ol>
  <li>nmeta ファイルによるユーザーセーブデータサイズの更新<ol><li>nmeta ファイルのユーザーセーブデータサイズの設定値を変更してパッチを作成する</li><li>上記パッチを適用したアプリケーションの<a href="#Anchor_227085130_usersavedata_creation">ユーザーセーブデータ作成時</a>（既存のセーブデータがあればサイズが拡張され、なければ拡張後のサイズで新規生成されます。）</li><li>パッチによる機能拡張もしくは不具合修正のため、アプリケーション企画時に設定したサイズを上回る容量を利用したい場合</li><li><a href="../Pages/Page_166503043.html#Anchor_166503043_h3_12">起動時本体アカウント選択</a>&nbsp;を利用しない場合のみ、<span style="color: rgb(51,51,51);">空き容量不足のハンドリングが</span>必要。</li></ol></li>
  <li>ユーザーセーブデータサイズの随時拡張<ol><li>アプリケーション内でセーブデータサイズの拡張処理を実行する<br /></li><li>上記処理実行時</li><li>特定の遊び方をするユーザーだけに初期サイズを上回る容量のセーブデータを利用させたい場合</li><li><span style="color: rgb(51,51,51);">空き容量不足のハンドリングが</span>必要</li></ol></li>
</ol>
<p>セーブデータの拡張には他にも拡張回数の制限やサイズの制限があります。詳しくは <a href="../Pages/Page_107782148.html">FS ライブラリのドキュメント</a>&nbsp;の<span style="color: rgb(51,51,51);">「セーブデータサイズの拡張」も</span>参照してください。</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>
      <span style="color: rgb(51,51,51);">nmeta ファイルによるユーザーセーブデータサイズの更新で<span style="color: rgb(51,51,51);">データ保存領域サイズとジャーナリング領域サイズの和が 64MB より大きくなる場合とユーザーセーブデータサイズの随時拡張</span>機能を利用する場合には、事前の申請が必要です。任天堂の窓口までご相談ください。</span>
    </p>
    <p>
      <span style="color: rgb(51,51,51);">ご相談の際には次の情報をお知らせください。</span>
    </p>
    <ul>
      <li>nmeta ファイルによるユーザーセーブデータサイズの更新を利用するか？</li>
      <li>ユーザーセーブデータサイズの随時拡張を利用するか？</li>
      <li>拡張後のデータ保存領域サイズとジャーナリング領域サイズ</li>
      <li>拡張を必要とする理由</li>
      <li>今後もさらにセーブデータ拡張を実施する計画があるか</li>
    </ul>
  </div>
</div>
<h2 id="Anchor_227085130_h2_7">
  <span style="color: rgb(117,117,117);">デバッグ用セーブデータのサイズ</span>
</h2>
<p>デバッグ用セーブデータの「データ保存領域」と「ジャーナリング領域」のサイズは、それぞれ 32 MB で固定です。</p>
<h1 id="Anchor_227085130_h1_6">
  <span style="color: rgb(117,117,117);">他のアプリケーションのセーブデータの参照</span>
</h1>
<p>nmeta ファイルに設定を記載することで、他のアプリケーションのユーザーセーブデータを参照することができます。<br />詳しくは&nbsp;&nbsp;<a href="../Pages/Page_107782148.html">FS ライブラリのドキュメント</a>&nbsp;の「他アプリケーションのセーブデータの参照」を参照してください。</p>
<h1 id="Anchor_227085130_h1_7">
  <span style="color: rgb(117,117,117);">セーブデータ以外のデータ保存領域</span>
</h1>
<p>セーブデータとは別に、アプリケーションデータを保存するために<span style="color: rgb(51,51,51);">一時ストレージおよびキャッシュストレージ</span>機能を提供しています。</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>
      <span style="color: rgb(51,51,51);">
        <span style="color: rgb(51,51,51);">一時ストレージおよびキャッシュストレージ機能は NX Addon 3.1.0 以降で利用できます。</span>利用には事前の申請が必要です。任天堂の窓口までご相談ください。</span>
    </p>
    <p>
      <span style="color: rgb(51,51,51);">&nbsp;</span>ご相談の際には次の情報をお知らせください。</p>
    <ul>
      <li>サイズの内訳（各要素の内容、サイズ、要素数）</li>
      <li>一時ストレージにアプリケーション終了時に削除されると支障があるデータが含まれていないか</li>
      <li>キャッシュストレージに一時ストレージ機能を使用すべきデータが含まれていないか</li>
      <li>キャッシュストレージに巻き戻りや先送りされた状態になると支障があるデータが含まれていないか</li>
      <li>ゲーム性を損なわない範囲で圧縮やデータ形式変更などによるサイズの最適化を行ったか</li>
    </ul>
  </div>
</div>
<h2 id="Anchor_227085130_h2_8">
  <span style="color: rgb(128,128,128);">一時ストレージ</span>
</h2>
<p>一時ストレージ機能は、アプリケーションが一時的にファイルを保存するためのワーク領域を提供します。<strong>一時ストレージに書き込まれた内容は永続化されず、アプリケーション終了時に消去されます。</strong></p>
<p>アプリケーションごとに最大 1 つ存在し、ユーザアカウントには紐づきません。<span style="color: rgb(51,51,51);">&nbsp;</span></p>
<p>例えば以下のような目的で使用することを意図した領域です。<span style="color: rgb(51,51,51);">&nbsp;</span></p>
<ul>
  <li>動画のエンコードのための一時保存</li>
  <li>再生成・再取得可能なデータの一時保存</li>
</ul>
<p>以下の点がキャッシュストレージ機能と異なります。</p>
<ul>
  <li>アプリケーション終了時に削除され、起動時には常に空になっていることが保証される</li>
  <li>ジャーナリング機能によるデータ保護、およびそれに伴う書き込み量制限がない</li>
</ul>
<h2 id="Anchor_227085130_h2_9">
  <span style="color: rgb(128,128,128);">キャッシュストレージ</span>
</h2>
<p>キャッシュストレージ機能は、アプリケーションが<strong>再生成・再取得可能なデータ</strong>を保存するための領域を提供します。<strong>キャッシュストレージに書き込まれた内容は永続化されますが、アプリケーションの整理・削除時にあわせて削除されます。</strong></p>
<div class="warn_new">
  <div class="warn_new_left">警告：</div>
  <div class="warn_new_right">
    <p>
      <strong>キャッシュストレージは、ユーザーにとって重要であるデータを保存するための領域ではありません。削除してもユーザに不利益が無いデータの保存にのみ利用してください。<br /></strong>
      <strong>ユーザーにとって重要であるデータはユーザーセーブデータに保存してください。</strong>
    </p>
  </div>
</div>
<p>アプリケーションごとに最大 1 つ存在し、ユーザーアカウントには紐づきません。</p>
<p>例えば以下のような目的で使用することを意図した領域です。</p>
<ul>
  <li>ROM や追加コンテンツより頻繁に更新し独自サーバーなどで配信するゲームリソースデータの保存</li>
  <li>他ユーザが作成しサーバー上にアップロードした、再取得可能な UGC の保存</li>
  <li>再生成・再取得可能なデータで、次回のアプリケーション起動時にも残っていると大きなメリットがあるようなデータの保存</li>
</ul>
<p>以下の点が一時ストレージ機能と異なります。</p>
<ul style="list-style-type: square;">
  <li>アプリケーション終了後も永続化される</li>
  <li>
    <strong>アプリケーション整理・削除に伴い削除される</strong>
  </li>
  <li>ジャーナリング機能によるデータ保護、およびそれに伴って書き込み量制限がある</li>
</ul>
<p>
  <br />
</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
