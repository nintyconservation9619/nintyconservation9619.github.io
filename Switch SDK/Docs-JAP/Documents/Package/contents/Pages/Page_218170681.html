<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>カスタムシェーダで利用可能な変数・マクロ</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- カスタムシェーダで利用可能な変数・マクロ -->
<div class="pagetitle" id="PageId_218170681">カスタムシェーダで利用可能な変数・マクロ</div>
<div class="text_separate">
<h1 id="Anchor_218170681_h1_1">カスタムシェーダで利用可能な変数・マクロ</h1>
<p>カスタムシェーダで利用可能な変数・マクロについて、こちらに一覧をまとめます。</p>
<p>
  <span class="status_macro_base status_macro_Blue">関連リンク</span>
</p>
<table style="margin-left: 1.5em;" class="table">
  <tbody>
    <tr>
      <th>
        <a href="../Pages/Page_83955731.html">カスタムシェーダの例</a>
      </th>
      <td>カスタムシェーダの解説です。</td>
    </tr>
    <tr>
      <th>
        <a href="../Pages/Page_218170764.html">カスタムシェーダでカスタム可能な関数</a>
      </th>
      <td>カスタムシェーダで、ユーザーが独自にカスタム可能なエフェクト標準の関数についての解説です。</td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_218170681_h2_1">マクロ・定数</h2>
<table style="margin-left: 1.5em;" class="table">
  <tbody>
    <tr>
      <th rowspan="2">定義される文字列</th>
      <th colspan="3">シェーダごとの使用可否</th>
      <th rowspan="2">説明</th>
    </tr>
    <tr>
      <th>頂点</th>
      <th>ピクセル</th>
      <th>コンピュート</th>
    </tr>
    <tr>
      <th>CUSTOM_SHADER_NONE</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>カスタムシェーダを利用しない場合に定義されます。</td>
    </tr>
    <tr>
      <th>CUSTOM_SHADER_INDEX_1 ~ 8</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>カスタムシェーダを利用している場合、利用しているカスタムシェーダインデックスを含めた文字列が定義されます。</td>
    </tr>
    <tr>
      <th>CUSTOM_SHADER_FLAG_0 ~ 63</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>カスタムシェーダフラグを利用している場合、利用しているカスタムシェーダフラグが定義されます。</td>
    </tr>
    <tr>
      <th>CUSTOM_SHADER_SWITCH_FLAG_0 ~ 63</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>カスタムシェーダスイッチフラグを利用している場合、利用しているカスタムシェーダスイッチフラグが定義されます。</td>
    </tr>
    <tr>
      <th>DRAW_PATH_0 ~ 63</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>利用している描画パスのインデックスが定義されます。</td>
    </tr>
    <tr>
      <th>VERTEX_SHADER</th>
      <td>○</td>
      <td>&times;</td>
      <td>&times;</td>
      <td>
        <p>頂点シェーダである場合に定義されます。</p>
        <p>この定義を利用することで頂点・ピクセルのカスタムシェーダを１ファイルで記述できます。</p>
      </td>
    </tr>
    <tr>
      <th>FRAGMENT_SHADER</th>
      <td>&times;</td>
      <td>○</td>
      <td>&times;</td>
      <td>
        <p>ピクセルシェーダである場合に定義されます。</p>
        <p>この定義を利用することで頂点・ピクセルのカスタムシェーダを１ファイルで記述できます。</p>
      </td>
    </tr>
    <tr>
      <th>COMPUTE_SHADER</th>
      <td>&times;</td>
      <td>&times;</td>
      <td>○</td>
      <td>コンピュートシェーダである場合に定義されます。</td>
    </tr>
    <tr>
      <th>_PRIMITIVE</th>
      <td>○</td>
      <td>&times;</td>
      <td>&times;</td>
      <td>プリミティブパーティクル使用時に定義されます</td>
    </tr>
    <tr>
      <th>_PARTICLE</th>
      <td>○</td>
      <td>&times;</td>
      <td>&times;</td>
      <td>通常パーティクル使用時に定義されます</td>
    </tr>
    <tr>
      <th>_USE_STRIPE</th>
      <td>○</td>
      <td>&times;</td>
      <td>&times;</td>
      <td>ストライプ使用時に定義されます</td>
    </tr>
    <tr>
      <th>M_PI</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>円周率です。</td>
    </tr>
    <tr>
      <th>CHECK_CUSTOM_FIELD_FLAG( bit )</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>引数を一つ取るマクロで、カスタムフィールドのフラグが立っているかどうかを取得できます</td>
    </tr>
    <tr>
      <th>MIPMAPLEVEL_LIMIT</th>
      <td>&times;</td>
      <td>○</td>
      <td>&times;</td>
      <td>
        <p>使用するミップマップテクスチャの打ち切りレベルです。<br />打ち切りレベルを変えたい場合は、カスタムピクセルシェーダーにて、本マクロを <code>#undef</code> して再定義してください。</p>
      </td>
    </tr>
    <tr>
      <th>
        <p>_TEXTURE_ORIGIN_LOWER_LEFT</p>
        <p>_TEXTURE_ORIGIN_UPPER_LEFT</p>
      </th>
      <td>○</td>
      <td>&times;</td>
      <td>&times;</td>
      <td>
        <p>UV 原点がテクスチャのどこに相当するか（左下／左上）を示します。</p>
        <p>デフォルトは左下で定義されていますが、設定を切り替えることもできます。</p>
        <p>設定の切り替え方法については <a href="../Pages/Page_220071131.html">フレームバッファ・デプスバッファの UV 原点位置の切り替え</a> をご覧ください。</p>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_218170681_h2_2">変数</h2>
<table style="margin-left: 1.5em;" class="table">
  <tbody>
    <tr>
      <th rowspan="2">変数名　　　　　　　　　　　　</th>
      <th colspan="3">シェーダごとの使用可否</th>
      <th rowspan="2">説明</th>
    </tr>
    <tr>
      <th>頂点</th>
      <th>ピクセル</th>
      <th>コンピュート</th>
    </tr>
    <tr>
      <th>sysWorldPositionVary</th>
      <td>○</td>
      <td>○</td>
      <td>&times;</td>
      <td>標準シェーダで計算後のワールド座標</td>
    </tr>
    <tr>
      <th>sysWorldNormalVary</th>
      <td>○</td>
      <td>○</td>
      <td>&times;</td>
      <td>パーティクル形状の場合は ( x=0, y=0, z=1 ) が法線として入力されます。<br />プリミティブ形状の場合は、入力されるアセット内に含まれる法線が入力されます。</td>
    </tr>
    <tr>
      <th>sysWorldTangentVary</th>
      <td>○</td>
      <td>○</td>
      <td>&times;</td>
      <td>
        <p>パーティクル形状の場合は ( x=1, y=0, z=0 ) が法線として入力されます。</p>
        <p>プリミティブ形状の場合は、入力されるアセット内に含まれる法線が入力されます。</p>
      </td>
    </tr>
    <tr>
      <th>sysWorldBinormalVary</th>
      <td>○</td>
      <td>○</td>
      <td>&times;</td>
      <td>
        <p>パーティクル形状の場合は ( x=0, y=1, z=0 ) が法線として入力されます。</p>
        <p>プリミティブ形状の場合は、入力されるアセット内に含まれる法線と接線の外積が入力されます。</p>
      </td>
    </tr>
    <tr>
      <th>sysIndexAttr</th>
      <td>○</td>
      <td>&times;</td>
      <td>&times;</td>
      <td>パーティクル形状の場合は、{ 3, 1, 2, 0 } の順で入力されます。<br />プリミティブ形状の場合は、入力されるアセット内に含まれるインデックス値が入力されます。</td>
    </tr>
    <tr>
      <th>sysMasterAlpha</th>
      <td>○</td>
      <td>○</td>
      <td>&times;</td>
      <td>最終出力カラーに乗算されるアルファ値　</td>
    </tr>
    <tr>
      <th>
        <p>sysColor0Vary</p>
        <p>sysColor1Vary</p>
      </th>
      <td>○</td>
      <td>○</td>
      <td>&times;</td>
      <td>
        <p>パーティクルカラー 0 / 1</p>
        <p>この２色は、ピクセルシェーダ側でブレンドされます。</p>
      </td>
    </tr>
    <tr>
      <th>OUTPUT_COLOR</th>
      <td>&times;</td>
      <td>○</td>
      <td>&times;</td>
      <td>最終出力カラー</td>
    </tr>
    <tr>
      <th>
        <p>sysTextureSampler0</p>
        <p>
          <span style="color: rgb(51,51,51);">sysTextureSampler</span>1</p>
        <p>
          <span style="color: rgb(51,51,51);">sysTextureSampler</span>2</p>
      </th>
      <td>&times;</td>
      <td>○</td>
      <td>&times;</td>
      <td>テクスチャサンプラ</td>
    </tr>
    <tr>
      <th>
        <p>sysInTexCoord0</p>
        <p>sysInTexCoord1</p>
        <p>sysInTexCoord2</p>
      </th>
      <td>&times;</td>
      <td>○</td>
      <td>&times;</td>
      <td>テクスチャ座標</td>
    </tr>
    <tr>
      <th>
        <p>sysPtclRandomX</p>
        <p>sysPtclRandomY</p>
        <p>sysPtclRandomZ</p>
        <p>sysPtclRandomW</p>
      </th>
      <td>○</td>
      <td>&times;</td>
      <td>&times;</td>
      <td>パーティクルが粒ごとに持つ乱数値（float x 4）</td>
    </tr>
    <tr>
      <th>sysViewMatrix</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>ビュー行列</td>
    </tr>
    <tr>
      <th>sysProjectionMatrix</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>射影行列</td>
    </tr>
    <tr>
      <th>sysViewProjectionMatrix</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>乗算済み ビュー行列 x 射影行列</td>
    </tr>
    <tr>
      <th>sysEyeVector</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>視線方向ベクトル</td>
    </tr>
    <tr>
      <th>sysEyePosition</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>カメラ位置</td>
    </tr>
    <tr>
      <th>sysScreenNear</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>射影行列の Near 値</td>
    </tr>
    <tr>
      <th>sysScreenFar</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>射影行列の Far 値</td>
    </tr>
    <tr>
      <th>sysFrameRate</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>フレームレート値</td>
    </tr>
    <tr>
      <th>sysEmitterTime</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>エミッタ時間</td>
    </tr>
    <tr>
      <th>
        <p>sysEmitterColor0</p>
        <p>sysEmitterColor1</p>
      </th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>
        <p>エミッタカラー0</p>
        <p>エミッタカラー1</p>
      </td>
    </tr>
    <tr>
      <th>sysEmitterFadeAlpha</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>現在のフェード値（フェード中に0.0～1.0で変動）</td>
    </tr>
    <tr>
      <th>sysEmitterMatrix</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>エミッタ行列（SRT行列）</td>
    </tr>
    <tr>
      <th>sysEmitterRTMatrix</th>
      <td>○</td>
      <td>○</td>
      <td>○</td>
      <td>エミッタ行列（RT行列）</td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_218170681_h2_3">テクスチャサンプラ</h2>
<p>カスタムシェーダ内で利用可能なテクスチャサンプラ一覧です。テクスチャサンプラを利用する場合は、以下の表にあるテクスチャサンプラ名をカスタムシェーダ内で宣言し、RenderState コールバック内で利用するテクスチャとカスタムサンプラ ID を指定して設定する必要があります。</p>
<table style="margin-left: 1.5em;" class="table">
  <tbody>
    <tr>
      <th>型</th>
      <th>テクスチャサンプラ名</th>
      <th>カスタムサンプラ ID</th>
    </tr>
    <tr>
      <th>sampler2D</th>
      <th>sysCustomShaderTextureSampler0 ~ 3</th>
      <td>EFT_CUSTOM_SHADER_TEXTURE_2D_0 ~ 3</td>
    </tr>
    <tr>
      <th>sampler2DArray</th>
      <th>sysCustomShaderTextureArraySampler0 ~ 3</th>
      <td>EFT_CUSTOM_SHADER_TEXTURE_2D_ARRAY_0 ~ 3</td>
    </tr>
    <tr>
      <th>sampler3D</th>
      <th>sysCustomShaderTexture3DSampler0 ~ 3</th>
      <td>EFT_CUSTOM_SHADER_TEXTURE_3D_0 ~ 3</td>
    </tr>
    <tr>
      <th>
        <span style="color: rgb(51,51,51);">samplerCube</span>
      </th>
      <th>
        <p>sysCustomShaderCubeSampler0 ~ 3</p>
      </th>
      <td>EFT_CUSTOM_SHADER_TEXTURE_CUBE_MAP_0 ~ 3</td>
    </tr>
    <tr>
      <th>samplerCubeArray</th>
      <th>sysCustomShaderCubeArraySampler0 ~ 3</th>
      <td>EFT_CUSTOM_SHADER_TEXTURE_CUBE_MAP_ARRAY_0 ~ 3</td>
    </tr>
    <tr>
      <th>sampler2DShadow</th>
      <th>sysCustomShaderShadowSampler0 ~ 3</th>
      <td>EFT_CUSTOM_SHADER_TEXTURE_SHADOW_0 ~ 3</td>
    </tr>
    <tr>
      <th>sampler2DArrayShadow</th>
      <th>sysCustomShaderShadowArraySampler0 ~ 3</th>
      <td>EFT_CUSTOM_SHADER_TEXTURE_SHADOW_ARRAY_0 ~ 3</td>
    </tr>
  </tbody>
</table>
<p>
  <br />
  <br />
</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
