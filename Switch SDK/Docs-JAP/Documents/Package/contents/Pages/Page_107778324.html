<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>ユーザーデータ定義</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- ユーザーデータ定義 -->
<div class="pagetitle" id="PageId_107778324">ユーザーデータ定義</div>
<div class="text_separate">
<h1 style="text-align: left;" id="Anchor_107778324_h1_1">ユーザーデータ定義とは</h1>
<p>エフェクトモジュールでは、以下の機能を使用する際、ユーザー独自のパラメータを定義し、EffectMaker と アプリケーションで連携させることができます。</p>
<p>例えば下図のように、カスタムシェーダに独自のパラメータを定義し、それに対応する UI を EffectMaker 上に表示させることができます。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_107778324/206776441.png" height="400" class="embedded-image" />
  </span>
</p>
<ul>
  <li>
    <a href="../Pages/Page_106362252.html">エミッタ拡張パラメータ</a>
  </li>
  <li>
    <a href="../Pages/Page_83955512.html">カスタムシェーダ</a>
  </li>
  <li>
    <a href="../Pages/Page_83955583.html">カスタムアクション</a>
  </li>
</ul>
<p>独自に定義したパラメータは EffectMaker を通して編集ができ、アプリケーション側のユーザーコードでも、これらのパラメータをランタイム API を通して使用することができるようになります。</p>
<p>ユーザーデータ定義とは、この連携を行うために必要な、以下の二つのデータを記述するためのフォーマットです。</p>
<ol>
  <li>
    <strong>ユーザーが EffectMaker ・エフェクトランタイム 独自に組み込むデータを表す構造体の定義</strong>
  </li>
  <li>
    <strong>EffectMaker 上での、上記構造体の各メンバに対応する UI コントロール の配置設定</strong>
  </li>
</ol>
<p>ユーザーデータ定義は、<span style="color: rgb(0,0,255);"> <strong>アプリケーションで使用する構造体定義にアノテーションとして書くので、直感的に記述できます</strong> </span>。<br />また、<span style="color: rgb(0,0,255);"> <strong>データの定義順と UI レイアウト順を切り離して記述できるため、デザイナーの使い勝手に応じて、後から UI レイアウトを調整することができます。</strong> </span></p>
<p>
  <span class="status_macro_base status_macro_Blue">関連リンク</span>
</p>
<table class="table">
  <tbody>
    <tr>
      <th>
        <a href="../Pages/Page_106362252.html">エミッタ拡張パラメータ</a>
      </th>
      <td>エミッタ拡張パラメータのマニュアルです。</td>
    </tr>
    <tr>
      <th>
        <span class="with-breadcrumbs"> <a href="../Pages/Page_83955512.html">カスタムシェーダ</a> </span>
      </th>
      <td>カスタムシェーダのマニュアルです。</td>
    </tr>
    <tr>
      <th>
        <a href="../Pages/Page_83955731.html">カスタムシェーダの例</a>
      </th>
      <td>カスタムシェーダのチュートリアルです。</td>
    </tr>
    <tr>
      <th>
        <a href="../Pages/Page_83955583.html">カスタムアクション</a>
      </th>
      <td>カスタムアクションのマニュアルです。</td>
    </tr>
    <tr>
      <th>
        <a href="../Pages/Page_124021155.html">ユーザーデータ定義のサンプル</a>
      </th>
      <td>ユーザーデータ定義のサンプルをまとめたページです。</td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_107778324_h2_1">目次</h2>
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_107778324_h2_1">目次</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_107778324_h3_1">とりあえず動くサンプルがほしい</a>
      </li>
      <li>
        <a href="#Anchor_107778324_h3_2">UI コントロールで何が使えるのか知りたい</a>
      </li>
      <li>
        <a href="#Anchor_107778324_h3_3">旧 UDD のデータをそのまま組み込みたい</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_107778324_h2_2">ユーザーデータ定義ファイルの概要</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_107778324_h3_4">ファイルの構成</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_107778324_h2_3">使用可能な UI コントロール</a>
    </li>
    <li>
      <a href="#Anchor_107778324_h2_4">UserDataDefinition</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_107778324_h3_5">UserDataDefinition タグの記述例</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_107778324_h2_5">ParameterDefinition</a>
    </li>
    <li>
      <a href="#Anchor_107778324_h2_6">UI コントロールごとの設定</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_107778324_h3_6">カラーコントロール</a>
      </li>
      <li>
        <a href="#Anchor_107778324_h3_7">カラーアニメーションエディタ</a>
      </li>
      <li>
        <a href="#Anchor_107778324_h3_8">スライダー</a>
      </li>
      <li>
        <a href="#Anchor_107778324_h3_9">チェックボックス</a>
      </li>
      <li>
        <a href="#Anchor_107778324_h3_10">ラジオボタン</a>
      </li>
      <li>
        <a href="#Anchor_107778324_h3_11">コンボボックス</a>
      </li>
      <li>
        <a href="#Anchor_107778324_h3_12">文字列コンボボックス</a>
      </li>
      <li>
        <a href="#Anchor_107778324_h3_13">整数値コンボボックス</a>
      </li>
      <li>
        <a href="#Anchor_107778324_h3_14">テキストボックス</a>
      </li>
      <li>
        <a href="#Anchor_107778324_h3_15">ファイルパスボックス</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_107778324_h2_7">UILayout タグ</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_107778324_h3_16">Parameter</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_107778324_h2_8">ユーザーデータ定義のサンプル</a>
    </li>
    <li>
      <a href="#Anchor_107778324_h2_9">運用上の注意点</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_107778324_h3_17">互換性が維持できる変更</a>
      </li>
      <li>
        <a href="#Anchor_107778324_h3_18">互換性が維持できない変更</a>
      </li>
      <ul>
        <li>
          <a href="#Anchor_107778324_h4_1">Option タグに UniqueKey 属性を設定していない状態での表示名（Value属性）の変更について補足</a>
        </li>
        <li>
          <a href="#Anchor_107778324_h4_2">データの定義名の変更</a>
        </li>
      </ul>
      <li>
        <a href="#Anchor_107778324_h3_19">データ保存形式の変更に伴う特殊互換対応</a>
      </li>
      <li>
        <a href="#Anchor_107778324_h3_20">旧形式のユーザーデータ定義(USD/UDD)に対する互換性</a>
      </li>
    </ul>
  </ul>
</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>このページは、ユーザーデータ定義の仕様と書式を網羅的に記載していますので、目的ごとに、どの部分を読めば十分かの例を以下に記載します。</p>
    <h3 id="Anchor_107778324_h3_1">とりあえず動くサンプルがほしい</h3>
    <ul>
      <li>
        <a href="../Pages/Page_124021155.html">ユーザーデータ定義のサンプル</a>
      </li>
    </ul>
    <p>をご覧ください。</p>
    <ul>
      <li>
        <a href="../Pages/Page_246242548.html">旧 UDD ファイルからの乗り換え</a>
      </li>
    </ul>
    <p>&nbsp;にも、NintendoSDK 0.9.0 以前のユーザーデータ定義と互換性のあるサンプルがあります。</p>
    <ul>
      <li>
        <a href="#Anchor_107778324_h2_9">運用上の注意点</a>
      </li>
    </ul>
    <p>も併せてご覧ください。</p>
    <h3 id="Anchor_107778324_h3_2">UI コントロールで何が使えるのか知りたい</h3>
    <ul>
      <li>
        <a href="#Anchor_107778324_UsableUI">使用可能なUIコントロール</a>
      </li>
      <li>
        <a href="#Anchor_107778324_SettingPerUI">UI コントロールごとの設定</a>
      </li>
    </ul>
    <p>をご覧ください。</p>
    <h3 id="Anchor_107778324_h3_3">旧 UDD のデータをそのまま組み込みたい</h3>
    <ul>
      <li>
        <a href="../Pages/Page_246242548.html">旧 UDD ファイルからの乗り換え</a>
      </li>
    </ul>
    <p>をご覧ください。</p>
    <ul>
      <li>
        <a href="#Anchor_107778324_h2_9">運用上の注意点</a>
      </li>
    </ul>
    <p>も併せてご覧ください。</p>
  </div>
</div>
<h2 style="text-align: left;" id="Anchor_107778324_h2_2">ユーザーデータ定義ファイルの概要</h2>
<h3 id="Anchor_107778324_h3_4">ファイルの構成</h3>
<p>ユーザーデータ定義ファイルは、構造体を定義するヘッダファイルに、 <strong>/// から始まる行と XML 形式のドキュメントを埋め込む形</strong>で記述します。</p>
<p>以下は、最小限に作られたユーザーデータ定義ファイルの例です。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="gutter">1<br />
2<br />
3<br />
4<br />
5<br />
6<br />
7<br />
8<br />
9<br />
10<br />
11<br />
12<br />
13<br />
14<br />
15<br />
16<br />
17</td>
      <td class="code">
        <div class="codeblock"><pre>/// <span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
/// <span class="nt">&lt;UserDataDefinition</span> <span class="na">Kind=</span><span class="s">&quot;EmitterExtParams&quot;</span>
<span class="err">/</span>//                     Name=&quot;エミッタ拡張パラメータ サンプル&quot;
///                     Version=&quot;0&quot;&gt;
struct ResEmitterExtParamSample
{
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;coefficient&quot;</span> <span class="na">Type=</span><span class="s">&quot;Slider1f&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;SliderSetting</span> <span class="na">Default=</span><span class="s">&quot;0.5&quot;</span> <span class="na">Minimum=</span><span class="s">&quot;0.0&quot;</span> <span class="na">Maximum=</span><span class="s">&quot;1.0&quot;</span> <span class="na">Step=</span><span class="s">&quot;0.01&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;float   coef;
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;/ParameterDefinition&gt;</span>
};
/// <span class="nt">&lt;UILayout&gt;</span>
///   <span class="nt">&lt;Group</span> <span class="na">Name=</span><span class="s">&quot;Group&quot;</span><span class="nt">&gt;</span>
///     <span class="nt">&lt;Parameter</span> <span class="na">Member=</span><span class="s">&quot;coefficient&quot;</span> <span class="nt">/&gt;</span>
///   <span class="nt">&lt;/Group&gt;</span>
/// <span class="nt">&lt;/UILayout&gt;</span>
/// <span class="nt">&lt;/UserDataDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>ファイルの拡張子は不問ですが、/// で始まる行が XML 形式になっており、<strong> <span style="color: rgb(255,0,0);">文字コードは UTF-8</span>&nbsp;</strong>で保存されている必要があります。また、<strong>先頭行は、XML ドキュメントのシグニチャ &quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&quot; である必要があります。</strong></p>
<p>XML としての大まかな構成は以下のようになります。UserDataDefinition 要素がユーザーデータ定義の全体を表し、その中にある ParameterDefinition 要素が各パラメータとその UI を表し、最後に UILayout 要素で、UI の配置を表します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre><span class="nt">&lt;UserDataDefinition&gt;</span>
&nbsp;&nbsp;<span class="nt">&lt;ParameterDefinition</span> <span class="nt">/&gt;</span>（※複数可）
&nbsp;&nbsp;<span class="nt">&lt;UILayout&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;Group&gt;</span>（※複数可）
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;Parameter</span> <span class="nt">/&gt;</span> （※複数可）
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;/Group&gt;</span> 
&nbsp;&nbsp;<span class="nt">&lt;/UILayout&gt;</span>
<span class="nt">&lt;/UserDataDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <a name="Anchor_107778324_UsableUI"></a>
</p>
<h2 id="Anchor_107778324_h2_3">使用可能な UI コントロール</h2>
<p>現在ユーザーデータ定義で使用可能なコントロールは以下の通りです。</p>
<table class="table">
  <tbody>
    <tr>
      <th>カラーコントロール</th>
      <td>
        <p>色情報を編集するのに使用します。RGBA、RGB、A フォーマットが使用可能です。</p>
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_107778324/206776466.png" class="embedded-image" />
          </span>
        </p>
      </td>
    </tr>
    <tr>
      <th>カラーアニメーションエディタ</th>
      <td>
        <p>8キーカラーアニメーションを編集するのに使用します。RGB、A フォーマットが使用可能です。</p>
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_107778324/206776500.png" class="embedded-image" />
          </span>
        </p>
      </td>
    </tr>
    <tr>
      <th>スライダー</th>
      <td>
        <p>1次元～4次元までの整数値／浮動小数点数値を制御するのに使用します。</p>
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_107778324/206776515.png" height="250" class="embedded-image" />
          </span>
        </p>
      </td>
    </tr>
    <tr>
      <th>チェックボックス</th>
      <td>
        <p>いくつかの選択肢の ON / OFF を制御するのに使用します。</p>
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_107778324/206776523.png" class="embedded-image" />
          </span>
        </p>
      </td>
    </tr>
    <tr>
      <th>ラジオボタン</th>
      <td>
        <p>複数の選択肢の中から一つを選択するのに使用します。</p>
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_107778324/206776527.png" class="embedded-image" />
          </span>
        </p>
      </td>
    </tr>
    <tr>
      <th>コンボボックス</th>
      <td>
        <p>複数の選択肢の中から一つを選択するのに使用します。</p>
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_107778324/239838316.png" class="embedded-image" />
          </span>
        </p>
      </td>
    </tr>
    <tr>
      <th>文字列コンボボックス</th>
      <td>
        <p>あらかじめ指定された文字列の中から一つを選択するのに使用します。</p>
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_107778324/206776563.png" class="embedded-image" />
          </span>
        </p>
      </td>
    </tr>
    <tr>
      <th>整数値コンボボックス</th>
      <td>
        <p>あらかじめ指定された整数値の中から一つを選択するのに使用します。</p>
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_107778324/206776576.png" class="embedded-image" />
          </span>
        </p>
      </td>
    </tr>
    <tr>
      <th>テキストボックス</th>
      <td>
        <p>任意の文字列を指定するのに使用します。</p>
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_107778324/206776582.png" class="embedded-image" />
          </span>
        </p>
      </td>
    </tr>
    <tr>
      <th>ファイルパスボックス</th>
      <td>
        <p>ファイルパスを指定するのに使用します。</p>
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_107778324/206776609.png" class="embedded-image" />
          </span>
        </p>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_107778324_h2_4">UserDataDefinition</h2>
<p>ユーザーデータ定義の本体です。基本的な設定を属性として記述します。内部に以下の要素を含みます。</p>
<ul>
  <li>パラメータ定義 （ ParameterDefinition ）</li>
  <li>UI レイアウト定義 （ UILayout ）</li>
</ul>
<h3 id="Anchor_107778324_h3_5">UserDataDefinition タグの記述例</h3>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>/// <span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
/// <span class="nt">&lt;UserDataDefinition</span> <span class="na">Kind=</span><span class="s">&quot;EmitterExtParams&quot;</span> <span class="na">Name=</span><span class="s">&quot;エミッタ拡張パラメータのサンプル&quot;</span> <span class="na">Version=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
/// <span class="cm">&lt;!-- 省略 --&gt;</span>
/// <span class="nt">&lt;/UserDataDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table class="table">
  <tbody>
    <tr>
      <th>UserDataDefinition の属性</th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Kind <span class="status_macro_base status_macro_Red">必須</span></th>
      <td>
        <p>以下のいずれかを指定します。</p>
        <table class="table">
          <tbody>
            <tr>
              <th>指定可能な名前</th>
              <th>用途</th>
            </tr>
            <tr>
              <th>CustomAction</th>
              <td>
                <p>カスタムアクションであることを示します。</p>
              </td>
            </tr>
            <tr>
              <th>CustomShader</th>
              <td>カスタムシェーダであることを示します。</td>
            </tr>
            <tr>
              <th>EmitterExtParams</th>
              <td>エミッタ拡張パラメータであることを示します。</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <th>Name <span class="status_macro_base status_macro_Red">必須</span></th>
      <td>
        <p>ユーザーデータ定義の名前です。</p>
        <p>コールバックの選択欄や、EffectMakerのオプションダイアログで表示されます。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Name=&quot;ユーザーデータ定義名 サンプル&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <p>また、以下のように記述することで、多言語対応が可能です。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Name=&quot;{Localize JP='日本語名', EN='English Name'}&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <th>Version <span class="status_macro_base status_macro_Red">必須</span></th>
      <td>
        <p>0 を指定します。今後のバージョン管理で使用します。</p>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_107778324_h2_5">ParameterDefinition</h2>
<p>ユーザーデータのパラメータ 1 メンバ分の定義です。属性でデータ型などの設定を記述します。</p>
<p>内部に、データ型に対応する UI&nbsp;コントロールの設定を記述した XML 要素と、構造体のメンバ定義を含みます。</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>この要素を<strong>構造体の struct 宣言前に記述する</strong>ことで、<span style="color: rgb(255,0,0);"> <strong>カスタムシェーダのシェーダ分岐用の追加の記述を行うことが可能です。</strong> </span></p>
    <p>詳細は <a href="../Pages/Page_83955512.html">カスタムシェーダ</a> 内の<strong>「ユーザーデータ定義ファイルの作成」の &quot;BuiltInMember&quot;&nbsp;についての説明</strong>をご覧ください。</p>
  </div>
</div>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="gutter">1<br />
2<br />
3<br />
4<br />
5<br />
6<br />
7<br />
8<br />
9<br />
10<br />
11<br />
12<br />
13<br />
14<br />
15<br />
16<br />
17<br />
18<br />
19</td>
      <td class="code">
        <div class="codeblock"><pre>/// <span class="cm">&lt;!-- 省略 --&gt;</span>
 
///   <span class="cm">&lt;!-- ※ ここから カスタムシェーダのみ記述可能 --&gt;</span>
///   <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;ShaderFlags&quot;</span> <span class="na">Type=</span><span class="s">&quot;CheckButtons&quot;</span> <span class="na">BuiltInMember=</span><span class="s">&quot;Flags&quot;</span><span class="nt">&gt;</span>
///     <span class="nt">&lt;OptionGroup</span> <span class="na">Default=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
///       <span class="nt">&lt;Option</span> <span class="na">Value=</span><span class="s">&quot;シェーダ分岐 A&quot;</span> <span class="nt">/&gt;</span>
///       <span class="nt">&lt;Option</span> <span class="na">Value=</span><span class="s">&quot;シェーダ分岐 B&quot;</span> <span class="nt">/&gt;</span>
///     <span class="nt">&lt;/OptionGroup&gt;</span>
///   <span class="nt">&lt;/ParameterDefinition&gt;</span>
///   <span class="cm">&lt;!-- ※ ここまで カスタムシェーダのみ記述可能 --&gt;</span>
struct ResEmitterExtParamSample
{
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;カラー&quot;</span> <span class="na">Type=</span><span class="s">&quot;ColorRgba&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;ColorSetting</span> <span class="na">Default=</span><span class="s">&quot;1 1 1 1&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;nn::util::Float4  color;    // カラー
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;/ParameterDefinition&gt;</span>
}
 
/// <span class="cm">&lt;!-- 省略 --&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>ParameterDefinition の間に構造体のメンバ定義が挟まれるようにします。メンバ名はそのままEffectMaker上で編集・保存する際のプロパティ名になります。</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>ユーザーデータ定義の読み込み時には、<span style="color: rgb(255,0,0);"> <strong>メンバ名の前に宣言されている型と、上記の Type で指定した値との整合性はチェックしません</strong>。</span> <br />例えば、<span style="color: rgb(255,0,0);"> <strong>ColorRgba を指定したのにメンバの型が float だった場合は、生成されるバイナリにズレが生じします。</strong> </span>整合性は定義の記述者が注意して保つようにしてください。</p>
  </div>
</div>
<table class="table">
  <tbody>
    <tr>
      <th>ParameterDefinition の属性</th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Name <span class="status_macro_base status_macro_Red">必須</span> </th>
      <td>
        <p>UI 上でキャプションラベルとして表示されます。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Name=&quot;パラメータ名 サンプル&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <p>以下のように記述することで、多言語対応が可能です。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Name=&quot;{Localize JP='日本語名', EN='English Name'}&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <th>Type <span class="status_macro_base status_macro_Red">必須</span> </th>
      <td>
        <p>データと UI の種類を指定します。</p>
        <p>指定可能な UI は、「<a href="#Anchor_107778324_h2_3">使用可能なUIコントロール</a>」をご覧ください。</p>
        <p>目的に応じて、以下のいずれかの設定値を選択します。</p>
        <table class="table">
          <tbody>
            <tr>
              <th>指定可能な設定値</th>
              <th>説明</th>
            </tr>
            <tr>
              <th>
                <p>ColorRgba</p>
                <p>ColorRgb</p>
                <p>ColorA</p>
              </th>
              <td>
                <p>カラーパラメータ、及びカラーコントロールを表します。</p>
                <p>それぞれチャンネル数に応じて、<span class="ApiLink_nn__util__Float4">nn::util::Float4</span>, <span class="ApiLink_nn__util__Float3">nn::util::Float3</span>, float がランタイムにおける型となります。</p>
                <p>このパラメータ定義を含むグループには、自動的に UI 上でカラーピッカーが配置されます。</p>
                <span class="embedded-file-wrapper ">
                  <img src="../Attachments/Attach_107778324/206776466.png" class="embedded-image" />
                </span>
                <p>&nbsp;</p>
                <table class="codeblock">
                  <tbody>
                    <tr>
                      <td class="code">
                        <div class="codeblock"><pre>Type=&quot;ColorRgba&quot;</pre></div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <th>
                <p>ColorAnimeRgb</p>
                <p>ColorAnimeA</p>
              </th>
              <td>
                <p>8キーカラーアニメーション、及びアニメーションエディタを表します。</p>
                <p>ランタイムにおける型は <strong><span class="ApiLink_nn__vfx__detail__ResAnim8KeyParamSet">nn::vfx::detail::ResAnim8KeyParamSet</span></strong> <strong>固定</strong>となります。</p>
                <p>このパラメータ定義を含むグループには、自動的に UI 上でカラーピッカーが配置されます。</p>
                <span class="embedded-file-wrapper ">
                  <img src="../Attachments/Attach_107778324/206776500.png" class="embedded-image" />
                </span>
                <p>&nbsp;</p>
                <table class="codeblock">
                  <tbody>
                    <tr>
                      <td class="code">
                        <div class="codeblock"><pre>Type=&quot;ColorAnimeRgb&quot;
Type=&quot;ColorAnimeA&quot;</pre></div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <th>Slider(1~4)(i/f)</th>
              <td>
                <p>1～4までの次元数の数値型、及びスライダーコントロールを表します。</p>
                <p>ランタイムにおける型が <span class="ApiLink_nn__util__Float3">nn::util::Float3</span> なら &quot;Slider3f&quot; 、int なら &quot;Slider1i&quot; となります。</p>
                <span class="embedded-file-wrapper ">
                  <img src="../Attachments/Attach_107778324/206776515.png" height="250" class="embedded-image" />
                </span>
                <p>&nbsp;</p>
                <table class="codeblock">
                  <tbody>
                    <tr>
                      <td class="code">
                        <div class="codeblock"><pre>Type=&quot;Slider3f&quot;
Type=&quot;Slider1i&quot;</pre></div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <th>CheckButtons</th>
              <td>
                <p>フラグの集合体、及びチェックボックスコントロールを表します。</p>
                <p>ランタイムにおける型は unsigned int となり、最大 32 個のチェックボックスを列挙できます。</p>
                <p>
                  <strong>カスタムシェーダでシェーダキーを操作する場合は最大 64 個までとなります。</strong>
                </p>
                <p>
                  <strong>
                    <span class="embedded-file-wrapper ">
                      <img src="../Attachments/Attach_107778324/206776523.png" class="embedded-image" />
                    </span>
                  </strong>
                </p>
                <table class="codeblock">
                  <tbody>
                    <tr>
                      <td class="code">
                        <div class="codeblock"><pre>Type=&quot;CheckButtons&quot;</pre></div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <th>RadioButtons</th>
              <td>
                <p>選択結果を表す符号なし整数値、及びラジオボタンコントロールを表します。</p>
                <p>ランタイムにおける型は unsigned int となり、最大 32 個の選択肢を列挙できます。</p>
                <p>
                  <strong>カスタムシェーダでシェーダキーを操作する場合は最大 8&times;8 個までとなります。</strong>
                </p>
                <p>
                  <strong>
                    <span class="embedded-file-wrapper ">
                      <img src="../Attachments/Attach_107778324/206776527.png" class="embedded-image" />
                    </span>
                  </strong>
                </p>
                <table class="codeblock">
                  <tbody>
                    <tr>
                      <td class="code">
                        <div class="codeblock"><pre>Type=&quot;RadioButtons&quot;</pre></div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <th>StringComboBox</th>
              <td>
                <p>選択肢の中から選んだ文字列、及びコンボボックスコントロールを表します。</p>
                <p>ランタイムにおける型は unsigned char の配列となり、<span style="color: rgb(255,0,0);"> <strong>長さは4の倍数である必要があります。</strong> </span></p>
                <span class="embedded-file-wrapper ">
                  <img src="../Attachments/Attach_107778324/206776563.png" class="embedded-image" />
                </span>
                <p>
                  <span style="color: rgb(255,0,0);">&nbsp;</span>
                </p>
                <table class="codeblock">
                  <tbody>
                    <tr>
                      <td class="code">
                        <div class="codeblock"><pre>Type=&quot;StringComboBox&quot;</pre></div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <th>IntComboBox</th>
              <td>
                <p>選択肢の中から選んだ整数値、及びコンボボックスコントロールを表します。</p>
                <p>ランタイムにおける型は int となります。</p>
                <span class="embedded-file-wrapper ">
                  <img src="../Attachments/Attach_107778324/206776576.png" class="embedded-image" />
                </span>
                <p>&nbsp;</p>
                <table class="codeblock">
                  <tbody>
                    <tr>
                      <td class="code">
                        <div class="codeblock"><pre>Type=&quot;IntComboBox&quot;</pre></div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <th>TextBox</th>
              <td>
                <p>UI 上で入力した文字列、及びテキストボックスコントロールを表します。</p>
                <p>ランタイムにおける型は unsigned char の配列となり、<span style="color: rgb(255,0,0);"> <strong>長さは4の倍数である必要があります。</strong> </span>  <span style="color: rgb(255,0,0);">&nbsp;</span></p>
                <p>
                  <span style="color: rgb(255,0,0);">
                    <span class="embedded-file-wrapper ">
                      <img src="../Attachments/Attach_107778324/206776582.png" class="embedded-image" />
                    </span>
                  </span>
                </p>
                <table class="codeblock">
                  <tbody>
                    <tr>
                      <td class="code">
                        <div class="codeblock"><pre>Type=&quot;TextBox&quot;</pre></div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <th>FilePathTextBox</th>
              <td>
                <p>UI 上で入力した文字列、及びファイルパスボックスコントロールを表します。</p>
                <p>ランタイムにおける型は unsigned char の配列となり、<span style="color: rgb(255,0,0);"> <strong>長さは4の倍数である必要があります。</strong> </span> <span style="color: rgb(255,0,0);">&nbsp;</span></p>
                <p>
                  <span style="color: rgb(255,0,0);">
                    <span class="embedded-file-wrapper ">
                      <img src="../Attachments/Attach_107778324/206776609.png" class="embedded-image" />
                    </span>
                  </span>
                </p>
                <table class="codeblock">
                  <tbody>
                    <tr>
                      <td class="code">
                        <div class="codeblock"><pre>Type=&quot;FilePathTextBox&quot;</pre></div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <th>NeedReload <span class="status_macro_base status_macro_Blue">省略可能</span></th>
      <td>
        <p>パラメータを編集したときに、バイナリリロードを行うかどうか指定します。変更したときにエフェクトの再生をし直したい場合に有効です。</p>
        <p>
          <span style="color: rgb(0,0,255);">
            <strong>省略可能</strong> </span> です。省略した場合はパラメータ編集時のリロードは OFF になります。</p>
      </td>
    </tr>
    <tr>
      <th>BuiltInMember <span class="status_macro_base status_macro_Yellow">特殊</span></th>
      <td>
        <span style="color: rgb(255,0,0);">
          <strong>カスタムシェーダ専用の属性で、シェーダ上の実装を分岐させたい時に利用します。</strong> </span> <br />詳細は <a href="../Pages/Page_83955512.html">カスタムシェーダ</a> を参照ください。&nbsp;</td>
    </tr>
  </tbody>
</table>
<p>
  <a name="Anchor_107778324_SettingPerUI"></a>
</p>
<h2 id="Anchor_107778324_h2_6">UI&nbsp;コントロールごとの設定</h2>
<p>ParameterDefinition の Type 属性で指定する 各 UI の設定は以下の XML 要素、属性で記述します。</p>
<h3 id="Anchor_107778324_h3_6">カラーコントロール</h3>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_107778324/206776466.png" class="embedded-image" />
  </span>
</p>
<p>
  <strong>ColorSetting タグ</strong>を使用し、<strong>Type に ColorRgba / ColorRgb / ColorA</strong> のいずれかを指定します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;カラー&quot;</span> <span class="na">Type=</span><span class="s">&quot;ColorRgba&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;ColorSetting</span> <span class="na">Default=</span><span class="s">&quot;1 1 1 1&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;nn::util::Float4  color;
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;/ParameterDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table class="table">
  <tbody>
    <tr>
      <th>ColorSetting の 属性 </th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Default <span class="status_macro_base status_macro_Red">必須</span> </th>
      <td>
        <p>初期値です。RGBA や RGB の値を指定する際には、スペースでチャンネルの区切りを入れてください。</p>
        <p>アニメーションエディタの場合は、ここで指定した色のキーが1つ存在する状態が初期値となります。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Default=&quot;1 1 1 1&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_107778324_h3_7">カラーアニメーションエディタ</h3>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_107778324/206776500.png" class="embedded-image" />
  </span>
</p>
<p>
  <strong>ColorSetting</strong> タグを使用し、<strong>Type に ColorAnimeRgb / ColorAnimeA</strong>&nbsp;のいずれかを指定します。</p>
<p>ランタイム側の型指定が <strong><span class="ApiLink_nn__vfx__detail__ResAnim8KeyParamSet">nn::vfx::detail::ResAnim8KeyParamSet</span></strong> になりますのでご注意ください。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>///   <span class="cm">&lt;!-- カラーアニメ: RGB --&gt;</span>
///   <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;RGB Animation&quot;</span> <span class="na">Type=</span><span class="s">&quot;ColorAnimeRgb&quot;</span><span class="nt">&gt;</span>
///     <span class="nt">&lt;ColorSetting</span> <span class="na">Default=</span><span class="s">&quot;1.0 1.0 1.0&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;nn::vfx::detail::ResAnim8KeyParamSet  colorAnime;
///   <span class="nt">&lt;/ParameterDefinition&gt;</span>


///   <span class="cm">&lt;!-- カラーアニメ: A --&gt;</span>
///   <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;Alpha Animation&quot;</span> <span class="na">Type=</span><span class="s">&quot;ColorAnimeA&quot;</span><span class="nt">&gt;</span>
///     <span class="nt">&lt;ColorSetting</span> <span class="na">Default=</span><span class="s">&quot;1.0&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;nn::vfx::detail::ResAnim8KeyParamSet  alphaAnime;
///   <span class="nt">&lt;/ParameterDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table style="margin-left: 1.5em;" class="table">
  <tbody>
    <tr>
      <th>ColorSetting&nbsp;の&nbsp;属性</th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Default&nbsp;<span class="status_macro_base status_macro_Red">必須</span>&nbsp;</th>
      <td>
        <p>初期値です。RGBA や RGB の値を指定する際には、スペースでチャンネルの区切りを入れてください。</p>
        <p>アニメーションエディタの場合は、ここで指定した色のキーが1つ存在する状態が初期値となります。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Default=&quot;1 1 1 1&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_107778324_h3_8">スライダー</h3>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_107778324/206776515.png" height="250" class="embedded-image" />
  </span>
</p>
<p>
  <strong>SliderSetting タグ</strong>を使用します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;位置座標&quot;</span> <span class="na">Type=</span><span class="s">&quot;Slider3f&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;SliderSetting</span> <span class="na">Default=</span><span class="s">&quot;0.1 0.2 0.3&quot;</span> <span class="na">Minimum=</span><span class="s">&quot;-1000000.0&quot;</span> <span class="na">Maximum=</span><span class="s">&quot;1000000.0&quot;</span> <span class="na">Step=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;nn::util::Float3  position;
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;/ParameterDefinition&gt;</span>
 
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;期間（フレーム数）&quot;</span> <span class="na">Type=</span><span class="s">&quot;Slider1i&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;SliderSetting</span> <span class="na">Default=</span><span class="s">&quot;10&quot;</span> <span class="na">Minimum=</span><span class="s">&quot;1&quot;</span> <span class="na">Maximum=</span><span class="s">&quot;1000000&quot;</span> <span class="na">Step=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;unsigned int    frameCount;
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;/ParameterDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table class="table">
  <tbody>
    <tr>
      <th>SliderSetting の 属性 </th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Default <span class="status_macro_base status_macro_Red">必須</span> </th>
      <td>
        <p>初期値です。2 次元以上の値を指定する際には、スペースでチャンネルの区切りを入れてください。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Default=&quot;0.1 0.2 0.3&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <p> <br /> </p>
      </td>
    </tr>
    <tr>
      <th>Minimum <span class="status_macro_base status_macro_Red">必須</span> </th>
      <td>
        <p>スライダーで設定できる値の最小値です。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Minimum=&quot;-1000000.0&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <p> <br /> </p>
      </td>
    </tr>
    <tr>
      <th>Maximum <span class="status_macro_base status_macro_Red">必須</span> </th>
      <td>
        <p>スライダーで設定できる値の最大値です。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Maximum=&quot;1000000.0&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <p> <br /> </p>
      </td>
    </tr>
    <tr>
      <th>Step <span class="status_macro_base status_macro_Red">必須</span> </th>
      <td>
        <p>スライダーを 1 Tick 動かした際のデフォルト変化量です。</p>
        <ul>
          <li>0.0001</li>
          <li>0.001</li>
          <li>0.01</li>
          <li>0.1</li>
          <li>1</li>
          <li>10</li>
          <li>100</li>
          <li>1000</li>
          <li>10000</li>
        </ul>
        <p>上記の中から任意の値を指定します。ここに含まれない値を指定した場合は 1 になります。</p>
        <p>ここで指定したものは設定の初期値で、ユーザーは UI 上で自由に刻み幅を変更できます。</p>
        <p>ただし、<span style="color: rgb(255,0,0);"> <strong>整数型の値に対しては 1 未満にはできません。</strong> </span></p>
        <p>
          <span style="color: rgb(255,0,0);">&nbsp;</span>
        </p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Step=&quot;0.1&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <p>
          <span style="color: rgb(255,0,0);"> <br /> </span>
        </p>
      </td>
    </tr>
    <tr>
      <th>EnableTransform <span class="status_macro_base status_macro_Blue">省略可能</span> </th>
      <td>
        <p>2 次元以上の値で利用できる、個別・連動・比率のUIを表示するか否かを指定します。</p>
        <p>必ず個別に設定したい値には false を指定することで、個別設定を強制することができます。</p>
        <p>
          <span style="color: rgb(0,0,255);"> <strong>省略可能</strong> </span>です。その場合は true として扱われます。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>EnableTransform=&quot;true&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_107778324_h3_9">チェックボックス</h3>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_107778324/206776523.png" class="embedded-image" />
  </span>
</p>
<p> <strong>OptionGroup タグ</strong>を使用します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;フラグ&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="err">/</span>//                      Type=&quot;CheckButtons&quot;
&nbsp;&nbsp;&nbsp;&nbsp;///                      NeedReload=&quot;true&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;OptionGroup&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">BitIndex=</span><span class="s">&quot;0&quot;</span>  <span class="na">UniqueKey=</span><span class="s">&quot;switchA&quot;</span> <span class="na">Value=</span><span class="s">&quot;スイッチ1&quot;</span> <span class="na">Selected=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">BitIndex=</span><span class="s">&quot;1&quot;</span>  <span class="na">UniqueKey=</span><span class="s">&quot;switchB&quot;</span> <span class="na">Value=</span><span class="s">&quot;スイッチ2&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">BitIndex=</span><span class="s">&quot;30&quot;</span> <span class="na">UniqueKey=</span><span class="s">&quot;switchC&quot;</span> <span class="na">Value=</span><span class="s">&quot;スイッチ3&quot;</span> <span class="na">Selected=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;/OptionGroup&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;unsigned int    choices;
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;/ParameterDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table class="table">
  <tbody>
    <tr>
      <th>OptionGroup の 属性 </th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Default <span class="status_macro_base status_macro_Grey">非推奨</span></th>
      <td>
        <div class="info_new">
          <div class="info_new_left">参考：</div>
          <div class="info_new_right">
            <p>
              <strong>初期値の指定には、Option 要素の Selected 属性を利用することを推奨します。</strong>
            </p>
            <p>この属性は互換性のために残されています。</p>
          </div>
        </div>
        <p>
          <br />
        </p>
        <p>初期値です。該当するビットが立っている2進数の値を10進数に変換して指定します。</p>
        <p>例えば、下位3ビットが立っている状態を表すには、</p>
        <div style="border-width: 1px;" class="preformatted panel">
          <div class="preformattedContent panelContent">
            <pre>1 + 2 + 4 = 7    // n ビット目の値は 2 ^ (n - 1)</pre>
          </div>
        </div>
        <p>で、7 を指定します。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Default=&quot;7&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>
<p>選択肢は OptionGroup 内に、 子要素 Option として列挙します。</p>
<table style="margin-left: 1.5em;" class="table">
  <tbody>
    <tr>
      <th>Option の属性</th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Value <span class="status_macro_base status_macro_Red">必須</span></th>
      <td>
        <p>選択肢として UI に表示する文字列を表します。</p>
        <p>コンボボックスの場合は、バイナリに含まれる文字列にもなります。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Value=&quot;スイッチ1&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <th>UniqueKey <span class="status_macro_base status_macro_Red">必須</span></th>
      <td>
        <p>その選択肢であることを表す、将来的にも変更しないユニークな名前を指定してください。</p>
        <p>これが指定されることで、ユーザーデータ定義側で BitIndex や登録順、選択肢としての表示文字列を変更したとしても、過去に編集したデータを読み込んだ際に値が正しくマッピングされるようになります。省略した場合、<span style="color: rgb(255,0,0);"><strong>表示文字列が変更されるとデータが正しくマッピングされなくなります。</strong></span></p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>UniqueKey=&quot;switchA&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <th>BitIndex <span class="status_macro_base status_macro_Blue">省略可能</span></th>
      <td>
        <p>選択肢の並びとは別に、各選択肢に対応するビットの桁数を指定できます。</p>
        <p>0 が最下位ビットを表します。上限値は 31 です。 (※シェーダフラグの場合はチェックボックスが63、ラジオボタンが7)</p>
        <p>例を示します。ここでは連番になっていますが、飛び飛びの値になっても問題ありません。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>&lt;Option BitIndex=&quot;3&quot; Value=&quot;最初の選択肢：立つビットは4桁目&quot;&gt;
&lt;Option BitIndex=&quot;2&quot; Value=&quot;2番目の選択肢：立つビットは3桁目&quot;&gt;
&lt;Option BitIndex=&quot;1&quot; Value=&quot;3番目の選択肢：立つビットは2桁目&quot;&gt;
&lt;Option BitIndex=&quot;0&quot; Value=&quot;最後の選択肢：立つビットは1桁目&quot;&gt;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <p>
          <span style="color: rgb(51,102,255);"> <strong>省略可能</strong> </span>です。省略した場合は上から順番に 0,1,2... と割り振られます。</p>
        <div class="info_new">
          <div class="info_new_left">参考：</div>
          <div class="info_new_right">
            <p>BitIndex を指定した要素と省略した要素を混在させることもできます。 その場合、省略した要素のインデックスは1つ前に記述された要素が持つ値に+1したものとなります。</p>
            <p>enumと同じような使用感で記述できますが、値の重複には注意してください。原則として、<strong>指定するか省略するかは全要素で統一することを推奨します。</strong> </p>
          </div>
        </div>
      </td>
    </tr>
    <tr>
      <th>Selected <span class="status_macro_base status_macro_Blue">省略可能</span></th>
      <td>
        <p>その要素を初期値で選択状態とするかを true/false で指定します。<span style="color: rgb(51,102,255);"><strong>省略可能</strong> </span>です。省略した場合は false です。</p>
        <p>チェックボックスに対しては、複数の要素を true にすることができますが、ラジオボタンで複数指定された場合は最後の指定のみが有効になります。</p>
        <p>OptionGroup 要素の Default 属性より扱いやすいと思いますので、こちらを利用することを推奨します。両方指定した場合は、こちらの指定が優先されます。</p>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_107778324_h3_10">ラジオボタン</h3>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_107778324/206776527.png" class="embedded-image" />
  </span>
</p>
<p>
  <strong>OptionGroup タグ</strong>を使用します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;選択肢&quot;</span> <span class="na">Type=</span><span class="s">&quot;RadioButtons&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;OptionGroup</span> <span class="na">Default=</span><span class="s">&quot;8&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">UniqueKey=</span><span class="s">&quot;radioA&quot;</span> <span class="na">Value=</span><span class="s">&quot;選択肢1&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">UniqueKey=</span><span class="s">&quot;radioB&quot;</span> <span class="na">Value=</span><span class="s">&quot;選択肢2&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">UniqueKey=</span><span class="s">&quot;radioC&quot;</span> <span class="na">Value=</span><span class="s">&quot;選択肢3&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">UniqueKey=</span><span class="s">&quot;radioD&quot;</span> <span class="na">Value=</span><span class="s">&quot;選択肢4&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;/OptionGroup&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;unsigned int    choices;
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;/ParameterDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table class="table">
  <tbody>
    <tr>
      <th> OptionGroup の 属性 </th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Default <span class="status_macro_base status_macro_Grey">非推奨</span> </th>
      <td>
        <div class="info_new">
          <div class="info_new_left">参考：</div>
          <div class="info_new_right">
            <p>
              <strong>初期値の指定には、Option 要素の Selected 属性を利用することを推奨します。</strong>
            </p>
            <p>この属性は互換性のために残されています。</p>
          </div>
        </div>
        <p>
          <br />
        </p>
        <p>初期値です。該当するビットが立っている 2 進数の値を 10 進数に変換して指定します。</p>
        <p>例えば、4 番目の選択肢が選ばれた状態を表すには、</p>
        <div style="border-width: 1px;" class="preformatted panel">
          <div class="preformattedContent panelContent">
            <pre>1 &lt;&lt; ( 4 - 1 ) = 8    //  n ビット目の値は 2 ^ (n - 1)</pre>
          </div>
        </div>
        <p>8 を指定します。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Default=&quot;8&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>
<p> 選択肢は OptionGroup 内に、 子要素 Option として列挙します。<span style="color: rgb(51,102,255);">&nbsp;<strong> <a href="#Anchor_107778324_h3_9">記述方法はチェックボックスと同じです。</a> </strong> </span>  </p>
<h3 id="Anchor_107778324_h3_11">コンボボックス</h3>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_107778324/239838316.png" class="embedded-image" />
  </span>
</p>
<p>
  <strong>OptionGroup タグ</strong>を使用します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;選択肢&quot;</span> <span class="na">Type=</span><span class="s">&quot;ComboBox&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;OptionGroup</span> <span class="na">Default=</span><span class="s">&quot;8&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">UniqueKey=</span><span class="s">&quot;comboA&quot;</span> <span class="na">Value=</span><span class="s">&quot;選択肢1&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">UniqueKey=</span><span class="s">&quot;comboB&quot;</span> <span class="na">Value=</span><span class="s">&quot;選択肢2&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">UniqueKey=</span><span class="s">&quot;comboC&quot;</span> <span class="na">Value=</span><span class="s">&quot;選択肢3&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">UniqueKey=</span><span class="s">&quot;comboD&quot;</span> <span class="na">Value=</span><span class="s">&quot;選択肢4&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;/OptionGroup&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;unsigned int    choices;
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;/ParameterDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table style="margin-left: 1.5em;" class="table">
  <tbody>
    <tr>
      <th>OptionGroup&nbsp;の&nbsp;属性</th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Default&nbsp;<span class="status_macro_base status_macro_Grey">非推奨</span>&nbsp;</th>
      <td>
        <div class="info_new">
          <div class="info_new_left">参考：</div>
          <div class="info_new_right">
            <p>
              <strong>初期値の指定には、Option 要素の Selected 属性を利用することを推奨します。</strong>
            </p>
            <p>この属性は互換性のために残されています。</p>
          </div>
        </div>
        <p>&nbsp;</p>
        <p>初期値です。該当するビットが立っている 2 進数の値を 10 進数に変換して指定します。</p>
        <p>例えば、4 番目の選択肢が選ばれた状態を表すには、</p>
        <div style="border-width: 1px;" class="preformatted panel">
          <div class="preformattedContent panelContent">
            <pre>1 &lt;&lt; ( 4 - 1 ) = 8    //  n ビット目の値は 2 ^ (n - 1)</pre>
          </div>
        </div>
        <p>8 を指定します。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Default=&quot;8&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>
<p>選択肢は OptionGroup 内に、 子要素 Option として列挙します。<span style="color: rgb(51,102,255);">&nbsp;<strong>&nbsp;<a href="#Anchor_107778324_h3_9">記述方法はチェックボックスと同じです。</a></strong></span></p>
<h3 id="Anchor_107778324_h3_12">文字列コンボボックス</h3>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_107778324/206776563.png" class="embedded-image" />
  </span>
</p>
<p>
  <strong>OptionGroup タグ</strong>を使用します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;ユーザー定義文字列&quot;</span> <span class="na">Type=</span><span class="s">&quot;StringComboBox&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;OptionGroup&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">Value=</span><span class="s">&quot;UserDefinitionString1&quot;</span> <span class="na">UniqueKey=</span><span class="s">&quot;String1&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">Value=</span><span class="s">&quot;UserDefinitionString2&quot;</span> <span class="na">UniqueKey=</span><span class="s">&quot;String2&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">Value=</span><span class="s">&quot;UserDefinitionString3&quot;</span> <span class="na">UniqueKey=</span><span class="s">&quot;String3&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;/OptionGroup&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;unsigned char    usrString[32];
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;/ParameterDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table class="table">
  <tbody>
    <tr>
      <th>OptionGroup の 属性 </th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Default <span class="status_macro_base status_macro_Blue">省略可能</span> </th>
      <td>
        <p>初期値です。列挙した選択肢の配列に対する 0 から始まるインデックスを指定します。</p>
        <p>例えば、最初の選択肢が選ばれた状態は 0、4 個目の選択肢が選ばれた状態は3を指定します。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Default=&quot;0&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <p>
          <span style="color: rgb(51,102,255);">
            <strong>省略可能</strong> </span>です。省略した場合は 0、または Option 要素の Selected 属性による指定に従います。</p>
      </td>
    </tr>
  </tbody>
</table>
<p>選択肢は OptionGroup 内に、 子要素 Option として列挙します。</p>
<table style="margin-left: 1.5em;" class="table">
  <tbody>
    <tr>
      <th>Option の属性</th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Value <span class="status_macro_base status_macro_Red">必須</span></th>
      <td>
        <p>選択肢として UI に表示する文字列を表します。バイナリに含まれる文字列にもなります。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Value=&quot;UserDefinitionString1&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <th>UniqueKey <span class="status_macro_base status_macro_Red">必須</span></th>
      <td>
        <p>その選択肢であることを表す、将来的にも変更しないユニークな名前を指定してください。</p>
        <p>これが指定されることで、ユーザーデータ定義側で BitIndex や登録順、選択肢としての表示文字列を変更したとしても、過去に編集したデータを読み込んだ際に値が正しくマッピングされるようになります。省略した場合、<span style="color: rgb(255,0,0);"><strong>表示文字列が変更されるとデータが正しくマッピングされなくなります。</strong></span></p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>UniqueKey=&quot;String1&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <th>Selected <span class="status_macro_base status_macro_Blue">省略可能</span></th>
      <td>
        <p>その要素を初期値で選択状態とするかを true/false で指定します。<span style="color: rgb(51,102,255);"><strong>省略可能</strong> </span>です。省略した場合は false です。</p>
        <p>コンボボックスに対して複数指定された場合は最後の指定のみが有効になります。</p>
        <p>OptionGroup 要素の Default 属性と両方指定した場合は、こちらの指定が優先されます。</p>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_107778324_h3_13">整数値コンボボックス</h3>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_107778324/206776576.png" class="embedded-image" />
  </span>
</p>
<p>
  <strong>OptionGroup タグ</strong>を使用します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;ユーザー定義整数値文字列&quot;</span> <span class="na">Type=</span><span class="s">&quot;IntComboBox&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;OptionGroup&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///       <span class="nt">&lt;Option</span> <span class="na">BitIndex=</span><span class="s">&quot;5&quot;</span> <span class="na">Value=</span><span class="s">&quot;UserDefinitionInteger1&quot;</span> <span class="na">UniqueKey=</span><span class="s">&quot;String1&quot;</span> <span class="na">Selected=</span><span class="s">&quot;True&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///       <span class="nt">&lt;Option</span> <span class="na">BitIndex=</span><span class="s">&quot;7&quot;</span> <span class="na">Value=</span><span class="s">&quot;UserDefinitionInteger2&quot;</span> <span class="na">UniqueKey=</span><span class="s">&quot;String2&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///       <span class="nt">&lt;Option</span> <span class="na">BitIndex=</span><span class="s">&quot;1&quot;</span> <span class="na">Value=</span><span class="s">&quot;UserDefinitionInteger3&quot;</span> <span class="na">UniqueKey=</span><span class="s">&quot;String3&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;/OptionGroup&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;unsigned char    usrString[32];
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;/ParameterDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table style="margin-left: 1.5em;" class="table">
  <tbody>
    <tr>
      <th>OptionGroup&nbsp;の&nbsp;属性</th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Default&nbsp;<span class="status_macro_base status_macro_Blue">省略可能</span>&nbsp;</th>
      <td>
        <p>初期値です。列挙した選択肢が持つインデックスを指定します。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Default=&quot;0&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <p>
          <span style="color: rgb(51,102,255);">
            <strong>省略可能</strong> </span>です。省略した場合は 0、または Option 要素の Selected 属性による指定に従います。</p>
      </td>
    </tr>
  </tbody>
</table>
<p>選択肢は OptionGroup 内に、 子要素 Option として列挙します。</p>
<table style="margin-left: 1.5em;" class="table">
  <tbody>
    <tr>
      <th>Option の属性</th>
      <th>説明</th>
    </tr>
    <tr>
      <th>BitIndex&nbsp;<span class="status_macro_base status_macro_Red">必須</span></th>
      <td>
        <p>その選択肢を選んだ際にバイナリに含まれる整数値を表します。</p>
        <p>省略した場合は 0 から選択肢の順番でインクリメントした値が割り当てられますが、このコントロールの場合は明示的に値を指定することが運用上望ましいと思われます。</p>
      </td>
    </tr>
    <tr>
      <th>Value&nbsp;<span class="status_macro_base status_macro_Red">必須</span></th>
      <td>
        <p>選択肢として UI に表示する文字列を表します。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Value=&quot;UserDefinitionInteger1&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <th>UniqueKey&nbsp;<span class="status_macro_base status_macro_Red">必須</span></th>
      <td>
        <p>その選択肢であることを表す、将来的にも変更しないユニークな名前を指定してください。</p>
        <p>これが指定されることで、ユーザーデータ定義側で BitIndex や登録順、選択肢としての表示文字列を変更したとしても、過去に編集したデータを読み込んだ際に値が正しくマッピングされるようになります。省略した場合、<span style="color: rgb(255,0,0);"><strong>表示文字列が変更されるとデータが正しくマッピングされなくなります。</strong></span></p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>UniqueKey=&quot;String1&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <th>Selected&nbsp;<span class="status_macro_base status_macro_Blue">省略可能</span></th>
      <td>
        <p>その要素を初期値で選択状態とするかを true/false で指定します。<span style="color: rgb(51,102,255);"><strong>省略可能</strong> </span>です。省略した場合は false です。</p>
        <p>コンボボックスに対して複数指定された場合は最後の指定のみが有効になります。</p>
        <p>OptionGroup 要素の Default 属性と両方指定した場合は、こちらの指定が優先されます。</p>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_107778324_h3_14">テキストボックス</h3>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_107778324/206776582.png" class="embedded-image" />
  </span>
</p>
<p>
  <strong>TextSetting タグ</strong>を使用します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;テキストボックス文字列&quot;</span> <span class="na">Type=</span><span class="s">&quot;TextBox&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;TextSetting</span> <span class="na">Default=</span><span class="s">&quot;Text Sample&quot;</span> <span class="na">RowCount=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;unsigned char    usrString[32];
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;/ParameterDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table class="table">
  <tbody>
    <tr>
      <th>  TextSetting の 属性 </th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Default <span class="status_macro_base status_macro_Red">必須</span> </th>
      <td>
        <p>初期値です。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Value=&quot;Text Sample&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <p> <br /> </p>
      </td>
    </tr>
    <tr>
      <th>RowCount <span class="status_macro_base status_macro_Blue">省略可能</span> </th>
      <td>
        <p>テキストボックスの行数を指定できます。</p>
        <p>
          <span style="color: rgb(51,102,255);">
            <strong>省略可能</strong> </span>&nbsp;です。省略した場合は 1 行分となります。<span style="color: rgb(51,102,255);">&nbsp;</span></p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>RowCount=&quot;1&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_107778324_h3_15">ファイルパスボックス</h3>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_107778324/206776609.png" class="embedded-image" />
  </span>
</p>
<p>
  <strong>FilePathSetting タグ</strong>を使用します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;ファイルパス文字列&quot;</span> <span class="na">Type=</span><span class="s">&quot;FilePathTextBox&quot;</span><span class="nt">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;FilePathSetting</span> <span class="na">Default=</span><span class="s">&quot;sample.ftxb&quot;</span> <span class="na">FileType=</span><span class="s">&quot;Texture&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;unsigned char    usrString[256];
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;/ParameterDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table style="margin-left: 1.5em;" class="table">
  <tbody>
    <tr>
      <th>FilePathSetting&nbsp;の&nbsp;属性</th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Default&nbsp;<span class="status_macro_base status_macro_Red">必須</span></th>
      <td>
        <p>初期値です。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Value=&quot;sample.ftxb&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <th>FileType&nbsp;<span class="status_macro_base status_macro_Red">必須</span>&nbsp;&nbsp;</th>
      <td>
        <p>入力するファイルの種類を指定します。</p>
        <p>目的に応じて、以下のいずれかの設定値を選択します。</p>
        <table class="table">
          <tbody>
            <tr>
              <th>指定可能な設定値</th>
              <th>説明</th>
            </tr>
            <tr>
              <th>Texture</th>
              <td>
                <p>テクスチャファイルを表します。</p>
                <p>拡張子は .ftxb です。</p>
                <table class="codeblock">
                  <tbody>
                    <tr>
                      <td class="code">
                        <div class="codeblock"><pre>FileType=&quot;Texture&quot;</pre></div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <th>Model</th>
              <td>
                <p>モデルファイルを表します。</p>
                <p>拡張子は .fmdb です。</p>
                <table class="codeblock">
                  <tbody>
                    <tr>
                      <td class="code">
                        <div class="codeblock"><pre>FileType=&quot;Model&quot;</pre></div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_107778324_h2_7">UILayout タグ</h2>
<p>ParameterDefinition タグで定義したパラメータを、このタグ内で EffectMaker で表示される UI としてレイアウトします。</p>
<p>UILayout &nbsp;直下には必ず1つはグループが必要です。グループは複数定義できますが<strong>入れ子にすることはできません</strong>。グループに含めたいパラメータを要素内の子要素として列挙します。</p>
<p>ここで定義したグループは、<span style="color: rgb(0,0,255);"> <strong>グループの右クリックメニューによるコピー＆ペーストの単位としても機能します。</strong> </span></p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>レイアウト定義では、必ずしも全パラメータを配置する必要はありません。<span style="color: rgb(0,0,255);"> <strong>パラメータは定義しておきたいが、UI上では隠しておく</strong> </span>、といった運用が可能です。</p>
  </div>
</div>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>/// <span class="cm">&lt;!-- 省略 --&gt;</span>
/// <span class="nt">&lt;UILayout&gt;</span>
///   <span class="nt">&lt;Group</span> <span class="na">Name=</span><span class="s">&quot;カラーグループ&quot;</span><span class="nt">&gt;</span>
///     <span class="nt">&lt;Parameter</span> <span class="na">Member=</span><span class="s">&quot;color&quot;</span> <span class="na">Comment=</span><span class="s">&quot;カラーを含むグループには自動的にカラーコントロールが配置されます。&quot;</span> <span class="nt">/&gt;</span>
///     <span class="nt">&lt;Parameter</span> <span class="na">Member=</span><span class="s">&quot;rgb&quot;</span> <span class="na">Comment=</span><span class="s">&quot;カラーを含むグループには自動的にカラーコントロールが配置されます。&quot;</span> <span class="nt">/&gt;</span>
///     <span class="nt">&lt;Parameter</span> <span class="na">Member=</span><span class="s">&quot;alpha&quot;</span> <span class="nt">/&gt;</span>
///   <span class="nt">&lt;/Group&gt;</span>
/// <span class="nt">&lt;/UILayout&gt;</span>
/// <span class="cm">&lt;!-- 省略 --&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table class="table">
  <tbody>
    <tr>
      <th>Group の属性</th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Name <span class="status_macro_base status_macro_Red">必須</span></th>
      <td>
        <p>UI上でグループボックスのタイトルとして表示されます。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Name=&quot;パラメータ名 サンプル&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <p>以下のように記述することで、多言語対応が可能です。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Name=&quot;{Localize JP='日本語名', EN='English Name'}&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_107778324_h3_16">Parameter</h3>
<p>個別のパラメータの配置を Parameter タグで行います。</p>
<table class="table">
  <tbody>
    <tr>
      <th>Parameter の属性</th>
      <th>説明</th>
    </tr>
    <tr>
      <th>Member <span class="status_macro_base status_macro_Red">必須</span></th>
      <td>
        <p>その位置に表示するパラメータのメンバ名を指定します。</p>
        <p>
          <span style="color: rgb(255,0,0);">
            <strong>パラメータ定義の中に含まれないものや、</strong>
          </span>
          <strong style="color: rgb(255,0,0);">同じものを複数回指定するとエラーになります。</strong>
          <span style="color: rgb(255,0,0);">&nbsp;</span>
        </p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Member=&quot;color&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <p>
          <span style="color: rgb(255,0,0);"> <strong> <br /> </strong> </span>
        </p>
      </td>
    </tr>
    <tr>
      <th>Comment <span class="status_macro_base status_macro_Blue">省略可能</span></th>
      <td>
        <p>そのパラメータのUIの下に表示するコメントを記述します。</p>
        <p>
          <span style="color: rgb(0,0,255);"> <strong>省略可能</strong> </span> です。</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>Comment=&quot;カラーを含むグループには自動的にカラーコントロールが配置されます。&quot;</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_107778324_h2_8">ユーザーデータ定義のサンプル</h2>
<ul>
  <li>
    <a href="../Pages/Page_124021155.html">ユーザーデータ定義のサンプル</a>
  </li>
</ul>
<p>に全体の記述例がありますのでご覧ください。</p>
<h2 id="Anchor_107778324_h2_9">運用上の注意点</h2>
<p>一度定義したデータを運用していく上で、保存したデータの互換性が維持できる変更、維持できない変更などをまとめます。</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>
      <strong> <span style="color: rgb(255,0,0);">互換性が維持できない変更を行う場合、元々のエフェクト中間ファイル（ .eset ）を、テキスト置き換えなどで変更後のデータに合うように書き換える必要がある</span> </strong>ことにご注意ください。</p>
  </div>
</div>
<h3 id="Anchor_107778324_h3_17">互換性が維持できる変更</h3>
<ul>
  <li>UI の表示・非表示・表示順並べ替え</li>
  <li>表示名・初期値・UI に関する設定の変更<ul><li><span style="color: rgb(255,0,0);"><strong>※Option タグの表示名（Value 属性）の変更をするには、 UniqueKey 属性を設定している必要があります</strong></span></li></ul></li>
  <li>パラメータの追加</li>
  <li>パラメータの削除</li>
  <li>パラメータ定義順（バイナリ配置順）の並べ替え</li>
  <li>文字列パラメータの配列長変更</li>
  <li>チェックボックス・ラジオボタンのビット桁入れ替え<ul><li><span style="color: rgb(255,0,0);"><strong>※この互換性を維持するためには UniqueKey 属性を設定している必要があります</strong></span></li></ul></li>
  <li>テキストコンボボックスのインデックス入れ替え<ul><li>eset には文字列が保存されるため、eset 読み込み時には保存文字列と一致するインデックスが選択された状態になります</li><li>定義の変更により保存文字列が見つからなかった場合は非選択状態で読み込まれます</li></ul></li>
  <li>カスタムシェーダ・アクションにおけるコールバック IDの 変更<ul><li>カスタムアクションでは<br /><u>「カスタムアクションコールバックIDに不整合が見つかりました。EffectMakerの実行ファイルと同階層にある&quot;Caches&quot;フォルダを削除して再読み込みしてみてください。」</u><br />というメッセージが出る場合がありますが、単に ID を変更・入れ替えただけの場合は実質的には問題ないはずです</li><li>このメッセージが出て問題になるのは、多くの場合データ定義のファイル名も変更されている場合がほとんどです。詳しくは<a href="#Anchor_107778324_h3_18">互換性が維持できない変更</a>を参照してください</li></ul></li>
</ul>
<h3 id="Anchor_107778324_h3_18">互換性が維持できない変更</h3>
<ul>
  <li>
    <span style="color: rgb(255,0,0);">
      <strong>Option タグに UniqueKey 属性を設定していない状態での表示名（Value属性）の変更</strong>
    </span>
  </li>
  <li>
    <span style="color: rgb(255,0,0);">
      <strong>UniqueKey そのものの変更</strong>
    </span>
  </li>
  <li>パラメータのメンバ名変更</li>
  <li>パラメータの型変更</li>
  <li>
    <span style="color: rgb(255,0,0);">
      <strong>データの定義名（ユーザーデータ定義のファイル名）の変更</strong>
    </span>
  </li>
</ul>
<h4 id="Anchor_107778324_h4_1">Option タグに UniqueKey 属性を設定していない状態での表示名（Value属性）の変更について補足</h4>
<p>
  <a href="#Anchor_107778324_h3_9">チェックボックスの設定</a>&nbsp;の UniqueKey 属性の項目でも記載していますが、UniqueKey 属性が指定されていない場合、UI 表示名（ Value 属性 ）がその項目を示す一意の ID として代用されます。</p>
<p>この時、UI 表示名（ Value 属性 ）を書き換えてしまうと、古い中間ファイルのデータを適切にアップデートできず、.eset ファイルを正しく開けないケースがあります。例えば、</p>
<p>&nbsp;</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;フラグ&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="err">/</span>//                      Type=&quot;CheckButtons&quot;
&nbsp;&nbsp;&nbsp;&nbsp;///                      NeedReload=&quot;true&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;OptionGroup&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">BitIndex=</span><span class="s">&quot;0&quot;</span> <span class="na">Value=</span><span class="s">&quot;スイッチ1&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">BitIndex=</span><span class="s">&quot;1&quot;</span> <span class="na">Value=</span><span class="s">&quot;スイッチ2&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">BitIndex=</span><span class="s">&quot;2&quot;</span> <span class="na">Value=</span><span class="s">&quot;スイッチ3&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;/OptionGroup&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;unsigned int    choices;
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;/ParameterDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>このような UniqueKey 属性が指定されていないユーザーデータ定義があるときに、&quot;スイッチ1&quot; の UI 表示名を、</p>
<p>&nbsp;</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;フラグ&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="err">/</span>//                      Type=&quot;CheckButtons&quot;
&nbsp;&nbsp;&nbsp;&nbsp;///                      NeedReload=&quot;true&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;OptionGroup&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">BitIndex=</span><span class="s">&quot;0&quot;</span> <span class="na">Value=</span><span class="s">&quot;フラグA&quot;</span> <span class="nt">/&gt;</span>  //←UI表示名を変更！
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">BitIndex=</span><span class="s">&quot;1&quot;</span> <span class="na">Value=</span><span class="s">&quot;スイッチ2&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">BitIndex=</span><span class="s">&quot;2&quot;</span> <span class="na">Value=</span><span class="s">&quot;スイッチ3&quot;</span> <span class="nt">/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;/OptionGroup&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;unsigned int    choices;
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;/ParameterDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>&quot;フラグA&quot; のように書き換えて保存すると、<span style="color: rgb(255,0,0);"><strong>以前のユーザーデータ定義の状態で保存されたエミッタセットの&nbsp;&quot;スイッチ1&quot; のデータは、修正後の &quot;フラグA&quot; のデータとは認識されません。</strong></span></p>
<p>このような修正を行った場合は、.eset ファイルの中にあるユーザーデータの記述の中に、</p>
<p>&nbsp;</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre><span class="nt">&lt;item&gt;</span>
&nbsp;&nbsp;<span class="nt">&lt;key&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;String&gt;</span>スイッチ1<span class="nt">&lt;/String&gt;</span>
&nbsp;&nbsp;<span class="nt">&lt;/key&gt;</span>
&nbsp;&nbsp;<span class="nt">&lt;value&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nt">&lt;Boolean&gt;</span>False<span class="nt">&lt;/Boolean&gt;</span>
&nbsp;<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/item&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>のような &quot;スイッチ1&quot; の文字列が残っています（※上記 XML 構造は、今後のバージョンアップに伴い変更される可能性があります）ので、これを &quot;フラグA&quot; に書き換えることで、正しくエミッタセットを開ける状態に復帰することができます。</p>
<p>また、そもそもこれを回避する方法として、UniqueKey 属性を設定することができ、</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;ParameterDefinition</span> <span class="na">Name=</span><span class="s">&quot;フラグ&quot;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="err">/</span>//                      Type=&quot;CheckButtons&quot;
&nbsp;&nbsp;&nbsp;&nbsp;///                      NeedReload=&quot;true&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;OptionGroup&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">BitIndex=</span><span class="s">&quot;0&quot;</span> <span class="na">UniqueKey=</span><span class="s">&quot;switchA&quot;</span> <span class="na">Value=</span><span class="s">&quot;スイッチ1&quot;</span> <span class="nt">/&gt;</span> //←UniqueKey を設定
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">BitIndex=</span><span class="s">&quot;1&quot;</span> <span class="na">UniqueKey=</span><span class="s">&quot;switchB&quot;</span> <span class="na">Value=</span><span class="s">&quot;スイッチ2&quot;</span> <span class="nt">/&gt;</span> //←UniqueKey を設定
&nbsp;&nbsp;&nbsp;&nbsp;///     <span class="nt">&lt;Option</span> <span class="na">BitIndex=</span><span class="s">&quot;2&quot;</span> <span class="na">UniqueKey=</span><span class="s">&quot;switchC&quot;</span> <span class="na">Value=</span><span class="s">&quot;スイッチ3&quot;</span> <span class="nt">/&gt;</span> //←UniqueKey を設定
&nbsp;&nbsp;&nbsp;&nbsp;///   <span class="nt">&lt;/OptionGroup&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;unsigned int    choices;
&nbsp;&nbsp;&nbsp;&nbsp;/// <span class="nt">&lt;/ParameterDefinition&gt;</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <span style="color: rgb(0,0,255);">
    <strong>あらかじめこのように UniqueKey を設定しておくことで、UI 表示名（ Value 属性 ）を変更しても、正しくエミッタセットが追従できるようになります。</strong>
  </span>
  <span style="color: rgb(0,0,255);">&nbsp;</span>
</p>
<h4 id="Anchor_107778324_h4_2">
  <span style="color: rgb(0,51,102);">データの定義名の変更</span>
</h4>
<p>データの定義名（ユーザーデータ定義のファイル名）は、中間ファイルと実データを紐付ける重要な要素です。</p>
<p>カスタムシェーダやアクションのインデックス入れ替えには追従できますが、定義名が変更された場合はデータを追跡することができなくなります。</p>
<p>データの定義名と、チェックボックス・ラジオボタンにおける UniqueKey は一度決めたら変更しないようお願いします。&nbsp;</p>
<h3 id="Anchor_107778324_h3_19">
  <span style="color: rgb(0,51,102);">データ保存形式の変更に伴う特殊互換対応</span>
</h3>
<p>
  <span style="color: rgb(0,51,102);">チェックボックス・ラジオボタン・コンボボックスに関しては、本機能の初回リリースから何度か仕様変更があり、eset に保存されるデータ形式が変更されています。</span>
  <span style="color: rgb(0,0,255);">&nbsp;</span>
</p>
<p>互換性を維持するため、読み込み処理において次のような特別措置がとられています。<span style="color: rgb(0,0,255);">&nbsp;</span></p>
<ul>
  <li>チェックボックス・ラジオボタンの選択状態が、各ビットの論理和を取った数値で保存されている場合はそのまま反映させる</li>
  <li>チェックボックス・ラジオボタンの選択状態を表すビットテーブルにおいて、UniqueKey で見つからないビット桁があった場合は UI 表示名で引き直す<ul><li>UniqueKey でも UI 表示名でも見つからないビット桁はデータに反映されません</li></ul></li>
  <li>コンボボックスの選択状態がインデックス値で保存されていた場合は、現在の定義におけるインデックスとしてそのまま反映させる</li>
</ul>
<p>これらは古い保存形式になるため、保存し直すと新しい形式に置き換えられます。<span style="color: rgb(0,0,255);">&nbsp;</span></p>
<h3 id="Anchor_107778324_h3_20">
  <span style="color: rgb(0,51,102);">旧形式のユーザーデータ定義(USD/UDD)に対する互換性</span>
</h3>
<p>
  <span style="color: rgb(0,51,102);">旧バージョンのEffectMakerで利用されていたカスタムシェーダ・カスタムアクションは、次のようなルールで変換されて利用できます。</span>
</p>
<ul>
  <li>
    <span style="color: rgb(0,51,102);">カスタムアクションで「コールバックなし」に保存されていたデータ</span>
    <ul>
      <li>
        <span style="color: rgb(0,51,102);">エミッタ拡張パラメータのデータ定義がデフォルトならば「<strong>エミッタ拡張パラメータ</strong>」に自動的に変換されます</span>
      </li>
    </ul>
  </li>
  <li>カスタムシェーダ<ul><li>元のデータで使用していたインデックスに、ユーザーデータ定義で作成されたカスタムシェーダ定義が読み込まれていて、以下のパラメータを持つ場合は変換されます<ul><li><strong>paramFloat0～31</strong></li><li><strong>フラグはビルドインパラメータ側に自動的に読み替えられます</strong></li></ul></li></ul></li>
  <li>カスタムアクション<ul><li>元のデータで使用していたインデックスに、ユーザーデータ定義で作成されたカスタムアクション定義が読み込まれていて、以下のパラメータを持つ場合は変換されます<ul><li><strong>flags</strong></li><li><strong>paramFloat0～7</strong></li><li><strong>paramInt0～5</strong></li></ul></li><li>また、元のデータで使用していたインデックスにデフォルトのカスタムアクションが読み込まれていた場合も、自動的に変換されます</li></ul></li>
</ul>
<p>&nbsp;</p>
<!--Remove-->
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank">';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__util__Float4', '../../../Api/HtmlNX/structnn_1_1util_1_1_float4.html' )
SetUrl( 'ApiLink_nn__util__Float3', '../../../Api/HtmlNX/structnn_1_1util_1_1_float3.html' )
SetUrl( 'ApiLink_nn__vfx__detail__ResAnim8KeyParamSet', '../../../Api/HtmlNX/structnn_1_1vfx_1_1detail_1_1_res_anim8_key_param_set.html' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
