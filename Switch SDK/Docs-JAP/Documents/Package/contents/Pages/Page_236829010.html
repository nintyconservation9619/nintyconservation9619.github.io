<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>バリエーションファイル</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- バリエーションファイル -->
<div class="pagetitle" id="PageId_236829010">バリエーションファイル</div>
<div class="text_separate">
<h1 id="Anchor_236829010_h1_1">概要</h1>
<p>バリエーションファイルは、<a href="../Pages/Page_89982310.html">シェーダーコンバーター (.dll)</a> と<a href="../Pages/Page_89982392.html">シェーダーコンバーター (.exe)</a> でコマンドラインオプションによりファイルからバリエーションを指定するために使われます。<br />バリエーションファイルは .xml 形式により記述されます。</p>
<h2 id="Anchor_236829010_h2_1">サンプル</h2>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>Samples/Sources/Applications/GfxSimple/Resources/SampleVariation.xml</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_236829010_h2_2">バリエーションファイル外観</h2>
<p>頂点シェーダだけ、配列要素は 1 要素だけ、の場合の外観を示します。<br />それぞれの要素の詳細については次の節で説明します。&nbsp;</p>
<div>
  <div class="syntaxhighlighter nogutter plain">
    <p>
      <br />
    </p>
    <table class="wrapped">
      <tbody>
        <tr>
          <td>
            <div class="container" title="Hint: double-click to select code">
              <div class="line number1 index0 alt2">
                <code class="plain plain">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</code>
              </div>
              <div class="line number2 index1 alt1">
                <code class="plain plain">&lt;GfxShaderVariation version=&quot;0.0.0&quot;&gt;</code>
              </div>
              <div class="line number3 index2 alt2">
                <code class="plain spaces">&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;ShaderVariationDefinition&gt;</code>
              </div>
              <div class="line number4 index3 alt1">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;VertexShaderVariationDefinition&gt;</code>
              </div>
              <div class="line number5 index4 alt2">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;VariationConstantBuffer name=&quot;...&quot; /&gt;</code>
              </div>
              <div class="line number6 index5 alt1">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;VariationConstantDefinitionArray length=&quot;1&quot;&gt;</code>
              </div>
              <div class="line number7 index6 alt2">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;VariationConstantDefinition index=&quot;0&quot; name=&quot;...&quot; type=&quot;...&quot; /&gt;</code>
              </div>
              <div class="line number8 index7 alt1">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;/VariationConstantDefinitionArray&gt;</code>
              </div>
              <div class="line number9 index8 alt2">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;PreprocessorDefinitionDefinitionArray length=&quot;1&quot;&gt;</code>
              </div>
              <div class="line number10 index9 alt1">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;PreprocessorDefinitionDefinition index=&quot;0&quot; name=&quot;...&quot;/&gt;</code>
              </div>
              <div class="line number11 index10 alt2">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;/PreprocessorDefinitionDefinitionArray&gt;</code>
              </div>
              <div class="line number12 index11 alt1">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;/VertexShaderVariationDefinition&gt;</code>
              </div>
              <div class="line number13 index12 alt2">
                <code class="plain spaces">&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;/ShaderVariationDefinition&gt;</code>
              </div>
              <div class="line number14 index13 alt1">
                <code class="plain spaces">&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;ShaderVariationValueArray length=&quot;1&quot;&gt;</code>
              </div>
              <div class="line number15 index14 alt2">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;ShaderVariationValue index=&quot;0&quot;&gt;</code>
              </div>
              <div class="line number16 index15 alt1">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;VertexShaderVariationValue&gt;</code>
              </div>
              <div class="line number17 index16 alt2">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;VariationConstantValueArray length=&quot;1&quot; &gt;</code>
              </div>
              <div class="line number18 index17 alt1">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;VariationConstantValue index=&quot;0&quot;&gt;...&lt;/VariationConstantValue&gt;</code>
              </div>
              <div class="line number19 index18 alt2">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;/VariationConstantValueArray&gt;</code>
              </div>
              <div class="line number20 index19 alt1">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;PreprocessorDefinitionValueArray length=&quot;1&quot;&gt;</code>
              </div>
              <div class="line number21 index20 alt2">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;PreprocessorDefinitionValue index=&quot;0&quot;&gt;...&lt;/PreprocessorDefinitionValue&gt;</code>
              </div>
              <div class="line number22 index21 alt1">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;/PreprocessorDefinitionValueArray&gt;</code>
              </div>
              <div class="line number23 index22 alt2">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;/VertexShaderVariationValue&gt;</code>
              </div>
              <div class="line number24 index23 alt1">
                <code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;/ShaderVariationValue&gt;</code>
              </div>
              <div class="line number25 index24 alt2">
                <code class="plain spaces">&nbsp;&nbsp;</code>
                <code class="plain plain">&lt;/ShaderVariationValueArray&gt;</code>
              </div>
              <div class="line number26 index25 alt1">
                <code class="plain plain">&lt;/GfxShaderVariation&gt;</code>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <br />
    </p>
  </div>
</div>
<h2 id="Anchor_236829010_h2_3">要素</h2>
<p>バリエーションファイルには、バリエーションの定義をひとつと、バリエーションの値の列挙を記述します。</p>
<p>配列要素はその名前に &quot;Array&quot; サフィックスをもち、子要素の数を示す length 属性をもちます。<br />配列要素の子要素は自身のインデックスを示す index 属性をもちます。</p>
<p>以下、それぞれの要素について説明します。</p>
<h3 id="Anchor_236829010_h3_1">&lt;GfxShaderVariation&gt;</h3>
<p>ルート要素です。</p>
<ul>
  <li>必須の属性<ul><li>version=&quot;stirng&quot;</li></ul></li>
  <li>必須の子要素<ul><li>&lt;ShaderVariationDefinition&gt;</li><li>&lt;ShaderVariationValueArray&gt;</li></ul></li>
</ul>
<h3 id="Anchor_236829010_h3_2">&lt;ShaderVariationDefinition&gt;</h3>
<p>バリエーション定義です。</p>
<ul>
  <li>任意の子要素<ul><li>&lt;VertexVariationDefinition&gt;</li><li>&lt;HullVariationDefinition&gt;</li><li>&lt;DomainVariationDefinition&gt;</li><li>&lt;GeometryVariationDefinition&gt;</li><li>&lt;PixelVariationDefinition&gt;</li><li>&lt;ComputeVariationDefinition&gt;</li></ul></li>
</ul>
<h3 id="Anchor_236829010_h3_3">&lt;VertexVariationDefinition&gt;<br />&lt;HullVariationDefinition&gt;<br />&lt;DomainVariationDefinition&gt;&nbsp;<br />&lt;GeometryVariationDefinition&gt;<br />&lt;PixelVariationDefinition&gt;<br />&lt;ComputeVariationDefinition&gt;&nbsp;</h3>
<p>各ステージのバリエーション定義です。</p>
<ul>
  <li>任意の子要素<ul><li>&lt;VariationConstantBuffer&gt;</li><li>&lt;VariationConstantDefinitionArray&gt;</li><li>&lt;PreprocessorDefinitionDefinitionArray&gt;</li></ul></li>
</ul>
<h3 id="Anchor_236829010_h3_4">&lt;VariationConstantBuffer&gt;</h3>
<p>バリエーション定数バッファーです。</p>
<ul>
  <li>必須の属性<ul><li>name=&quot;string&quot;</li></ul></li>
</ul>
<h3 id="Anchor_236829010_h3_5">&lt;VariationConstantDefinitionArray&gt;</h3>
<p>バリエーション定数の定義の配列です。</p>
<ul>
  <li>必須の属性<ul><li>length=&quot;uint&quot;</li></ul></li>
  <li>&lt;VariationConstantDefinition&gt; 要素を length 個もちます</li>
</ul>
<h3 id="Anchor_236829010_h3_6">&lt;VariationConstantDefinition&gt;</h3>
<p>バリエーション定数の定義です。</p>
<ul>
  <li>必須の属性<ul><li>index=&quot;uint&quot;</li><li>name=&quot;string&quot;<ul><li>変数名、または SPIR-V の場合は constant_id 名</li></ul></li><li>type=&quot;string&quot;<ul><li>変数の型</li><li>スカラー型の場合は以下のいずれかです<ul><li>bool</li><li>int</li><li>uint</li><li>float</li><li>double</li></ul></li><li>ベクトル型の場合はスカラー型にベクトル要素数をつけます<ul><li>例: int3</li></ul></li><li>行列型の場合はスカラー型に行列の列数x行数をつけます<ul><li>例: float3x3</li></ul></li><li>配列型の場合は配列要素数をつけます<br /><ul><li>例: float4[ 16 ]</li></ul></li></ul></li></ul></li>
</ul>
<h3 id="Anchor_236829010_h3_7">&lt;PreprocessorDefinitionDefinitionArray&gt;</h3>
<p>プリプロセッサー定義の定義の配列です。</p>
<ul>
  <li>必須の属性<ul><li>length=&quot;uint&quot;</li></ul></li>
</ul>
<h3 id="Anchor_236829010_h3_8">&lt;PreprocessorDefinitionDefinition&gt;</h3>
<p>プリプロセッサー定義の定義です。</p>
<ul>
  <li>必須の属性<ul><li>index=&quot;uint&quot;</li><li>name=&quot;string&quot;<ul><li>プリプロセッサー定義のスペース区切りの前半部分</li></ul></li></ul></li>
</ul>
<h3 id="Anchor_236829010_h3_9">&lt;ShaderVariationValueArray&gt;</h3>
<p>バリエーションの値の配列です。</p>
<ul>
  <li>必須の属性<ul><li>length=&quot;uint&quot;</li></ul></li>
</ul>
<h3 id="Anchor_236829010_h3_10">&lt;ShaderVariationValue&gt;</h3>
<p>バリエーションの値です。</p>
<ul>
  <li>必須の属性<ul><li>index=&quot;uint&quot;</li></ul></li>
  <li>任意の子要素<ul><li>&lt;VertexShaderVariationValue&gt;</li><li>&lt;HullShaderVariationValue&gt;</li><li>&lt;DomainShaderVariationValue&gt;</li><li>&lt;GeometryShaderVariationValue&gt;</li><li>&lt;PixelShaderVariationValue&gt;</li><li>&lt;ComputeShaderVariationValue&gt;</li></ul></li>
</ul>
<h3 id="Anchor_236829010_h3_11">&lt;VertexShaderVariationValue&gt;<br />&lt;HullShaderVariationValue&gt;<br />&lt;DomainShaderVariationValue&gt;<br />&lt;GeometryShaderVariationValue&gt;<br />&lt;PixelShaderVariationValue&gt;<br />&lt;ComputeShaderVariationValue&gt;&nbsp;</h3>
<p>各ステージのバリエーションの値です。</p>
<ul>
  <li>任意の子要素<ul><li>&lt;VariationConstantValueArray&gt;</li><li>&lt;PreprocessorDefinitionValueArray&gt;</li></ul></li>
</ul>
<h3 id="Anchor_236829010_h3_12">&lt;VariationConstantValueArray&gt;</h3>
<p>バリエーション定数の値の配列です。<br />定義側に対応する順番で子要素を記述します。</p>
<ul>
  <li>必須の属性<ul><li>length=&quot;uint&quot;</li></ul></li>
  <li>&lt;VariationConstantValue&gt; 要素を length 個もちます</li>
</ul>
<h3 id="Anchor_236829010_h3_13">&lt;VariationConstantValue&gt;</h3>
<p>バリエーション定数の値です。</p>
<ul>
  <li>必須の属性<ul><li>index=&quot;uint&quot;</li></ul></li>
  <li>内容<ul><li>バリエーション定数の値を記述します</li><li>ベクトルなど複数の値をとる場合はスペース区切りで記述します</li></ul></li>
</ul>
<h3 id="Anchor_236829010_h3_14">&lt;PreprocessorDefinitionValueArray&gt;</h3>
<p>プリプロセッサー定義の値の配列です。<br />定義側に対応する順番で子要素を記述します。</p>
<ul>
  <li>必須の属性<ul><li>index=&quot;int&quot;</li></ul></li>
  <li>内容<ul><li>プリプロセッサー定義の値を記述します</li></ul></li>
</ul>
<h3 id="Anchor_236829010_h3_15">&lt;PreprocessorDefinitionValue&gt;</h3>
<p>プリプロセッサー定義の値です。</p>
<ul>
  <li>必須の属性<ul><li>index=&quot;uint&quot;</li></ul></li>
  <li>内容<ul><li>プリプロセッサー定義の値を記述します</li></ul></li>
</ul>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
