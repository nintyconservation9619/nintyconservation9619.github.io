<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>マニュアル</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- マニュアル -->
<div class="pagetitle" id="PageId_288014117">マニュアル</div>
<div class="text_separate">
<div class="layout-root">
  <div class="layout-base">
    <div class="layout-section two_right_sidebar">
      <div class="layout-cell">
        <h1 id="Anchor_288014117_h1_1">基本情報</h1>
        <h2 id="Anchor_288014117_h2_1">SSL ライブラリの名前空間</h2>
        <p>SSL ライブラリで用意されている型、定数、クラス、関数、およびその他のリソースは、<a href="../../../Api/HtmlNX/namespacenn_1_1ssl.html">nn::ssl</a> 名前空間で定義されています。</p>
        <h2 id="Anchor_288014117_h2_2">SSL ライブラリのヘッダファイル</h2>
        <p>
          <a href="../../../Api/HtmlNX/ssl_8h.html">nn/ssl.h</a> をインクルードします。</p>
        <h2 id="Anchor_288014117_h2_3">SSL ライブラリとのリンク</h2>
        <p>以下のページを参照してください。</p>
        <ul>
          <li>
            <a href="../Pages/Page_95685382.html">ライブラリの提供形態と利用方法</a>
          </li>
        </ul>
        <h2 id="Anchor_288014117_h2_4">SSL ライブラリの制限事項</h2>
        <div class="warn_new">
          <div class="warn_new_left">警告：</div>
          <div class="warn_new_right">
            <h3 id="Anchor_288014117_h3_1">ライブラリの初期化と終了処理</h3>
            <p>SSL ライブラリの初期化と終了処理はメインスレッドでのみ実行する必要があります。</p>
            <p>
              <span class="ApiLink_nn__ssl__Initialize">nn::ssl::Initialize</span>() と <span class="ApiLink_nn__ssl__Finalize">nn::ssl::Finalize</span>() はメインスレッドからのみ呼び出してください。それ以外のスレッドからこれらの処理を呼び出すと、ライブラリがハングすることがあります。</p>
            <ul>
              <li>
                <a href="../../../Api/HtmlNX/namespacenn_1_1ssl.html#aaa943d1a4363d560d45d53dfa2182683">nn::ssl::Initialize()</a>
              </li>
              <li>
                <a href="../../../Api/HtmlNX/namespacenn_1_1ssl.html#a56d990644d149228c45f0c5ece11a9d9">nn::ssl::Finalize()</a>
              </li>
            </ul>
            <p>
              <br />
            </p>
          </div>
        </div>
      </div>
      <div class="layout-cell">
        <table class="wrapped">
          <colgroup> <col /> </colgroup>
          <tbody>
            <tr>
              <th style="text-align: center;">目次</th>
            </tr>
            <tr>
              <td>
                <div class="content-wrapper">
                  <p>
                    <ul class="macro_toc">
                      <li>
                        <a href="#Anchor_288014117_h1_1">基本情報</a>
                      </li>
                      <ul>
                        <li>
                          <a href="#Anchor_288014117_h2_1">SSL ライブラリの名前空間</a>
                        </li>
                        <li>
                          <a href="#Anchor_288014117_h2_2">SSL ライブラリのヘッダファイル</a>
                        </li>
                        <li>
                          <a href="#Anchor_288014117_h2_3">SSL ライブラリとのリンク</a>
                        </li>
                        <li>
                          <a href="#Anchor_288014117_h2_4">SSL ライブラリの制限事項</a>
                        </li>
                        <ul>
                          <li>
                            <a href="#Anchor_288014117_h3_1">ライブラリの初期化と終了処理</a>
                          </li>
                        </ul>
                      </ul>
                      <li>
                        <a href="#Anchor_288014117_h1_2">SSL ライブラリのクラスの使用</a>
                      </li>
                      <ul>
                        <li>
                          <a href="#Anchor_288014117_h2_5">nn::ssl::Context</a>
                        </li>
                        <ul>
                          <li>
                            <a href="#Anchor_288014117_h3_2">制限事項</a>
                          </li>
                        </ul>
                        <li>
                          <a href="#Anchor_288014117_h2_6">nn::ssl::Connection</a>
                        </li>
                        <ul>
                          <li>
                            <a href="#Anchor_288014117_h3_3">ソケットライブラリの扱い</a>
                          </li>
                          <ul>
                            <li>
                              <a href="#Anchor_288014117_h4_1">ソケットディスクリプタのインポート</a>
                            </li>
                            <li>
                              <a href="#Anchor_288014117_h4_2">ソケットのクローズ</a>
                            </li>
                          </ul>
                          <li>
                            <a href="#Anchor_288014117_h3_4">SSL ハンドシェイク</a>
                          </li>
                          <li>
                            <a href="#Anchor_288014117_h3_5">制限事項</a>
                          </li>
                        </ul>
                      </ul>
                    </ul>
                  </p>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="layout-base">
    <div class="layout-section single">
      <div class="layout-cell">
        <h1 id="Anchor_288014117_h1_2">SSL ライブラリのクラスの使用</h1>
        <p>SSL ライブラリは、TCP/IP 接続上の SSL/TLS 接続を使用してデータを読み書きすることでサーバと安全に通信するためのクラスとインターフェースを提供します。クラスの表記方法には、主に以下の 2 つがあります。</p>
        <ul>
          <li>
            <a href="../../../Api/HtmlNX/classnn_1_1ssl_1_1_context.html">nn::ssl::Context</a>
          </li>
          <li>
            <a href="../../../Api/HtmlNX/classnn_1_1ssl_1_1_connection.html">nn::ssl::Connection</a>
          </li>
        </ul>
        <p>SSL 接続を確立するには、まず <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> オブジェクトを作成する必要があります。<span class="ApiLink_nn__ssl__Connection">nn::ssl::Connection</span> オブジェクトを作成する前に <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> オブジェクトを構成しておく必要があります。</p>
        <p>
          <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> オブジェクトを作成すると、<span class="ApiLink_nn__ssl__Connection">nn::ssl::Connection</span> を作成できるようになります。<span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> オブジェクトがない状態で <span class="ApiLink_nn__ssl__Connection">nn::ssl::Connection</span> オブジェクトを作成することはできません。<span class="ApiLink_nn__ssl__Connection">nn::ssl::Connection</span> の Create() メソッドに <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> オブジェクトへのポインタを渡す必要があるからです。</p>
        <p>
          <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> および <span class="ApiLink_nn__ssl__Connection">nn::ssl::Connection</span> オブジェクトの「作成」と「インスタンス化」には違いがあります。ここでいう「作成」とは、<span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> オブジェクトまたは <span class="ApiLink_nn__ssl__Connection">nn::ssl::Connection</span> オブジェクトの Create() メソッドを呼び出すことを意味します。したがって、<span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> オブジェクトがなくても <span class="ApiLink_nn__ssl__Connection">nn::ssl::Connection</span> オブジェクトはインスタンス化できます。</p>
        <p>以下の図は、SSL ライブラリのクラスとエンティティの階層を示しています。以下の <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> および <span class="ApiLink_nn__ssl__Connection">nn::ssl::Connection</span> の説明と併せてこの図を参照してください。</p>
        <p style="text-align: center;">
          <img src="../Attachments/Attach_288014117/298175786.png"></img>
        </p>
        <p style="text-align: center;">図 1SSL ライブラリのオブジェクト階層</p>
        <h2 id="Anchor_288014117_h2_5">nn::ssl::Context</h2>
        <p>このクラスは、SSL のコンテキストを表します。 このコンテキストを使用して、その下で SSL 接続を確立するときに使用する構成パラメータを保持します。 例えば、<span class="ApiLink_nn__ssl__Connection">nn::ssl::Connection</span> による SSL 接続を確立する際に使用する SSL プロトコルのバージョンは  SSL コンテキストでの構成で決まります。</p>
        <p>SSL 通信で使用する各種の証明書、キー、および CRL も、このクラスで管理します。 SSL ライブラリでは、ピア証明書を検証するために、信頼できる認証局が発行した任意の数の証明書をインポートできます。また、証明書をまったくインポートしないことも可能です。 サーバでクライアント証明書を検証する場合は、クライアント証明書とその秘密鍵をインポートすることもできます。</p>
        <p>すべての <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> オブジェクトで暗黙的に使用される組み込みデータ（ルート CA 証明書など）も用意されています。したがって、この組み込みデータに用意されているルート CA 証明書はユーザ側でインポートする必要はありません。</p>
        <p> 組み込みエンティティの詳細については以下のページを参照してください。</p>
        <ul>
          <li> <a href="../Pages/Page_170073986.html">組み込みデータ</a> </li>
        </ul>
        <p>証明書とキーの扱いについて詳しく理解するには以下のページを参照してください。</p>
        <ul>
          <li>
            <a href="../Pages/Page_288014097.html">証明書ストア</a>
          </li>
        </ul>
        <p>詳細については、<a href="../../../Api/HtmlNX/classnn_1_1ssl_1_1_context.html">API リファレンスで nn::ssl::Context</a> の説明を参照してください。</p>
        <h3 id="Anchor_288014117_h3_2">制限事項</h3>
        <ul>
          <li>アプリケーションでは、最大で 8 個の SSL コンテキストを同時に作成できます。</li>
          <li>
            <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> オブジェクトにインポートしたエンティティ（証明書やキーなど）は永続的なものではありません。<ul><li>オブジェクトを破棄した後またはオブジェクトのインスタンスを解放した後は、それらのエンティティを使用できなくなります。</li></ul></li>
          <li>1 つの <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> オブジェクトごとにインポートできるクライアント PKI は 1 つのみです。</li>
        </ul>
        <h2 id="Anchor_288014117_h2_6">nn::ssl::Connection</h2>
        <p>これは、SSL の接続を表しています。 クラスの 1 つのインスタンスで、TCP/IP ソケットを使用した SSL 接続を 1 つ管理します。 それぞれの接続が特定の <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> オブジェクトに関連付けられ、 SSL 接続の構成に必要な構成パラメータがそのオブジェクトから取得されます。</p>
        <p>データを読み書きするための I/O 操作と SSL ハンドシェイクは、このクラスのメソッドで提供されます。 このメソッドでは、<a href="../../../Api/HtmlNX/classnn_1_1ssl_1_1_connection.html#a5c0d109fe1a6dd9cff4edba5a730c776">nn::ssl::Connection::SetIoMode()</a> で構成できるブロック型 API と非ブロック型 API の両方をサポートしています。</p>
        <h3 id="Anchor_288014117_h3_3">ソケットライブラリの扱い</h3>
        <p>SSL ライブラリは SSL/TLS プロトコルを扱いますが、ソケットの作成や TCP/IP 接続の確立には関与しません。SSL ライブラリを使用する場合は、SSL ハンドシェイクを実行する前に、ソケットライブラリを使用して TCP ソケットを作成し、そのソケット上で接続を確立する必要があります。</p>
        <h4 id="Anchor_288014117_h4_1">ソケットディスクリプタのインポート</h4>
        <p>TCP 接続を確立した後は、SSL ライブラリにソケットディスクリプタを渡す必要があります。SSL ハンドシェイクが成功すると SSL ライブラリで SSL ハンドシェイクが実行され、渡したソケット上で暗号化データが転送されます。</p>
        <p>
          <strong>なお、SSL ライブラリにソケットを正常に渡すと、そのソケットに対してはどのようなソケット操作も実行できなくなります。</strong>以降のすべての操作は、SSL ライブラリに用意されているインターフェースを使用して実行する必要があります。</p>
        <h4 id="Anchor_288014117_h4_2">ソケットのクローズ</h4>
        <p>該当のソケットが使用されなくなると（SSL 接続が閉じた場合など）、そのソケットは SSL ライブラリによって自動的に閉じます。また、<span class="ApiLink_nn__ssl__Connection__Destroy">nn::ssl::Connection::Destroy</span> を実行して SSL 接続を破棄するとき、該当のソケットが閉じていない場合にもソケットが自動的に閉じます。このように、SSL ライブラリにソケットを渡した後は、ソケットを閉じる操作などのあらゆるソケット操作を呼び出し元で扱う必要がなくなります。</p>
        <p>上記の操作順序を簡単にまとめると以下のようになります。</p>
        <ol>
          <li>ソケット API を使用して TCP クライアントソケットを作成します。</li>
          <li>作成したソケット上でサーバとの TCP 接続を確立します（必要に応じ、TCP 接続を確立する前にサーバ名を解決します）。</li>
          <li>
            <span class="ApiLink_nn__ssl__Connection">nn::ssl::Connection</span> クラスに用意されているインターフェースを使用して、SSL ライブラリにソケットディスクリプタを渡します（この時点以降は、SSL ライブラリに渡したソケットをソケットライブラリで使用しないようにします）。</li>
          <li>SSL ライブラリを使用して目的の SSL 操作を実行します。</li>
          <li>
            <span class="ApiLink_nn__ssl__Connection">nn::ssl::Connection</span> クラスに用意されているインターフェースを使用して SSL 接続を閉じます。</li>
        </ol>
        <h3 id="Anchor_288014117_h3_4">SSL ハンドシェイク</h3>
        <p>SSL ハンドシェイクは、<a href="../../../Api/HtmlNX/classnn_1_1ssl_1_1_connection.html#a02dbc9c070198bdd16b8cd6593f6025d">nn::ssl::Connection::Handshake()</a> を呼び出した後でのみ実行されます。SSL ライブラリでは、<span class="ApiLink_nn__ssl__Connection">nn::ssl::Connection</span> オブジェクトに関連付けられた <span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> オブジェクトで管理されている CA 証明書に基づき、SSL ハンドシェイクの際にサーバを検証します。<span class="ApiLink_nn__ssl__Context">nn::ssl::Context</span> オブジェクトに何もインポートしていない場合、サーバの検証は組み込みのルート CA 証明書のみを使用して実行されます。</p>
        <p>SSL ライブラリではセッションの再開がサポートされています。デフォルトでは、セッション ID を指定した SSL ハンドシェイクが成功すると、そのセッションのキャッシュデータが作成されます。新たな SSL ハンドシェイクの実行で使用できるセッションキャッシュデータがある場合、SSL ライブラリでは自動的にそのデータが使用されます。</p>
        <p>詳細については、<a href="../../../Api/HtmlNX/classnn_1_1ssl_1_1_connection.html">API リファレンスで nn::ssl::Connection</a> の説明を参照してください。</p>
        <h3 id="Anchor_288014117_h3_5">制限事項</h3>
        <ul>
          <li>アプリケーションでは、最大で 8 個の SSL 接続を同時に作成できます。</li>
        </ul>
        <p>
          <br />
        </p>
      </div>
    </div>
  </div>
</div>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank">';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__ssl__Initialize', '../../../Api/HtmlNX/namespacenn_1_1ssl.html#aaa943d1a4363d560d45d53dfa2182683' )
SetUrl( 'ApiLink_nn__ssl__Finalize', '../../../Api/HtmlNX/namespacenn_1_1ssl.html#a56d990644d149228c45f0c5ece11a9d9' )
SetUrl( 'ApiLink_nn__ssl__Context', '../../../Api/HtmlNX/classnn_1_1ssl_1_1_context.html' )
SetUrl( 'ApiLink_nn__ssl__Connection', '../../../Api/HtmlNX/classnn_1_1ssl_1_1_connection.html' )
SetUrl( 'ApiLink_nn__ssl__Connection__Destroy', '../../../Api/HtmlNX/classnn_1_1ssl_1_1_connection.html#a3c99c604e624efa732a1a983b23e9393' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
