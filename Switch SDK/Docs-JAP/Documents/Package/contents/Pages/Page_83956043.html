<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>アサインユーティリティー</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- アサインユーティリティー -->
<div class="pagetitle" id="PageId_83956043">アサインユーティリティー</div>
<div class="text_separate">
<p>アサインユーティリティー(%NINTENDO_SDK_ROOT%\Tools\Graphics\3dTools\3dIntermediateFileAssignUtility.exe)の使用方法と注意事項を説明します。</p>
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_83956043_h1_1">概要</a>
    </li>
    <li>
      <a href="#Anchor_83956043_h1_2">コマンドラインオプション</a>
    </li>
    <li>
      <a href="#Anchor_83956043_h1_3">機能</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83956043_h2_1">モデルのシェーダー割り当て</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_2">オリジナルマテリアルアニメーションからアニメーションカーブの生成</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_3">モデル、テクスチャパターンアニメーション、マテリアルアニメーションごとの追加参照パスの割り当て</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_4">親マテリアルの割り当て</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_5">親マテリアルの適用</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_6">マテリアル参照時の動作の割り当て</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83956043_h1_4">利用例</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83956043_h2_7">モデルの新規シェーダー割り当て</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_8">モデルの特定のマテリアルにのみ新規シェーダー割り当て</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_9">モデルのシェーダー割り当ての更新</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_10">オリジナルマテリアルアニメーションからアニメーションカーブの生成</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_11">モデルごとの追加参照パスの割り当て</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_12">親マテリアルの割り当て</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_13">親マテリアルの割り当ての解除</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_14">親マテリアルの適用</a>
      </li>
      <li>
        <a href="#Anchor_83956043_h2_15">処理の並列実行</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_83956043_h1_5">制限事項</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_83956043_h2_16">シェーダー定義中間ファイルのテキスト中間ファイル（fsda）</a>
      </li>
    </ul>
  </ul>
</p>
<h1 id="Anchor_83956043_h1_1">概要</h1>
<p>中間ファイルに対してコマンドラインから各種割り当てを行います。</p>
<ul>
  <li>モデル中間ファイル（.fmda、.fmdb）に対してシェーダー定義ファイル（.fsdb）からシェーダーの割り当てを行います。</li>
  <li>シェーダーパラメーターアニメーションなどのオリジナルマテリアルアニメーションからアニメーションカーブを生成します。</li>
  <li>モデル、テクスチャパターンアニメーション、マテリアルアニメーションごとの追加参照パスを割り当てます。</li>
</ul>
<h1 id="Anchor_83956043_h1_2">コマンドラインオプション</h1>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe [--version] [-h] [-s] [-j &quot;&quot;] [--job-list &quot;&quot;] [--args-file &quot;&quot;]
[assign [--shader &quot;&quot;] [[--shading-model &quot;&quot;] | [--shading-model-index &quot;&quot;]]  [--material &quot;&quot;] [-f] [--keep-existing-values] [中間ファイル(.fmd .fma .fsp .fcl .fts)] [-o &quot;&quot;] [--disable-file-info]]  | 
[update-model [--shader-path &quot;&quot;] [-t] [モデル中間ファイル(.fmd)] [-o &quot;&quot;] [--disable-file-info]]  | 
[update-animation [--shader &quot;&quot;] [--shading-model &quot;&quot;] [-t] [シェーダーパラメーターアニメーション中間ファイル(.fma .fsp .fcl .fts)] [-o &quot;&quot;] [--disable-file-info]]  | 
[assign-search-path [--search-path &quot;&quot;] ... [-r] [中間ファイル(.fmd)] [-o &quot;&quot;] [--disable-file-info]] 
[assign-parent-material [--parent-material-assign &quot;&quot;] [--parent-material-path &quot;&quot;] ... [中間ファイル(.fmd)] [-o &quot;&quot;] [--disable-file-info]] 
[apply-parent-material [--shader-path &quot;&quot;] [--parent-material-path &quot;&quot;] ... [中間ファイル(.fmd)] [-o &quot;&quot;] [--disable-file-info]] 
[assign-material-reference-behavior [--shader-path &quot;&quot;] [--material-reference-behavior-assign &quot;&quot;] [--material-reference-sampler-behavior-assign &quot;&quot;] ... [中間ファイル(.fmd)] [-o &quot;&quot;] [--disable-file-info]] </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <strong>--args-file &quot;&quot;</strong>
</p>
<p>引数ファイルを指定します。<br />引数ファイルに記述した内容を、引数として指定できます。&nbsp;<br />引数ファイルは複数行に渡って各オプションを記述できます。&nbsp;<br />行頭に # がある行はコメントとして扱います。&nbsp;<br />オプション値指定の &quot;&quot; によるエスケープに改行を含めることはできません。</p>
<p>
  <strong>--job-list &quot;&quot;</strong>
</p>
<p>ジョブリストファイルを指定します。<br />ジョブリストを使用すると一つ以上の処理を実行できます。<br />ジョブリストファイルの各行に記述した内容を、各処理に対する引数として指定できます。&nbsp;<br />行頭に # がある行はコメントとして扱います。&nbsp;<br />ジョブリスト内で --silent, --jobs は指定できません。</p>
<p>
  <strong>--version</strong>
</p>
<p>バージョン情報を表示します。</p>
<p>
  <strong> -h --help</strong>
</p>
<p>ヘルプを表示します。</p>
<p>
  <strong> -s --silent</strong> 　</p>
<p>処理中のメッセージ表示を抑制します。</p>
<p>
  <strong>-j &quot;&quot; --jobs &quot;&quot;</strong>
</p>
<p>実行ジョブ数を指定します。</p>
<p>
  <strong>--disable-file-info</strong>
</p>
<p>中間ファイルを更新する際に &lt;file_info&gt; を更新しません。&nbsp;</p>
<p>
  <strong>assign</strong>&nbsp;</p>
<p>モデルやシェーダーパラメーターアニメーションにシェーダーを割り当てるサブコマンドです。<br />対応する中間ファイル: fmd、fma、fsp、fcl、fts</p>
<p>
  <strong>--shader &quot;&quot;</strong> 　</p>
<p>シェーダーを割り当てる際のシェーダー定義ファイルを指定します。</p>
<p>
  <strong>--shading-model &quot;&quot;</strong> 　</p>
<p>シェーダーを割り当てる際のシェーディングモデルを指定します。</p>
<p>
  <strong>--shading-model-index &quot;&quot;</strong>&nbsp;　</p>
<p>シェーダーを割り当てる際のシェーディングモデルをインデックスで指定します。</p>
<p>
  <strong>--material &quot;&quot;</strong>
</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>このオプションは NintendoSDK 4.0.0 以降で利用可能です。</p>
  </div>
</div>
<p>シェーダーを割り当てるマテリアル名を指定します。ワイルドカードを使用することができます。該当するマテリアルがない場合は何もしません。省略した場合はすべてのマテリアルにシェーダーを割り当てます。</p>
<p>対応する中間ファイル: fmd</p>
<p>
  <strong>-f --force</strong> 　</p>
<p>シェーダーを割り当てる際に、既に割り当て済みであっても強制的に割り当て直します。</p>
<p>
  <strong>--keep-existing-values</strong>
</p>
<!--Remove-->
<p>
  <br />
</p>
<p>シェーダーを割り当てる際に、入力ファイルに存在する ID と型が同じシェーダーパラメーターの値を維持します。</p>
<p>
  <strong>update-model</strong>
</p>
<p>モデルのシェーダー割り当てを更新するサブコマンドです。</p>
<p>対応する中間ファイル: fmd</p>
<p>
  <strong>update-animation</strong>
</p>
<p>アニメーションのシェーダー定義に従いカーブの型の修正を試みるサブコマンドです。<br />対応する中間ファイル: fma、fsp、fcl、fts</p>
<p>
  <strong>--shader-path &quot;&quot;</strong> 　</p>
<p>シェーダー定義ファイルのあるフォルダーを指定します。</p>
<p>
  <strong> -t --test</strong> 　</p>
<p>シェーダー割り当ての更新をテストします。</p>
<p>
  <strong>assign-search-path</strong>&nbsp;　</p>
<p>3DEditor で使用するモデル、テクスチャパターンアニメーション、マテリアルアニメーションごとの追加参照パスを割り当てるサブコマンドです。</p>
<p>
  <strong>--search-path &quot;&quot;</strong>
</p>
<p>3DEditor で使用するモデル、テクスチャパターンアニメーション、マテリアルアニメーションごとの追加参照パスを指定します。<br />オプションは複数回指定できます。<br />一回も指定しない場合、追加参照パスは削除されます。<br />パス区切り文字のバックスラッシュ(\)はスラッシュ(/)に置換されます。</p>
<p>
  <strong>--search-paths &quot;&quot;</strong>
</p>
<p>--search-path のエイリアスです。<br />廃止予定です。<br />--search-path と同時に指定することはできません。</p>
<p>
  <strong>--parent-material-path &quot;&quot;</strong>
</p>
<p>親マテリアル参照フォルダーパスを指定します。指定したフォルダー以下のサブフォルダーも探索パスに含まれます。セミコロン区切りで複数のパスを指定できます。また、オプションは複数回指定することができます。</p>
<p>
  <strong> -r --recursive</strong> 　</p>
<p>3DEditor で参照ファイルを検索する際に追加参照パスのサブフォルダー以下も検索します。</p>
<p>
  <strong> -o &quot;&quot; --output &quot;&quot;</strong>
</p>
<p>出力ファイルを指定します。本オプションを指定しない場合、処理するファイルを上書きします。apply-parent-material 利用時は出力フォルダーのパスを指定することもできます。その場合は出力フォルダーに入力ファイルと同名のファイルが出力されます。</p>
<p>
  <strong>assign-parent-material</strong>
</p>
<p>マテリアル参照で利用する親マテリアルを割り当てるサブコマンドです。</p>
<p>対応する中間ファイル: fmd</p>
<div class="note_new">
  <div class="note_new_left">注意：</div>
  <div class="note_new_right">
    <p>assign-parent-material は試験運用中の機能です。今後予告なく仕様や動作内容が変更される場合があります。</p>
  </div>
</div>
<p>
  <strong>--parent-material-assign &quot;&quot;</strong>
</p>
<p>割り当てる親マテリアルと割り当て先を指定します。このオプションにはいくつかのサブオプションを指定します。</p>
<p>サブオプションについては <a href="#Anchor_83956043_AssignParentMaterial">親マテリアルの割り当て</a>&nbsp;を参照してください。&nbsp;</p>
<p>
  <strong>apply-parent-material</strong>
</p>
<p>マテリアル参照情報を解決して親マテリアルの設定をマテリアルに適用するサブコマンドです。</p>
<p>対応する中間ファイル: fmd</p>
<div class="note_new">
  <div class="note_new_left">注意：</div>
  <div class="note_new_right">
    <p>apply-parent-material は試験運用中の機能です。今後予告なく仕様や動作内容が変更される場合があります。</p>
  </div>
</div>
<p>
  <strong>assign-material-reference-behavior</strong>
</p>
<p>マテリアル参照時の各シェーダーパラメーター等の動作を割り当てるサブコマンドです。</p>
<p>対応する中間ファイル: fmd</p>
<div class="note_new">
  <div class="note_new_left">注意：</div>
  <div class="note_new_right">
    <p>assign-material-reference-behavior は試験運用中の機能です。今後予告なく仕様や動作内容が変更される場合があります。</p>
  </div>
</div>
<p>
  <strong>--material-reference-behavior-assign &quot;&quot;</strong>
</p>
<p>割り当て対象のマテリアルやマテリアル参照時の動作を指定します。</p>
<p>サブオプションについては <a href="#Anchor_83956043_AssignMaterialReferenceBehavior">マテリアル参照時の動作の割り当て</a> を参照してください。</p>
<p>
  <strong>--material-reference-sampler-behavior-assign &quot;&quot;</strong>
</p>
<p>割り当て対象のマテリアルやマテリアル参照時のサンプラーについての動作を指定します。</p>
<p>サブオプションについては&nbsp;<a href="#Anchor_83956043_AssignMaterialReferenceBehavior">マテリアル参照時の動作の割り当て</a>&nbsp;を参照してください。</p>
<h1 id="Anchor_83956043_h1_3">機能</h1>
<p>アサインユーティリティーの機能について説明します。</p>
<h2 id="Anchor_83956043_h2_1">モデルのシェーダー割り当て</h2>
<p>assign サブコマンドにより、モデル中間ファイル（.fmda、.fmdb）に対してシェーダー定義ファイル（.fsdb）を参照してシェーダーの割り当てを行います。</p>
<ul>
  <li>モデル中間ファイルのマテリアルに &lt;shader_assign&gt; が存在しない場合に、シェーダー定義ファイルの情報をもとに割り当てを行います。<ul><li>&lt;sampler_assign&gt; にはシェーダー定義の &lt;sampler_var&gt; と hint が一致する&nbsp;&lt;sampler&gt; を割り当てます。</li><li>&lt;attrib_assign&gt; にはシェーダー定義の &lt;attrib_var&gt; と hint が一致する &lt;vtx_attrib&gt; を割り当てます。</li><li>&lt;shader_param&gt; にはシェーダー定義の &lt;uniform_var&gt; と hint が一致する &lt;original_color&gt;、&lt;original_texsrt&gt; を割り当てます。</li></ul></li>
  <li>シェーダー定義ファイルの &lt;interleave_array&gt; に従い、モデル中間ファイルの頂点データの &lt;vtx_buffer_array&gt; を修正します。</li>
  <li>マテリアルごとに異なるシェーダー定義、シェーディングモデルを割り当てることはできません。</li>
  <li>割り当て済みのモデルに対しては処理を行いません。強制的に割り当て直す場合には --force（-f）オプションを付加します。</li>
</ul>
<p>update-model サブコマンドにより、モデルのシェーダー割り当てを更新します。</p>
<ul>
  <li>モデル中間ファイルの頂点情報が新たに追加や削除された場合、シェーダー割り当ての更新時に自動で頂点割り当てを修正します。</li>
  <li>シェーダーパラメーターの型が変更された場合に、変更が同種類の型だった場合は以前の値を引き継ぎます。</li>
</ul>
<h2 id="Anchor_83956043_h2_2">オリジナルマテリアルアニメーションからアニメーションカーブの生成</h2>
<p>シェーダーパラメーターアニメーション（カラーアニメーション、テクスチャ SRT アニメーションを含む）について、 DCC ツールから出力されたカラーアニメーション、テクスチャ SRT アニメーションのオリジナルデータからシェーダー定義ファイル（.fsdb）を参照してアニメーションカーブを生成します。</p>
<ul>
  <li>生成済みのアニメーションカーブが無い場合にオリジナルアニメーションからアニメーションカーブを生成します。</li>
  <li>アニメーションカーブを強制的に生成し直す場合には --force（-f）オプションを付加します。その際、既に存在するアニメーションカーブは削除されます。</li>
  <li>update-animation サブコマンドにより、シェーダー定義の Unform 変数の型と対応するアニメーションカーブの型が異なる場合に、同種類の型であればカーブの型の修正を行います。</li>
</ul>
<h2 id="Anchor_83956043_h2_3">モデル、テクスチャパターンアニメーション、マテリアルアニメーションごとの追加参照パスの割り当て</h2>
<p>assign-search-path サブコマンドにより、3DEditor で使用するモデル、テクスチャパターンアニメーション、マテリアルアニメーションごとの<a href="../Pages/Page_83955519.html">追加参照パス</a>の割り当てを行います。</p>
<p>--recursive（-r）オプションを指定すると、3DEditor で参照ファイルを検索する際に追加参照パスのサブフォルダー以下も検索します。</p>
<p>
  <a name="Anchor_83956043_AssignParentMaterial"></a>
</p>
<h2 id="Anchor_83956043_h2_4">親マテリアルの割り当て</h2>
<p>assign-parent-material サブコマンドにより、マテリアル参照で利用する親マテリアルの割り当てを行います。</p>
<h3 id="Anchor_83956043_h3_1">指定方法</h3>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>assign-parent-material [--parent-material-assign &quot;[--material &lt;material-name&gt;] --parent-material &lt;material-name&gt; [--parent-model &lt;file-path&gt;]&quot;] ... [中間ファイル(.fmd)] [-o &quot;&quot;] [--parent-material-path &lt;path&gt;] [--disable-file-info]] </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>--parent-material-assign は複数回指定可能です。</p>
<h3 id="Anchor_83956043_h3_2">サブオプション</h3>
<p>
  <strong>--material &quot;&quot;</strong>
</p>
<p>親マテリアルを割り当てるマテリアルの名前を指定します。省略した場合は、全てのマテリアルに割り当てます。</p>
<p>
  <strong>--parent-model &quot;&quot;</strong>
</p>
<p>割り当てる親マテリアルを持つモデル中間ファイルのパスを指定します。省略した場合は、入力ファイルが指定されます。</p>
<p>
  <strong>--parent-material &quot;&quot;</strong>
</p>
<p>割り当てる親マテリアルの名前を指定します。空文字を指定した場合は、マテリアルに設定されている親マテリアルがすべて削除されます。</p>
<h2 id="Anchor_83956043_h2_5">親マテリアルの適用</h2>
<p>apply-parent-material サブコマンドにより、マテリアル参照情報を解決して、親マテリアルの設定を指定したマテリアルに適用します。親マテリアル適用時の具体的な参照解決の仕様については<a href="../Pages/Page_193043301.html#Anchor_193043301_ApplyParentMaterial">親マテリアルの適用仕様とマテリアルの多重参照</a>を参照してください。</p>
<p>最終的にゲームアプリケーションが参照するバイナリーリソースにはマテリアル参照情報は残らないため、<a href="../Pages/Page_83955997.html">3D バイナリーコンバーター</a>&nbsp;でバイナリーリソースに変換する前にこの機能を使い、マテリアル参照情報を適用する必要があります。</p>
<h2 id="Anchor_83956043_h2_6">
  <a name="Anchor_83956043_AssignMaterialReferenceBehavior"></a>マテリアル参照時の動作の割り当て</h2>
<p>assign-material-reference-behavior サブコマンドにより、マテリアル参照時の各シェーダーパラメーターの動作を割り当てます。</p>
<h3 id="Anchor_83956043_h3_3">指定方法</h3>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>assign-material-reference-behavior [--material-reference-behavior-assign &quot;--material &lt;material-name&gt; --type &lt;type-name&gt; --id &lt;id-name&gt; --sampler &lt;sampler-name&gt; --child-restriction &lt;restriction&gt; --value &lt;value&gt; --unassigned-param-only&quot;] [--material-reference-sampler-behavior-assign &quot;--material &lt;material-name&gt; --sampler &lt;sampler-name&gt; --is-sampler-required &lt;is-required&gt; --sampler-structure-restriction &lt;sampler-structure-restriction&gt; --unassigned-param-only&quot;] ... [中間ファイル(.fmd)] [-o &quot;&quot;] [--disable-file-info]] </pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_83956043_h3_4">サブオプション</h3>
<p>
  <strong>--material &quot;&quot;</strong>
</p>
<p>設定対象となるマテリアルの名前を指定します。省略した場合は全マテリアルが対象となります。</p>
<p>
  <strong>--type &quot;&quot;</strong>
</p>
<p>設定対象となるモデル中間ファイルの属性の種類を指定します。省略されたときは種類にかかわらず --id や --sampler が一致する全ての属性に設定します。</p>
<p>以下の値が指定可能です。</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>値</th>
      <th>設定対象となるモデル中間ファイルの属性</th>
    </tr>
    <tr>
      <td>AttribAssign</td>
      <td>&lt;attrib_assign&gt;</td>
    </tr>
    <tr>
      <td>RenderInfo</td>
      <td>&lt;render_info&gt;</td>
    </tr>
    <tr>
      <td>SamplerAssign</td>
      <td>&lt;sampler_assign&gt;</td>
    </tr>
    <tr>
      <td>ShaderOption</td>
      <td>&lt;shader_option&gt;</td>
    </tr>
    <tr>
      <td>ShaderParam</td>
      <td>&lt;shader_param&gt;</td>
    </tr>
    <tr>
      <td>Sampler</td>
      <td>&lt;sampler&gt;</td>
    </tr>
  </tbody>
</table>
<p>
  <strong>--id &quot;&quot;</strong>
</p>
<p>設定対象となる属性の ID を指定します。省略されたときは全ての属性に設定します。</p>
<p>
  <strong>--sampler &quot;&quot;</strong>
</p>
<p>設定対象となるサンプラーの名前を指定します。省略されたときは全てのサンプラーに設定します。</p>
<p>
  <strong>--child-restriction &quot;&quot;</strong>
</p>
<p>
  <span style="color: rgb(51,51,51);">子マテリアル自身で指定したシェーダーパラメーターの値を使用するように強制する場合は ForceOverride、 子マテリアルで対象マテリアルのシェーダーパラメーターの値を使用するように強制する場合は ForceRefer、 強制しない場合は None を指定します。</span>
</p>
<p>
  <strong>--value &quot;&quot;</strong>
</p>
<p>
  <span style="color: rgb(51,51,51);">対象マテリアル自身で指定したシェーダーパラメーターの値を使用する場合は Override、 対象マテリアルで親マテリアルのシェーダーパラメーターの値を使用する場合は Refer、 対象マテリアルでシェーダー定義のデフォルト値を使用する場合は Default を指定します。</span>
</p>
<p>
  <strong>--is-sampler-required &quot;&quot;</strong>
</p>
<p>サンプラーを子マテリアルで必須のサンプラーに設定する場合は true、子マテリアルで非必須のサンプラーに設定する場合は false を指定します。</p>
<p>
  <strong>--sampler-structure-restriction&nbsp;&quot;&quot;</strong>
</p>
<p>子マテリアルでのサンプラー構成の制限を設定します。以下の値が設定可能です。</p>
<table class="wrapped" style="margin-left: 1.5em;">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>値</th>
      <th>子マテリアルのサンプラー構成制限</th>
    </tr>
    <tr>
      <td>None</td>
      <td>制限しない</td>
    </tr>
    <tr>
      <td>DisallowAddOwnSampler</td>
      <td>子マテリアル独自のサンプラー追加を許可しない</td>
    </tr>
  </tbody>
</table>
<p>
  <strong>--unassigned-param-only</strong>
</p>
<!--Remove-->
<p>マテリアル参照時の動作が未割り当てのパラメーターのみを対象とする場合に指定します。</p>
<h1 id="Anchor_83956043_h1_4">利用例</h1>
<p>アサインユーティリティーの利用方法について説明します。</p>
<h2 id="Anchor_83956043_h2_7">
  <a name="Anchor_83956043_AssignModelShaderExample"></a>モデルの新規シェーダー割り当て</h2>
<p>シェーダー割り当てが行われていない input.fmdb に対して、shader.fsdb の「simple」シェーディングモデルを割り当てた output.fmdb を生成します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign --shader shader.fsdb --shading-model simple input.fmdb -o output.fmdb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>引数ファイルを使用するには、例えば下記のようなファイル args.txt を用意した場合、</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>assign
--shader shader.fsdb
--shading-model simple
input.fmdb
-o output.fmdb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>次のように実行できます。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe --args-file args.txt</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83956043_h2_8">モデルの特定のマテリアルにのみ新規シェーダー割り当て</h2>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>この機能は NintendoSDK 4.0.0 以降で利用可能です。</p>
  </div>
</div>
<p>シェーダー割り当てが行われていない input.fmdb の接頭辞「A_」のつくマテリアルに対して、shader.fsdb の「simple」シェーディングモデルを割り当てた output.fmdb を生成します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign --shader shader.fsdb --shading-model simple input.fmdb --material &quot;A_*&quot; -o output.fmdb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83956043_h2_9">モデルのシェーダー割り当ての更新</h2>
<p>シェーダー割り当て済みの input.fmdb に対して、shader フォルダー内に存在するシェーダー定義ファイルを使用してシェーダー割り当ての更新を行い、output.fmdb を生成します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe update-model --shader-path shader input.fmdb -o output.fmdb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83956043_h2_10">オリジナルマテリアルアニメーションからアニメーションカーブの生成</h2>
<p>input.fclb に含まれるオリジナルマテリアルアニメーションから shader.fsdb の「simple」シェーディングモデルをもとにアニメーションカーブを生成し、output.fclb を生成します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign --shader shader.fsdb --shading-model simple input.fclb -o output.fclb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83956043_h2_11">モデルごとの追加参照パスの割り当て</h2>
<p>input.fmdb に対して、相対パス &quot;..\textures&quot; および &quot;..\..\textures&quot; をモデルごとの追加参照パスに指定し、output.fmdb を生成します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign-search-path --search-path &quot;..\textures&quot; --search-path &quot;..\..\textures&quot; input.fmdb -o output.fmdb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83956043_h2_12">
  <a name="Anchor_83956043_AssignParentMaterialExample"></a>親マテリアルの割り当て</h2>
<p>input.fmdb の mat_a マテリアルに parent.fmdb の parent_mat マテリアルを親マテリアルとして割り当てます。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign-parent-material input.fmdb --parent-material-assign &quot;--material mat_a --parent-model ./parent.fmdb --parent-material parent_mat&quot;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83956043_h2_13">親マテリアルの割り当ての解除</h2>
<p>input.fmdb の mat_a マテリアルに設定されている親マテリアルの割り当てをすべて解除します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign-parent-material input.fmdb --parent-material-assign &quot;--material mat_a --parent-material ''&quot;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>input.fmdb のすべてのマテリアルに設定されている親マテリアルの割り当てをすべて解除します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign-parent-material input.fmdb --parent-material-assign &quot;--parent-material ''&quot;</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83956043_h2_14">
  <a name="Anchor_83956043_ApplyParentMaterialExample"></a>親マテリアルの適用</h2>
<p>shader フォルダー内に存在するシェーダー定義ファイルと、../../ParentMaterials フォルダー以下の親マテリアルを使用して、target.fmdb のマテリアル参照情報を解決して、親マテリアルの設定が反映された結果を tmp/target.fmdb に保存します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe apply-parent-material target.fmdb --shader-path shader -o tmp/target.fmdb --parent-material-path ../../ParentMaterials</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_83956043_h2_15">処理の並列実行</h2>
<p>例えば、複数のモデルに追加参照パスを割り当てる場合、下記のように --job-list オプションを使用することで、内部で複数のモデルに対しての処理が並列実行されます。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dIntermediateFileAssignUtility.exe assign-search-path --job-list=JobList.txt</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>--search-path &quot;..\textures&quot; --search-path &quot;..\..\textures&quot; inputA.fmdb -o outputA.fmdb
--search-path &quot;..\textures&quot; --search-path &quot;..\..\textures&quot; inputB.fmdb -o outputB.fmdb
--search-path &quot;..\textures&quot; --search-path &quot;..\..\textures&quot; inputC.fmdb -o outputC.fmdb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_83956043_h1_5">制限事項</h1>
<p>アサインユーティリティーの制限事項について説明します。</p>
<h2 id="Anchor_83956043_h2_16">シェーダー定義中間ファイルのテキスト中間ファイル（fsda）</h2>
<p>シェーダー定義中間ファイルのテキスト中間ファイル（fsda）はサポートされていません。</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
