<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>NX 開発カードへの書き込み</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- NX 開発カードへの書き込み -->
<div class="pagetitle" id="PageId_166051528">NX 開発カードへの書き込み</div>
<div class="text_separate">
<p>開発した NX アプリケーションは NX 開発カードに書き込むことで、ホスト PC と接続せずに動作させることができます。</p>
<p>ここでは、開発した NX アプリケーションを NX 開発カードに書き込み、NX 開発機 (SDEV や EDEV) で実行する手順を説明します。</p>
<div class="warn_new">
  <div class="warn_new_left">警告：</div>
  <div class="warn_new_right">
    <p>現在、多くのサンプルプログラムは以下の手順で NX 開発カードに書き込んだ場合、正常に実行できないか、正常に実行できたとしても画面になにも表示されません。<br />サンプルプログラムを利用して以下の手順を確認する場合は、以下に示すサンプルプログラムをお使いください。</p>
    <ul>
      <li>GfxShaderCompile</li>
      <li>GfxSimple</li>
      <li>NvnTutorial01GettingStartedWithNVN</li>
      <li>HidSimple</li>
    </ul>
  </div>
</div>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>
      <strong>NX 開発カードとは？</strong>
    </p>
    <p>NX 開発カードとは、NX 開発機 (SDEV や EDEV) で利用することのできる NX カードです。<br />詳しくは NX オーバービューの「ハードウェア」-「周辺のハードウェア」や「開発環境」を参照してください。&nbsp;</p>
    <p>
      <br />
    </p>
    <p>
      <strong>マルチアプリケーションカードとは？</strong>
    </p>
    <p>NX Addon 5.2.0 から NX 開発カードに複数のアプリケーションを書き込むことが出来るようになります。<br />この複数のアプリケーションが書き込まれた NX 開発カードのことをマルチアプリケーションカードと呼びます。</p>
    <p>
      <br />NX Addon 5.2.0 からマルチアプリケーションカードを作成する事は出来ますが、まだ製品として提出することはできません。</p>
  </div>
</div>
<div class="tip">
  <div class="tip_left">参考：</div>
  <div class="tip_right">
    <p>
      <strong>NX 開発カードに書き込んだアプリケーションが実行できない場合</strong>
    </p>
    <p>作成したアプリケーションが以下の条件を満たしているか確認してください。</p>
    <ul>
      <li>起動時にプログラム引数が与えられなくてもアプリケーションが想定通りに動作すること<br /><ul><li>現在、以下の手順でインストールしたアプリケーションを実行する際には、プログラム引数が何も指定されません。</li></ul></li>
      <li>ホスト PC と通信する機能が利用できなくてもアプリケーションが想定通りに動作すること</li>
    </ul>
  </div>
</div>
<h2 id="Anchor_166051528_h2_1">書き込みできる開発機</h2>
<p>NX 開発カードへの書き込みに対応している開発機は以下の通りです。</p>
<table class="wrapped" style="margin-left: 1.5em;">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>開発機名</th>
      <th>対応しているバージョン</th>
    </tr>
    <tr>
      <td>SDEV</td>
      <td>
        <ul>
          <li>MP</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>EDEV</td>
      <td>
        <ul>
          <li>MP</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_166051528_h1_1">NX 開発カードに書き込み可能なアプリケーションイメージの作成</h1>
<p>NX アプリケーションを NX 開発カードに書き込むためには、書き込み可能なアプリケーションイメージの形式である&nbsp;<a href="../Pages/Page_107320222.html">nsp ファイル</a>を作成する必要があります。</p>
<p>nsp ファイルは、NX アプリケーションの プロジェクトプロパティ＞構成プロパティ＞全般の アプリケーションプログラムフォーマットに Nsp を指定してビルドすることで出力されます。</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>nsp ファイルは <a href="../Pages/Page_107320233.html">AuthoringTool</a> を使ってコマンドラインで作成することもできます。<br />コマンドラインを利用もしくは独自のビルドシステムを構築して nsp ファイルを作成する場合は、<a href="../Pages/Page_107320222.html">アプリケーションイメージの作成</a> や <a href="../Pages/Page_94757421.html">独自のビルドシステムを構築する</a> を参照してください。</p>
  </div>
</div>
<p>nsp ファイル作成時に与える nmeta ファイルの記述内容によって、NX 開発カードのパラメータ設定を行うことができます。<br />nmeta ファイルの書き方については&nbsp;<a href="../Pages/Page_166503043.html">こちら</a>&nbsp;を、NX 開発カードのパラメータについては&nbsp;<a href="../Pages/Page_177655843.html">こちら</a>&nbsp;を参照してください。</p>
<div class="note_new">
  <div class="note_new_left">注意：</div>
  <div class="note_new_right">
    <p>nmeta ファイルで指定した値は Home メニューや DevMenu で使用されますが、システムが自動的に値をキャッシュするため期待通りに表示されないことがあります。<br />nmeta ファイルの内容が更新されない場合は <a href="../Pages/Page_107328760.html#Anchor_107328760_invalidate-application-control-data-cache">アプリケーション管理データのキャッシュの無効化</a> を参照してください。</p>
  </div>
</div>
<p>
  <br />
</p>
<h1 id="Anchor_166051528_h1_2">アプリケーションの書き込み</h1>
<h2 id="Anchor_166051528_h2_2">準備するもの</h2>
<p>NX アプリケーションを NX 開発カードに書き込むのに必要なものは、次の 3 つです。</p>
<ul>
  <li>
    <a href="../Pages/Page_177655843.html">NX 開発カード</a>
  </li>
  <li>
    <a href="../Pages/Page_107328760.html">DevMenuCommand</a>
  </li>
  <li>
    <a href="../Pages/Page_107320466.html">RunOnTarget</a>
  </li>
</ul>
<p>DevmenuCommand と RunOnTarget は NintendoSDK NX Addon パッケージに含まれています。<br />書き込みたいアプリの速度設定・実容量などは<a href="../Pages/Page_177655843.html">こちら</a>をご参照ください。&nbsp;</p>
<p>NX 開発カードの入手に関しては、別途サポート窓口までお問い合わせください。</p>
<h2 id="Anchor_166051528_h2_3">書き込み手順</h2>
<ol>
  <li>開発機を起動し、PC と接続します。</li>
  <li>NX 開発カードをゲームカードスロットに差し込みます。<br />ラベル面が上を向いた状態で、カチッと音が鳴るまで押し込んでください。</li>
  <li>RunOnTarget と DevmenuCommand&nbsp;を利用し、NX 開発カードに NX アプリケーションを書き込みます (下記「実行コマンド」参照)。</li>
  <li>&quot;[SUCCESS]&quot; というログが出力されれば、書き込みは完了です (下記「実行ログ」参照)。</li>
</ol>
<p>
  <br />
</p>
<div class="warn_new">
  <div class="warn_new_left">警告：</div>
  <div class="warn_new_right">
    <p>書き込み中は、絶対に NX 開発カードを抜かないでください。</p>
  </div>
</div>
<p>
  <br />
</p>
<h3 id="Anchor_166051528_h3_1">実行コマンド</h3>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>%NINTENDO_SDK_ROOT%\Tools\CommandLineTools\RunOnTarget.exe ^
%NINTENDO_SDK_ROOT%\TargetTools\NX-NXFP2-a64\DevMenuCommand\Release\DevMenuCommand.nsp ^
-- gamecard write &quot;C:\application.nsp&quot;</pre>
  </div>
</div>
<ul>
  <li>書き込みを行う nsp のフルパスを指定してください。</li>
  <li>詳しくは&nbsp;<a href="../Pages/Page_107328760.html">DevMenuCommand</a>を参照してください。</li>
</ul>
<h3 id="Anchor_166051528_h3_2">実行ログ</h3>
<p>次のような実行ログが表示されます。</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>---- given Parameter ----
target nsp : C:/application.nsp

---- Card Parameter ----
CardSize     : 1 GB
WriteSize    : 4107264 Byte

---- Write Start ----
112128 / 4107264
4044800 / 4107264
Write rest sectors.
Finished
[SUCCESS]</pre>
  </div>
</div>
<ul>
  <li>CardSize は nsp に指定された Card のサイズ、WriteSize は書き込みを行うサイズが表示されます。</li>
</ul>
<p>
  <br />
</p>
<h1 id="Anchor_166051528_h1_3">マルチアプリケーションカードの作成</h1>
<h2 id="Anchor_166051528_h2_4">準備するもの</h2>
<p>準備するものは「アプリケーションの書き込み」に追加で、アップロード用 nsp ファイルが必要になります。</p>
<p>アップロード用 nsp ファイルの作り方は&nbsp;<a href="../Pages/Page_298165757.html">マルチアプリケーションカード</a>&nbsp;を参照してください。</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>NX Addon 5.2.0 の場合はなくてもマルチアプリケーションカードを作成することが出来ます。</p>
  </div>
</div>
<p>
  <br />
</p>
<h3 id="Anchor_166051528_h3_3">実行コマンド</h3>
<div class="expand-container" id="expander-166051528-1">
  <div class="expand-control" id="expander-control-166051528-1">
    <span class="expand-control-icon collapsed-icon"> </span>
    <span class="expand-control-text">NX Addon 5.2.0 の場合はこちら</span>
  </div>
  <div class="expand-content expand-hidden" id="expander-content-166051528-1">
    <div style="border-width: 1px;" class="preformatted panel">
      <div class="preformattedContent panelContent">
        <pre>%NINTENDO_SDK_ROOT%\Tools\CommandLineTools\RunOnTarget.exe ^
%NINTENDO_SDK_ROOT%\TargetTools\NX-NXFP2-a64\DevMenuCommand\Release\DevMenuCommand.nsp ^
-- gamecard write &quot;C:\application0.nsp&quot; &quot;C:\application1.nsp&quot;</pre>
      </div>
    </div>
    <ul>
      <li>書き込みを行う nsp のフルパスを列挙してください。<ul><li>アプリケーションとパッチの nsp ファイルを列挙することが出来ます。</li></ul></li>
      <li>マルチアプリケーションカードを挿入すると、このコマンド実行時に列挙した順番通りに DevMenu や HomeMenu にアプリケーションが並びます。</li>
      <li>詳しくは&nbsp;<a href="../Pages/Page_107328760.html">DevMenuCommand</a>を参照してください。</li>
    </ul>
  </div>
</div>
<p>
  <br />
</p>
<p>マルチアプリケーションカードを書き込む場合は、アップロード用 nsp ファイルと含めるアプリケーションの nsp ファイルが必要になります。</p>
<p>含めるアプリケーションはアップロード用 nsp ファイルを作成したときと同じものを同じ順番で指定する必要があります。</p>
<p>アップロード用 nsp を作成するときに --nsp-list-file オプションで指定したテキストファイルを指定してマルチアプリケーションカードを書き込みます。</p>
<p>
  <br />
</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>%NINTENDO_SDK_ROOT%\Tools\CommandLineTools\RunOnTarget.exe ^
%NINTENDO_SDK_ROOT%\TargetTools\NX-NXFP2-a64\DevMenuCommand\Release\DevMenuCommand.nsp ^
-- gamecard write --multi-application-card &quot;C:\mac.nsp&quot; --nsp-list-file &quot;C:\multi-application-card-file-list.txt&quot;</pre>
  </div>
</div>
<p>
  <br />
</p>
<h3 id="Anchor_166051528_h3_4">実行ログ</h3>
<p>次のような実行ログが表示されます。</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>---- given Parameter ----
application nsp : C:/application0.nsp
application nsp : C:/application1.nsp
multi application card nsp : C:/mac.nsp

---- Card Parameter ----
CardSize     : 2 GB
WriteSize    : 44294656 Byte

---- Write Start ----
512 / 44294656 (0.0%)
260096 / 44294656 (0.6%)
8316928 / 44294656 (18.8%)
16705536 / 44294656 (37.7%)
25094144 / 44294656 (56.7%)
33482752 / 44294656 (75.6%)
41871360 / 44294656 (94.5%)
44232704 / 44294656 (99.9%)
Write rest sectors.
44294656 / 44294656 (100.0%)
Finished
[SUCCESS]</pre>
  </div>
</div>
<ul>
  <li>CardSize は与えられた nsp の中で一番大きな Card のサイズが表示されます。</li>
  <li>WriteSize は書き込みを行うサイズが表示されます。</li>
</ul>
<h1 id="Anchor_166051528_h1_4">初期化手順</h1>
<p>DevMenuCommand を使用して GameCard を初期化することも可能です。</p>
<ol>
  <li>開発機を起動し、PC と接続します。</li>
  <li>NX 開発カードをゲームカードスロットに差し込みます。<br />ラベル面が上を向いた状態で、カチッと音が鳴るまで押し込んでください。</li>
  <li>RunOnTarget と DevmenuCommand&nbsp;を利用し、NX 開発カードに NX アプリケーションを書き込みます (下記「実行コマンド」参照)。</li>
  <li>&nbsp;&quot;[SUCCESS]&quot; というログが出力されれば、書き込みは完了です (下記「実行ログ」参照)。</li>
</ol>
<h3 id="Anchor_166051528_h3_5">実行コマンド</h3>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>%NINTENDO_SDK_ROOT%\Tools\CommandLineTools\RunOnTarget.exe ^
%NINTENDO_SDK_ROOT%\TargetTools\NX-NXFP2-a64\DevMenuCommand\Release\DevMenuCommand.nsp ^
-- gamecard erase</pre>
  </div>
</div>
<h3 id="Anchor_166051528_h3_6">実行ログ</h3>
<p>次のような実行ログが表示されます。</p>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>Erase gamecard.
[SUCCESS]</pre>
  </div>
</div>
<h1 id="Anchor_166051528_h1_5">NX 開発カードに書き込んだアプリケーションの実行</h1>
<p>NX 開発カードに書き込んだ NX アプリケーションは&nbsp;&nbsp;<a href="../Pages/Page_107328771.html">DevMenu</a>&nbsp;または&nbsp;<a href="../Pages/Page_107320466.html">RunOnTarget</a>&nbsp;で実行できます。</p>
<h2 id="Anchor_166051528_h2_5">DevMenu で実行する</h2>
<p>NX 開発カードを開発機に差し込んだ状態で DevMenu の Application タブを見ると、NX 開発カード上に書き込まれたアプリケーションの アプリケーションIDが表示されます。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_310876774/125191799.jpg" width="500" class="embedded-image" />
  </span>
</p>
<p>十字ボタンの右もしくは R ボタンを押してアプリケーションの一覧画面にフォーカスを移動します。<br />起動したいアプリケーションを選択し、A ボタンを押すとアプリケーションが実行されます。</p>
<h2 id="Anchor_166051528_h2_6">RunOnTarget で実行する</h2>
<div style="border-width: 1px;" class="preformatted panel">
  <div class="preformattedContent panelContent">
    <pre>%NINTENDO_SDK_ROOT%\Tools\CommandLineTools\RunOnTarget.exe gamecard</pre>
  </div>
</div>
<p>マルチアプリケーションカードの場合、上記コマンドで実行されるのは、NX 開発カードに入っているアプリケーションの内、アプリケーション一覧画面で一番上に表示されているアプリケーションです。</p>
<h2 id="Anchor_166051528_h2_7">注意点</h2>
<ul>
  <li>一度 DevMenu の Application タブに NX 開発カードに書き込まれたアプリケーションのアプリケーションIDが表示されると、NX 開発カードを抜いても表示されたままになります。これは製品のメニューの挙動と同じ挙動です。</li>
  <li>NX 開発カードに書きこまれた内容を読みだすことはできません。</li>
</ul>
<p>
  <br />
</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
