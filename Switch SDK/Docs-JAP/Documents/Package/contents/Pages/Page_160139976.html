<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>被り物</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- 被り物 -->
<div class="pagetitle" id="PageId_160139976">被り物</div>
<div class="text_separate">
<h1 id="Anchor_160139976_h1_1">被り物</h1>
<p>ここでは、被り物の作成について説明します。</p>
<h2 id="Anchor_160139976_h2_1">被り作成前の確認</h2>
<p>Mii に被り物を装着させて表示をするには、顔部分のみを表示した被り物用の顔モデルを表示する必要があります。</p>
<p>被り物用の顔モデルは、プログラマが似顔絵ライブラリを使用して表示させます。詳しくは<a href="../Pages/Page_126552992.html">顔モデル構造ページ</a>の顔モデルの種類の項目を参照してください。</p>
<p>以下に被り物用の顔モデル例を示します。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_161296499/161417249.png" width="300" class="embedded-image" />
  </span>
</p>
<p>作成する被り物は、被り物用のすべての顔モデル共通のものが前提となります。共通化にはすべての顔輪郭が被り物からはみ出ないようにする必要があります。これらを踏まえ、すべての Mii の顔輪郭モデルをサンプルとして用意しています。顔輪郭モデルは全部で 12 種類あり、Faceline_sample に保存しています。</p>
<p>顔輪郭モデルには set_hair という髪モデルの位置を示す Null があります。set_hair は髪モデルと親子関係があります。被り物はその set_hair の位置に読み込まれることになります。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_161296499/161417248.png" width="300" class="embedded-image" />
  </span>
</p>
<p>以下に、set_hair に被り物を装着した例を示します。</p>
<table class="table">
  <tbody>
    <tr>
      <th style="text-align: center;">熊の被り物</th>
      <th style="text-align: center;">ヘルメット</th>
      <th style="text-align: center;">フルフェイスのヘルメット</th>
    </tr>
    <tr>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_161296499/161417257.png" width="200" class="embedded-image" />
        </span>
      </td>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_161296499/161417259.png" width="200" class="embedded-image" />
        </span>
      </td>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_161296499/161417258.png" width="200" class="embedded-image" />
        </span>
      </td>
    </tr>
  </tbody>
</table>
<p>&nbsp;</p>
<h2 id="Anchor_160139976_h2_2">被り物の作成</h2>
<p>ここでは、被り物の作成手順について説明します。</p>
<p>最初にデザイナーが被り物のモデルを作成し、それをプログラマが実装するという順序で説明します。</p>
<h3 id="Anchor_160139976_h3_1">被り物のモデルデータの作成（デザイナー作業）</h3>
<p>被り物は、すべてのタイプの顔輪郭に装着した時にはみ出ないようにする必要があります。被り物のピボットポイントを原点に合わせ、Faceline_sample を参考にしながら被り物を作成してください。</p>
<p>参考用に Headwear_sample を用意しています。以下、Headwear_sample のレイヤのうち３つを紹介します。これらよりも大きな被り物を作成すれば、すべての顔輪郭モデルが被り物の中に収まります。</p>
<ul>
  <li>Headgear<br />熊の被り物のサンプルです。このサンプルはすべての顔輪郭をあてはめてもはみ出しません。</li>
  <li>Helmet<br />ヘルメットのサンプルです。このサンプルはすべての顔輪郭をあてはめてもはみ出しません。</li>
  <li>Fullface<br />フルフェイスヘルメットのサンプルです。このサンプルはすべての顔輪郭を当てはめてもはみ出しません。また、鼻の高さを制御する機能を使用した場合は、鼻がはみ出すこともありません。</li>
</ul>
<p>被り物の形状によっては、すべての顔輪郭ではみ出ないようにすることが不可能な場合もあります。その場合は、アプリ開発側の判断で、特定の顔輪郭モデルごとに被り物を別々に用意することも可能です。</p>
<p>似顔絵ライブラリには、顔輪郭の番号が取得できる機能があり、その機能を使用して顔輪郭ごとに被り物を表示することができます。顔輪郭番号の取得は <span class="ApiLink_nn__mii__CharInfoAccessor__GetFacelineType">nn::mii::CharInfoAccessor::GetFacelineType</span>() を使用することで取得できます。</p>
<p>以下、注意事項を示します。</p>
<ul>
  <li>被り物は、坊主頭のサンプル Hair_Sample の髪型よりも小さくしすぎると、頭部が陥没して見える可能性があります。<br />Hair_Sample は Mii の中で頭部が最小の形状ですので、こちらを参考にしてください。</li>
  <li>ヘルメットのような被り物の場合は、下から見たときに後ろの髪の毛が見えてしまう可能性があります。<br />組み合わせる髪モデルの髪の色は取得することができないため、影のような色で表現しておくことを推奨します。<br /><span class="embedded-file-wrapper "><img src="../Attachments/Attach_161296499/161417251.png" width="300" class="embedded-image" /></span></li>
  <li>顔を覆う被り物の場合に鼻が突き出ないように調整が必要なことがあります。詳細は<a href="#Anchor_160139976_h2_4">顔を覆う被り物から鼻が突き出ないようにする方法</a>を参照してください。</li>
</ul>
<h3 id="Anchor_160139976_h3_2">被り物のモデルの表示（プログラマ作業）</h3>
<p>似顔絵ライブラリを使用して Mii の顔モデルを表示し、合わせて被り物も表示してください。</p>
<p>被り物は顔面だけの被り物用の顔モデルに装着します。被り物用の顔モデルを作成するには、<span class="ApiLink_nn__mii__CharModel">nn::mii::CharModel</span> の初期化時に渡す <span class="ApiLink_nn__mii__CharModelInfo">nn::mii::CharModelInfo</span> に設定する CreateFlag&nbsp; に <span class="ApiLink_nn__mii__CreateFlag_FaceOnly">nn::mii::CreateFlag_FaceOnly</span> を指定します。<span class="ApiLink_nn__mii__CharModel__GetDrawParam">nn::mii::CharModel::GetDrawParam</span>() で指定する <span class="ApiLink_nn__mii__CreateModelType">nn::mii::CreateModelType</span> を <span class="ApiLink_nn__mii__CreateModelType_FaceOnly">nn::mii::CreateModelType_FaceOnly</span> にすることで、顔面だけの顔モデルを表示するためのパラメータが取得できます。</p>
<p>被り物は、顔輪郭モデルに用意されている set_hair という Null を基準に装着します。set_hair は髪モデルの位置を示す Null で、<span class="ApiLink_nn__mii__CharModel__GetHatPartsTranslate">nn::mii::CharModel::GetHatPartsTranslate</span>() を使用することで、移動の情報を取得することができます。</p>
<p>顔を覆う被り物の場合に鼻が突き出できないように調整が必要なことがあります。詳細は<a href="#Anchor_160139976_h2_4">顔を覆う被り物から鼻が突き出ないようにする方法</a>を参照してください。</p>
<h2 id="Anchor_160139976_h2_3">被り物作成後の確認</h2>
<p>実際のアプリで、Mii のすべての顔輪郭に装着し、問題がないかを確認してください。</p>
<h2 id="Anchor_160139976_h2_4">顔を覆う被り物から鼻が突き出ないようにする方法</h2>
<p>フルフェイスのヘルメットのように、顔を覆う被り物の場合は鼻の種類や大きさ、位置によっては鼻が突き出してしまいます。その場合は、被り物から突き出さないように鼻を低くする必要があります。</p>
<p>以下、顔を覆う被り物用に鼻の高さを制御した例として Headgear_Sample のレイヤ nose_limit を示します。</p>
<table class="table">
  <tbody>
    <tr>
      <th style="text-align: center;">鼻の高さの制御前</th>
      <th style="text-align: center;">鼻の高さの制御後</th>
    </tr>
    <tr>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_161296499/161417260.png" width="300" class="embedded-image" />
        </span>
      </td>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_161296499/161417261.png" width="300" class="embedded-image" />
        </span>
      </td>
    </tr>
  </tbody>
</table>
<p>似顔絵ライブラリでは、鼻の高さを制御した顔モデルを生成する機能を提供しています。鼻の高さを制御した顔モデルの作成方法は、<a href="#Anchor_160139976_h3_3">鼻の高さを制御した顔モデルの表示（プログラマ作業）</a>を参照してください。</p>
<p>鼻の高さを制御する機能を使用した場合は、顔の前にある板より鼻が突き出ることはありません。鼻の高さを制御した Mii を表示させ問題が無いかを確認してください。</p>
<p>また、一番大きな鼻の高さを制御した時のサンプルを提供しています。サンプルは Headgear_Sample のレイヤ Nose_max になります。1つのレイヤに、3種類の異なる鼻の配置位置をまとめています。鼻の高さを制御する場合は、こちらも合わせて参考にしていください。</p>
<p>以下、レイヤ Nose_max で表示される3種類の鼻を別々に表示した図を示します。</p>
<table class="table">
  <tbody>
    <tr>
      <th style="text-align: center;">
        <p style="text-align: center;">nose_max_top</p>
        <p style="text-align: center;">（一番上に移動した状態）</p>
      </th>
      <th style="text-align: center;">
        <p>nose_max_default</p>
        <p style="text-align: center;">（デフォルト位置の状態）</p>
      </th>
      <th style="text-align: center;">
        <p>nose_max_bottom</p>
        <p>（一番下に移動した状態）</p>
      </th>
    </tr>
    <tr>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_161296499/161417244.png" width="200" class="embedded-image" />
        </span>
      </td>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_161296499/161417263.png" width="200" class="embedded-image" />
        </span>
      </td>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_161296499/161417262.png" width="200" class="embedded-image" />
        </span>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_160139976_h3_3">鼻の高さを制御した顔モデルの表示（プログラマ作業）</h3>
<p>鼻の高さを制御した顔モデルを作成するには、<span class="ApiLink_nn__mii__CharModel">nn::mii::CharModel</span> の初期化時に渡す <span class="ApiLink_nn__mii__CharModelInfo">nn::mii::CharModelInfo</span> に設定する CreateFlag&nbsp; に <span class="ApiLink_nn__mii__CreateFlag_NoseFlatten">nn::mii::CreateFlag_NoseFlatten</span> を指定します。</p>
<p>
  <span class="ApiLink_nn__mii__CharModel__GetDrawParam">nn::mii::CharModel::GetDrawParam</span>() で指定する <span class="ApiLink_nn__mii__CreateNoseType">nn::mii::CreateNoseType</span> を <span class="ApiLink_nn__mii__CreateNoseType_Flatten">nn::mii::CreateNoseType_Flatten</span> にすると、鼻の高さが制御された顔モデルを表示するためのパラメータが取得できます。</p>
<p>顔モデルの種類と鼻の高さに関しては<a href="../Pages/Page_126552992.html">顔モデル構造の顔モデルページ</a>にある顔モデルの種類のページも合わせて参照してください。</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank">';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__mii__CharInfoAccessor__GetFacelineType', '../../../Api/HtmlNX/classnn_1_1mii_1_1_char_info_accessor.html#abb009943072f00e4c40bb7ac6c5b2437' )
SetUrl( 'ApiLink_nn__mii__CharModel', '../../../Api/HtmlNX/classnn_1_1mii_1_1_char_model.html' )
SetUrl( 'ApiLink_nn__mii__CharModelInfo', '../../../Api/HtmlNX/classnn_1_1mii_1_1_char_model_info.html' )
SetUrl( 'ApiLink_nn__mii__CreateFlag_FaceOnly', '../../../Api/HtmlNX/namespacenn_1_1mii.html#add180c32040f53f60d61b8e71f3a20d9af3192dd68cdf25ecf6aa59cb116b3647' )
SetUrl( 'ApiLink_nn__mii__CharModel__GetDrawParam', '../../../Api/HtmlNX/classnn_1_1mii_1_1_char_model.html#afe79d1d6e4ad8519ea8a55af0259044e' )
SetUrl( 'ApiLink_nn__mii__CreateModelType', '../../../Api/HtmlNX/namespacenn_1_1mii.html#a19f550cb89b2b095417f135888953bb3' )
SetUrl( 'ApiLink_nn__mii__CreateModelType_FaceOnly', '../../../Api/HtmlNX/namespacenn_1_1mii.html#a19f550cb89b2b095417f135888953bb3abfabdee6846db8001b6f6937f0fbdaf5' )
SetUrl( 'ApiLink_nn__mii__CharModel__GetHatPartsTranslate', '../../../Api/HtmlNX/classnn_1_1mii_1_1_char_model.html#ae2ccc81856b78790420c250726c5353b' )
SetUrl( 'ApiLink_nn__mii__CreateFlag_NoseFlatten', '../../../Api/HtmlNX/namespacenn_1_1mii.html#add180c32040f53f60d61b8e71f3a20d9a9b828651aefa5161b86909bf054a9996' )
SetUrl( 'ApiLink_nn__mii__CreateNoseType', '../../../Api/HtmlNX/namespacenn_1_1mii.html#ab1d08064d4a8b9788b5b123bd6a22b21' )
SetUrl( 'ApiLink_nn__mii__CreateNoseType_Flatten', '../../../Api/HtmlNX/namespacenn_1_1mii.html#ab1d08064d4a8b9788b5b123bd6a22b21aa4be938946bcd3e75b17d676f4f9c206' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
