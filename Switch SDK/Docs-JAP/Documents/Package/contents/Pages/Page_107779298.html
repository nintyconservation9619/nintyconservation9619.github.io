<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>アプリケーションの開発</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- アプリケーションの開発 -->
<div class="pagetitle" id="PageId_107779298">アプリケーションの開発</div>
<div class="text_separate">
<p>ここでは、NX アプリケーションの開発の流れについて説明します。</p>
<p>NX アプリケーションはビルド対象のプラットフォームを切り替えることで、基本的に同じコードを Windows 環境と NX 開発機の両方でデバッグ・実行することができます。</p>
<h1 id="Anchor_107779298_h1_1">Windows プラットフォームで開発する</h1>
<h2 id="Anchor_107779298_h2_1">アプリケーションの開発</h2>
<p>NX API セットを利用してアプリケーションのコードを作成します。<br />利用できる機能や API については、NintendoSDK ドキュメントの<a href="../Pages/Page_83956193.html">各機能の説明ページ</a>や、<a href="../../../Api/HtmlNX/index.html">API リファレンス</a>を参照してください。</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>次の手順で Visual Studio のエディターから Microsoft ヘルプ ビューアーを経由して API リファレンスを閲覧することが可能です。</p>
    <p>Visual Studio の&nbsp;[ヘルプ] - [ヘルプ設定の設定] - [ヘルプ ビューアーで起動] を選択します。</p>
    <span class="embedded-file-wrapper ">
      <img src="../Attachments/Attach_107779298/109446781.png" width="500" class="embedded-image" />
    </span>
    <p>エディター上で、調べたい API にカーソルを合わせます。</p>
    <p>
      <span class="embedded-file-wrapper ">
        <img src="../Attachments/Attach_107779298/109446783.png" width="500" class="embedded-image" />
      </span>
    </p>
    <p>[F1] キーを押します。Microsoft ヘルプ ビューアーが起動し該当 API のリファレンスを閲覧することができます。</p>
    <p>
      <span class="embedded-file-wrapper ">
        <img src="../Attachments/Attach_107779298/109446784.png" width="500" class="embedded-image" />
      </span>
    </p>
    <ac:macro ac:name="note" ac:schema-version="1" ac:macro-id="60aa0671-ba89-498b-827f-7af7aab4fff9" xmlns:ac="ac">
      <ac:rich-text-body>
        <p>なおこの機能は Visual Studio 2017 では 「ヘルプビューアー」をインストールしていないと利用できません。<br />インストールしていなかった場合はこの SDK に含まれている InstallVsHelp.ps1 を実行するとヘルプビューアーと SDK ヘルプを一緒にインストールできます。</p>
      </ac:rich-text-body>
    </ac:macro>
  </div>
</div>
<p>以下に、アプリケーション開発のための代表的な機能へのリンクを紹介します。</p>
<h3 id="Anchor_107779298_h3_1">絵を出すには・・・</h3>
<p>
  <a href="../Pages/Page_83956134.html">GFX ライブラリ</a>を利用します。<a href="../../../Api/HtmlNX/_page_sample_gfx_simple.html">シェーダやテクスチャを使ったグラフィックス処理を行うシンプルなサンプル</a>で基本的な利用方法が確認できます。</p>
<h3 id="Anchor_107779298_h3_2">コントローラ等の外部入力を取得するには・・・</h3>
<p>
  <a href="../Pages/Page_83955661.html">HIDライブラリ</a>を利用します。<a href="../../../Api/HtmlNX/_page_sample_hid_simple.html">ヒューマンインターフェイスデバイスの状態取得のサンプル</a>で基本的な利用方法が確認できます。</p>
<h3 id="Anchor_107779298_h3_3">ファイルを読み書きするには・・・</h3>
<p>
  <a href="../Pages/Page_83956192.html">FS ライブラリ</a>を利用します。<a class="external-link" href="../../../Api/HtmlNX/_page_sample_fs.html" rel="nofollow">FS ライブラリのサンプル</a>で基本的な利用方法が確認できます。</p>
<h3 id="Anchor_107779298_h3_4">音を出すには・・・</h3>
<p>
  <a href="../Pages/Page_89098335.html">AUDIO ライブラリ</a>を利用します。<a class="external-link" href="../../../Api/HtmlNX/_page_sample_audio_audio_renderer.html" rel="nofollow">オーディオレンダラのサンプル</a>で基本的な利用方法が確認できます。</p>
<h3 id="Anchor_107779298_h3_5">マルチスレッドで処理するには・・・</h3>
<p>
  <a href="../Pages/Page_83955869.html">OS ライブラリ</a>を利用します。<a class="external-link" href="../../../Api/HtmlNX/_page_sample_os_thread.html" rel="nofollow">スレッド機能サンプルプログラム</a>でスレッドの基本的な利用方法が確認できます。</p>
<div class="tip">
  <div class="tip_left">参考：</div>
  <div class="tip_right">
    <p>グラフィックスやオーディオの開発に使用できるライブラリやツールを統合したミドルウェアとして <a href="../Pages/Page_83955716.html">NintendoWare</a> が提供されています。</p>
  </div>
</div>
<h2 id="Anchor_107779298_h2_2">ビルド・デバッグ実行</h2>
<p>任意のソリューション構成（Debug、Develop、Release）を選択し、ソリューションプラットフォームを Win32 （32 bit アプリケーションの場合）または x64 （64 bit アプリケーションの場合）に設定することで、Windows プラットフォーム向けのビルド・デバッグが実行できます。<br />ソリューション構成による違いについては <a href="../Pages/Page_106361459.html">ビルドターゲットとビルドタイプ</a> を参照してください。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_107779298/108103305.png" width="500" class="embedded-image" />
  </span>
</p>
<p>デバッグには、Visual Studio の標準的なデバッガの機能が利用できます。</p>
<h2 id="Anchor_107779298_h2_3">アプリケーションの実行</h2>
<p>出力された exe ファイルを実行します。</p>
<h1 id="Anchor_107779298_h1_2">NX プラットフォームで開発する</h1>
<h2 id="Anchor_107779298_h2_4">アプリケーションの開発</h2>
<p>基本的には、Windows プラットフォームでの開発で利用したコードをそのまま利用することができます。<br />API によっては Windows プラットフォームと NX プラットフォームで挙動が異なる場合があります。NintendoSDK ドキュメントの<a href="../Pages/Page_83956193.html">各機能の説明ページ</a>、<a href="../../../Api/HtmlNX/index.html">API リファレンス</a>を参照してください。</p>
<h2 id="Anchor_107779298_h2_5">Application.desc&nbsp;ファイルの準備</h2>
<p>Application.desc&nbsp;ファイルは、一般的なアプリケーションが利用することができる機能の権限範囲を記述したファイルです。</p>
<p>アプリケーションの作成に利用する各バージョンの NintendoSDK で提供されている以下のファイルを指定して使用する必要があります。</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>
        <p>アプリケーションの種類</p>
      </th>
      <th>desc ファイル</th>
    </tr>
    <tr>
      <th>32bit アプリケーション</th>
      <td rowspan="2">%NINTENDO_SDK_ROOT%\Resources\SpecFiles\Application.desc</td>
    </tr>
    <tr>
      <th>64bit アプリケーション</th>
    </tr>
  </tbody>
</table>
<p>以下の操作を行うとアプリケーションを開発機で実行できなくなる、アプリケーションの動作が不安定になるといった問題が発生します。</p>
<p>絶対に行わないでください。</p>
<ul>
  <li>Application.desc ファイルの記述内容の改変をおこなう。</li>
  <li>異なるバージョンの NintendoSDKに含まれている Application.desc ファイルをコピーして利用する。</li>
</ul>
<p>.desc ファイルは提出時の確認に使用する場合がありますので、パッケージのファイルを個別にコピーやリネームせず、パッケージから直接参照するようにしてください。</p>
<h2 id="Anchor_107779298_h2_6">nmeta ファイルの準備</h2>
<p>nmeta ファイルは、アプリケーションごとに設定することが可能なパラメータを記述するためのファイルです。</p>
<p>NX Addon 1.0.0 以降 Visual Studio のウィザードで新規作成したプロジェクトの場合は、プロジェクトファイルと同じディレクトリに nmeta ファイルが自動作成されます。</p>
<p>NX Addon 1.0.0 よりも前のバージョンを使用している場合、または Visual Studio を使用していない場合は、アプリケーションごとに以下のテンプレートとなる nmeta ファイルをコピーして使用してください。</p>
<table class="wrapped">
  <tbody>
    <tr>
      <th>アプリケーションの種類</th>
      <th>nmeta ファイル</th>
    </tr>
    <tr>
      <th>64bit アプリケーション</th>
      <td>%NINTENDO_SDK_ROOT%\Resources\SpecFiles\Application.aarch64.lp64.nmeta</td>
    </tr>
    <tr>
      <th>32bit アプリケーション</th>
      <td>%NINTENDO_SDK_ROOT%\Resources\SpecFiles\Application.arm.ilp32.nmeta</td>
    </tr>
  </tbody>
</table>
<p>nmeta ファイルはアプリケーションごとに適切に編集を行ってください。直接編集する場合は <a href="../Pages/Page_166503043.html">nmeta ファイルの書き方</a> を、編集ツールを使用する場合は&nbsp;<a href="../Pages/Page_187698789.html">AuthoringEditor</a> を参照してください。</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>NX-VSI を利用する場合は、デフォルトで適切な .desc ファイル、.nmeta ファイルを利用してビルドされるように設定されています。<br />これらは プロジェクトプロパティ＞構成プロパティ＞全般 の desc ファイル及び nmeta ファイルの項目でそれぞれ指定するパスを変更することができます。</p>
    <p>
      <span class="embedded-file-wrapper ">
        <img src="../Attachments/Attach_107779298/161445418.png" width="500" class="embedded-image" />
      </span>
    </p>
  </div>
</div>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>拡張子が .meta から .nmeta に変更されましたが、 今まで通り .meta ファイルもご利用いただけます。</p>
  </div>
</div>
<p>
  <br />
</p>
<h2 id="Anchor_107779298_h2_7">ビルド・デバッグ実行</h2>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>NX プラットフォームでビルドしたアプリケーションの実行には、事前に開発機を PC に接続しセットアップを済ませておく必要があります。<br />手順については、<a href="../Pages/Page_96563591.html">SDEV の初期化</a> または <a href="../Pages/Page_124929523.html">EDEV の初期化</a> を参照してください。</p>
  </div>
</div>
<p>任意のソリューション構成（Debug、Develop、Release）を選択し、ソリューションプラットフォームを NX32 （32 bit アプリケーションの場合）または NX64 （64 bit アプリケーションの場合）に設定することで、NX プラットフォーム向けのビルド・デバッグが実行できます。<br />ソリューション構成による違いは Windows プラットフォームの場合と同様です。<a href="../Pages/Page_106361459.html">ビルドターゲットとビルドタイプ</a> を参照してください。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_107779298/108103300.png" width="500" class="embedded-image" />
  </span>
</p>
<p>NX プラットフォームにおいても、Windows プラットフォームでの開発と同等のデバッグ機能を利用できますが、一部制限があります。これについては<a href="../Pages/Page_107342563.html">マニュアル</a>を参照してください。</p>
<p>特に指定を行わない場合、プログラムが実行される開発機材は、Target Manager で既定のターゲットに指定されている機材となります。<br />既定のターゲット以外で実行したい場合は、ツールバーを右クリックし、NX Targets メニューを表示したうえで、実行したい機材のシリアルナンバーを選択してください。&nbsp;</p>
<p>また、プロジェクトプロパティ＞構成プロパティ＞全般 のアプリケーションプログラムフォーマットの項目によって、プログラムの実行形式を次のように変更できます。<br />他、プロジェクトプロパティで設定できる NX プラットフォーム特有のパラメータについては<a href="../Pages/Page_107320422.html">プロジェクトで指定できるパラメータ</a>を参照してください。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_107779298/161445421.png" width="500" class="embedded-image" />
  </span>
</p>
<h3 id="Anchor_107779298_h3_6">アプリケーションプログラムフォーマットに Raw を選択（デフォルト）</h3>
<p>NX 開発機で実行可能な最低限のビルドだけ行います。<a href="../Pages/Page_107320222.html">nspd 形式のディレクトリ</a>に出力され、それらを直接参照する形でデバッグ実行ができます。<br />また、出力された nspd ディレクトリに含まれる code ディレクトリ（および data ディレクトリ）から直接 nca ファイルや nsp ファイルを作成することも可能です。それについては&nbsp;<a href="../Pages/Page_107320233.html">AuthoringTool</a>&nbsp;を参照してください。<br />実行コードのビルドだけが行われるため、ビルド時間が短くなります。リソースは実行時に PC から直接読み込みます。<br />普段の開発の際はこちらをお使いください。&nbsp;</p>
<h3 id="Anchor_107779298_h3_7">アプリケーションプログラムフォーマットに Nsp を選択</h3>
<p>アプリケーションのインストール形式及び提出形式である <a href="../Pages/Page_107320222.html">nsp ファイル</a>を作成します。このファイルは<a href="../Pages/Page_107779320.html">アプリケーションを開発機にインストールして実行する</a>場合や、<a href="../Pages/Page_166051528.html">NX 開発カードへの書き込み</a>の際に必要になります。<br />リソースやアイコンデータもパッキングするため、ビルド時間が Raw モードに比べ長くなります。</p>
<h2 id="Anchor_107779298_h2_8">アプリケーションの実行</h2>
<p>出力された nspd ディレクトリまたは nsp ファイルを <a href="../Pages/Page_107320466.html">RunOnTarget</a> を使って開発機上で実行することができます。<br />Target Manager の「実行ファイルをロード」メニューや、Target Manager に nsp ファイルや nspd_root ファイルをドラッグ＆ドロップすることでも実行することができます。</p>
<p>ログをダンプする場合や、CLI で実行する場合は RunOnTarget をお使いください。&nbsp;</p>
<h2 id="Anchor_107779298_h2_9">フォーマットと起動方法の使い分けについて</h2>
<p>フォーマットと起動方法の種別についてまとめると以下のようになります。</p>
<h3 id="Anchor_107779298_h3_8">フォーマット</h3>
<table class="wrapped">
  <tbody>
    <tr>
      <th style="text-align: center;">フォーマット</th>
      <th style="text-align: center;">特徴</th>
    </tr>
    <tr>
      <td>Raw (nspd)</td>
      <td>リソースをパッキングしない分手返しが速い。</td>
    </tr>
    <tr>
      <td>NSP</td>
      <td>リソースに加えアイコンデータなどもパッキングする。<br class="atl-forced-newline" />NAND にインストール or カードに書き込むにはこの形式である必要がある。</td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_107779298_h3_9">起動方法</h3>
<table class="wrapped" style="margin-left: 1.5em;">
  <tbody>
    <tr>
      <th style="text-align: center;">起動方法</th>
      <th style="text-align: center;">特徴</th>
    </tr>
    <tr>
      <td>RunOnTarget</td>
      <td>ログをダンプしやすい (リダイレクトで取得できる)。CLI で操作できる。</td>
    </tr>
    <tr>
      <td>TargetManager</td>
      <td>GUI で操作できる。</td>
    </tr>
    <tr>
      <td>VSI</td>
      <td>デバッグできる。</td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_107779298_h2_10">
  <br />トラブルシューティング</h2>
<p>ビルドや実行に問題が発生した場合は、<a href="../Pages/Page_165756492.html">ビルド・デバッグに関するトラブルシューティング</a>&nbsp;を参照してください。</p>
<p>
  <br />
</p>
<p>
  <br />
</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
