<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>libcurl</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- libcurl -->
<div class="pagetitle" id="PageId_99782769">libcurl</div>
<div class="text_separate">
<div class="layout-root">
  <div class="layout-base">
    <div class="layout-section two_right_sidebar">
      <div class="layout-cell">
        <h1 id="Anchor_99782769_h1_1">Introduction</h1>
        <p>Nintendo provides a version of libcurl which has been adapted for use within the Nintendo SDK.</p>
        <ul>
          <li>The source for libcurl was retrieved from <span class="url"> <a href="http://curl.haxx.se/download.html">curl.haxx.se</a> version</span> <span class="url"> <strong>7.42.1</strong>.</span> <span class="url"> See&nbsp;  <a href="http://curl.haxx.se/changes.html">curl.haxx.se/changes</a> for more details about this specific version.</span></li>
          <li>
            <span class="url">In addition to the documentation presented below, please see also&nbsp;<a href="http://curl.haxx.se/libcurl/">curl.haxx.se/libcurl/</a> </span> <span class="url">.</span></li>
        </ul>
        <p>Nintendo attempted to minimize changes while <span class="url">porting libcurl to the SDK. Most of the changes were related to threading, memory allocation and use of standard streams and file I/O. Additionally a limited number of custom curl options have been added and are documented in the below note concerning automatic proxy configuration and DNS options below. <br /></span></p>
      </div>
      <div class="layout-cell">
        <table class="wrapped">
          <colgroup>
            <col />
          </colgroup>
          <tbody>
            <tr>
              <th>Table of Contents</th>
            </tr>
            <tr>
              <td>
                <div class="content-wrapper">
                  <p>
                    <ul class="macro_toc">
                      <li>
                        <a href="#Anchor_99782769_h1_1">Introduction</a>
                      </li>
                      <li>
                        <a href="#Anchor_99782769_h1_2">Supported Functionality</a>
                      </li>
                      <ul>
                        <li>
                          <a href="#Anchor_99782769_h2_1">Protocols</a>
                        </li>
                        <li>
                          <a href="#Anchor_99782769_h2_2">Maximum Number of Simultaneous Connections</a>
                        </li>
                      </ul>
                      <li>
                        <a href="#Anchor_99782769_h1_3">API</a>
                      </li>
                      <ul>
                        <li>
                          <a href="#Anchor_99782769_h2_3">Standard Easy Interface</a>
                        </li>
                        <li>
                          <a href="#Anchor_99782769_h2_4">Standard Multi Interface</a>
                        </li>
                        <ul>
                          <li>
                            <a href="#Anchor_99782769_h3_1">curl_multi_fdset</a>
                          </li>
                        </ul>
                      </ul>
                      <li>
                        <a href="#Anchor_99782769_h1_4">Initialization Considerations</a>
                      </li>
                      <ul>
                        <li>
                          <a href="#Anchor_99782769_h2_5">curl_global_init</a>
                        </li>
                        <li>
                          <a href="#Anchor_99782769_h2_6">curl_global_init_mem</a>
                        </li>
                      </ul>
                      <li>
                        <a href="#Anchor_99782769_h1_5">Finalization Considerations</a>
                      </li>
                      <li>
                        <a href="#Anchor_99782769_h1_6">Threading</a>
                      </li>
                      <li>
                        <a href="#Anchor_99782769_h1_7">Automatic Proxy Configuration</a>
                      </li>
                      <li>
                        <a href="#Anchor_99782769_h1_8">DNS Options</a>
                      </li>
                      <li>
                        <a href="#Anchor_99782769_h1_9">HTTPS</a>
                      </li>
                      <li>
                        <a href="#Anchor_99782769_h1_10">Examples</a>
                      </li>
                    </ul>
                  </p>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="layout-base">
    <div class="layout-section single">
      <div class="layout-cell">
        <h1 id="Anchor_99782769_h1_2">
          <span class="url">Supported Functionality</span>
        </h1>
        <h2 id="Anchor_99782769_h2_1">
          <span class="url">Protocols<br /></span>
        </h2>
        <p>
          <span class="url">The following table summarizes which protocols are supported by Nintendo SDK libcurl.</span>
        </p>
        <table class="wrapped">
          <colgroup>
            <col />
            <col />
          </colgroup>
          <tbody>
            <tr>
              <th>Protocol</th>
              <th>Supported?</th>
            </tr>
            <tr>
              <td>DICT</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(255,0,0);">
                      <strong>No</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>FILE</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(255,0,0);">
                      <strong style="text-align: center;">No</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>FTP</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(255,0,0);">
                      <strong style="text-align: center;">No</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>Gopher</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(255,0,0);">
                      <strong style="text-align: center;">No</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>HTTP</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(51,153,102);">
                      <strong>Yes</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>HTTP Authentication</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(51,153,102);">
                      <strong>Yes</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>HTTP + SSL/TLS</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(51,153,102);">
                      <strong>Yes</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>IMAP</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(255,0,0);">
                      <strong style="text-align: center;">No</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>LDAP</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(255,0,0);">
                      <strong style="text-align: center;">No</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>LDAPS</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(255,0,0);">
                      <strong style="text-align: center;">No</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>POP3</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(255,0,0);">
                      <strong style="text-align: center;">No</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>Proxy</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(51,153,102);">
                      <strong>Yes</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>RTSP</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(255,0,0);">
                      <strong style="text-align: center;">No</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>SMB</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(255,0,0);">
                      <strong style="text-align: center;">No</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>SMTP</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(255,0,0);">
                      <strong style="text-align: center;">No</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>Telnet</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(255,0,0);">
                      <strong style="text-align: center;">No</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
            <tr>
              <td>TFTP</td>
              <td style="text-align: center;">
                <div class="content-wrapper">
                  <p>
                    <span style="color: rgb(255,0,0);">
                      <strong style="text-align: center;">No</strong>
                    </span>
                  </p>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <h2 id="Anchor_99782769_h2_2">Maximum Number of Simultaneous Connections</h2>
        <p>The maximum number of simultaneous connections is subject to the following constraints.</p>
        <ul style="list-style-type: square;">
          <li>The sum of all HTTP and HTTPS connections cannot exceed the <a href="../Pages/Page_99782750.html#Anchor_99782750_MaximumNumberofSockets">nn::socket descriptor limit</a>.</li>
          <li>HTTPS connections cannot exceed the <a href="../Pages/Page_288014117.html#Anchor_288014117_Limitations.1">created nn::ssl::Connection limit</a>.</li>
        </ul>
        <h1 id="Anchor_99782769_h1_3">API</h1>
        <p>Nintendo SDK provides<a href="http://curl.haxx.se/libcurl/c/"> libcurl C language bindings</a>, usable from both C and C++ programs.</p>
        <h2 id="Anchor_99782769_h2_3">Standard Easy Interface</h2>
        <p>The easy interface has synchronous behavior, providing a single transfer per calling application thread. See <a href="http://curl.haxx.se/libcurl/c/libcurl-easy.html">easy interface overview </a>for details.</p>
        <h2 id="Anchor_99782769_h2_4">Standard Multi Interface</h2>
        <p>The multi interface has asynchronous behaviors, allowing multiple simultaneous transfers to be managed by a single application thread. See <a href="http://curl.haxx.se/libcurl/c/libcurl-multi.html">multi interface overview </a>for details.</p>
        <h3 id="Anchor_99782769_h3_1">
          <span style="color: rgb(117,117,117);">curl_multi_fdset</span>
        </h3>
        <p>
          <span style="color: rgb(117,117,117);">One of the new data types that was introduced with the addition of the new <span class="ApiLink_nn__socket">nn::socket</span> API is<span style="color: rgb(117,117,117);">&nbsp;</span><em><span class="ApiLink_nn__socket__FdSet">nn::socket::FdSet</span></em>. If you are using the new API then this type can be used directly with <a href="https://curl.haxx.se/libcurl/c/curl_multi_fdset.html">curl_multi_fdset()</a> just as if it was the <em>fd_set</em> type.</span>
        </p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>extern CURLM* curlMultiHandle;


nn::socket::FdSet   fdread      = nn::socket::FdSet();
nn::socket::FdSet   fdwrite     = nn::socket::FdSet();
nn::socket::FdSet   fdexcep     = nn::socket::FdSet();
int                 maxfd       = -1;

nn::socket::FdSetZero(&amp;fdread);
nn::socket::FdSetZero(&amp;fdwrite);
nn::socket::FdSetZero(&amp;fdexcep);

curl_multi_fdset(curlMultiHandle, &amp;fdread, &amp;fdwrite, &amp;fdexcep, &amp;maxfd);</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <p>
          <span style="color: rgb(117,117,117);">
            <br />
          </span>
        </p>
        <h1 id="Anchor_99782769_h1_4">Initialization Considerations</h1>
        <p>Nintendo SDK libcurl behavior is standard. However there are some implications which must be considered, depending upon the specific initialization method which is selected.</p>
        <h2 id="Anchor_99782769_h2_5">curl_global_init</h2>
        <p>If libcurl is initialized using <a href="https://curl.haxx.se/libcurl/c/curl_global_init.html">curl_global_init()</a> the default heap is used for all internal memory allocations. The application is responsible for setting up the default heap.</p>
        <h2 id="Anchor_99782769_h2_6">curl_global_init_mem</h2>
        <p>If libcurl is initialized using <a href="https://curl.haxx.se/libcurl/c/curl_global_init_mem.html">curl_global_init_mem()</a>, then the default heap is not used. However the application is responsible for passing valid allocation callbacks.</p>
        <h1 id="Anchor_99782769_h1_5">Finalization Considerations</h1>
        <p>When done using libcurl, such as upon process exit, it is important to call <a href="https://curl.haxx.se/libcurl/c/curl_global_cleanup.html">curl_global_cleanup()</a>. It is guaranteed that upon return from curl_global_cleanup() any resources allocated while using libcurl, such as threads and memory, are released.</p>
        <h1 id="Anchor_99782769_h1_6">Threading</h1>
        <p>Nintendo&nbsp;SDK libcurl is configured to use the system resolver, instead of c-ares asynchronous resolver. And libcurl is also configured to use internal threading. During operation libcurl may launch threads internally. Users should be aware of that, and budget process thread resources accordingly.</p>
        <h1 id="Anchor_99782769_h1_7">Automatic Proxy Configuration</h1>
        <p>Nintendo SDK libcurl reads proxy information from the system settings (NIFM) and automatically applies it to each curl easy handle. Because of this, the following curl options will be ignored by default: <code>CURLOPT_PROXY</code>, <code>CURLOPT_PROXYPORT</code>, <code>CURLOPT_PROXYUSERPWD</code>, <code>CURLOPT_PROXYUSERNAME</code>, and <code>CURLOPT_PROXYPASSWORD</code>. In order to use those options instead of applying the proxy settings from the system, the custom Nintendo SDK libcurl option, <code>CURLOPT_PROXYAUTOCONFIG</code>,&nbsp;must be set to 0.</p>
        <p>The default value of <code>CURLOPT_PROXYAUTOCONFIG</code>&nbsp;is 1.</p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>curl_easy_setopt(curl, CURLOPT_PROXYAUTOCONFIG, 0L);    /* Do not read proxy information from the system settings for this handle */
curl_easy_setopt(curl, CURLOPT_PROXY, &quot;&lt;Proxy_hostname_or_ip&gt;&quot;);
curl_easy_setopt(curl, CURLOPT_PROXYPORT, &lt;Proxy_port&gt;);
curl_easy_setopt(curl, CURLOPT_PROXYUSERNAME, &quot;&lt;Proxy_username&gt;&quot;);
curl_easy_setopt(curl, CURLOPT_PROXYPASSWORD, &quot;&lt;Proxy_password&gt;&quot;);</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <h1 id="Anchor_99782769_h1_8">DNS Options</h1>
        <p>Nintendo SDK libcurl supports two custom DNS-related options:</p>
        <p>The first option disables Nintendo Service Discovery (NSD) for requests using the provided curl handle, the default value is 0 (i.e. it is enabled by default), and is accessed with the CURLOPT_DISABLE_NSD constant.</p>
        <p>The second option disables using the DNS cache for requests using the provided curl handle, the default value is 0 (i.e. it is enabled by default), and it is accessed with the CURLOPT_DISABLE_CACHE constant.</p>
        <p>
          <br />
        </p>
        <table class="codeblock">
          <tbody>
            <tr>
              <td class="code">
                <div class="codeblock"><pre>curl_easy_setopt(curl, CURLOPT_DISABLE_NSD, 1L);    /* Disable NSD for this handle */
curl_easy_setopt(curl, CURLOPT_DISABLE_CACHE, 1L);    /* Disable the DNS cache for this handle */</pre></div>
              </td>
            </tr>
          </tbody>
        </table>
        <h1 id="Anchor_99782769_h1_9">HTTPS</h1>
        <p>Nintendo SDK libcurl supports HTTPS backed by the SSL library. The SSL library is integrated with the libcurl hence the user of libcurl can use HTTPS with the least effort. Though non-trivial amount of knowledge of the SSL library is neccessary to use it propely.</p>
        <p>Please refer&nbsp;<a href="../Pages/Page_157461290.html">HTTPS</a>&nbsp;to understand differences between the pulic version of the libcurl and the Nintendo SDK libcurl. Please also refer&nbsp;<a href="../Pages/Page_99782759.html">SSL ライブラリ</a>&nbsp;for details about the SSL library.</p>
        <p>To utilize HTTPS with Nintendo servers, please refer &quot;Device Client Certificate&quot; section in&nbsp;<a href="../Pages/Page_288014097.html#Anchor_288014097_VirtualDeviceClientCertificate">Certificate Store</a>.</p>
        <h1 id="Anchor_99782769_h1_10">Examples</h1>
        <p>To learn how to use libcurl refer to <a href="https://curl.haxx.se/libcurl/c/example.html">curl.haxx.se provided examples</a>.</p>
      </div>
    </div>
  </div>
</div>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank">';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__socket', '../../../Api/HtmlNX/namespacenn_1_1socket.html' )
SetUrl( 'ApiLink_nn__socket__FdSet', '../../../Api/HtmlNX/structnn_1_1socket_1_1_fd_set.html' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
