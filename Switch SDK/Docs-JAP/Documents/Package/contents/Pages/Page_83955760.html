<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>グループ</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- グループ -->
<div class="pagetitle" id="PageId_83955760">グループ</div>
<div class="text_separate">
<h1 id="Anchor_83955760_h1_1">グループ</h1>
<p>プロジェクトツリーで、グループのノードを選択することで、サウンドセットタブにグループを表示することができます。<br />この時表示されるリストは、サウンドセットタブ内を上下に分割して表示されます。<br />分割されたタブのうち、上をグループリストと呼び、下をグループアイテムリストと呼びます。</p>
<h2 id="Anchor_83955760_h2_1">グループの役割</h2>
<p>グループには同じサウンドセットのアイテムを登録します。ここで登録されたアイテムをグループアイテムと呼びます。</p>
<p>プログラマが、アプリケーションでサウンドアーカイブから波形データなどをメモリにロードする際に、このグループ単位でロードを行うことで、特定のシーンなどで必要なアイテムをまとめてロードすることができます。</p>
<p>サウンドデザイナは、特定のシーンやタイミングで必要なアイテムを、効率的なグループへの分類と登録をすることにより、メモリの効率的な利用を設計することができます。</p>
<h2 id="Anchor_83955760_h2_2">グループリストとグループアイテムリスト</h2>
<p>グループの作成はグループリストで行います。</p>
<p>グループアイテムリストには、選択したグループに現在登録されているアイテムの一覧を表示します。</p>
<h2 id="Anchor_83955760_h2_3">グループの新規作成と追加</h2>
<p>グループを新規作成または追加する場合は、サウンドセットタブのリスト領域を選択して、[プロジェクト]&rarr;[アイテムの追加]&rarr;[グループ&hellip;] を実行します。</p>
<p>グループリストで、右クリックを行うと現れるコンテキストメニューによる操作でも、グループを新規作成または追加することができます。</p>
<h2 id="Anchor_83955760_h2_4">グループへのアイテムの登録</h2>
<p>グループへのアイテムの登録は、グループアイテムリストで行います。</p>
<p>グループリストでアイテムの登録を行いたいグループを選択した状態で、[プロジェクト]&rarr;[アイテムの追加]&rarr;[グループアイテム&hellip;] を実行します。</p>
<p>また、サウンドリストや検索結果ウインドウからグループアイテムリストに対して、アイテムをドラッグ＆ドロップすることでも、アイテムをグループに登録することができます。</p>
<h2 id="Anchor_83955760_h2_5">参照アイテムを開く</h2>
<p>グループアイテムリストのインデックスセルをダブルクリックすることにより、参照アイテムのタブを開くことができます。</p>
<h2 id="Anchor_83955760_h2_6">グループリストの定義要素</h2>
<p>ここではグループリストの各定義要素の意味を解説します。</p>
<h3 id="Anchor_83955760_h3_1">名前</h3>
<p>グループの名前を指定します。</p>
<p>名前に使用できる文字には制限があり、以下の文字が使えます。</p>
<ul>
  <li>先頭は、半角英字とアンダーバー [a-zA-Z_]</li>
  <li>先頭以外は、半角英数字とアンダーバー [a-zA-Z0-9_]</li>
</ul>
<h3 id="Anchor_83955760_h3_2">データサイズ</h3>
<p>グループリストのデータサイズに、グループがサウンドヒープにロードされた場合のサイズが表示されます。</p>
<p>データサイズの表示は、コンバートの実行時に自動的に更新されます。</p>
<p>
  <strong>グループのデータサイズは表示のみで、値を編集する事はできません。</strong>
</p>
<h3 id="Anchor_83955760_h3_3">出力方式</h3>
<p>グループアイテムに登録したサウンドデータのサウンドアーカイブへの出力方式を設定します。</p>
<h4 id="Anchor_83955760_h4_1">埋め込み</h4>
<p>サウンドデータをグループに埋め込みます。<br />メリットは、アクセス回数が減ります。デメリットとして、他グループとのデータの重複が起こる可能性があります。<br />用途として、ROM に大きな余裕がある場合、メディアへのアクセス回数を減らしたい場合、RAM に余裕がある場合に向いています。</p>
<h4 id="Anchor_83955760_h4_2">リンク</h4>
<p>サウンドデータをグループに含まず、バイナリサウンドアーカイブファイル (*.bfsar) に含めます。<br />メリットは、他グループとのデータの重複はありません。デメリットとして、アクセス回数が増えます。<br />用途として、RAM や ROM を節約したい場合、メディアへのランダムアクセスが速い場合に向いています。</p>
<h4 id="Anchor_83955760_h4_3">ユーザー管理</h4>
<p>グループファイル (*.bfgrp) をバイナリサウンドアーカイブファイル (*.bfsar) とは別に出力します。<br />メリットは、「あるモデルを含むアーカイブをロードすれば、必ずそのモデルが発するサウンドデータもロードできている」 状態を作ることができます。</p>
<p>具体的に次のようなケースです。</p>
<ul>
  <li>「AAA」に関するサウンドデータをひとつのグループに登録し、出力方式を [ユーザー管理] にします。(グループの名前が GROUP_AAA だとすると、GROUP_AAA.bfgrp ファイルが出力されます)</li>
  <li>「AAA」のグラフィックスデータ (モデルやテクスチャなど) と GROUP_AAA.bfgrp ファイルをアーカイブ化します。<br />(SoundMaker は汎用アーカイバを提供していませんので、別途ユーザー側でご用意ください)</li>
  <li>「AAA」が出現するステージで、このアーカイブをロードします。</li>
</ul>
<p>このようにすると、「AAA」が出現する場面では、必ず「AAA」に関するサウンドデータもロードされていることが保証でき、「ロードを忘れて音が鳴らない」といった状況を避けることができます。</p>
<p>出力方式の設定状態により、出力されるサウンドデータの重複の有無は、以下のようになります。</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>・[ユーザー管理] グループにのみ含まれるサウンドデータは、バイナリサウンドアーカイブファイル (*.bfsar) から除外されます。<br />・[ユーザー管理] グループの他に、[埋め込み] や [リンク] のグループにも含まれるサウンドデータは、グループファイル (*.bfgrp) とバイナリサウンドアーカイブファイル (*.bfsar) の両方に重複して出力されます。</p>
  </div>
</div>
<p>なお、プレイヤーヒープを用いるサウンドが、[ユーザー管理] のグループにのみ属している場合は、サウンドの再生ができません。<br />プレイヤーヒープはサウンドアーカイブファイル (*.bfsar) に含まれているデータしかロードできません。<br />プレイヤーヒープを使ってサウンドを再生したい場合は、該当サウンドデータが下記のどちらかになるようにグループ構成を調整してください。</p>
<ul>
  <li>[ユーザー管理] グループに含めない</li>
  <li>[ユーザー管理] グループに含めるが、[リンク] や [埋め込み] ([ユーザー管理] でないグループ) にも含める</li>
</ul>
<h4 id="Anchor_83955760_h4_4">出力しない</h4>
<p>グループファイル (*.bfgrp) を出力しません。バイナリサウンドアーカイブファイル (*.bfsar) にも含まれません。<br />用途として、ほかのグループに入れるアイテムをまとめるための仮想的なフォルダとしてなどに利用できます。</p>
<h2 id="Anchor_83955760_h2_7">グループアイテムリストの定義要素</h2>
<p>ここではグループアイテムリストの各定義要素の意味を解説します。</p>
<h3 id="Anchor_83955760_h3_4">名前</h3>
<p>グループに登録されているアイテムの名前を表示します。<br />コンボボックスからサウンドセット内にある他のアイテムに変更できます。</p>
<h3 id="Anchor_83955760_h3_5">サウンドセット</h3>
<p>アイテムが含まれているサウンドセット名を表示します。</p>
<h3 id="Anchor_83955760_h3_6">関連アイテム登録</h3>
<p>アイテムのロード時に、関連する波形アーカイブのロードをどのように行うかを設定します。</p>
<p>初期設定では、シーケンスサウンド, ウェーブサウンド, バンクをロードする際、関連する波形アーカイブも一緒にロードしますが、関連アイテム登録を設定することにより、「シーケンスサウンドとバンクのみ」, 「波形アーカイブのみ」のような個別のロード指定ができます。</p>
<p>
  <strong>ウェーブサウンドセットやバンクにおいて、波形アーカイブ設定が「自動(共有)」または「自動(個別)」のときは、[ALL] しか選択することができません。</strong>
</p>
<h3 id="Anchor_83955760_h3_7">コメント</h3>
<p>「オプションダイアログ」の [全般] タブ内にある [グループアイテムのコメントを参照アイテムにする] にチェックを入れることにより、参照アイテムのコメントが表示されるようになります。<br />このチェックが入っていない場合、独立したコメントが入力できます。</p>
<h2 id="Anchor_83955760_h2_8">グループの動作について補足</h2>
<h3 id="Anchor_83955760_h3_8">ファイルとの関係</h3>
<p>グループにはバンクやシーケンスなどのアイテムを登録しますが、実際にグループに登録されるのはそのアイテムが参照するファイルであり、Atk ライブラリがグループをサウンドヒープにロードした場合には、ファイル単位でロードが行われる点に注意が必要です。</p>
<p>テキストシーケンスファイルを参照するシーケンスサウンドを例として解説をします。</p>
<p>シーケンスサウンドが参照ファイルとして利用するテキストシーケンスファイルは、ひとつのテキストシーケンスファイルに複数のシーケンスを記述することができます。</p>
<p>このような「複数のシーケンスを持つテキストシーケンスファイル」を参照するシーケンスサウンドを、グループでサウンドヒープにロードした場合には、テキストシーケンスファイルの内容が全てロードされ、実際にはグループに登録していないシーケンスサウンドでも、同じテキストシーケンスファイルを参照するものは再生することができます。</p>
<p>なお、同じファイルを参照する複数のアイテムを、同じグループにアイテム登録することができますが、このようなグループのロードを行っても、内容が重複してロードされることはありません。</p>
<p>
  <strong>ウェーブサウンドセットについては、参照ファイルを持たずにサウンドセットウインドウで編集を行いますが、内部的にはウェーブサウンドセット単位で別ファイルとして扱われています。</strong>
</p>
<h3 id="Anchor_83955760_h3_9">波形アーカイブの自動(共有, 個別)設定とグループの出力方式の関係</h3>
<p>バンク、ウェーブサウンドセットの「波形アーカイブ」とグループの「出力方式」の関係について、例を挙げて説明します。</p>
<p>以下では説明の簡単にするため、バンクとグループの関係について説明します。<br />ウェーブサウンドセットとグループの関係については、バンクの部分をウェーブサウンドセットと読み替えるとそのままあてはまります。</p>
<h4 id="Anchor_83955760_h4_5">「リンク」グループと「自動(共有)」バンク</h4>
<p>まずは、「リンク」のグループの挙動について説明します。</p>
<p>下記のように「リンク」のグループに、 3 つの「自動(共有)」のバンクを登録した場合、</p>
<table class="table">
  <tbody>
    <tr>
      <th>グループ - 出力方式</th>
      <th>バンク - 波形アーカイブ</th>
    </tr>
    <tr>
      <td rowspan="3">GROUP_0 [リンク]</td>
      <td>BANK_0 [自動(共有)]</td>
    </tr>
    <tr>
      <td>BANK_1 [自動(共有)]</td>
    </tr>
    <tr>
      <td>BANK_2 [自動(共有)]</td>
    </tr>
  </tbody>
</table>
<p>BANK_0 〜 BANK_2 まで、それぞれ別々に波形アーカイブが (暗黙的に) 自動で生成されます。<br />BANK_0 〜 BANK_2 間で同じ波形を参照していても共有されず、ROM 上で重複して配置されることになります。グループ内でまとめて 1 つの波形アーカイブが生成されたり、その波形アーカイブ内で重複した波形がまとめられるわけではありません。</p>
<p>波形を共有したいのであれば、「埋め込み」グループと「自動(共有)」バンクを利用するか、 以下のように、バンクの波形アーカイブを明示的に指定する必要があります。</p>
<h4 id="Anchor_83955760_h4_6">バンクの波形アーカイブを明示的に指定</h4>
<table class="table">
  <tbody>
    <tr>
      <th>グループ - 出力方式</th>
      <th>バンク - 波形アーカイブ</th>
    </tr>
    <tr>
      <td rowspan="3">GROUP_0 [埋め込み or リンク]</td>
      <td>BANK_0 - WARC_0</td>
    </tr>
    <tr>
      <td>BANK_1 - WARC_0</td>
    </tr>
    <tr>
      <td>BANK_2 - WARC_0</td>
    </tr>
  </tbody>
</table>
<p>上記の構成の場合、WARC_0 には、BANK_0 〜 BANK_2 に含まれる波形が重複無く含まれる （ひとつの波形が複数のバンクから共有される）ことになります。</p>
<p>波形アーカイブの個別ロードフラグは ON / OFF どちらでもかまいません。</p>
<h4 id="Anchor_83955760_h4_7">「リンク」グループと「自動(個別)」バンク</h4>
<table class="table">
  <tbody>
    <tr>
      <th>グループ - 出力方式</th>
      <th>バンク - 波形アーカイブ</th>
    </tr>
    <tr>
      <td rowspan="3">GROUP_0 [リンク]</td>
      <td>BANK_0 [自動(個別)]</td>
    </tr>
    <tr>
      <td>BANK_1 [自動(個別)]</td>
    </tr>
    <tr>
      <td>BANK_2 [自動(個別)]</td>
    </tr>
  </tbody>
</table>
<p>この場合は、「リンク」グループと「自動(共有)」バンクのケースと同じく、 BANK_0 〜 BANK_2 までそれぞれ別々に波形アーカイブが (暗黙的に) 自動で生成されます。各バンクで共通な波形がひとつの波形アーカイブにまとめられるといったこともありません。</p>
<p>つまり、「リンク」グループに登録されたバンクは、 「自動(共有)」であっても「自動(個別)」であっても、 1 つのバンクに対して、1 つの波形アーカイブ生成され、 グループ内で重複した波形が共有されることはない、ということになります。</p>
<h4 id="Anchor_83955760_h4_8">「自動(個別)」バンクの用途</h4>
<p>一見「自動(個別)」のバンクには有用な用途が無いように見えますが、 次のような構成の場合、</p>
<table class="table">
  <tbody>
    <tr>
      <th>グループ - 出力方式</th>
      <th>バンク - 波形アーカイブ</th>
    </tr>
    <tr>
      <td>GROUP_1 [埋め込み or リンク]</td>
      <td>BANK_0 [自動(個別)]</td>
    </tr>
    <tr>
      <td>GROUP_2 [リンク]</td>
      <td>BANK_0 [自動(個別)]</td>
    </tr>
  </tbody>
</table>
<p>BANK_0 用に自動生成される波形アーカイブは 1 種類になり、 ROM サイズを節約することが可能です。</p>
<p>ただし、GROUP_1 と GROUP_2 とも [埋め込み] の場合は、 BANK_0 の波形アーカイブは、ROM 上の 2 か所に生成されてしまいます。</p>
<h4 id="Anchor_83955760_h4_9">「埋め込み」グループと「自動(共有)」バンク</h4>
<table class="table">
  <tbody>
    <tr>
      <th>グループ - 出力方式</th>
      <th>バンク - 波形アーカイブ</th>
    </tr>
    <tr>
      <td rowspan="3">GROUP_0 [埋め込み]</td>
      <td>BANK_0 [自動(共有)]</td>
    </tr>
    <tr>
      <td>BANK_1 [自動(共有)]</td>
    </tr>
    <tr>
      <td>BANK_2 [自動(共有)]</td>
    </tr>
  </tbody>
</table>
<p>この場合は、BANK_0 〜 BANK_2 について、 まとめてひとつの波形アーカイブが生成されます。 この波形アーカイブには、3 つのバンクで参照されている波形が重複無く含まれる （ひとつの波形が複数のバンクから共有される）ことになります。</p>
<p>この構成は 波形アーカイブを明示的に指定する場合 と比べて、 波形アーカイブをわざわざ作らなくてよくなるメリットがある一方、 グループ内でしか波形が共有できなくなるデメリットがあります。<br />また、上記の構成に加えて、</p>
<table class="table">
  <tbody>
    <tr>
      <th>グループ - 出力方式</th>
      <th>バンク - 波形アーカイブ</th>
    </tr>
    <tr>
      <td rowspan="2">GROUP_1 [埋め込み]</td>
      <td>BANK_0 [自動(共有)]</td>
    </tr>
    <tr>
      <td>BANK_3 [自動(共有)]</td>
    </tr>
  </tbody>
</table>
<p>のように、「埋め込み」グループである GROUP_0 にも GROUP_1 にも BANK_0 が含まれている場合、 GROUP_0 用の波形アーカイブおよび GROUP_1 用の波形アーカイブそれぞれに、 BANK_0 で参照される波形が含まれる (ROM 上に波形が重複して配置される) ため、 ROM サイズが大きくなるデメリットがあります。</p>
<h4 id="Anchor_83955760_h4_10">「埋め込み」グループと「自動(個別)」バンク</h4>
<table class="table">
  <tbody>
    <tr>
      <th>グループ - 出力方式</th>
      <th>バンク - 波形アーカイブ</th>
    </tr>
    <tr>
      <td rowspan="3">GROUP_0 [埋め込み]</td>
      <td>BANK_0 [自動(個別)]</td>
    </tr>
    <tr>
      <td>BANK_1 [自動(個別)]</td>
    </tr>
    <tr>
      <td>BANK_2 [自動(個別)]</td>
    </tr>
  </tbody>
</table>
<p>この場合は、BANK_0 〜 BANK_2 まで、それぞれ別々に波形アーカイブが (暗黙的に) 自動で生成されます。</p>
<p>この構成の場合は、「自動(個別)」バンクの用途 にあるような使い方をすると、メリットが出てきます。</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
