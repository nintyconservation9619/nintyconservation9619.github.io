<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>Npad(NX Addon)</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- Npad(NX Addon) -->
<div class="pagetitle" id="PageId_124022603">Npad(NX Addon)</div>
<div class="text_separate">
<p style="margin-left: 44.0px;">NxAddon における Npad の機能について説明します。</p>
<p style="margin-left: 44.0px;">Npad の概要については、&nbsp;<a href="../Pages/Page_124018876.html">Npad</a>&nbsp;のページをあらかじめ確認してください。</p>
<h1 id="Anchor_124022603_h1_1">目次</h1>
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_124022603_h1_1">目次</a>
    </li>
    <li>
      <a href="#Anchor_124022603_h1_2">NxAddon で追加された機能</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_124022603_h2_1">Nx 対応コントローラーの対応</a>
      </li>
      <li>
        <a href="#Anchor_124022603_h2_2">Nx 向け操作スタイルの追加</a>
      </li>
      <li>
        <a href="#Anchor_124022603_h2_3">Joy-Con に特化した API の追加</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_124022603_h1_3">NxAddon 対応コントローラー</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_124022603_h2_4">十字ボタン / 方向ボタン の禁則処理</a>
      </li>
      <li>
        <a href="#Anchor_124022603_h2_5">アナログスティックの入力範囲のクランプ</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_124022603_h1_4">NxAddon で使用できる操作スタイル</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_124022603_h2_6">Joy-Con 2本持ちを NpadStyleFullKey (Switch Pro Controller 操作) として扱う場合の注意</a>
      </li>
    </ul>
    <li>
      <a href="#Anchor_124022603_h1_5">Npad に対する Joy-Con の割り当ての設定 (NpadJoyAssignmentMode)</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_124022603_h2_7">「2本セット割り当て」と「1本ずつ割り当て」</a>
      </li>
      <li>
        <a href="#Anchor_124022603_h2_8">Npad の操作形態 (NpadStyleSet) の設定と Joy-Con の割り当て設定</a>
      </li>
      <ul>
        <li>
          <a href="#Anchor_124022603_h3_1">割り当て設定の変更</a>
        </li>
      </ul>
    </ul>
    <li>
      <a href="#Anchor_124022603_h1_6">Joy-Con の持ち方設定</a>
    </li>
    <li>
      <a href="#Anchor_124022603_h1_7">本体装着状態の検出</a>
    </li>
    <li>
      <a href="#Anchor_124022603_h1_8">コントローラーの色情報の取得</a>
    </li>
  </ul>
</p>
<h1 id="Anchor_124022603_h1_2">NxAddon で追加された機能</h1>
<h2 id="Anchor_124022603_h2_1">Nx 対応コントローラーの対応</h2>
<p>NxAddon では以下のコントローラーを利用することが可能になります</p>
<ul>
  <li>Joy-Con</li>
  <li>Switch Pro Controller<br />任天堂ライセンス商品の USB コントローラーも Switch Pro Controller 互換コントローラーとして利用できます。</li>
</ul>
<h2 id="Anchor_124022603_h2_2">Nx 向け操作スタイルの追加</h2>
<p>Nx に対応した以下の操作スタイルに対応した API を追加しています</p>
<ul>
  <li>Joy-Con 2本持ち操作 (<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a1528b4e8a2b39e40f5f76c847c4ccc82">NpadStyleJoyDual</a>)</li>
  <li>Joy-Con（R）操作 (<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#aa09597ee31314ec6782e5f56384ea5b9">NpadStyleJoyRight</a>)</li>
  <li>Joy-Con（L）操作 (<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a93f2c921b3f4d3a9b8e02ddc30ea50b8">NpadStyleJoyLeft</a>)</li>
</ul>
<h2 id="Anchor_124022603_h2_3">Joy-Con に特化した API の追加</h2>
<p>Joy-Con に特化した API を以下のような機能を追加しています。</p>
<ul>
  <li>Npad に対する Joy-Con の割り当てを制御する機能</li>
  <li>Joy-Con の持ち方を変更する機能</li>
  <li>Joy-Con や Switch Pro Controller の色情報を取得する機能</li>
</ul>
<h1 id="Anchor_124022603_h1_3">NxAddon 対応コントローラー</h1>
<p style="margin-left: 44.0px;">NxAddon を利用することで、Joy-Con や Switch Pro Controller といった NX プラットフォーム固有のコントローラーのサポートが追加されます。Nx 対応コントローラーについては以下のような特徴があります。</p>
<h2 style="margin-left: 14.0px;" id="Anchor_124022603_h2_4">
  <span style="color: rgb(117,117,117);">十字ボタン / 方向ボタン の禁則処理</span>
</h2>
<p>
  <a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a594f4eed71a6821bd28283ce0a273fb1">NpadStyleFullKey</a>&nbsp;や&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a162751ccfcb8408b822ee308ebe7a2c9">NpadStyleHandheld</a>&nbsp;を用いる際, 十字ボタンや方向ボタンは禁則処理が行われます。<br />上下または左右のボタンが押された場合に、上ボタン及び左ボタンが優先されるようになっております。</p>
<h2 id="Anchor_124022603_h2_5">アナログスティックの入力範囲のクランプ</h2>
<p>アナログスティックの入力値は、-<span class="ApiLink_nn__hid__AnalogStickMax">nn::hid::AnalogStickMax</span> から <span class="ApiLink_nn__hid__AnalogStickMax">nn::hid::AnalogStickMax</span> までの範囲をとるように、外周が円形でクランプされています。</p>
<p>また中心部分についても、無操作時の入力が安定するように円形でクランプが行われています。</p>
<p>
  <br />
</p>
<h1 id="Anchor_124022603_h1_4">NxAddon で使用できる操作スタイル</h1>
<p style="margin-left: 44.0px;">NxAddon で使用できる操作スタイルは以下の 5種類です。ここでは、操作スタイル毎に対応するコントローラーの種類や持ち方と扱える機能の説明をします。</p>
<p style="margin-left: 44.0px;">
  <br />
</p>
<table class="wrapped" style="margin-left: 1.5em;">
  <colgroup>
    <col />
    <col />
    <col />
    <col />
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th>Npad の操作スタイル定義</th>
      <th style="text-align: center;">説明</th>
      <th style="text-align: center;">対応するコントローラー / 持ち方</th>
      <th style="text-align: center;">入力状態</th>
      <th>振動デバイス</th>
      <th>その他の機能</th>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a594f4eed71a6821bd28283ce0a273fb1">NpadStyleFullKey</a>
      </td>
      <td>
        <p>Switch Proコントローラーをモデルとした操作スタイル</p>
        <p>
          <br />
        </p>
        <p>
          <strong>NpadStyleJoyDual に対応していない場合</strong>、Joy-Con 2本持ちの状態を Switch Pro Controler 相当の操作スタイルとして扱うことができます</p>
      </td>
      <td>
        <ul>
          <li>Switch Proコントローラー</li>
          <li>Joy-Con</li>
          <ul>
            <li>Joy-Con 2本持ち</li>
            <li>Joy-Conグリップ装着</li>
          </ul>
        </ul>
      </td>
      <td>
        <ul>
          <li>
            <a href="../../../Api/HtmlNX/structnn_1_1hid_1_1_npad_full_key_state.html">NpadFullKeyState</a>
            <br />十字ボタン、Aボタン、Bボタン、Xボタン、Yボタン<br />Lボタン、Rボタン、ZLボタン、ZRボタン<br />+ボタン、-ボタン<br />右アナログスティック、左アナログスティック</li>
        </ul>
        <ul>
          <li>6軸センサー : 1つ</li>
        </ul>
      </td>
      <td>HD 振動 : 2つ</td>
      <td>
        <br />
      </td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a162751ccfcb8408b822ee308ebe7a2c9">NpadStyleHandheld</a>
      </td>
      <td>
        <p>携帯型ゲーム機のコントローラー操作をモデルとした操作スタイル</p>
        <p>
          <br />
        </p>
        <p>Nx では、<strong>Joy-Con本体装着操作 </strong>に該当します</p>
      </td>
      <td>
        <ul>
          <li>Joy-Con本体装着</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>
            <a href="../../../Api/HtmlNX/structnn_1_1hid_1_1_npad_handheld_state.html">NpadHandheldState</a>
            <br />方向ボタン、 Aボタン、Bボタン、Xボタン、Yボタン<br />Lボタン、Rボタン、ZLボタン、ZRボタン<br />+ボタン、-ボタン<br />右アナログスティック、左アナログスティック</li>
        </ul>
        <ul>
          <li>6軸センサー : 1つ</li>
        </ul>
      </td>
      <td>HD 振動 : 2つ</td>
      <td>
        <br />
      </td>
    </tr>
    <tr>
      <td>
        <p>
          <a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a1528b4e8a2b39e40f5f76c847c4ccc82">NpadStyleJoyDual</a>
        </p>
        <p>
          <br />
        </p>
        <p>
          <span style="color: rgb(255,0,0);">※ NxAddon で追加</span>
        </p>
      </td>
      <td>Joy-Con 2本持ち操作</td>
      <td>
        <ul>
          <li>Joy-Con 2本持ち</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>
            <a href="../../../Api/HtmlNX/structnn_1_1hid_1_1_npad_joy_dual_state.html">NpadJoyDualState</a>
            <br />Joy-Con（R）：<br />Aボタン、Bボタン、Xボタン、Yボタン<br />Rボタン、ZRボタン、SLボタン、SRボタン<br />+ボタン<br />右アナログスティック<br /><br /><p>Joy-Con（L）：</p><p>方向ボタン</p><p>Lボタン、ZLボタン、SLボタン、SRボタン</p><p>-ボタン</p><p>左アナログスティック</p></li>
          <li>6軸センサー : 2つ</li>
        </ul>
      </td>
      <td>HD 振動 : 2つ</td>
      <td>
        <ul>
          <li>
            <a href="../../../Api/HtmlNX/structnn_1_1hid_1_1_npad_joy_dual_state.html#ae6bd643447834428d7cd99432a65a301">NpadJoyDualState::attributes</a> の各フラグの状態を確認することで、それぞれ左右の属性情報を取得することができます。<ul><li><a href="../../../Api/HtmlNX/structnn_1_1hid_1_1_npad_joy_attribute.html#a3455b0d7b84d542d51c9fc3b20172d96">NpadJoyAttributes::IsLeftConneted</a> : Joy-Con (L) の接続状態</li><li><a href="../../../Api/HtmlNX/structnn_1_1hid_1_1_npad_joy_attribute.html#a56d72c72af671f8ae0a01d0fa2391008">NpadJoyAttributes::IsRightConnected</a> : Joy-Con (R) の接続状態</li><li><a href="../../../Api/HtmlNX/structnn_1_1hid_1_1_npad_joy_attribute.html#a4c01fa6be4218c2443fb204b54d23a19">NpadJoyAttributes::IsLeftWired</a> : Joy-Con (L) への有線ケーブルの接続状態</li><li><a href="../../../Api/HtmlNX/structnn_1_1hid_1_1_npad_joy_attribute.html#a487ea3f352912b988abacd669ca63ed4">NpadJoyAttributes::IsRightWired</a> : Joy-Con (R) への有線ケーブルの接続状態</li></ul></li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#aa09597ee31314ec6782e5f56384ea5b9">NpadStyleJoyRight<br /></a>
        <p>
          <br />
        </p>
        <p>
          <br />
        </p>
        <p>
          <span style="color: rgb(255,0,0);">※ NxAddon で追加<br /></span>
        </p>
      </td>
      <td>Joy-Con（R）操作</td>
      <td>
        <ul>
          <li>Joy-Con（R）縦持ち</li>
          <li>Joy-Con（R）横持ち</li>
        </ul>
        <p>
          <br />
        </p>
      </td>
      <td>
        <ul>
          <li>
            <a href="../../../Api/HtmlNX/structnn_1_1hid_1_1_npad_joy_right_state.html">NpadJoyRightState</a>
            <br class="_mce_tagged_br" />Aボタン、Bボタン、Xボタン、Yボタン<br />Rボタン、ZRボタン、SLボタン、SRボタン<br />+ボタン<br />右アナログスティック</li>
          <li>6軸センサー : 1つ</li>
        </ul>
        <p>
          <br />
        </p>
      </td>
      <td>HD 振動 : 1つ</td>
      <td>
        <br />
      </td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a93f2c921b3f4d3a9b8e02ddc30ea50b8">NpadStlyeJoyLeft</a>
        <br />
        <p>
          <br />
        </p>
        <p>
          <span style="color: rgb(255,0,0);">※ NxAddon で追加<br /></span>
        </p>
      </td>
      <td>Joy-Con（L）操作</td>
      <td>
        <ul>
          <li>Joy-Con（L）縦持ち</li>
          <li>Joy-Con（L）横持ち</li>
        </ul>
        <p>
          <br />
        </p>
      </td>
      <td>
        <ul>
          <li>
            <a href="../../../Api/HtmlNX/structnn_1_1hid_1_1_npad_joy_left_state.html">NpadJoyLeftState</a>
            <br />方向ボタン<br />Lボタン、ZLボタン、SLボタン、SRボタン<br />-ボタン<br />左アナログスティック</li>
          <li>6軸センサー : 1つ</li>
        </ul>
        <p>
          <br />
        </p>
      </td>
      <td>HD 振動 : 1つ</td>
      <td>
        <br />
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_124022603_h2_6">Joy-Con 2本持ちを NpadStyleFullKey (Switch Pro Controller 操作) として扱う場合の注意</h2>
<p style="margin-left: 44.0px;">Joy-Con 2本持ちと Switch Proコントローラーでは以下の相違点があります。</p>
<table class="wrapped" style="margin-left: 1.5em;">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <tbody>
    <tr>
      <th style="text-align: center;">項目</th>
      <th style="text-align: center;">相違点</th>
    </tr>
    <tr>
      <td>接続認識</td>
      <td>
        <p>Joy-Con 2本持ちを Proコントローラー操作として扱う場合、左右のJoy-Con の両方が接続されてを 1つのコントローラーとみなします。</p>
        <p>電池切れなどによって片方のJoy-Conが切断された場合、コントローラー全体が切断されたように見えます。ただし、HOMEボタンやキャプチャーボタンは効きます。</p>
      </td>
    </tr>
    <tr>
      <td>十字ボタン</td>
      <td>
        <p>Proコントローラーでは十字ボタンが使用されます。Joy-Conには十字ボタンが存在しないため、4方向のボタンが分離した方向ボタンとなります。</p>
        <p>十字ボタンと方向ボタンの差異は以下のとおりです。</p>
        <ul>
          <li>十字ボタンでは上下ボタン、左右ボタンの同時押しができません。</li>
          <li>
            <p>十字ボタンは4つのボタンが結合しているため、Joy-Conの方向ボタンと比較すると、左右に素早く切り替えた場合などにまれにユーザーの意図とは関係なく上や下などに入ることがあります。</p>
          </li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>アナログスティック</td>
      <td>
        <p>Joy-Conのアナログスティックの可動域は、Proコントローラーと比較すると狭くなっています。</p>
        <p>アナログスティックの上限値/下限値は共通ですが、アナログスティックの値の解像度が異なります。</p>
      </td>
    </tr>
    <tr>
      <td>加速度センサー<br />ジャイロセンサー</td>
      <td>
        <p>Proコントローラーでは、加速度センサーとジャイロセンサーが搭載されています。<br />Joy-Con 2本持ち状態とJoy-Conグリップ装着状態の場合は、右のセンサーが使用されます。</p>
      </td>
    </tr>
    <tr>
      <td>HD振動</td>
      <td>
        <p>Proコントローラーには左右のグリップの中に振動子が1つずつ入っており、合計で2つの振動子が入っています。</p>
        <p>Joy-Con&nbsp;グリップ装着状態はProコントローラーと同じ感覚で使用することができます。</p>
        <p>Joy-Con&nbsp;2本持ち状態では、左右が分離していますので、振動の左右分離している感覚が向上します。</p>
      </td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_124022603_h1_5">Npad に対する Joy-Con の割り当ての設定 (NpadJoyAssignmentMode)</h1>
<h2 id="Anchor_124022603_h2_7">「2本セット割り当て」と「1本ずつ割り当て」</h2>
<p>Npad ID で指定された Npad に対して Joy-Con を「2本セット」で割り当てるか「1本ずつ」割り当てるかを、Npad ID 毎に設定することができます。</p>
<ul>
  <li>2本セット 割り当て (<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a6c4b0ecdaa297bb33e65d46b2f350546a14b223c9a0a1d5d9eb26a03b68e7c3a8">NpadJoyAssignmentMode_Dual</a>)<br />Joy-Con は 1つの Npad に対して左右セットで接続されます。<br />2本セット割り当ての時に有効な操作形態は、&nbsp; Joy-Con 2本持ち操作(<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a1528b4e8a2b39e40f5f76c847c4ccc82">NpadStyleJoyDual</a>) と Switch Proコントローラー操作(NpadStyleFullKey) とです。<br />Joy-Con 2本持ち操作では、左右の Joy-Con のすべての入力を取得することができます。左右の接続状態も個別に取得することが可能で左右どちらか一方だけ接続されている場合も、その Joy-Con の入力を取得することが可能です。<br />Switch Proコントローラー操作は、 Joy-Con が 2本そろって初めて入力状態の取得が可能になります。片方だけ Joy-Con が接続されているときは、 Switch Proコントローラー操作としてはコントローラーが未接続状態のように振る舞います。 Joy-Con の接続状態を左右個別に扱いたいときは、 Joy-Con 2本持ち操作(<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a1528b4e8a2b39e40f5f76c847c4ccc82">NpadStyleJoyDual</a>)を使用してください。<br /><br /></li>
  <li>1本ずつ 割り当て (<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a6c4b0ecdaa297bb33e65d46b2f350546aa5c3821ed1fa09b77fb68d7930b20c08">NpadJoyAssignmentMode_Single</a>)<br />1つの Npad に対して 左右いずれかの Joy-Con のみが割り当てられます。 Joy-Con が左右接続された場合は、 Joy-Con (L) と Joy-Con (R) がそれぞれ異なる Npad に対して割り当てられます。<br />1本ずつ割り当ての時に有効な操作形態は、 Joy-Con (R) 操作(<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#aa09597ee31314ec6782e5f56384ea5b9">NpadStyleJoyRight</a>) と Joy-Con (L) 操作 (<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a93f2c921b3f4d3a9b8e02ddc30ea50b8">NpadStyleJoyLeft</a>) です。</li>
</ul>
<h2 id="Anchor_124022603_h2_8">Npad の操作形態 (NpadStyleSet) の設定と Joy-Con の割り当て設定</h2>
<p>Joy-Con の割り当て設定は、Npadの操作形態 (NpadStyleSet) を変更すると自動的に変更されることがあります。</p>
<p>「1本ずつ割り当て」に対応した操作形態のみ (<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#aa09597ee31314ec6782e5f56384ea5b9">NpadStyleJoyRight</a>&nbsp;と&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a93f2c921b3f4d3a9b8e02ddc30ea50b8">NpadStyleJoyLeft</a>) が有効になっている場合は、自動的に&nbsp;1本ずつ 割り当て (NpadJoyAssignmentMode_Single) に変更されます。<br />「2本ずつ割り当て」に対応した操作形態のみ&nbsp;(<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a1528b4e8a2b39e40f5f76c847c4ccc82">NpadStyleJoyDual</a>&nbsp;と <a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a594f4eed71a6821bd28283ce0a273fb1">NpadStyleFullKey</a>) が有効になっている場合は、自動的に 2本ずつ割り当てに変更されます。</p>
<p>操作形態を変更した際に割り当てモードの変更が発生する場合は、接続済みの Joy-Con は一度切断されます。<br /><strong>(例) 1本ずつ割り当てに対応した操作形態から、2本ずつ割り当てに対応した操作形態への変更</strong></p>
<ol>
  <li>アプリケーションが&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#aa09597ee31314ec6782e5f56384ea5b9">NpadStyleJoyRight</a>&nbsp;と&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a93f2c921b3f4d3a9b8e02ddc30ea50b8">NpadStyleJoyLeft</a>&nbsp;のみを有効にする</li>
  <li>システムによって Joy-Con の割り当て設定がすべてのNpad に対して、 <a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a6c4b0ecdaa297bb33e65d46b2f350546aa5c3821ed1fa09b77fb68d7930b20c08">NpadJoyAssignmentMode_Single</a> に設定される</li>
  <li>ユーザーが Joy-Con (R) が NpadId::No1 に対して、「1本ずつ割り当て」として接続される</li>
  <li>アプリケーションが&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a1528b4e8a2b39e40f5f76c847c4ccc82">NpadStyleJoyDual</a>&nbsp;のみ有効に変更する</li>
  <li>システムによって Joy-Con の割り当て設定がすべてのNpad に対して、 <a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a6c4b0ecdaa297bb33e65d46b2f350546a14b223c9a0a1d5d9eb26a03b68e7c3a8">NpadJoyAssignmentMode_Dual</a> に設定される</li>
  <li>システムによって 3. で接続されていた Joy-Con (R) が自動的に切断される</li>
</ol>
<p>Joy-Con を切断させずに、「1本ずつ割り当て」の状態から「2本ずつ割り当て」に変更するためには、一時的に2本持ちも1本持ちも有効にした上で、 Joy-Con の割り当て設定を変更してください。</p>
<p>
  <strong>(例) 1本ずつ割り当てに対応した操作形態から2本ずつ割り当てに Joy-Con を切断せずに変更する</strong>
</p>
<ol>
  <li>アプリケーションが&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#aa09597ee31314ec6782e5f56384ea5b9">NpadStyleJoyRight</a>&nbsp;と&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a93f2c921b3f4d3a9b8e02ddc30ea50b8">NpadStyleJoyLeft</a>&nbsp;のみを有効にする</li>
  <li>システムによって Joy-Con の割り当て設定がすべてのNpad に対して、 <a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a6c4b0ecdaa297bb33e65d46b2f350546aa5c3821ed1fa09b77fb68d7930b20c08">NpadJoyAssignmentMode_Single</a> に設定される</li>
  <li>ユーザーが Joy-Con (R) が NpadId::No1 に対して、「1本ずつ割り当て」として接続される</li>
  <li>アプリケーションが&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a1528b4e8a2b39e40f5f76c847c4ccc82">NpadStyleJoyDual</a>&nbsp;と&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#aa09597ee31314ec6782e5f56384ea5b9">NpadStyleJoyRight</a>&nbsp;と&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a93f2c921b3f4d3a9b8e02ddc30ea50b8">NpadStyleJoyLeft</a>&nbsp;を有効に変更する<br />この時点で「1本ずつ割り当て」対応した操作形態が有効のため、 Joy-Con の割り当て設定の変更は発生しない&nbsp;</li>
  <li>アプリケーションが、API を利用して Joy-Con の割り当て設定を、「2本セット割り当て」に変更する<br />割り当て設定の変更方法は、&nbsp;<a href="#Anchor_124022603_h3_1">割り当て設定の変更</a>&nbsp;で説明しています。</li>
  <li>アプリケーションが&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a1528b4e8a2b39e40f5f76c847c4ccc82">NpadStyleJoyDual</a>&nbsp;のみ有効に変更する</li>
</ol>
<h3 id="Anchor_124022603_h3_1">割り当て設定の変更</h3>
<p>「2本セット」割り当てから「1本ずつ」割り当てへの変更は、<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a617f872f844f16873b925fe0669a898a">SetNpadJoyAssignmentModeSingle()</a>&nbsp;を使用します。<br />指定した Npad ID に対してあらかじめ左右両方の Joy-Con が接続されている場合、第2引数に Joy-Con の種類を設定することでどちらの Joy-Con を残すかを指定することができます。<br />第2引数に何も指定しなかった場合は、デフォルトで Joy-Con (L) が残り Joy-Con (R) はあいているNpadに対して自動的に再割り当てされます。<br />新たに Joy-Con が割り当てられた Npad は、そのままの状態では「2本セット」割り当てになります。<br />両方とも「1本ずつ」に変更する場合は、もう一方の Npad に対しても1本ずつ割り当てに変更します。</p>
<p>「1本ずつ」割り当てから「2本セット」割り当てへの変更は、<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#ae113078fec2203ef85f1c92bc9119183">SetNpadJoyAssignmentModeDual()</a>&nbsp;を使用します。<br />本関数では Joy-Con と Npad の対応関係は変化しないまま、 割り当てモードのみ 「1本ずつ」から「2本セット」に変化します。<br /><u><a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a015bdbf795f0a31cdecfbe5f0ac7352d">MergeSingleJoyAsDualJoy()</a></u>&nbsp;を使用すると、左右の Joy-Con がそれぞれ接続された別々の Npad ID を指定して、1つの Npad ID に統合することができます。<br />統合された Npad は、「2本セット」割り当てに自動的に変更されます。&nbsp;</p>
<h1 id="Anchor_124022603_h1_6">Joy-Con の持ち方設定</h1>
<p>Npad では、 Joy-Con の持ち方を設定することができます。<br />Joy-Con の持ち方を設定すると以下のような効果があります。</p>
<ul>
  <li>プレイヤーランプの点灯位置をユーザーにとって直観的に変更<ul><li>横持ちの場合は左から点灯 / 縦持ちの場合は上から順に点灯</li></ul></li>
  <li>ゲームの対応している持ち方/操作形態のままで、本体機能を操作することが可能</li>
</ul>
<div class="note_new">
  <div class="note_new_left">注意：</div>
  <div class="note_new_right">
    <p>持ち方の設定を行っても、GetNpadState() 及び GetNpadStates() で取得される入力状態は変更されません。<br />横持ちの場合に、アナログスティックの入力を回転したい場合などは、アプリケーション内での対応が必要です。</p>
  </div>
</div>
<p>NintendoSdk NxAddon で対応している Joy-Con の持ち方は以下の通りです。</p>
<ul>
  <li>片手持ち (&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#af526a8dbb614b2703ab26245ec37e15fa4c6d26496f0de85ce5eca9103caf9f9d">NpadJoyHoldType_Vertical</a>&nbsp;)<br />Joy-Con のL/ZLボタンまたはR/ZRボタンを上にして、縦向きに持った状態です。</li>
  <li>横持ち (&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#af526a8dbb614b2703ab26245ec37e15fa3408c344165586f68fe1686e042f573a">NpadJoyHoldType_Horizontal</a>&nbsp;)<br />Joy-Con の SL/SR ボタンを上にして、横向きに持った状態です。</li>
</ul>
<p>これ以外の持ち方をアプリケーションで対応している場合は、上記のうちで近いスタイルを選択するようにしてください。</p>
<h1 id="Anchor_124022603_h1_7">本体装着状態の検出</h1>
<p>Joy-Con が本体に装着された状態を検出することができます。<br />Joy-Con が本体に装着された状態の入力を取得するためには、<a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#ac04a55a989058f9d69c5c3e4e29c4480">SetSupportedNpadStyleSet()</a> で <a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a162751ccfcb8408b822ee308ebe7a2c9">NpadStyleHandheld</a> を有効にしたうえで、<a href="../../../Api/HtmlNX/structnn_1_1hid_1_1_npad_id.html#afc19a9a80ac740645b567fc7e1dc36cf">NpadId::Handheld</a> で入力状態を取得してください。<br /><a href="../../../Api/HtmlNX/structnn_1_1hid_1_1_npad_handheld_state.html#a21283e1e0366481c040820f94afcd2fb">NpadHandheldState::attributes </a>の <a href="../../../Api/HtmlNX/structnn_1_1hid_1_1_npad_attribute.html#a43fa7c0a0a7f76f4842b790cca2f85c0">NpadAttributes::IsConnected</a> の状態を確認することで 両方の Joy-Con が装着されているかどうかを確認することができます。</p>
<h1 id="Anchor_124022603_h1_8">コントローラーの色情報の取得</h1>
<p>NX Addon を利用すると、コントローラーの個別の色情報を取得できます。</p>
<p>コントローラーの色情報は、メインの色とサブの色の2色から構成されて、それぞれ 8bit の RGB の値として取得されます。<br />コントローラーの色情報は、 Joy-Con と Switch Proコントローラーに格納されています。 アプリが有効にしている <a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a1528b4e8a2b39e40f5f76c847c4ccc82">NpadStyleJoyDual </a>/ <a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#a93f2c921b3f4d3a9b8e02ddc30ea50b8">NpadStyleJoyLeft</a> / <a href="../../../Api/HtmlNX/namespacenn_1_1hid.html#aa09597ee31314ec6782e5f56384ea5b9">NpadStyleJoyRight</a> のいずれかを有効にしている場合に取得することが可能です。&nbsp;</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
<!--AddLink-->
<script>
var NintendoSdkApiRefernce = {
    idMap: {},
    linkRewrite: function ()
    {
        var idMap = NintendoSdkApiRefernce.idMap;
        function rewrite(el)
        {
            var e = idMap[el.className];
            if (e === undefined)
            {
                return;
            }
            var html = '';
            html += '<a href=';
            html += e.url;
            html += ' target="_blank">';
            html += el.innerHTML;
            html += '</a>';
            el.innerHTML = html;
        }
        var apiLinkElems = document.querySelectorAll('span[class*="ApiLink_"]');
        for (var i = 0, n = apiLinkElems.length; i< n; ++i) {
            rewrite(apiLinkElems[i]);
        }
    }
};
function SetUrl( id, url )
{
    NintendoSdkApiRefernce.idMap[id] = { url: url };
}
SetUrl( 'ApiLink_nn__hid__AnalogStickMax', '../../../Api/HtmlNX/namespacenn_1_1hid.html#aae5f082196ed0f5db69b1862e8b64b4d' )

NintendoSdkApiRefernce.linkRewrite();
</script>
<!--AddLink-->
</body>
</html>
