<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>ペインアニメーションを作成する</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- ペインアニメーションを作成する -->
<div class="pagetitle" id="PageId_83956238">ペインアニメーションを作成する</div>
<div class="text_separate">
<h1 id="Anchor_83956238_h1_1">ペインアニメーションを作成する</h1>
<p>ここでは、レイアウトに配置したペインにアニメーション効果をつける方法を説明します。</p>
<h2 id="Anchor_83956238_h2_1">アニメーションの基本的な流れ</h2>
<p>レイアウトエディタではキーフレームアニメーションという手法でアニメーションを作成します。<br /> 大まかな手順として、まずアニメーションしていないレイアウトを作成し、そのレイアウトに対してキーフレームを設定することでアニメーションするレイアウトを作成します。</p>
<h2 id="Anchor_83956238_h2_2">カーブエディタウィンドウ</h2>
<p>アニメーションを作成するレイアウトを開きます。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955988/180916700.png" class="embedded-image" />
  </span>
  <br /> アニメーションの編集には、カーブエディタウィンドウを使用します。<br /> ツールボタンの一番左側をクリックするか、[ メニュー ] &rarr; [ ウィンドウ ] &rarr; [ カーブエディタ ] を選択してカーブエディタを表示状態にします。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955988/180916706.png" width="430" class="embedded-image" />
  </span>
  <br /> ここで、先ほど開いたレイアウトウィンドウから、ハートのペインをクリックして選択します。<br /> カーブエディタの左側ツリーに項目が表示され、選択ペインがアニメーション編集対象として設定されたことが確認できます ( <strong><span style="color: rgb(255,0,0);">A</span></strong> ) 。</p>
<h3 id="Anchor_83956238_h3_1">アトリビュートツリー</h3>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955988/83080333.png" class="embedded-image" />
  </span>
  <br /> カーブエディタの左側ツリーをアトリビュートツリーと呼びます(A)。<br /> アトリビュートツリーには、レイアウトウィンドウで選択されたペインが持っている、アニメーションする要素が表示されます。<br /> （アニメーションする要素のことをアトリビュート、アニメーションアトリビュートと呼びます。）<br /> アトリビュートは子アトリビュートを持つことができます。子アトリビュートをもったアトリビュートは左端に＋マークが表示されており、クリックすることで子アトリビュートを展開して表示します。<br /> アトリビュートをクリックすると、アトリビュートが選択状態になります（アイコンが鮮やかになり、右端にラインが表示されます。）。<br /> アニメーションの作成や編集をするには、まずこのツリーの中から自分の編集したいアトリビュートを選択行ってください。<br /> なお、自分もしくは自分の子アトリビュートがキーフレーム情報を持っている場合は赤色のマークが表示されます。</p>
<h3 id="Anchor_83956238_h3_2">グラフ表示領域</h3>
<p>カーブエディタの右側、グラフ表示領域(B)には、前述のアトリビュートツリーで、選択されているアトリビュートの情報が表示されます。<br /> グラフ表示領域の横軸は、時間、縦軸は各アトリビュートの値を表しています。</p>
<h2 id="Anchor_83956238_h2_3">キーフレームの編集</h2>
<p>ここでは、キー編集の準備として、グラフ表示領域の表示範囲の変更方法を説明します。</p>
<h3 id="Anchor_83956238_h3_3">表示領域の移動、スケール変更</h3>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955988/83080331.png" class="embedded-image" />
  </span>
  <br />スペースキーを押しながら、グラフビューを左ドラッグすると、表示領域を移動します。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955988/83080329.png" class="embedded-image" />
  </span>
  <br />スペースキーを押しながら、グラフビューを右ドラッグすると、表示領域のスケールを増減します。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955988/83080330.png" class="embedded-image" />
  </span>
  <br />横方向のドラッグの場合は、時間軸、縦方向のドラッグの場合には、値軸のスケールが変化します。 なお、Shift キーを押しながら操作をすることで、変化する軸を固定することが可能です。</p>
<p>
  <br /> また、F キーで、選択部分が全体表示され、A キーで表示対象が全体表示されます。<br /> 設定したキー情報を見失ってしまったときに利用してください。</p>
<h2 id="Anchor_83956238_h2_4">ペインの位置をアニメーションさせる</h2>
<h3 id="Anchor_83956238_h3_4">操作モードの確認</h3>
<p>カーブエディタには複数の操作モードがあります。<br /> 以降では、通常モードでの説明を行いますので最初にウィンドウ左上の「カーブ操作」ボタンを確認して「通常」が選ばれていることを確認しておいてください。</p>
<h3 id="Anchor_83956238_h3_5">キーフレームの設定</h3>
<p>それでは、ペインの位置をアニメーションさせてみましょう。<br />[ PaneNode ] &rarr; [ pane ] &rarr; [ pos ] &rarr; [ X ] と、ツリー項目を展開、クリックし、X アトリビュートを選択します。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955988/83080327.png" class="embedded-image" />
  </span>
  <br /> ここで、[ メニュー ] &rarr; [ キー作成 ] もしくは、S キーを押します。<br /> グラフビューに黒い点としてキーフレームが作成され(A)、キー情報ビューに赤い四角が描画されたこと ( B ) が確認できます。<br /> <strong>表示されない場合は、表示領域がずれている可能性があります。A キーを押して、全体表示を行ってください。</strong><br /> <br /> <span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955988/83080328.png" class="embedded-image" /></span><br /> 次に時間コントロールビュー ( A ) をクリックします。青い四角が移動して、現在の時間が変化したことが確認できます 。<br /> このとき、同時にカーブエディタウィンドウ下部の時間コントロールパネルの現在の時間も更新されています ( B ) 。<br /> <br /><span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955988/83080378.png" class="embedded-image" /></span><br /> 現在の時間を変更した後、ふたたび [ メニュー ] &rarr; [ キー作成 ] でキーを作成します。<br /> キーフレームとキーフレームの間が濃い赤い線で結ばれたことが確認できます ( A ) 。これをアニメーションカーブ、もしくは単にカーブと呼びます。<br /> 現時点では、カーブはただの直線です。これを編集してみます。<br /> グラフビューでマウスを左ドラッグすると、矩形選択が可能です。右側のキーフレームを選択してみてください。<br /> <br /><span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955988/83080379.png" class="embedded-image" /></span><br /> 選択されたキーの上に、赤い横線と、点が表示されたことが確認されます ( A ) 。ここで右ドラッグします。<br /> 選択されたキーが移動し、それにともなってキーの間のカーブが変形します(B)。<br /> 正しくキーが移動できない場合は、ウィンドウ左上の｢カーブ操作｣ボタンが、｢通常｣か｢最も近いキーを調整｣になっていることを確認してください。<br /> <br /><span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955988/83080380.png" class="embedded-image" /></span><br /> 時間コントロールパネルの再生ボタンをクリックします ( A ) 。アニメーション再生が開始されカーブに沿ってパラメータが変化することが確認できます。<br /> 今回は、ペインの X 座標がカーブに沿って変化しています。<br /> アニメーションの再生を停止するには、時間コントロールパネルの停止ボタンをクリックします ( B ) 。 このように、カーブの形を編集することでアニメーションを作成していきます。</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>Ctrl キーを押しながらキーフレーム変更を行うと、時間軸固定、値軸固定でパラメータ調整が行えます。<br /> Ctrl キーを押しながら、最初にドラッグした方向で、移動軸が固定されます。</p>
  </div>
</div>
<h2 id="Anchor_83956238_h2_5">スロープの編集</h2>
<h3 id="Anchor_83956238_h3_6">キーフレームに対するスロープ種類の設定</h3>
<p>キー選択状態で、メニューのボタンを選択することによって、キーフレームに対して、スロープの種類を設定することが可能です。<br /> 現在は、スプライン ( スムーズな補間 ) 、線形 ( 直線的な補間 ) 、フラット ( スロープの傾きがゼロに固定される補間 ) 、ステップ&nbsp; ( 段階的なスロープ形状をもつ補間 ) を指定できます ( 各図 ) 。</p>
<p>
  <br /> <strong>スロープの種類が指定されているキーフレームのスロープ値は自動的に設定されます。</strong></p>
<table class="table">
  <tbody>
    <tr>
      <th style="text-align: center;">スプライン</th>
      <th style="text-align: center;">リニア</th>
    </tr>
    <tr>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_83955988/83080381.png" width="300" class="embedded-image" />
        </span>
      </td>
      <td>
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_83955988/83080387.png" width="300" class="embedded-image" />
          </span>
        </p>
      </td>
    </tr>
    <tr>
      <th style="text-align: center;">フロート</th>
      <th style="text-align: center;">ステップ</th>
    </tr>
    <tr>
      <td>
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_83955988/83080386.png" width="300" class="embedded-image" />
          </span>
        </p>
      </td>
      <td>
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_83955988/83080388.png" width="300" class="embedded-image" />
          </span>
        </p>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Anchor_83956238_h3_7">キーフレームのスロープの個別編集</h3>
<p>前述のスロープ種類設定とは別に、ユーザが任意のスロープ値をキーフレームに対して設定することも可能です。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955988/83080389.png" class="embedded-image" />
  </span>
  <br /> キーを選択します。<br /> キーの上に両端に点の書かれた赤い線が表示されます。これがスロープをあらわしています ( A ) 。</p>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955988/83080383.png" class="embedded-image" />
  </span>
  <br /> 制御点を矩形選択します。スロープが黄緑色に変化しました。これば、スロープが選択された状態です ( A ) 。<br /> ここで、右ドラッグをするとスロープを変化させることができます。スロープが変更されると、キーの間のカーブの形が変化します。</p>
<table class="table">
  <tbody>
    <tr>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_83955988/83080382.png" class="embedded-image" />
        </span>
      </td>
      <td>
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_83955988/83080384.png" class="embedded-image" />
          </span>
        </p>
      </td>
      <td>
        <p>
          <span class="embedded-file-wrapper ">
            <img src="../Attachments/Attach_83955988/83080385.png" class="embedded-image" />
          </span>
        </p>
      </td>
    </tr>
  </tbody>
</table>
<p>
  <br /> スロープを編集することで、より多彩なアニメーションカーブを編集することが可能です。<br /> スロープを編集したキーフレームは、固定されたスロープを持つキーフレームとして設定されます。<br /><strong>以降のキーフレーム調整時には、スロープ値が自動的に計算されない点に注意してください。</strong></p>
<h2 id="Anchor_83956238_h2_6">プレビュー</h2>
<p>作成したアニメーションをレイアウトビューアで確認する方法は、通常のレイアウトの場合とまったくおなじです。<br /> [ メニュー ] &rarr; [ ツール ] &rarr; [ ビューアに転送 ( 強制アニメモード ) ] ( Shift + F5 ) としてください。<br /> <br /> 時間コントロールパネルの中央よりの数値は、アニメーション再生フレーム区間を表しています。<br /> ここで指定された範囲ツールはアニメーションの再生ループをします。<br /> また、ビューアに転送される時間区間もアニメーション再生フレーム区間となります。</p>
<h2 id="Anchor_83956238_h2_7">ファイル出力</h2>
<p>作成したアニメーションを保存する場合は、レイアウトを保存する場合と同様に、[ メニュー ] &rarr; [ ファイル ] &rarr; [ 保存 ] &rarr; [ すべて ] とします。<br /> レイアウト情報と同時に、アニメーション情報が保存されます。<br /> アニメーション情報のファイル拡張子は、flan です。<br /> <br /> 読み込む場合も同様に、[ メニュー ] &rarr; [ ファイル ] &rarr; [ 開く ] &rarr; [ すべて ] とするとレイアウトと同時に同じファイル名のアニメーションが自動的に読み込まれます。<br /> <br /> [ メニュー ] &rarr; [ ファイル ] &rarr; [ 開く ] -&gt; [ ファイル種類を指定して開く ] &rarr; [ レイアウト ]<br /> [ メニュー ] &rarr; [ ファイル ] &rarr; [ 追加で開く ] -&gt; [ ファイル種類を指定して開く ] &rarr; [ アニメーション ]<br /> 以上のような操作で、アニメーションとレイアウトを別々に読み込むことも可能です。<br /> ひとつのレイアウトに対して、複数のアニメーションを別のファイル名で作成するような使用方法も可能ですが、アニメーション区間タグ機能を活用すると、ほとんど必要とならないはずです。</p>
<h2 id="Anchor_83956238_h2_8">キーフレーム区間外領域</h2>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955988/83080370.png" class="embedded-image" />
  </span>
  <br /> 先頭 ( もっとも小さい時間値を持つ ) キーフレームの時間値よりも、前のフレーム領域、<br /> または、最終 ( もっとも大きい時間値を持つ ) キーフレームの時間値よりも、後のフレーム領域のことを、キーフレーム区間外領域と呼びます ( A ) 。<br /> 通常、キーフレーム区間外領域では、カーブが定義されていません。<br /> LayoutEditor は、キーフレーム区間外領域のカーブを自動的に計算する機能を持っています。</p>
<h3 id="Anchor_83956238_h3_8">区間外繰り返しの設定</h3>
<p>
  <span class="embedded-file-wrapper ">
    <img src="../Attachments/Attach_83955988/83080371.png" class="embedded-image" />
  </span>
  <br />まず、繰り返しを設定する、アニメーションアトリビュートを選択します。<br /> 次に、[カーブ]メニューにあるツールボタンから、[ キーフレーム区間以後の設定 ] &rarr; [ 繰り返し ] を選びます。<br /> 選択カーブに対して繰り返しが適用されます。<br /> <br /><span class="embedded-file-wrapper "><img src="../Attachments/Attach_83955988/83080366.png" class="embedded-image" /></span><br /> 最終フレーム以後のフレームに、作成したカーブと同じ形を繰り返すように、半透明のカーブが描画されているはずです。<br /> 表示が変化しない場合は、[ 表示 ] &rarr; [ キーフレーム区間外を描画する ] がチェックされているか確認してください。</p>
<h3 id="Anchor_83956238_h3_9">区間外繰り返しを利用したデータのプレビュー</h3>
<p>区間外繰り返しを利用したデータも通常の場合と変わりなくプレビューが可能です。<br /> [ メニュー ] &rarr; [ ツール ] &rarr; [ ビューアに転送 ] とするとレイアウトビューアに作成したアニメーションが表示されます。<br /> <br /> ツールはレイアウトビューアにデータを転送する際に、区間外繰り返し部分のキーフレームを自動生成する処理を行っています。<br /> この処理のことを、区間外カーブのキーフレームへの焼付けと呼びます。<br /> 焼付け処理の ON / OFF は [ メニュー ] &rarr; [ 編集 ] &rarr; [ ツール環境設定 ] から制御することが可能です。</p>
<h3 id="Anchor_83956238_h3_10">区間外繰り返しを利用したデータのバイナリ変換</h3>
<p>バイナリ変換の際に、キーフレームへの焼付けを行うかどうかを制御することができます。</p>
<p>&nbsp;</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>区間外キーフレームの固定処理は、LayoutEditorで行う方法と、バイナリコンバータで行う方法があります。<br /> バイナリコンバータで行う場合は、コンバータの引数に--bake-infinity オプションが指定し、デフォルトで有効になっています。<br /> <br /> &rdquo;アニメーション区間タグ終端フレーム &rdquo; と &rdquo; ( キー自動生成の ) ループ終端フレーム&rdquo;が一致する場合に、下記のように<strong>処理方法によって終端フレームの値が異なってしまいます</strong>。</p>
    <ul>
      <li>ツールが処理　　：ループ先頭フレームの値</li>
      <li>コンバータが処理：ループ終端フレームの値</li>
    </ul>
    <p>そのため、<strong>「バイナリコンバータでの固定」に統一して運用することをお勧めします。</strong></p>
  </div>
</div>
<p>&nbsp;</p>
<p>
  <span class="status_macro_base status_macro_Blue">関連リンク</span> <span class="sv-ti-title-text">以下は関連ページへのリンクです。</span></p>
<table class="table">
  <tbody>
    <tr>
      <th>
        <a href="../Pages/Page_107781339.html">カーブエディタウインドウ</a>
      </th>
      <td>LayoutEditor のアニメーションを作成、編集する「カーブエディタウィンドウ」について説明します。( UI 説明 )</td>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_83955555/83080715.png" width="100" class="embedded-image" />
        </span>
      </td>
    </tr>
    <tr>
      <th>
        <a href="../Pages/Page_110086641.html">カーブエディタの操作</a>
      </th>
      <td>プロパティウィンドウでカーブによりアニメーションを付ける UI 「カーブエディタ」の操作について説明します。( クイックスタート )</td>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_83955555/83080715.png" width="100" class="embedded-image" />
        </span>
      </td>
    </tr>
    <tr>
      <th>
        <a href="../Pages/Page_83955974.html">アニメーション区間タグ機能を利用する</a>
      </th>
      <td>アニメーション区間タグ機能の利用方法を説明します。</td>
      <td>
        <span class="embedded-file-wrapper ">
          <img src="../Attachments/Attach_83955555/83080715.png" width="100" class="embedded-image" />
        </span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
