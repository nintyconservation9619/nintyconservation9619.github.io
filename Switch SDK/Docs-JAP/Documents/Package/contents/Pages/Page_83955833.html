<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>プライオリティの動作</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- プライオリティの動作 -->
<div class="pagetitle" id="PageId_83955833">プライオリティの動作</div>
<div class="text_separate">
<h1 id="Anchor_83955833_h1_1">プライオリティの動作</h1>
<h2 id="Anchor_83955833_h2_1">プライオリティの種類</h2>
<h3 id="Anchor_83955833_h3_1">プレイヤープライオリティ</h3>
<p>プレイヤープライオリティは、各サウンドの再生時に、再生の優先順位を決める値です。値が大きいほど、優先順位は高くなります。</p>
<h3 id="Anchor_83955833_h3_2">発音プライオリティ</h3>
<p>発音プライオリティは、各サウンドが実際にボイスを発音する時に、発音の優先順位を決める値です。値が大きいほど、優先順位は高くなります。</p>
<h2 id="Anchor_83955833_h2_2">動作仕様</h2>
<h3 id="Anchor_83955833_h3_3">プレイヤープライオリティ</h3>
<p>サウンド毎に、SoundMaker のプレイヤー優先度（0 ～ 127 の値）で設定を行います。ただし、プログラムで、この値を変更することもできます。</p>
<h4 id="Anchor_83955833_h4_1">プレイヤープライオリティの判定</h4>
<p>プレイヤープライオリティの優先判定を行う必要がある場合、再生しようとするサウンド（サウンド A）のプレイヤープライオリティが、すでに再生しているサウンドの中で、最低のプレイヤープライオリティのサウンド（サウンド B）より低いなら、サウンド A の再生は失敗します。そうでなければ、サウンド A の再生は成功して、サウンド B を停止します。</p>
<p>プレイヤープライオリティの優先判定が行われる状況は、以下の 3 つです。</p>
<ul>
  <li>
    <strong>各プレイヤーに設定したサウンドリミットを超えて、サウンドを再生しようとしたとき</strong> <br />プレイヤー毎に、同時に再生できるサウンドの最大数（サウンドリミット）を設定することができます。この値を超えてサウンドを再生しようとすると、同じプレイヤーで再生中のサウンドを対象に、プレイヤープライオリティの判定が行われます。</li>
  <li>
    <strong>各サウンドを、システムで設定した最大数を超えて再生しようとしたとき</strong> <br /> ストリームサウンド、シーケンスサウンド、ウェーブサウンドそれぞれについて、システム全体で再生できる最大数が設定されています。この値を超えてサウンドを再生しようとすると、再生中のすべての該当するサウンドを対象に、プレイヤープライオリティの判定が行われます。</li>
  <li>
    <strong>シーケンスサウンドのトラックを、システムで設定した最大数を超えて使用しようとしたとき</strong> <br /> シーケンストラックは、システム全体で再生できる最大数が設定されています。この値を超えたシーケンストラックを使用してサウンドを再生しようとすると、再生中のすべての該当するサウンドを対象に、プレイヤープライオリティの判定が行われます。<br /> ただし、1 つのサウンドに複数のトラックが必要な場合があるため、すべてのトラックを確保することができるまで、プライオリティ判定が繰り返されます。</li>
</ul>
<h4 id="Anchor_83955833_h4_2">発音プライオリティの設定</h4>
<p>発音プライオリティは、各サウンドで、以下のように決定します。</p>
<ul>
  <li>ストリームサウンド<br />システムで固有の特殊な値で、変更することはできません。</li>
  <li>シーケンスサウンド<br /> SoundMaker のチャンネル優先度 (0 ～ 127 の値) で設定を行います。また、シーケンスコマンドまたは MIDI コントロールチェンジで設定できる、シーケンストラックの発音プライオリティ (0 ～ 127 の値、デフォルト値 64) で、トラック毎にプライオリティを変化させることができます。<br /> 最終的なプライオリティ値は、以下の式で求められます。<br />　(最終プライオリティ) ＝ (シーケンス全体のプライオリティ) + (トラック毎のプライオリティ)</li>
  <li>ウェーブサウンド<br /> SoundMaker のチャンネル優先度 (0 ～ 127 の値) で設定を行います。<br />最終的なプライオリティ値は、以下の式で求められます。<br />　(最終プライオリティ) ＝ (SoundMaker のチャンネル優先度で設定した値) + 64</li>
</ul>
<h4 id="Anchor_83955833_h4_3">発音プライオリティの判定</h4>
<p>以下のケースにおいて、解説する発音プライオリティの優先判定を行います。</p>
<ul>
  <li>最大同時発音数以上のボイスを発音しようとしたとき <br />最大同時発音数 (デフォルト 96) 以上のボイスを発音しようとしたとき、発音プライオリティの判定が行われます。<br /> 再生しようとするボイス (ボイス A) の発音プライオリティが、すでに再生しているボイスの中で、最低の発音プライオリティのボイス (ボイス B) より低い場合、ボイス A の再生は失敗します。<br /> 上記に該当しない場合は、ボイス A の再生は成功して、ボイス B を停止します。</li>
  <li>
    <strong>オーディレンダラの処理オーバーにより、ボイスが強制的に停止するとき</strong> <br />オーディオレンダラの処理オーバーが発生すると、幾つかのボイスが強制的に止められます。<br /> すでに再生しているボイスの中で、発音プライオリティが低い順番でボイスを停止します。</li>
</ul>
<h3 id="Anchor_83955833_h3_4">同じ条件の対象同士でのプライオリティの判定</h3>
<p>すべてのプライオリティの処理において、対象となるサウンドやボイスには、時間変化でプライオリティが下がるような機能はありません。ただし、プライオリティ値が全く同じサウンド（ボイス）が複数存在した場合、再生開始が早いものほど、プライオリティが低いと判定されます。</p>
<h3 id="Anchor_83955833_h3_5">特殊な優先判定の処理</h3>
<h4 id="Anchor_83955833_h4_4">リリースフェーズ中の発音プライオリティ</h4>
<p>エンベロープのリリースフェーズに入ったボイスには、すべての発音プライオリティの中で優先度が最低となる、特殊な発音プライオリティが自動的に適用されます。</p>
<p>SoundMaker でリリース時優先度固定のオプションを設定することで、この動作を抑制することができます。</p>
<h4 id="Anchor_83955833_h4_5">ストリームサウンドの発音プライオリティ</h4>
<p>ストリームサウンドのボイスには、すべての発音プライオリティの中で優先度が最高となる、特殊な発音プライオリティが自動的に適用されます。</p>
<p>ストリームサウンドで発音中のボイスが、強制的に停止させられることはありません。</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
