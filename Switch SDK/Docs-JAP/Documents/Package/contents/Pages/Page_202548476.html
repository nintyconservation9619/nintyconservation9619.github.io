<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>エラーハンドリング</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- エラーハンドリング -->
<div class="pagetitle" id="PageId_202548476">エラーハンドリング</div>
<div class="text_separate">
<h1 id="Anchor_202548476_h1_1">エラーハンドリング</h1>
<h2 id="Anchor_202548476_h2_1">エラーメッセージの表示</h2>
<p>以下の Result については <a href="../../../Api/HtmlNX/namespacenn_1_1err.html#a245efc14eca3ff209ce8858b059ec739">nn::err::ShowError()</a>&nbsp;を使用してエラーメッセージを表示してください。</p>
<table class="wrapped" style="margin-left: 1.5em;">
  <tbody>
    <tr>
      <th>Result</th>
      <th>説明</th>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_device_not_available.html">nn::ldn::ResultDeviceNotAvailable</a>
      </td>
      <td>通信デバイスが使用できない状態です。</td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_device_occupied.html">nn::ldn::ResultDeviceOccupied</a>
      </td>
      <td>既に通信デバイスが占有されています。</td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_device_disabled.html">nn::ldn::ResultDeviceDisabled</a>
      </td>
      <td>無線機能が無効化されており、通信デバイスを使用できません。</td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_wifi_off.html">nn::ldn::ResultWifiOff</a>
      </td>
      <td>機内モードの設定により、無線機能が無効化されています。</td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_sleep.html">nn::ldn::ResultSleep</a>
      </td>
      <td>スリープ状態のため、無線機能が無効化されています。</td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_incompatible_version.html">nn::ldn::ResultIncompatibleVersion</a>
      </td>
      <td>ローカル通信バージョンが一致しないため接続できません。</td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_lower_version.html">nn::ldn::ResultLowerVersion</a>
      </td>
      <td>ローカル通信バージョンが通信相手よりも低いため接続できません。</td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_higher_version.html">nn::ldn::ResultHigherVersion</a>
      </td>
      <td>ローカル通信バージョンが通信相手よりも高いため接続できません。</td>
    </tr>
    <tr>
      <td>
        <a class="el" href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_node_count_limitation.html">nn::ldn::ResultNodeCountLimitation</a>
      </td>
      <td>ネットワークの最大ノード数が上限を超えています。</td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_invalid_state.html">nn::ldn::ResultInvalidState</a>
      </td>
      <td>LDN ライブラリの状態が正しくありません。</td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_connection_failed.html">nn::ldn::ResultConnectionFailed</a>
      </td>
      <td>LDN ライブラリの状態が正しくありません。</td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_network_not_found.html">nn::ldn::ResultNetworkNotFound</a>
      </td>
      <td>対象のネットワークが見つかりませんでした。</td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_connection_timeout.html">nn::ldn::ResultConnectionTimeout</a>
      </td>
      <td>接続要求がタイムアウトしました。</td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_connection_rejected.html">nn::ldn::ResultConnectionRejected</a>
      </td>
      <td>接続要求が拒否されました。</td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_invalid_network.html">nn::ldn::ResultInvalidNetwork</a>
      </td>
      <td>LDN ネットワークではありません。</td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_202548476_h2_2">通信デバイスの占有</h2>
<p>
  <a href="../../../Api/HtmlNX/namespacenn_1_1ldn.html#acc2dbb0d47aa883bd6fdc4d22db4d67b">nn::ldn::Initialize()</a>&nbsp;は通信デバイスの占有に失敗した場合に失敗し、以下に示すような&nbsp;<a href="../../../Api/HtmlNX/classnn_1_1_result.html">nn::Result</a>&nbsp;を返します。</p>
<table class="wrapped" style="margin-left: 1.5em;">
  <tbody>
    <tr>
      <th>Result</th>
      <th>発生する条件</th>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_wifi_off.html">nn::ldn::ResultWifiOff</a>
      </td>
      <td>無線通信機能が無効化されています。</td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_sleep.html">nn::ldn::ResultSleep</a>
      </td>
      <td>スリープ中です。</td>
    </tr>
    <tr>
      <td>
        <a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_device_occupied.html">nn::ldn::ResultDeviceOccupied</a>
      </td>
      <td>システムが通信機能を使用しています。</td>
    </tr>
  </tbody>
</table>
<p>上記の&nbsp;<a href="../../../Api/HtmlNX/classnn_1_1_result.html">nn::Result</a>&nbsp;についてはユーザに具体的な対処を求める必要がありますので、&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1err.html#a245efc14eca3ff209ce8858b059ec739">nn::err::ShowError()</a> を使用して専用のエラーメッセージを表示してください。また、全て&nbsp;<a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_device_not_available.html">nn::ldn::ResultDeviceNotAvailable</a>&nbsp;に属する&nbsp;<a href="../../../Api/HtmlNX/classnn_1_1_result.html">nn::Result</a>&nbsp;なので、以下に示すようにまとめてハンドリングすることができます。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre><span class="nn">nn::</span><span class="n">Result</span> <span class="n">result</span> <span class="o">=</span> <span class="nn">nn::ldn::</span><span class="n">Initialize</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span> <span class="nn">nn::ldn::ResultDeviceNotAvailable::</span><span class="n">Includes</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">)</span>
<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nn">nn::err::</span><span class="n">ShowError</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>LDN ライブラリの初期化に成功した後であっても、無線通信機能の無効化やスリープ、システムの通信によってアプリケーションのローカル通信が中断されることがあります。このとき、LDN ライブラリは&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1ldn.html#abc1339e71c5817f213faea9b89d46a77a02c64acdb9a7840d5e41f68eca65bbca">nn::ldn::State_Error</a>&nbsp;状態に遷移し、LDN ライブラリの&nbsp;<a href="../../../Api/HtmlNX/classnn_1_1_result.html">nn::Result</a>&nbsp;を返す全ての API が&nbsp;<a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_wifi_off.html">nn::ldn::ResultWifiOff</a>,&nbsp;<a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_sleep.html">nn::ldn::ResultSleep</a>,&nbsp;<a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_device_occupied.html">nn::ldn::ResultDeviceOccupied</a>&nbsp;のいずれかを返すようになります。この場合も&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1ldn.html#acc2dbb0d47aa883bd6fdc4d22db4d67b">nn::ldn::Initialize()</a>&nbsp;に失敗した場合と同じようにエラーメッセージを表示するのが望ましいです。また、一度この状態に陥った後、ローカル通信を再開するためには&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1ldn.html#a7334cac55eb557b03289cbac37089355">nn::ldn::Finalize()</a>&nbsp;を呼び出した上で&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1ldn.html#acc2dbb0d47aa883bd6fdc4d22db4d67b">nn::ldn::Initialize()</a>&nbsp;からやり直す必要があります。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre><span class="nn">nn::ldn::</span><span class="n">NetworkInfo</span> <span class="n">network</span><span class="p">;</span>
<span class="nn">nn::</span><span class="n">Result</span> <span class="n">result</span> <span class="o">=</span> <span class="nn">nn::ldn::</span><span class="n">GetNetworkInfo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">network</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span> <span class="nn">nn::ldn::ResultDeviceNotAvailable::</span><span class="n">Includes</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">)</span>
<span class="p">{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nn">nn::err::</span><span class="n">ShowError</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="nn">nn::ldn::</span><span class="n">Finalize</span><span class="p">();</span>
<span class="p">}</span></pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_202548476_h2_3">無線コントローラの上限</h2>
<p>通常、LDN ライブラリが構築するローカル・ネットワークには最大 8 台の端末が参加できます。しかし、以下の表に示す通り、無線コントローラの接続台数に応じてローカル・ネットワークの最大接続端末数が制限されてしまいます。</p>
<table class="wrapped" style="margin-left: 1.5em;">
  <tbody>
    <tr>
      <th>無線コントローラの台数</th>
      <th>ローカル・ネットワークの最大接続端末数</th>
    </tr>
    <tr>
      <td>全端末 2 台以下</td>
      <td>8 台</td>
    </tr>
    <tr>
      <td>全端末 4 台以下</td>
      <td>4 台</td>
    </tr>
    <tr>
      <td>全端末 5 台以上</td>
      <td>ローカル通信を実施できません。</td>
    </tr>
  </tbody>
</table>
<p>
  <a href="../../../Api/HtmlNX/namespacenn_1_1ldn.html#aedf31f08dc77928ff2943dd1042153f5">nn::ldn::CreateNetwork()</a>&nbsp;を実行した時点の無線コントローラの台数と&nbsp;<a href="../../../Api/HtmlNX/structnn_1_1ldn_1_1_network_config.html">nn::ldn::NetworkConfig</a>&nbsp;の nodeCountMax に指定した値によっては上記の条件を満たせず、<a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_node_count_limitation.html">nn::ldn::ResultNodeCountLimitation</a>&nbsp;を返して失敗することがあります。<a class="external-link" href="../../../Api/HtmlNX/namespacenn_1_1ldn.html#a5ac64f20634149d3247730228bdbf76b" rel="nofollow">nn::ldn::Connect()</a>&nbsp;についても同様で、その時点での無線コントローラの台数と接続先のネットワークの最大端末数 (nodeCountMax) によっては上記の条件を満たせず、<a class="external-link" href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_node_count_limitation.html" rel="nofollow">nn::ldn::ResultNodeCountLimitation</a>&nbsp;を返します。</p>
<p>この場合、エンドユーザに無線コントローラの接続台数を減らしてもらう必要があります。<a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_node_count_limitation.html" style="text-decoration: underline;">nn::ldn::ResultNodeCountLimitation</a>&nbsp;には専用のエラーメッセージが用意されており、<a href="../../../Api/HtmlNX/namespacenn_1_1err.html#a245efc14eca3ff209ce8858b059ec739">nn::err::ShowError()</a>&nbsp;に&nbsp;<a class="external-link" href="../../../Api/HtmlNX/classnn_1_1_result.html" rel="nofollow">nn::Result</a>&nbsp;を渡すことで適切な案内を画面に表示できます。</p>
<h2 id="Anchor_202548476_h2_4">通信バージョンの相違</h2>
<p>
  <a class="external-link" href="../../../Api/HtmlNX/namespacenn_1_1ldn.html#a5ac64f20634149d3247730228bdbf76b" rel="nofollow">nn::ldn::Connect()</a>&nbsp;は接続先のネットワークとローカル通信バージョンが一致しない場合、<a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_lower_version.html">nn::ldn::ResultLowerVersion</a>&nbsp;あるいは&nbsp;<a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_higher_version.html">nn::ldn::ResultHigherVersion</a>&nbsp;を返します。前者は自分の方がローカル通信バージョンが低く、後者は自分の方がローカル通信バージョンが高いことを表していますが、いずれも&nbsp;<a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_incompatible_version.html">nn::ldn::ResultIncompatibleVersion</a>&nbsp;に属する&nbsp;<a class="external-link" href="../../../Api/HtmlNX/classnn_1_1_result.html" rel="nofollow">nn::Result</a>&nbsp;なのでまとめてハンドリングできます。</p>
<p>この&nbsp;<a class="external-link" href="../../../Api/HtmlNX/classnn_1_1_result.html" rel="nofollow">nn::Result</a>&nbsp;については将来的にアプリケーションの更新方法に変更が生じる可能性があるため、<strong>アプリケーション開発者が自由にエラーメッセージを設定することは禁止されており、<a href="../../../Api/HtmlNX/namespacenn_1_1err.html#a245efc14eca3ff209ce8858b059ec739">nn::err::ShowError()</a>&nbsp;を使用してエラーメッセージを表示しなければなりません</strong>。</p>
<p>システムバージョン 4.0.0 以降の本体では、<span style="color: rgb(51,51,51);">近くの人（近くにあるSwitch本体）とアプリケーションのバージョンを揃えることができるようになりました。<span style="color: rgb(51,51,51);">この機能に対応するためにアプリケーション側で必要な作業は特にありません。</span>アプリケーションの更新方法は <a href="../../../Api/HtmlNX/namespacenn_1_1err.html#a245efc14eca3ff209ce8858b059ec739">nn::err::ShowError()</a><strong>&nbsp;</strong>で表示されるエラーメッセージの中で案内されています。</span></p>
<h1 id="Anchor_202548476_h1_2">その他の汎用的なエラー</h1>
<h2 id="Anchor_202548476_h2_5">状態異常</h2>
<p>LDN ライブラリの API は、その API を実行できる状態 (<a href="../../../Api/HtmlNX/namespacenn_1_1ldn.html#abc1339e71c5817f213faea9b89d46a77">nn::ldn::State</a>) が決まっており、正しくない状態で実行した場合には&nbsp;<a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_invalid_state.html">nn::ldn::ResultInvalidState</a> を返します。ただし、例外として&nbsp;<a href="../../../Api/HtmlNX/namespacenn_1_1ldn.html#abc1339e71c5817f213faea9b89d46a77a02c64acdb9a7840d5e41f68eca65bbca">nn::ldn::State_Error</a> 状態では&nbsp;<a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_wifi_off.html">nn::ldn::ResultWifiOff</a>,&nbsp;<a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_sleep.html">nn::ldn::ResultSleep</a>,&nbsp;<a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_device_occupied.html">nn::ldn::ResultDeviceOccupied</a>&nbsp;のいずれかを返しますのでこれには当てはまりません。</p>
<p>ほとんどの場合、<a href="../../../Api/HtmlNX/classnn_1_1ldn_1_1_result_invalid_state.html">nn::ldn::ResultInvalidState</a>&nbsp;の発生はプログラミングの段階で取り除くことができますが、<a class="el" href="../../../Api/HtmlNX/namespacenn_1_1ldn.html#abc1339e71c5817f213faea9b89d46a77a4f1ac10f7434907fa2443f84fb5f9233">nn::ldn::State_StationConnected</a>&nbsp;状態から&nbsp;<a class="el" href="../../../Api/HtmlNX/namespacenn_1_1ldn.html#abc1339e71c5817f213faea9b89d46a77a90247f7ec8524d1c74fe0499d8cab40b">nn::ldn::State_Station</a>&nbsp;状態への遷移はシステムによって自動的に発生しますので、完全にこの Result の発生を回避することはできません。どの API がどの状態で実行できるかの詳細については LDN ライブラリの API リファレンスを参照してください。</p>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
