<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>3D バイナリーコンバーター</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- 3D バイナリーコンバーター -->
<div class="pagetitle" id="PageId_83955997">3D バイナリーコンバーター</div>
<div class="text_separate">
<p>3D バイナリーコンバーター(%NINTENDO_SDK_ROOT%\Tools\Graphics\3dTools\3dBinaryConverter.exe)の使用方法と注意事項を説明します。</p>
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_83955997_h1_1">概要</a>
    </li>
    <li>
      <a href="#Anchor_83955997_h1_2">バイナリーファイルの同一性</a>
    </li>
    <li>
      <a href="#Anchor_83955997_h1_3">コマンドラインオプション</a>
    </li>
    <li>
      <a href="#Anchor_83955997_h1_4">制限事項</a>
    </li>
    <li>
      <a href="#Anchor_83955997_h1_5">利用例</a>
    </li>
  </ul>
</p>
<h1 id="Anchor_83955997_h1_1">概要</h1>
<p>中間ファイルをランタイム用のバイナリーリソースに変換し、バイナリーファイル (.bfres) として出力します。</p>
<h2 id="Anchor_83955997_h2_1">対応中間ファイルフォーマット</h2>
<p>コンバーターの入力として指定できる中間ファイルの一覧です。複数の中間ファイルを入力に指定した場合は、全ての内容を含んだ１つのバイナリーファイルが出力されます。<br />異なる種類のファイルを１つのバイナリーファイルとして出力することも可能です。</p>
<table class="wrapped">
  <colgroup>
    <col />
    <col />
  </colgroup>
  <thead>
    <tr>
      <th style="text-align: center;">種類</th>
      <th style="text-align: center;">拡張子</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right;">モデル</td>
      <td style="text-align: center;">.fmda .fmdb</td>
    </tr>
    <tr>
      <td style="text-align: right;">スケルタルアニメーション</td>
      <td style="text-align: center;">.fska .fskb</td>
    </tr>
    <tr>
      <td style="text-align: right;">マテリアルアニメーション</td>
      <td style="text-align: center;">.fmaa .fmab</td>
    </tr>
    <tr>
      <td style="text-align: right;">シェーダーパラメータアニメーション</td>
      <td style="text-align: center;">.fspa .fspb</td>
    </tr>
    <tr>
      <td style="text-align: right;">カラーアニメーション</td>
      <td style="text-align: center;">.fcla .fclb</td>
    </tr>
    <tr>
      <td style="text-align: right;">テクスチャー SRT アニメーション</td>
      <td style="text-align: center;">.ftsa .ftsb</td>
    </tr>
    <tr>
      <td style="text-align: right;">テクスチャーパターンアニメーション</td>
      <td style="text-align: center;">.ftpa .ftpb</td>
    </tr>
    <tr>
      <td style="text-align: right;">ボーンビジビリティアニメーション</td>
      <td style="text-align: center;">.fvba .fvbb</td>
    </tr>
    <tr>
      <td style="text-align: right;">マテリアルビジビリティアニメーション</td>
      <td style="text-align: center;">.fvma .fvmb</td>
    </tr>
    <tr>
      <td style="text-align: right;">シェイプアニメーション</td>
      <td style="text-align: center;">.fsha .fshb</td>
    </tr>
    <tr>
      <td style="text-align: right;">シーンアニメーション</td>
      <td style="text-align: center;">.fsna .fsnb</td>
    </tr>
  </tbody>
</table>
<h1 id="Anchor_83955997_h1_2">バイナリーファイルの同一性</h1>
<p>3D バイナリーコンバーターや 3D シェーダーコンバーターが出力するリソースファイルは 32 ビット版と 64 ビット版で異なります。</p>
<p>これは浮動小数計算の誤差によるものです。</p>
<p>64 ビット版の使用を推奨します。</p>
<h1 id="Anchor_83955997_h1_3">コマンドラインオプション</h1>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dBinaryConverter.exe [--args-file &quot;&quot;] [--version] [-h] [-s] [-i] [--verify] [-r &quot;&quot;] [-o &quot;&quot;] [ファイル] [--external-file &quot;[ファイル] [--external-file-alignment '']&quot;]...</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>中間ファイルをランタイム用のバイナリーファイル (.bfres) に変換します。</p>
<p>
  <strong>--args-file &quot;&quot;</strong>
</p>
<p>引数ファイルを指定します。<br />引数ファイルに記述した内容を、引数として指定できます。&nbsp;<br />引数ファイルは複数行に渡って各オプションを記述できます。&nbsp;<br />行頭に # がある行はコメントとして扱います。&nbsp;<br />オプション値指定の &quot;&quot; によるエスケープに改行を含めることはできません。</p>
<p>
  <strong>-v --version</strong>
</p>
<p>バージョン情報を表示します。</p>
<p>
  <strong>-h --help</strong>
</p>
<p>ヘルプを表示します。</p>
<p>
  <strong>-s --silent</strong>
</p>
<p>処理中のメッセージ表示を抑制します。</p>
<p>
  <strong>-i --ignore-assign</strong>
</p>
<p>通常は shape_shader_assign や material_shader_assign が存在していないとコンバートできませんが、このオプションが指定された場合はその確認を行わずにコンバートします。</p>
<p>
  <strong>-ve --verify</strong>
</p>
<p>中間ファイルがバイナリーコンバート可能かどうかを調べます。</p>
<p>
  <strong>-r &quot;&quot; --root-path &quot;&quot;</strong>
</p>
<p>バイナリーファイルに含まれるパスを指定したフォルダからの相対パスにします。<br />例）-r=&quot;D:\home&quot; と指定するとバイナリーファイルのパスから D:\home が除去されます。<br />このオプションはコンバーターの入力パスの指定には利用できません。</p>
<p>
  <strong>-o &quot;&quot; --output &quot;&quot;</strong>
</p>
<p>出力ファイルを指定します。<br />入力ファイルが１つの場合は省略可能です。</p>
<p>
  <strong>ファイル</strong>
</p>
<p>バイナリーファイルに変換するファイルを指定します。本ページの「対応中間ファイルフォーマット一覧」を確認して下さい。</p>
<p>
  <strong>-ef --external-file &quot;&quot;</strong>
</p>
<p>指定した外部ファイルをシリアライズ対象に追加します。<br />サブオプションとして外部ファイルのアライメントを指定できる -efa, --external-file-alignment を使用できます。<br />未指定の場合は 256 バイトでアラインされます。<br />外部ファイルはファイルの内容がそのままバイナリーファイルに配置されます。</p>
<p>例1) &nbsp;複数の外部ファイルをシリアライズ対象にする。<br />3dBinaryConverter.exe human.fmdb --external-file &quot;a.bfsha&quot; --external-file &quot;b.bfsha&quot;</p>
<p>例2) &nbsp;サブオプション --external-file-alignment で human.bfsha を 512 バイトにアラインする。 <br /> 3dBinaryConverter.exe human.fmdb -o human.bfres&nbsp; --external-file &quot;human.bfsha --external-file-alignment 512&quot;&nbsp;</p>
<!--Remove-->
<h1 id="Anchor_83955997_h1_4">制限事項</h1>
<p>3D バイナリーコンバーターの制限事項を説明します。</p>
<h2 id="Anchor_83955997_h2_3">使用可能なファイル名に関する制限</h2>
<p>入力及び --output に指定するファイル名に使用可能な文字は次の文字のみです。</p>
<div class="panel" style="border-width: 1px;">
  <div class="panelContent">
    <p>[0-9A-Za-z-_]</p>
  </div>
</div>
<h2 id="Anchor_83955997_h2_4">同名のアニメーション中間ファイルに関する制限</h2>
<p>アニメーションの中間ファイルで下記の物については拡張子が違う場合でもファイル名が同名であってはなりません。</p>
<ul>
  <li>シェーダーパラメータアニメーション（ fsp ）</li>
  <li>テクスチャパターンアニメーション（ ftp ）</li>
  <li>テクスチャSRTアニメーション（ fts ）</li>
  <li>マテリアルビジビリティアニメーション（ fvm ）</li>
  <li>カラーアニメーション（ fcl ）</li>
</ul>
<h2 id="Anchor_83955997_h2_5">DCC ツールプラグインから出力されたアニメーション中間ファイルに関する制限</h2>
<p>DCC ツールプラグインにより出力された以下のアニメーションは、出力直後はアニメーションカーブを持たないため、そのままではコンバートできません。</p>
<ul style="list-style-type: square;">
  <li>テクスチャパターンアニメーション（ ftp ）</li>
  <li>テクスチャSRTアニメーション（ fts ）</li>
  <li>カラーアニメーション（ fcl ）</li>
</ul>
<p>アサインユーティリティでアニメーションカーブを生成するか、3DEditor　でモデルとバインドしてアニメーションカーブを生成する必要があります。</p>
<h1 id="Anchor_83955997_h1_5">利用例</h1>
<p>3D バイナリーコンバーターの利用方法を説明します。</p>
<h2 id="Anchor_83955997_h2_6">中間ファイルのコンバート</h2>
<p>model.fmdb と animation.fskb をコンバートして、output.bfres に保存します。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dBinaryConverter.exe -o output.bfres model.fmdb animation.fskb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p>引数ファイルを用いてまとめてコンバートします。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>convert.txt

-o output.bfres
model.fmdb

animation.fskb</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>3dBinaryConverter.exe --args-file convert.txt</pre></div>
      </td>
    </tr>
  </tbody>
</table>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
