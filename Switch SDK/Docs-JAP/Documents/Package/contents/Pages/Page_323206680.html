<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript" src="../template/js/jquery/jquery.js"></script>
<script type="text/javascript" src="../template/js/common/manualLib.js"></script>
<script type="text/javascript" src="../tocData.js"></script>
<link rel="stylesheet" type="text/css" href="../template/css/template.css" />
<title>店頭体験版の動作確認環境の構築</title>
</head>
<body data-reassemble="autoindex=no,forceNoLabel=yes">
<div id="autoindex_content">
<div class="body_content">
<noscript>
<div style="border: 4px double black; margin: 4px; padding: 2px; font-weight: bold; background-color: #FFFFCC;">
<p>お使いのブラウザは JavaScript が使用できないため、本ドキュメントの一部機能が無効になっています。</p><p>JavaScript が無効の環境では目次を使用することができません。<br />JavaScriptの実行が許可された状態で閲覧してください。<br /><br /></p>
</div>
</noscript>
<div class="page_navigation_top">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
</table>
</div>
<div class="breadcrumb"></div>

<!-- 店頭体験版の動作確認環境の構築 -->
<div class="pagetitle" id="PageId_323206680">店頭体験版の動作確認環境の構築</div>
<div class="text_separate">
<p>
  <ul class="macro_toc">
    <li>
      <a href="#Anchor_323206680_h1_1">はじめに</a>
    </li>
    <li>
      <a href="#Anchor_323206680_h1_2">準備</a>
    </li>
    <li>
      <a href="#Anchor_323206680_h1_3">使用方法</a>
    </li>
    <ul>
      <li>
        <a href="#Anchor_323206680_h2_1">店頭体験版モードの有効化 </a>
      </li>
      <li>
        <a href="#Anchor_323206680_h2_2">体験版アプリケーションのAsset Dataの作成</a>
      </li>
      <li>
        <a href="#Anchor_323206680_h2_3">体験版アプリケーションのインストール</a>
      </li>
      <li>
        <a href="#Anchor_323206680_h2_4">体験版アプリケーションの起動・終了</a>
      </li>
      <li>
        <a href="#Anchor_323206680_h2_5">店頭体験版モードの無効化</a>
      </li>
      <li>
        <a href="#Anchor_323206680_h2_6">PROD MODEでの確認</a>
      </li>
      <li>
        <a href="#Anchor_323206680_h2_7">注意点</a>
      </li>
    </ul>
  </ul>
</p>
<h1 id="Anchor_323206680_h1_1">はじめに</h1>
<p>店頭体験版モードの設定方法や使用方法、使用上の注意点について説明します。<br />店頭体験版アプリケーションの動作確認を行うには、店頭体験版モードを有効にする必要があります。</p>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>店頭体験版モードは、NX Addon 5.3.0以降で使用可能です。</p>
  </div>
</div>
<h1 id="Anchor_323206680_h1_2">準備</h1>
<p>店頭体験版モードを有効にするには、以下の準備が必要になります。</p>
<ul>
  <li>HOMEメニューの初回起動を完了する</li>
  <li>1つ以上のユーザーアカウントを作成する</li>
  <li>店頭体験版メニューをインストールする</li>
</ul>
<h1 id="Anchor_323206680_h1_3">使用方法</h1>
<h2 id="Anchor_323206680_h2_1">店頭体験版モードの有効化&nbsp;<a name="Anchor_323206680_enable-rid-mode"></a></h2>
<ol>
  <li>店頭体験版メニューとDevMenu ApplicationのAsset Dataを開発機にインストールする<ul><li style="list-style-type: circle;">インストール用のbatファイルを実行すると<a href="../Pages/Page_107328760.html">DevMenuCommand</a>が起動されてインストールが実行されます<ul><li style="list-style-type: circle;"><p>$NINTENDO_SDK_ROOT\TargetTools\NX-NXFP2-a32\InStoreDemoMenu\Release\InstallNsps.bat</p><div class="info_new"><div class="info_new_left">参考：</div><div class="info_new_right"><p>NX Addon 5.3.xにはInstallNsps.batに不備があります。以下のように修正して実行してください。</p><p>（修正前）３行目：NINTENDO_SDK_ROOT=%~dp0..\..\..</p><p>（修正後）３行目：NINTENDO_SDK_ROOT=%~dp0..\..\..\..</p></div></div></li></ul></li><li style="list-style-type: circle;">インストール対象のnspファイルは以下にあります<br /><ul><li style="list-style-type: square;">$NINTENDO_SDK_ROOT\TargetTools\NX-NXFP2-a32\InStoreDemoMenu\Release\InStoreDemoMenu.nsp</li><li style="list-style-type: square;">$NINTENDO_SDK_ROOT\TargetTools\NX-NXFP2-a32\InStoreDemoMenu\Release\AssetData_DevMenuApplication.nsp</li></ul></li></ul></li>
  <li>店頭体験版モードを有効にする<ul><li style="list-style-type: circle;"><p><a href="../Pages/Page_310879077.html">DevMenuのDebugページ</a>の「In-Store Demo Mode」で&quot;Enabled&quot;を選択するか、以下の<a href="../Pages/Page_107328760.html">DevMenuCommand</a>を実行してください</p><table class="codeblock"><tbody><tr><td class="code"><div class="codeblock"><pre>$NINTENDO_SDK_ROOT\Tools\CommandLineTools\RunOnTarget.exe $NINTENDO_SDK_ROOT\TargetTools\NX-NXFP2-a64\DevMenuCommand\Release\DevMenuCommand.nsp -- debug enable-in-store-demo-mode</pre></div></td></tr></tbody></table></li></ul></li>
  <li>本体を再起動する<ul><li style="list-style-type: circle;">店頭体験版メニューが自動起動して、体験版アプリケーションのサンプルパッケージがランチャーに並びます</li></ul></li>
</ol>
<h2 id="Anchor_323206680_h2_2">体験版アプリケーションのAsset Dataの作成</h2>
<p>Asset Dataとは、体験版アプリケーションを店頭体験版メニューに表示するためのnspファイルです。Asset Dataは以下の方法で作成することができます。</p>
<ul>
  <li>バッチファイルを使用する<ul><li style="list-style-type: square;">Asset Data作成batファイルに体験版アプリケーションのnspファイルをドラッグ＆ドロップしてください<ul><li style="list-style-type: square;">$NINTENDO_SDK_ROOT\Tools\CommandLineTools\AssetDataCreator\CreateAssetData.bat</li></ul></li><li style="list-style-type: square;">必要に応じてbatファイルを編集してください<ul><li style="list-style-type: square;">PLAYABLE_TIME<ul><li style="list-style-type: square;">アプリケーション起動後に自動終了するまでの経過時間を変更できます。単位は秒になります</li><li style="list-style-type: square;">デフォルトは900秒に設定されています。0を指定すると自動終了が無効化されます。</li></ul></li><li style="list-style-type: square;">EXIT_MESSAGE_Validity<ul><li style="list-style-type: square;">&quot;disabled&quot;に変更することで、体験版アプリケーション終了時の終了メッセージ表示が無効化されます</li><li style="list-style-type: square;">体験版アプリケーションが終了処理内でメッセージを表示する場合は無効化してください</li></ul></li><li style="list-style-type: square;">EXIT_IMAGE_FILE_PATHは<ul><li style="list-style-type: square;">自前で用意したPNG画像ファイル（1920 x 1080 x 32RGBA）をアプリケーション終了画面に使用する場合に指定します</li><li style="list-style-type: square;">絶対パスで指定するようにしてください</li><li style="list-style-type: square;">EXIT_MESSAGE_Validityが&quot;disabled&quot;だと指定した画像が表示されません</li></ul></li></ul></li></ul></li>
</ul>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>set PLAYABLE_TIME=900
set EXIT_MESSAGE_Validity=enabled
::set EXIT_IMAGE_FILE_PATH=NeedToBeSpecified</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<p style="list-style-type: square;">
  <br />
</p>
<ul>
  <li style="list-style-type: circle;">
    <p>PowerShellスクリプトを使用する</p>
    <p>$SCRIPT_PATHは、CreateAssetData.ps1が存在するディレクトリ（$NINTENDO_SDK_ROOT\Tools\CommandLineTools\AssetDataCreator）を指しています。</p>
    <table class="codeblock">
      <tbody>
        <tr>
          <td class="code">
            <div class="codeblock"><pre>powershell -ExecutionPolicy Unrestricted -File $SCRIPT_PATH\CreateAssetData.ps1 -inputNsp &lt;input nsp path&gt; [-playableTime &lt;seconds&gt;] [-outputPath &lt;output nsp path&gt;]  [-workDir &lt;working directory path&gt;] [-index &lt;number&gt;] [-exitMessage &lt;enabled|disabled&gt;] </pre></div>
          </td>
        </tr>
      </tbody>
    </table>
    <table class="wrapped">
      <colgroup> <col /><col /><col /><col /><col /></colgroup>
      <tbody>
        <tr>
          <th class="highlight-grey">
            <p>オプション</p>
          </th>
          <th>指定</th>
          <th>説明</th>
          <th>デフォルト値</th>
          <th>備考</th>
        </tr>
        <tr>
          <th class="highlight-grey">
            <p>inputNsp</p>
          </th>
          <td>必須</td>
          <td>体験版アプリケーションのnspファイルのパス</td>
          <td>
            <br />
          </td>
          <td>
            <br />
          </td>
        </tr>
        <tr>
          <th class="highlight-grey">
            <p>playableTime</p>
          </th>
          <td>任意</td>
          <td>自動終了するまでの経過時間</td>
          <td>900</td>
          <td>自動終了を無効にしたい場合は0を指定します。</td>
        </tr>
        <tr>
          <th class="highlight-grey">outputPath</th>
          <td>任意</td>
          <td>Asset Data nspファイルの出力先パス（nspファイル名を含む）</td>
          <td>$SCRIPT_PATH\__output\AssetData.nsp</td>
          <td>
            <br />
          </td>
        </tr>
        <tr>
          <th class="highlight-grey">
            <p>workDir</p>
          </th>
          <td>任意</td>
          <td>作業ディレクトリのパス</td>
          <td>$SCRIPT_PATH\__work</td>
          <td>
            <br />
          </td>
        </tr>
        <tr>
          <th class="highlight-grey">
            <p>index</p>
          </th>
          <td>任意</td>
          <td>
            <p>Asset Dataのインデックス（50以上1999以下）</p>
          </td>
          <td>1001</td>
          <td>Application IDが異なる複数の体験版アプリケーションを表示したい場合は、重複しないindexを指定します。</td>
        </tr>
        <tr>
          <th class="highlight-grey">exitMessage</th>
          <td>任意</td>
          <td>体験版アプリケーション終了に合わせた終了メッセージ表示の有効状態</td>
          <td>enabled</td>
          <td>体験版アプリケーションが終了処理内でメッセージを表示する場合は&quot;disabled&quot;にします。<br />&quot;enabled&quot;かつexitImageが設定されていない場合は、店頭体験版メニューによってデフォルトの終了メッセージが表示されます。</td>
        </tr>
        <tr>
          <th class="highlight-grey">exitImage</th>
          <td>任意</td>
          <td>体験版アプリケーション終了後、店頭試遊台メニューが表示する画像ファイルのパス</td>
          <td>
            <br />
          </td>
          <td>フォーマットが 1920 x 1080 x 32RGBA のPNGファイルを指定します。<br />exitMessageに&quot;disabled&quot;に指定した場合、本オプションで指定した画像が表示されません。</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>
<h2 id="Anchor_323206680_h2_3">体験版アプリケーションのインストール</h2>
<ol>
  <li>体験版アプリケーションや作成したAsset Dataのnspファイルを開発機にインストールする</li>
  <li>本体を再起動する</li>
</ol>
<div class="info_new">
  <div class="info_new_left">参考：</div>
  <div class="info_new_right">
    <p>店頭体験版モードが有効な状態で<a href="../Pages/Page_107328760.html">DevMenuCommand</a>からnspファイルをインストールした場合、HOMEメニューによりエラー画面が表示されます。<br />インストール自体は成功しているので、そのまま本体を再起動してください。</p>
  </div>
</div>
<h2 id="Anchor_323206680_h2_4">体験版アプリケーションの起動・終了</h2>
<ol>
  <li>店頭体験版メニューから体験版アプリケーションを選択して起動する<br /><ul><li style="list-style-type: circle;"><p>アプリケーションが起動するまでに、店頭体験版メニューがレーティング画面とアプリケーション終了方法説明画面を表示します。</p></li></ul></li>
  <li>アプリケーションを終了する<ul><li style="list-style-type: circle;"><p>アプリケーション終了方法には複数の方法があります。アプリケーションを終了すると店頭体験版メニューに戻ります。</p><ul><li style="list-style-type: square;">HOMEボタンを押して終了メニューから終了する</li><li style="list-style-type: square;">コントローラ無入力状態が60秒間継続して自動終了する</li><li style="list-style-type: square;">アプリケーション起動後、一定時間経過して自動終了する</li><li style="list-style-type: square;">アプリケーション自身が<a href="../../../Api/HtmlNX/namespacenn_1_1oe.html#abdce5ac9fa32142122479176ef8113de">nn::oe::ExitApplicationAndGoBackToInStoreDemoMenu()</a>を実行して終了する</li></ul></li></ul></li>
</ol>
<h2 id="Anchor_323206680_h2_5">店頭体験版モードの無効化</h2>
<p>
  <a href="../Pages/Page_310879077.html">DevMenuのDebugページ</a>の「In-Store Demo Mode」設定で&quot;Disabled&quot;を選択するか、もしくは以下の<a href="../Pages/Page_107328760.html">DevMenuCommand</a>を実行してください。</p>
<table class="codeblock">
  <tbody>
    <tr>
      <td class="code">
        <div class="codeblock"><pre>$NINTENDO_SDK_ROOT\Tools\CommandLineTools\RunOnTarget.exe $NINTENDO_SDK_ROOT\TargetTools\NX-NXFP2-a64\DevMenuCommand\Release\DevMenuCommand.nsp -- debug disable-in-store-demo-mode</pre></div>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="Anchor_323206680_h2_6">PROD MODEでの確認</h2>
<p>PROD MODEでは<a href="../Pages/Page_107328760.html">DevMenuCommand</a>で店頭体験版メニューの有効化・無効化を行えません。そのため、DevMenu Applicationを使用して有効状態設定を切り替える必要があります。<br />HOMEメニューからDevMenu Applicationを起動し、「体験版アプリケーションのインストール」に従ってDevMenu ApplicationのAsset Dataを開発機にインストールしてください。</p>
<h2 id="Anchor_323206680_h2_7">注意点</h2>
<p>店頭体験版モードはアプリケーション開発者の手元で体験版アプリケーションの動作確認を可能にするのが目的です。<br />そのため、実際に小売店などで動作する店頭体験版メニューとは動作が異なる部分があります。</p>
<ul>
  <li>「About Nintendo Switch」から説明動画を再生できない</li>
  <li>店頭体験版メニュー上のランチャーで表示されるパッケージがサンプル画像になっている</li>
  <li>体験版アプリケーションのInformation画面に情報がほとんど表示されない</li>
  <li>動画を含むAsset Dataがインストールされていない状態で放置すると「Nintendo SWITCHロゴ」が表示される</li>
</ul>
</div>
<div class="breadcrumb_bottom"></div>
<div class="page_navigation">
<table class="page_navi_root">
<tr>
<td class="page_navi_left"></td>
<td class="page_navi_right"></td>
</tr>
<tr><td colspan="2" class="page_navi_bottom"></td></tr>
</table>
</div>
</div>
</div>
</body>
</html>
