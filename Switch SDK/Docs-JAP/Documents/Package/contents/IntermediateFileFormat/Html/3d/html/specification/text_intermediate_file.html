<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<link href="../css/template.css" rel="stylesheet" type="text/css" />
<title>テキスト中間ファイル</title>
</head>
<body>
<h1>テキスト中間ファイル</h1>
<h2>概要</h2>
<p>
テキスト中間ファイルは、グラフィックス関連の情報を XML 形式で保存した中間ファイルです。
</p>
<h2>中間ファイルの共通仕様</h2>
<ul>
    <li>文字コードは BOM 付きの UTF-8 で、改行コードは CRLF です。</li>
    <li>最初の行は次の XML 宣言で始まります。<br />
        &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</li>
    <li>XML 宣言に続いて、中間ファイルのデータを格納する <a href="../reference/elements/nw4f_3dif.html">&lt;nw4f_3dif&gt;</a> を定義します。</li>
    <li><a href="../reference/elements/nw4f_3dif.html">&lt;nw4f_3dif&gt;</a> には、ファイルの種類にあわせた要素を一つ格納します。</li>
    <li><a href="../reference/elements/nw4f_3dif.html">&lt;/nw4f_3dif&gt;</a> の直後で改行します。</li>
    <li>&lt;!-- --&gt; による XML コメントは禁止です。<br />
        XML コメントによる記述は NW のツールでファイルを保存する際に失われます。</li>
    <li>中間ファイルの拡張子は 4 文字です。<br />
        最初の文字は「f」、次の 2 文字は中間ファイルの種類を表します。<br />
        最後の 1 文字はテキスト中間ファイルは「a」、<a href="binary_intermediate_file.html">バイナリー中間ファイル</a>は「b」となります。</li>
    <li>中間ファイルのファイル名には [0-9A-Za-z_]+ の正規表現で表せる文字列が使用可能です。<br />
    <li>座標系はテクスチャー座標系も含めて、すべて右手座標系です。<br />
    詳細については<a href="../../../../../Pages/Page_106332655.html">ガイド/3D/座標系</a>を参照してください。</li>
    <li>オイラー角の回転値はすべて度数で指定します。</li>
    <li>パスの区切りにはスラッシュを使用します。</li>
    <li><a href="../reference/elements/bone_array.html">&lt;bone_array&gt;</a> と <a href="../reference/elements/shape_array.html">&lt;shape_array&gt;</a> 以外の &lt;～_array&gt; 内のソート順は NW が生成する中間ファイルでは守られますが、利用者が生成する中間ファイルでソート順を守る必要はありません。</li>
</ul>
<h2>中間ファイルの種類</h2>
<p>
中間ファイルの種類、拡張子、要素の対応表です。
</p>
<table>
    <thead>
        <tr>
            <th>種類</th>
            <th>拡張子</th>
            <th>要素</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="nowrap_right">モデル</td>
            <td class="nowrap_center">.fmda .fmdb</td>
            <td><a href="../reference/elements/model.html" target="main">&lt;model&gt;</a></td>
        </tr>
        <tr>
            <td class="nowrap_right">テクスチャー</td>
            <td class="nowrap_center">.ftxa .ftxb</td>
            <td><a href="../reference/elements/texture.html" target="main">&lt;texture&gt;</a></td>
        </tr>
        <tr>
            <td class="nowrap_right">スケルタルアニメーション</td>
            <td class="nowrap_center">.fska .fskb</td>
            <td><a href="../reference/elements/skeletal_anim.html" target="main">&lt;skeletal_anim&gt;</a></td>
        </tr>
        <tr>
            <td class="nowrap_right">マテリアルアニメーション</td>
            <td class="nowrap_center">.fmaa .fmab</td>
            <td><a href="../reference/elements/material_anim.html" target="main">&lt;material_anim&gt;</a></td>
        </tr>
        <tr>
            <td class="nowrap_right">シェーダーパラメータアニメーション</td>
            <td class="nowrap_center">.fspa .fspb</td>
            <td><a href="../reference/elements/shader_param_anim.html" target="main">&lt;shader_param_anim&gt;</a></td>
        </tr>
        <tr>
            <td class="nowrap_right">カラーアニメーション</td>
            <td class="nowrap_center">.fcla .fclb</td>
            <td><a href="../reference/elements/shader_param_anim.html" target="main">&lt;shader_param_anim&gt;</a></td>
        </tr>
        <tr>
            <td class="nowrap_right">テクスチャー SRT アニメーション</td>
            <td class="nowrap_center">.ftsa .ftsb</td>
            <td><a href="../reference/elements/shader_param_anim.html" target="main">&lt;shader_param_anim&gt;</a></td>
        </tr>
        <tr>
            <td class="nowrap_right">テクスチャーパターンアニメーション</td>
            <td class="nowrap_center">.ftpa .ftpb</td>
            <td><a href="../reference/elements/tex_pattern_anim.html" target="main">&lt;tex_pattern_anim&gt;</a></td>
        </tr>
        <tr>
            <td class="nowrap_right">ボーンビジビリティアニメーション</td>
            <td class="nowrap_center">.fvba .fvbb</td>
            <td><a href="../reference/elements/bone_visibility_anim.html" target="main">&lt;bone_visibility_anim&gt;</a></td>
        </tr>
        <tr>
            <td class="nowrap_right">マテリアルビジビリティアニメーション</td>
            <td class="nowrap_center">.fvma .fvmb</td>
            <td><a href="../reference/elements/mat_visibility_anim.html" target="main">&lt;mat_visibility_anim&gt;</a></td>
        </tr>
        <tr>
            <td class="nowrap_right">シェイプアニメーション</td>
            <td class="nowrap_center">.fsha .fshb</td>
            <td><a href="../reference/elements/shape_anim.html" target="main">&lt;shape_anim&gt;</a></td>
        </tr>
        <tr>
            <td class="nowrap_right">シーンアニメーション</td>
            <td class="nowrap_center">.fsna .fsnb</td>
            <td><a href="../reference/elements/scene_anim.html" target="main">&lt;scene_anim&gt;</a></td>
        </tr>
        <tr>
            <td class="nowrap_right">シェーダー設定</td>
            <td class="nowrap_center">.fsca .fscb</td>
            <td><a href="../reference/elements/shader_config.html" target="main">&lt;shader_config&gt;</a></td>
        </tr>
        <tr>
            <td class="nowrap_right">シェーダー定義</td>
            <td class="nowrap_center">.fsda .fsdb</td>
            <td><a href="../reference/elements/shader_definition.html" target="main">&lt;shader_definition&gt;</a></td>
        </tr>
        <tr>
            <td class="nowrap_right">シェーダーバリエーション</td>
            <td class="nowrap_center">.fsva .fsvb</td>
            <td><a href="../reference/elements/shader_variation.html" target="main">&lt;shader_variation&gt;</a></td>
        </tr>
    </tbody>
</table>
<h3>シェーダーパラメータアニメーションの扱い<br />（カラーアニメーション、テクスチャー SRT アニメーション）</h3>
<p>
カラーアニメーションとテクスチャー SRT アニメーションはシェーダーパラメータアニメーションの一種であり、同じ <a href="../reference/elements/shader_param_anim.html" target="main">&lt;shader_param_anim&gt;</a> にデータを格納するため、中間ファイルの仕様的には同一です。
ただし、カラーアニメーション、テクスチャー SRT アニメーションは中間ファイルを編集するツール側で、それぞれのアニメーションにデータを限定して扱います。
</p>
<p>
カラーアニメーションは<a href="../reference/elements/original_color_anim_array.html" target="main"> &lt;original_color_anim_array&gt;</a> と、関連する <a href="../reference/elements/shader_param_mat_anim_array.html" target="main"> &lt;shader_param_mat_anim_array&gt;</a> を持ちます。
</p>
<p>
テクスチャー SRT アニメーションは<a href="../reference/elements/original_texsrt_anim_array.html" target="main"> &lt;original_texsrt_anim_array&gt;</a> と、関連する <a href="../reference/elements/shader_param_mat_anim_array.html" target="main"> &lt;shader_param_mat_anim_array&gt;</a> を持ちます。
</p>
</body>
</html>
