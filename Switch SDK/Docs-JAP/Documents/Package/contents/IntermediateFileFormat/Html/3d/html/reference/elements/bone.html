<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="ja">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<link href="../../css/template.css" rel="stylesheet" type="text/css" />
		<title>&lt;bone&gt;</title>
	</head>
	<body>
		<h1 id="title">&lt;bone&gt;</h1>
		<h2>説明</h2>
		<p id="summary">スキニング等に利用する座標系を定義するボーンの要素です。</p>
		<p id="detail">
		ボーンが描画に利用されているかどうかは、以下の条件で判定します。<br />
		rigid_body || (matrix_index[0] != -1) || (matrix_index[1] != -1)
		</p>
		<h2>親要素</h2>
		<ul id="parent">
			<li>
				<a href="./bone_array.html">&lt;bone_array&gt;</a> : <a href="./bone.html">&lt;bone&gt;</a> の配列要素です。</li>
		</ul>
		<h2>属性</h2>
		<div id="attribute">
			<table>
				<thead>
					<tr>
						<th>名前</th>
						<th>型と値</th>
						<th>説明</th>
						<th id="attribute_dcc">DCC</th>
					</tr>
				</thead>
				<tbody id="attribute_table">
					<tr id="index">
						<td class="nowrap_right">
							<strong>index</strong>
						</td>
						<td class="nowrap_center">
							<strong>int</strong>
							<br />0 ～ 65534</td>
						<td class="description">
			配列内におけるインデックスです。<br />
			この値は可読性を向上するためのヒントであり、ツール類で読み込んだ際には無視します。
			<br /></td>
						<td class="nowrap_center">設定</td>
					</tr>
					<tr id="name">
						<td class="nowrap_right">
							<strong>name</strong>
						</td>
						<td class="nowrap_center">
							<strong>string</strong>
							<br />[0-9A-Za-z\-\._]+</td>
						<td class="description">
			ボーンの名前です。<br />
			参照元の <a href="./bone_anim.html">&lt;bone_anim&gt;</a> <a href="./bone_vis_bone_anim.html">&lt;bone_vis_bone_anim&gt;</a> bone_name と対になっています。
			<br /></td>
						<td class="nowrap_center">設定</td>
					</tr>
					<tr id="parent_name">
						<td class="nowrap_right">
							<strong>parent_name</strong>
						</td>
						<td class="nowrap_center">
							<strong>string</strong>
							<br />[0-9A-Za-z\-\._]*</td>
						<td class="description">親ボーンの名前です。<br />
			ルートボーンの場合は空文字列です。<br /></td>
						<td class="nowrap_center">設定</td>
					</tr>
					<tr id="rigid_body">
						<td class="nowrap_right">
							<strong>rigid_body</strong>
						</td>
						<td class="nowrap_center">
							<strong>bool</strong>
							<br />true false</td>
						<td class="description">
			ボーンをリジッドボディの描画に利用する場合に、true を指定します。
			<br /></td>
						<td class="nowrap_center">設定</td>
					</tr>
					<tr id="matrix_index">
						<td class="nowrap_right">
							<strong>matrix_index</strong>
						</td>
						<td class="nowrap_center">
							<strong>int[2]</strong>
							<br />-1 ～ 1364</td>
						<td class="description">
			描画に利用する行列への行列パレットにおけるインデックスです。<br />
			ひとつめのインデックスはスムーススキニング用のインデックスです。<br />
			ふたつめのインデックスはリジッドスキニング用のインデックスです。<br />
			各スキニングにボーン利用されない場合は -1 を指定します。<br />
			このインデックスは頂点が保持する行列へのインデックスと同じ値になります。
			<br /></td>
						<td class="nowrap_center">設定</td>
					</tr>
					<tr id="scale">
						<td class="nowrap_right">
							<strong>scale</strong>
						</td>
						<td class="nowrap_center">
							<strong>float[3]</strong>
							<br />MIN ～ MAX</td>
						<td class="description">ボーンのスケール値を XYZ の順に指定します。
			<br /></td>
						<td class="nowrap_center">設定</td>
					</tr>
					<tr id="rotate">
						<td class="nowrap_right">
							<strong>rotate</strong>
						</td>
						<td class="nowrap_center">
							<strong>float[4]</strong>
							<br />MIN ～ MAX</td>
						<td class="description">ボーンの回転値を XYZW の順に指定します。<br />
			<a href="./skeleton_info.html">&lt;skeleton_info&gt;</a> の rotate_mode が euler_xyz の場合は、W に 1 を指定します。
			<br /></td>
						<td class="nowrap_center">設定</td>
					</tr>
					<tr id="translate">
						<td class="nowrap_right">
							<strong>translate</strong>
						</td>
						<td class="nowrap_center">
							<strong>float[3]</strong>
							<br />MIN ～ MAX</td>
						<td class="description">ボーンの移動値を XYZ の順に指定します。
			<br /></td>
						<td class="nowrap_center">設定</td>
					</tr>
					<tr id="scale_compensate">
						<td class="nowrap_right">
							<strong>scale_compensate</strong>
						</td>
						<td class="nowrap_center">
							<strong>bool</strong>
							<br />true false</td>
						<td class="description">Maya のセグメントスケール補正を指定します。<br />
			親のスケール値を scale_compensate を設定した子に伝播させない場合に、true を指定します。<br />
			Maya 以外の DCC ツールから出力した場合は、常に false を指定します。
			<br /></td>
						<td class="nowrap_center">設定</td>
					</tr>
					<tr id="billboard">
						<td class="nowrap_right">
							<strong>billboard</strong>
						</td>
						<td class="nowrap_center">
							<strong>enum</strong>
							<br />none<br />world_viewvector<br />world_viewpoint<br />screen_viewvector<br />screen_viewpoint<br />yaxis_viewvector<br />yaxis_viewpoint</td>
						<td class="description">ビルボード処理による回転制御を指定します。<br />
			ビルボード処理はリジッドボディにのみ有効です。<br />
			DCC ツールからの出力時は、常に none を指定します。
			<table><tbody><tr><td>none				</td><td>ビルボード処理を行いません。</td></tr>
			<tr><td>world_viewvector	</td><td>Z 軸がカメラの視線と並行になります。</td></tr>
			<tr><td>world_viewpoint	</td><td>Z 軸がカメラの方向を向きます。</td></tr>
			<tr><td>screen_viewvector	</td><td>Y 軸がカメラの上方向を向き、Z 軸がカメラの視線と並行になります。</td></tr>
			<tr><td>screen_viewpoint	</td><td>Y 軸がカメラの上方向を向き、Z 軸がカメラの方向を向きます。</td></tr>
			<tr><td>yaxis_viewvector	</td><td>Y 軸のみ回転する状態で、Z 軸がカメラの視線と並行になります。</td></tr>
			<tr><td>yaxis_viewpoint	</td><td>Y 軸のみ回転する状態で、Z 軸がカメラの方向を向きます。</td></tr></tbody></table>
			<br /></td>
						<td class="nowrap_center">固定</td>
					</tr>
					<tr id="visibility">
						<td class="nowrap_right">
							<strong>visibility</strong>
						</td>
						<td class="nowrap_center">
							<strong>bool</strong>
							<br />true false</td>
						<td class="description">ボーンに関連付けられた <a href="./shape.html">&lt;shape&gt;</a> の可視状態を指定します。<br />
			<a href="./shape_info.html">&lt;shape_info&gt;</a> の bone_index で指定したボーンの visibility が false の場合、この <a href="./shape.html">&lt;shape&gt;</a> は描画されません。<br />
			スキニングの行列パレット生成で利用するボーンの visibility は<a href="./shape.html">&lt;shape&gt;</a> の可視状態に影響しません。<br />
			可視状態の指定ですので、false を指定してもボーン行列等の計算は行われます。<br />
			<br /></td>
						<td class="nowrap_center">設定</td>
					</tr>
					<tr id="compress_enable">
						<td class="nowrap_right">
							<strong>compress_enable</strong>
						</td>
						<td class="nowrap_center">
							<strong>bool</strong>
							<br />true false</td>
						<td class="description">
			中間ファイルオプティマイザのボーン圧縮において、圧縮可能なボーンとする場合に、true を指定します。
			<br /></td>
						<td class="nowrap_center">設定</td>
					</tr>
					<tr id="side">
						<td class="nowrap_right">
							<strong>side</strong>
						</td>
						<td class="nowrap_center">
							<strong>enum</strong>
							<br />none<br />left<br />right<br />center</td>
						<td class="description">
			スケルトン全体におけるボーンの位置を指定します。<br />スケルタルアニメーションのミラーリングに使用されます。<br />
			左半身のボーンである場合には left、右半身のボーンである場合には right、中央のボーンである場合には center、設定しない場合には none を指定します。<br />
			Maya の joint ノードのサイドアトリビュートが反映されます。<br />
			Maya 以外の DCC ツールから出力した場合は、常に none を指定します。
			<br /></td>
						<td class="nowrap_center">設定</td>
					</tr>
					<tr id="type">
						<td class="nowrap_right">
							<strong>type</strong>
						</td>
						<td class="nowrap_center">
							<strong>string</strong>
							<br />[0-9A-Za-z\-\._]*</td>
						<td class="description">
			ボーンのタイプを指定します。<br />スケルタルアニメーションのミラーリングに使用されます。<br />
			Maya の joint ノードのタイプアトリビュートが反映されます。<br />
			Maya でその他以外のタイプアトリビュートを設定した場合は、nw_ から始まる規定の文字列を格納します。<br />
			その他で任意の文字列を指定した場合は、指定した文字列をそのまま格納します。<br />
			Maya 以外の DCC ツールから出力した場合は、常に空文字を指定します。
			<br /></td>
						<td class="nowrap_center">設定</td>
					</tr>
				</tbody>
			</table>
		</div>
		<h2>内容</h2>
		<div id="content">
			<p>以下の要素が順番に出現します。[] 内の数値は要素の出現回数です。</p>
			<ul>
				<li>
					<a href="inv_model_matrix.html">&lt;inv_model_matrix&gt;</a> [0～1] : バインドポーズの逆行列要素です。</li>
				<li>
					<a href="user_data_array.html">&lt;user_data_array&gt;</a> [0～1] : <a href="./user_data.html">&lt;user_data&gt;</a> の配列要素です。</li>
				<li>
					<a href="comment.html">&lt;comment&gt;</a> [0～1] : 編集用コメント等のメタ情報を格納する要素です。</li>
				<li>
					<a href="tool_data.html">&lt;tool_data&gt;</a> [0～1] : NintendoWare のツール用データを格納する要素です。</li>
				<li>
					<a href="user_tool_data.html">&lt;user_tool_data&gt;</a> [0～1] : ユーザー独自のツール用データを格納する要素です。</li>
			</ul>
		</div>
		<h2>出力例</h2>
		<p id="sample_info">
			<a href="../../sample/cube.fmda.html">cube.fmda</a>
		</p>
		<div class="code_block">
			<pre class="comment">      ...
 138│        rotate_mode="quaternion"
 139│        motion_mirroring_enable="false"
 140│    /&gt;
 141│    &lt;bone_array length="1"&gt;
</pre>
			<pre class="code"> 142│        &lt;bone index="0" name="root" parent_name=""
 143│            rigid_body="false"
 144│            matrix_index="0 -1"
 145│            scale="1 1 1"
 146│            rotate="0 0 0 1"
 147│            translate="0 0 0"
 148│            scale_compensate="false"
 149│            billboard="none"
 150│            visibility="true"
 151│            compress_enable="true"
 152│            side="none"
 153│            type=""
 154│        &gt;
 155│            &lt;inv_model_matrix&gt;
 156│                 1               0               0               0
 157│                 0               1               0               0
 158│                 0               0               1               0
 159│            &lt;/inv_model_matrix&gt;
 160│            &lt;comment label="" color="1 0.5 0" text="編集用コメント。" /&gt;
 161│        &lt;/bone&gt;
      ...
</pre>
		</div>
	</body>
</html>